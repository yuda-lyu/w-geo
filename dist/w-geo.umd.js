/*!
 * w-geo v1.1.17
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["w-geo"]={})}(this,(function(e){"use strict";var t=Array.isArray,n="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")(),o=i.Symbol,l=Object.prototype,a=l.hasOwnProperty,u=l.toString,s=o?o.toStringTag:void 0;var f=Object.prototype.toString;var c="[object Null]",h="[object Undefined]",p=o?o.toStringTag:void 0;function d(e){return null==e?void 0===e?h:c:p&&p in Object(e)?function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=u.call(e);return r&&(t?e[s]=n:delete e[s]),i}(e):function(e){return f.call(e)}(e)}function g(e){return null!=e&&"object"==typeof e}var v="[object Symbol]";function m(e){return"symbol"==typeof e||g(e)&&d(e)==v}var y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,b=/^\w*$/;function w(e,n){if(t(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!m(e))||(b.test(e)||!y.test(e)||null!=n&&e in Object(n))}function $(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var x="[object AsyncFunction]",M="[object Function]",S="[object GeneratorFunction]",E="[object Proxy]";function k(e){if(!$(e))return!1;var t=d(e);return t==M||t==S||t==x||t==E}var R,P=i["__core-js_shared__"],L=(R=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"";var D=Function.prototype.toString;function C(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var q=/^\[object .+?Constructor\]$/,F=Function.prototype,T=Object.prototype,O=F.toString,j=T.hasOwnProperty,A=RegExp("^"+O.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(e){return!(!$(e)||(t=e,L&&L in t))&&(k(e)?A:q).test(C(e));var t}function N(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return _(n)?n:void 0}var I=N(Object,"create");var z=Object.prototype.hasOwnProperty;var G=Object.prototype.hasOwnProperty;function B(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function U(e,t){return e===t||e!=e&&t!=t}function Q(e,t){for(var n=e.length;n--;)if(U(e[n][0],t))return n;return-1}B.prototype.clear=function(){this.__data__=I?I(null):{},this.size=0},B.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},B.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return z.call(t,e)?t[e]:void 0},B.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:G.call(t,e)},B.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=I&&void 0===t?"__lodash_hash_undefined__":t,this};var H=Array.prototype.splice;function W(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(e){var t=this.__data__,n=Q(t,e);return!(n<0)&&(n==t.length-1?t.pop():H.call(t,n,1),--this.size,!0)},W.prototype.get=function(e){var t=this.__data__,n=Q(t,e);return n<0?void 0:t[n][1]},W.prototype.has=function(e){return Q(this.__data__,e)>-1},W.prototype.set=function(e,t){var n=this.__data__,r=Q(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var V=N(i,"Map");function Y(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Z.prototype.clear=function(){this.size=0,this.__data__={hash:new B,map:new(V||W),string:new B}},Z.prototype.delete=function(e){var t=Y(this,e).delete(e);return this.size-=t?1:0,t},Z.prototype.get=function(e){return Y(this,e).get(e)},Z.prototype.has=function(e){return Y(this,e).has(e)},Z.prototype.set=function(e,t){var n=Y(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var K="Expected a function";function X(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(K);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var l=e.apply(this,r);return n.cache=o.set(i,l)||o,l};return n.cache=new(X.Cache||Z),n}X.Cache=Z;var J,ee,te,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/\\(\\)?/g,ie=(J=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,n,r,i){t.push(r?i.replace(re,"$1"):n||e)})),t},ee=X(J,(function(e){return 500===te.size&&te.clear(),e})),te=ee.cache,ee),oe=ie;function le(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var ae=1/0,ue=o?o.prototype:void 0,se=ue?ue.toString:void 0;function fe(e){if("string"==typeof e)return e;if(t(e))return le(e,fe)+"";if(m(e))return se?se.call(e):"";var n=e+"";return"0"==n&&1/e==-ae?"-0":n}function ce(e){return null==e?"":fe(e)}function he(e,n){return t(e)?e:w(e,n)?[e]:oe(ce(e))}var pe=1/0;function de(e){if("string"==typeof e||m(e))return e;var t=e+"";return"0"==t&&1/e==-pe?"-0":t}function ge(e,t){for(var n=0,r=(t=he(t,e)).length;null!=e&&n<r;)e=e[de(t[n++])];return n&&n==r?e:void 0}function ve(e,t,n){var r=null==e?void 0:ge(e,t);return void 0===r?n:r}var me=Object.prototype;function ye(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||me)}function be(e,t){return function(n){return e(t(n))}}var we=be(Object.keys,Object),$e=Object.prototype.hasOwnProperty;function xe(e){if(!ye(e))return we(e);var t=[];for(var n in Object(e))$e.call(e,n)&&"constructor"!=n&&t.push(n);return t}var Me=N(i,"DataView"),Se=N(i,"Promise"),Ee=N(i,"Set"),ke=N(i,"WeakMap"),Re="[object Map]",Pe="[object Promise]",Le="[object Set]",De="[object WeakMap]",Ce="[object DataView]",qe=C(Me),Fe=C(V),Te=C(Se),Oe=C(Ee),je=C(ke),Ae=d;(Me&&Ae(new Me(new ArrayBuffer(1)))!=Ce||V&&Ae(new V)!=Re||Se&&Ae(Se.resolve())!=Pe||Ee&&Ae(new Ee)!=Le||ke&&Ae(new ke)!=De)&&(Ae=function(e){var t=d(e),n="[object Object]"==t?e.constructor:void 0,r=n?C(n):"";if(r)switch(r){case qe:return Ce;case Fe:return Re;case Te:return Pe;case Oe:return Le;case je:return De}return t});var _e=Ae,Ne=9007199254740991;function Ie(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ne}function ze(e){return null!=e&&Ie(e.length)&&!k(e)}var Ge="[object String]";function Be(e){return function(t){return null==t?void 0:t[e]}}var Ue=Be("length"),Qe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function He(e){return Qe.test(e)}var We="\\ud800-\\udfff",Ve="["+We+"]",Ye="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ze="\\ud83c[\\udffb-\\udfff]",Ke="[^"+We+"]",Xe="(?:\\ud83c[\\udde6-\\uddff]){2}",Je="[\\ud800-\\udbff][\\udc00-\\udfff]",et="(?:"+Ye+"|"+Ze+")"+"?",tt="[\\ufe0e\\ufe0f]?",nt=tt+et+("(?:\\u200d(?:"+[Ke,Xe,Je].join("|")+")"+tt+et+")*"),rt="(?:"+[Ke+Ye+"?",Ye,Xe,Je,Ve].join("|")+")",it=RegExp(Ze+"(?="+Ze+")|"+rt+nt,"g");function ot(e){return He(e)?function(e){for(var t=it.lastIndex=0;it.test(e);)++t;return t}(e):Ue(e)}var lt="[object Map]",at="[object Set]";function ut(e){if(null==e)return 0;if(ze(e))return"string"==typeof(n=e)||!t(n)&&g(n)&&d(n)==Ge?ot(e):e.length;var n,r=_e(e);return r==lt||r==at?e.size:xe(e).length}var st=Array.prototype.join;function ft(e,t){return null==e?"":st.call(e,t)}var ct="[object Number]";function ht(e){return"number"==typeof e||g(e)&&d(e)==ct}function pt(e){return"[object String]"===Object.prototype.toString.call(e)}function dt(e){return!(!pt(e)||""===e)}function gt(e){return e!=e}function vt(e){let t=!1;if(dt(e))t=!isNaN(Number(e));else if(function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)){if(gt(e))return!1;t=!0}return t}var mt=/\s/;var yt=/^\s+/;function bt(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&mt.test(e.charAt(t)););return t}(e)+1).replace(yt,""):e}var wt=NaN,$t=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,Mt=/^0o[0-7]+$/i,St=parseInt;function Et(e){if("number"==typeof e)return e;if(m(e))return wt;if($(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=$(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=bt(e);var n=xt.test(e);return n||Mt.test(e)?St(e.slice(2),n?2:8):$t.test(e)?wt:+e}var kt=1/0,Rt=17976931348623157e292;function Pt(e){return e?(e=Et(e))===kt||e===-kt?(e<0?-1:1)*Rt:e==e?e:0:0===e?e:0}function Lt(e){if(!vt(e))return 0;return Pt(e)}
/*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   */var Dt,Ct,qt=9e15,Ft=1e9,Tt="0123456789abcdef",Ot="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",jt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",At={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-qt,maxE:qt,crypto:!1},_t=!0,Nt="[DecimalError] ",It=Nt+"Invalid argument: ",zt=Nt+"Precision limit exceeded",Gt=Nt+"crypto unavailable",Bt="[object Decimal]",Ut=Math.floor,Qt=Math.pow,Ht=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Wt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Vt=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Yt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zt=1e7,Kt=7,Xt=Ot.length-1,Jt=jt.length-1,en={toStringTag:Bt};function tn(e){var t,n,r,i=e.length-1,o="",l=e[0];if(i>0){for(o+=l,t=1;t<i;t++)r=e[t]+"",(n=Kt-r.length)&&(o+=pn(n)),o+=r;l=e[t],(n=Kt-(r=l+"").length)&&(o+=pn(n))}else if(0===l)return"0";for(;l%10==0;)l/=10;return o+l}function nn(e,t,n){if(e!==~~e||e<t||e>n)throw Error(It+e)}function rn(e,t,n,r){var i,o,l,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=Kt,i=0):(i=Math.ceil((t+1)/Kt),t%=Kt),o=Qt(10,Kt-t),a=e[i]%o|0,null==r?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),l=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):l=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[i+1]/o/100|0)==Qt(10,t-2)-1||(a==o/2||0==a)&&0==(e[i+1]/o/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),l=(r||n<4)&&9999==a||!r&&n>3&&4999==a):l=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(e[i+1]/o/1e3|0)==Qt(10,t-3)-1,l}function on(e,t,n){for(var r,i,o=[0],l=0,a=e.length;l<a;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=Tt.indexOf(e.charAt(l++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}en.absoluteValue=en.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),an(e)},en.ceil=function(){return an(new this.constructor(this),this.e+1,2)},en.clampedTo=en.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(It+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},en.comparedTo=en.cmp=function(e){var t,n,r,i,o=this,l=o.d,a=(e=new o.constructor(e)).d,u=o.s,s=e.s;if(!l||!a)return u&&s?u!==s?u:l===a?0:!l^u<0?1:-1:NaN;if(!l[0]||!a[0])return l[0]?u:a[0]?-s:0;if(u!==s)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(t=0,n=(r=l.length)<(i=a.length)?r:i;t<n;++t)if(l[t]!==a[t])return l[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},en.cosine=en.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Kt,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/Mn(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=xn(e,1,t.times(i),new e(1));for(var o=n;o--;){var l=t.times(t);t=l.times(l).minus(l).times(8).plus(1)}return e.precision-=n,t}(r,Sn(r,n)),r.precision=e,r.rounding=t,an(2==Ct||3==Ct?n.neg():n,e,t,!0)):new r(1):new r(NaN)},en.cubeRoot=en.cbrt=function(){var e,t,n,r,i,o,l,a,u,s,f=this,c=f.constructor;if(!f.isFinite()||f.isZero())return new c(f);for(_t=!1,(o=f.s*Qt(f.s*f,1/3))&&Math.abs(o)!=1/0?r=new c(o.toString()):(n=tn(f.d),(o=((e=f.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=Qt(n,1/3),e=Ut((e+1)/3)-(e%3==(e<0?-1:2)),(r=new c(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=f.s),l=(e=c.precision)+3;;)if(s=(u=(a=r).times(a).times(a)).plus(f),r=ln(s.plus(f).times(a),s.plus(u),l+2,1),tn(a.d).slice(0,l)===(n=tn(r.d)).slice(0,l)){if("9999"!=(n=n.slice(l-3,l+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(an(r,e+1,1),t=!r.times(r).times(r).eq(f));break}if(!i&&(an(a,e+1,0),a.times(a).times(a).eq(f))){r=a;break}l+=4,i=1}return _t=!0,an(r,e,c.rounding,t)},en.decimalPlaces=en.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-Ut(this.e/Kt))*Kt,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},en.dividedBy=en.div=function(e){return ln(this,new this.constructor(e))},en.dividedToIntegerBy=en.divToInt=function(e){var t=this.constructor;return an(ln(this,new t(e),0,1,1),t.precision,t.rounding)},en.equals=en.eq=function(e){return 0===this.cmp(e)},en.floor=function(){return an(new this.constructor(this),this.e+1,3)},en.greaterThan=en.gt=function(e){return this.cmp(e)>0},en.greaterThanOrEqualTo=en.gte=function(e){var t=this.cmp(e);return 1==t||0===t},en.hyperbolicCosine=en.cosh=function(){var e,t,n,r,i,o=this,l=o.constructor,a=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return a;n=l.precision,r=l.rounding,l.precision=n+Math.max(o.e,o.sd())+4,l.rounding=1,(i=o.d.length)<32?t=(1/Mn(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=xn(l,1,o.times(t),new l(1),!0);for(var u,s=e,f=new l(8);s--;)u=o.times(o),o=a.minus(u.times(f.minus(u.times(f))));return an(o,l.precision=n,l.rounding=r,!0)},en.hyperbolicSine=en.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=xn(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=xn(o,2,i=i.times(1/Mn(5,e)),i,!0);for(var l,a=new o(5),u=new o(16),s=new o(20);e--;)l=i.times(i),i=i.times(a.plus(l.times(u.times(l).plus(s))))}return o.precision=t,o.rounding=n,an(i,t,n,!0)},en.hyperbolicTangent=en.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,ln(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},en.inverseCosine=en.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?cn(n,i,o):new n(0):new n(NaN):t.isZero()?cn(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=cn(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))},en.inverseHyperbolicCosine=en.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,_t=!1,n=n.times(n).minus(1).sqrt().plus(n),_t=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},en.inverseHyperbolicSine=en.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,_t=!1,n=n.times(n).plus(1).sqrt().plus(n),_t=!0,r.precision=e,r.rounding=t,n.ln())},en.inverseHyperbolicTangent=en.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?an(new o(i),e,t,!0):(o.precision=n=r-i.e,i=ln(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},en.inverseSine=en.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t?0===t?((e=cn(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},en.inverseTangent=en.atan=function(){var e,t,n,r,i,o,l,a,u,s=this,f=s.constructor,c=f.precision,h=f.rounding;if(s.isFinite()){if(s.isZero())return new f(s);if(s.abs().eq(1)&&c+4<=Jt)return(l=cn(f,c+4,h).times(.25)).s=s.s,l}else{if(!s.s)return new f(NaN);if(c+4<=Jt)return(l=cn(f,c+4,h).times(.5)).s=s.s,l}for(f.precision=a=c+10,f.rounding=1,e=n=Math.min(28,a/Kt+2|0);e;--e)s=s.div(s.times(s).plus(1).sqrt().plus(1));for(_t=!1,t=Math.ceil(a/Kt),r=1,u=s.times(s),l=new f(s),i=s;-1!==e;)if(i=i.times(u),o=l.minus(i.div(r+=2)),i=i.times(u),void 0!==(l=o.plus(i.div(r+=2))).d[t])for(e=t;l.d[e]===o.d[e]&&e--;);return n&&(l=l.times(2<<n-1)),_t=!0,an(l,f.precision=c,f.rounding=h,!0)},en.isFinite=function(){return!!this.d},en.isInteger=en.isInt=function(){return!!this.d&&Ut(this.e/Kt)>this.d.length-2},en.isNaN=function(){return!this.s},en.isNegative=en.isNeg=function(){return this.s<0},en.isPositive=en.isPos=function(){return this.s>0},en.isZero=function(){return!!this.d&&0===this.d[0]},en.lessThan=en.lt=function(e){return this.cmp(e)<0},en.lessThanOrEqualTo=en.lte=function(e){return this.cmp(e)<1},en.logarithm=en.log=function(e){var t,n,r,i,o,l,a,u,s=this,f=s.constructor,c=f.precision,h=f.rounding;if(null==e)e=new f(10),t=!0;else{if(n=(e=new f(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(n=s.d,s.s<0||!n||!n[0]||s.eq(1))return new f(n&&!n[0]?-1/0:1!=s.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(_t=!1,l=yn(s,a=c+5),r=t?fn(f,a+10):yn(e,a),rn((u=ln(l,r,a,1)).d,i=c,h))do{if(l=yn(s,a+=10),r=t?fn(f,a+10):yn(e,a),u=ln(l,r,a,1),!o){+tn(u.d).slice(i+1,i+15)+1==1e14&&(u=an(u,c+1,0));break}}while(rn(u.d,i+=10,h));return _t=!0,an(u,c,h)},en.minus=en.sub=function(e){var t,n,r,i,o,l,a,u,s,f,c,h,p=this,d=p.constructor;if(e=new d(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new d(e.d||p.s!==e.s?p:NaN):e=new d(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(s=p.d,h=e.d,a=d.precision,u=d.rounding,!s[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!s[0])return new d(3===u?-0:0);e=new d(p)}return _t?an(e,a,u):e}if(n=Ut(e.e/Kt),f=Ut(p.e/Kt),s=s.slice(),o=f-n){for((c=o<0)?(t=s,o=-o,l=h.length):(t=h,n=f,l=s.length),o>(r=Math.max(Math.ceil(a/Kt),l)+2)&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for((c=(r=s.length)<(l=h.length))&&(l=r),r=0;r<l;r++)if(s[r]!=h[r]){c=s[r]<h[r];break}o=0}for(c&&(t=s,s=h,h=t,e.s=-e.s),l=s.length,r=h.length-l;r>0;--r)s[l++]=0;for(r=h.length;r>o;){if(s[--r]<h[r]){for(i=r;i&&0===s[--i];)s[i]=Zt-1;--s[i],s[r]+=Zt}s[r]-=h[r]}for(;0===s[--l];)s.pop();for(;0===s[0];s.shift())--n;return s[0]?(e.d=s,e.e=sn(s,n),_t?an(e,a,u):e):new d(3===u?-0:0)},en.modulo=en.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?an(new r(n),r.precision,r.rounding):(_t=!1,9==r.modulo?(t=ln(n,e.abs(),0,3,1)).s*=e.s:t=ln(n,e,0,r.modulo,1),t=t.times(e),_t=!0,n.minus(t))},en.naturalExponential=en.exp=function(){return mn(this)},en.naturalLogarithm=en.ln=function(){return yn(this)},en.negated=en.neg=function(){var e=new this.constructor(this);return e.s=-e.s,an(e)},en.plus=en.add=function(e){var t,n,r,i,o,l,a,u,s,f,c=this,h=c.constructor;if(e=new h(e),!c.d||!e.d)return c.s&&e.s?c.d||(e=new h(e.d||c.s===e.s?c:NaN)):e=new h(NaN),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(s=c.d,f=e.d,a=h.precision,u=h.rounding,!s[0]||!f[0])return f[0]||(e=new h(c)),_t?an(e,a,u):e;if(o=Ut(c.e/Kt),r=Ut(e.e/Kt),s=s.slice(),i=o-r){for(i<0?(n=s,i=-i,l=f.length):(n=f,r=o,l=s.length),i>(l=(o=Math.ceil(a/Kt))>l?o+1:l+1)&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((l=s.length)-(i=f.length)<0&&(i=l,n=f,f=s,s=n),t=0;i;)t=(s[--i]=s[i]+f[i]+t)/Zt|0,s[i]%=Zt;for(t&&(s.unshift(t),++r),l=s.length;0==s[--l];)s.pop();return e.d=s,e.e=sn(s,r),_t?an(e,a,u):e},en.precision=en.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(It+e);return n.d?(t=hn(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},en.round=function(){var e=this,t=e.constructor;return an(new t(e),e.e+1,t.rounding)},en.sine=en.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Kt,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:xn(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Mn(5,n)),t=xn(e,2,t,t);for(var i,o=new e(5),l=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(l.times(i).minus(a))));return t}(r,Sn(r,n)),r.precision=e,r.rounding=t,an(Ct>2?n.neg():n,e,t,!0)):new r(NaN)},en.squareRoot=en.sqrt=function(){var e,t,n,r,i,o,l=this,a=l.d,u=l.e,s=l.s,f=l.constructor;if(1!==s||!a||!a[0])return new f(!s||s<0&&(!a||a[0])?NaN:a?l:1/0);for(_t=!1,0==(s=Math.sqrt(+l))||s==1/0?(((t=tn(a)).length+u)%2==0&&(t+="0"),s=Math.sqrt(t),u=Ut((u+1)/2)-(u<0||u%2),r=new f(t=s==1/0?"5e"+u:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new f(s.toString()),n=(u=f.precision)+3;;)if(r=(o=r).plus(ln(l,o,n+2,1)).times(.5),tn(o.d).slice(0,n)===(t=tn(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(an(r,u+1,1),e=!r.times(r).eq(l));break}if(!i&&(an(o,u+1,0),o.times(o).eq(l))){r=o;break}n+=4,i=1}return _t=!0,an(r,u,f.rounding,e)},en.tangent=en.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=ln(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,an(2==Ct||4==Ct?n.neg():n,e,t,!0)):new r(NaN)},en.times=en.mul=function(e){var t,n,r,i,o,l,a,u,s,f=this,c=f.constructor,h=f.d,p=(e=new c(e)).d;if(e.s*=f.s,!(h&&h[0]&&p&&p[0]))return new c(!e.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*e.s:e.s/0);for(n=Ut(f.e/Kt)+Ut(e.e/Kt),(u=h.length)<(s=p.length)&&(o=h,h=p,p=o,l=u,u=s,s=l),o=[],r=l=u+s;r--;)o.push(0);for(r=s;--r>=0;){for(t=0,i=u+r;i>r;)a=o[i]+p[r]*h[i-r-1]+t,o[i--]=a%Zt|0,t=a/Zt|0;o[i]=(o[i]+t)%Zt|0}for(;!o[--l];)o.pop();return t?++n:o.shift(),e.d=o,e.e=sn(o,n),_t?an(e,c.precision,c.rounding):e},en.toBinary=function(e,t){return En(this,2,e,t)},en.toDecimalPlaces=en.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(nn(e,0,Ft),void 0===t?t=r.rounding:nn(t,0,8),an(n,e+n.e+1,t))},en.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=un(r,!0):(nn(e,0,Ft),void 0===t?t=i.rounding:nn(t,0,8),n=un(r=an(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},en.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?n=un(i):(nn(e,0,Ft),void 0===t?t=o.rounding:nn(t,0,8),n=un(r=an(new o(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},en.toFraction=function(e){var t,n,r,i,o,l,a,u,s,f,c,h,p=this,d=p.d,g=p.constructor;if(!d)return new g(p);if(s=n=new g(1),r=u=new g(0),l=(o=(t=new g(r)).e=hn(d)-p.e-1)%Kt,t.d[0]=Qt(10,l<0?Kt+l:l),null==e)e=o>0?t:s;else{if(!(a=new g(e)).isInt()||a.lt(s))throw Error(It+a);e=a.gt(t)?o>0?t:s:a}for(_t=!1,a=new g(tn(d)),f=g.precision,g.precision=o=d.length*Kt*2;c=ln(a,t,0,1,1),1!=(i=n.plus(c.times(r))).cmp(e);)n=r,r=i,i=s,s=u.plus(c.times(i)),u=i,i=t,t=a.minus(c.times(i)),a=i;return i=ln(e.minus(n),r,0,1,1),u=u.plus(i.times(s)),n=n.plus(i.times(r)),u.s=s.s=p.s,h=ln(s,r,o,1).minus(p).abs().cmp(ln(u,n,o,1).minus(p).abs())<1?[s,r]:[u,n],g.precision=f,_t=!0,h},en.toHexadecimal=en.toHex=function(e,t){return En(this,16,e,t)},en.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:nn(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(_t=!1,n=ln(n,e,0,t,1).times(e),_t=!0,an(n)):(e.s=n.s,n=e),n},en.toNumber=function(){return+this},en.toOctal=function(e,t){return En(this,8,e,t)},en.toPower=en.pow=function(e){var t,n,r,i,o,l,a=this,u=a.constructor,s=+(e=new u(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new u(Qt(+a,s));if((a=new u(a)).eq(1))return a;if(r=u.precision,o=u.rounding,e.eq(1))return an(a,r,o);if((t=Ut(e.e/Kt))>=e.d.length-1&&(n=s<0?-s:s)<=9007199254740991)return i=dn(u,a,n,r),e.s<0?new u(1).div(i):an(i,r,o);if((l=a.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(l=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=l,a}return(t=0!=(n=Qt(+a,s))&&isFinite(n)?new u(n+"").e:Ut(s*(Math.log("0."+tn(a.d))/Math.LN10+a.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?l/0:0):(_t=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),(i=mn(e.times(yn(a,r+n)),r)).d&&rn((i=an(i,r+5,1)).d,r,o)&&(t=r+10,+tn((i=an(mn(e.times(yn(a,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=an(i,r+1,0))),i.s=l,_t=!0,u.rounding=o,an(i,r,o))},en.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=un(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(nn(e,1,Ft),void 0===t?t=i.rounding:nn(t,0,8),n=un(r=an(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},en.toSignificantDigits=en.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(nn(e,1,Ft),void 0===t?t=n.rounding:nn(t,0,8)),an(new n(this),e,t)},en.toString=function(){var e=this,t=e.constructor,n=un(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},en.truncated=en.trunc=function(){return an(new this.constructor(this),this.e+1,1)},en.valueOf=en.toJSON=function(){var e=this,t=e.constructor,n=un(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var ln=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,l,a,u){var s,f,c,h,p,d,g,v,m,y,b,w,$,x,M,S,E,k,R,P,L=r.constructor,D=r.s==i.s?1:-1,C=r.d,q=i.d;if(!(C&&C[0]&&q&&q[0]))return new L(r.s&&i.s&&(C?!q||C[0]!=q[0]:q)?C&&0==C[0]||!q?0*D:D/0:NaN);for(u?(p=1,f=r.e-i.e):(u=Zt,p=Kt,f=Ut(r.e/p)-Ut(i.e/p)),R=q.length,E=C.length,y=(m=new L(D)).d=[],c=0;q[c]==(C[c]||0);c++);if(q[c]>(C[c]||0)&&f--,null==o?(x=o=L.precision,l=L.rounding):x=a?o+(r.e-i.e)+1:o,x<0)y.push(1),d=!0;else{if(x=x/p+2|0,c=0,1==R){for(h=0,q=q[0],x++;(c<E||h)&&x--;c++)M=h*u+(C[c]||0),y[c]=M/q|0,h=M%q|0;d=h||c<E}else{for((h=u/(q[0]+1)|0)>1&&(q=e(q,h,u),C=e(C,h,u),R=q.length,E=C.length),S=R,w=(b=C.slice(0,R)).length;w<R;)b[w++]=0;(P=q.slice()).unshift(0),k=q[0],q[1]>=u/2&&++k;do{h=0,(s=t(q,b,R,w))<0?($=b[0],R!=w&&($=$*u+(b[1]||0)),(h=$/k|0)>1?(h>=u&&(h=u-1),1==(s=t(g=e(q,h,u),b,v=g.length,w=b.length))&&(h--,n(g,R<v?P:q,v,u))):(0==h&&(s=h=1),g=q.slice()),(v=g.length)<w&&g.unshift(0),n(b,g,w,u),-1==s&&(s=t(q,b,R,w=b.length))<1&&(h++,n(b,R<w?P:q,w,u)),w=b.length):0===s&&(h++,b=[0]),y[c++]=h,s&&b[0]?b[w++]=C[S]||0:(b=[C[S]],w=1)}while((S++<E||void 0!==b[0])&&x--);d=void 0!==b[0]}y[0]||y.shift()}if(1==p)m.e=f,Dt=d;else{for(c=1,h=y[0];h>=10;h/=10)c++;m.e=c+f*p-1,an(m,a?o+m.e+1:o,l,d)}return m}}();function an(e,t,n,r){var i,o,l,a,u,s,f,c,h,p=e.constructor;e:if(null!=t){if(!(c=e.d))return e;for(i=1,a=c[0];a>=10;a/=10)i++;if((o=t-i)<0)o+=Kt,l=t,u=(f=c[h=0])/Qt(10,i-l-1)%10|0;else if((h=Math.ceil((o+1)/Kt))>=(a=c.length)){if(!r)break e;for(;a++<=h;)c.push(0);f=u=0,i=1,l=(o%=Kt)-Kt+1}else{for(f=a=c[h],i=1;a>=10;a/=10)i++;u=(l=(o%=Kt)-Kt+i)<0?0:f/Qt(10,i-l-1)%10|0}if(r=r||t<0||void 0!==c[h+1]||(l<0?f:f%Qt(10,i-l-1)),s=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?l>0?f/Qt(10,i-l):0:c[h-1])%10&1||n==(e.s<0?8:7)),t<1||!c[0])return c.length=0,s?(t-=e.e+1,c[0]=Qt(10,(Kt-t%Kt)%Kt),e.e=-t||0):c[0]=e.e=0,e;if(0==o?(c.length=h,a=1,h--):(c.length=h+1,a=Qt(10,Kt-o),c[h]=l>0?(f/Qt(10,i-l)%Qt(10,l)|0)*a:0),s)for(;;){if(0==h){for(o=1,l=c[0];l>=10;l/=10)o++;for(l=c[0]+=a,a=1;l>=10;l/=10)a++;o!=a&&(e.e++,c[0]==Zt&&(c[0]=1));break}if(c[h]+=a,c[h]!=Zt)break;c[h--]=0,a=1}for(o=c.length;0===c[--o];)c.pop()}return _t&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function un(e,t,n){if(!e.isFinite())return bn(e);var r,i=e.e,o=tn(e.d),l=o.length;return t?(n&&(r=n-l)>0?o=o.charAt(0)+"."+o.slice(1)+pn(r):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+pn(-i-1)+o,n&&(r=n-l)>0&&(o+=pn(r))):i>=l?(o+=pn(i+1-l),n&&(r=n-i-1)>0&&(o=o+"."+pn(r))):((r=i+1)<l&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(o+="."),o+=pn(r))),o}function sn(e,t){var n=e[0];for(t*=Kt;n>=10;n/=10)t++;return t}function fn(e,t,n){if(t>Xt)throw _t=!0,n&&(e.precision=n),Error(zt);return an(new e(Ot),t,1,!0)}function cn(e,t,n){if(t>Jt)throw Error(zt);return an(new e(jt),t,n,!0)}function hn(e){var t=e.length-1,n=t*Kt+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function pn(e){for(var t="";e--;)t+="0";return t}function dn(e,t,n,r){var i,o=new e(1),l=Math.ceil(r/Kt+4);for(_t=!1;;){if(n%2&&kn((o=o.times(t)).d,l)&&(i=!0),0===(n=Ut(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}kn((t=t.times(t)).d,l)}return _t=!0,o}function gn(e){return 1&e.d[e.d.length-1]}function vn(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(!(r=new e(t[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function mn(e,t){var n,r,i,o,l,a,u,s=0,f=0,c=0,h=e.constructor,p=h.rounding,d=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(_t=!1,u=d):u=t,a=new h(.03125);e.e>-2;)e=e.times(a),c+=5;for(u+=r=Math.log(Qt(2,c))/Math.LN10*2+5|0,n=o=l=new h(1),h.precision=u;;){if(o=an(o.times(e),u,1),n=n.times(++f),tn((a=l.plus(ln(o,n,u,1))).d).slice(0,u)===tn(l.d).slice(0,u)){for(i=c;i--;)l=an(l.times(l),u,1);if(null!=t)return h.precision=d,l;if(!(s<3&&rn(l.d,u-r,p,s)))return an(l,h.precision=d,p,_t=!0);h.precision=u+=10,n=o=a=new h(1),f=0,s++}l=a}}function yn(e,t){var n,r,i,o,l,a,u,s,f,c,h,p=1,d=e,g=d.d,v=d.constructor,m=v.rounding,y=v.precision;if(d.s<0||!g||!g[0]||!d.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=d.s?NaN:g?0:d);if(null==t?(_t=!1,f=y):f=t,v.precision=f+=10,r=(n=tn(g)).charAt(0),!(Math.abs(o=d.e)<15e14))return s=fn(v,f+2,y).times(o+""),d=yn(new v(r+"."+n.slice(1)),f-10).plus(s),v.precision=y,null==t?an(d,y,m,_t=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=tn((d=d.times(e)).d)).charAt(0),p++;for(o=d.e,r>1?(d=new v("0."+n),o++):d=new v(r+"."+n.slice(1)),c=d,u=l=d=ln(d.minus(1),d.plus(1),f,1),h=an(d.times(d),f,1),i=3;;){if(l=an(l.times(h),f,1),tn((s=u.plus(ln(l,new v(i),f,1))).d).slice(0,f)===tn(u.d).slice(0,f)){if(u=u.times(2),0!==o&&(u=u.plus(fn(v,f+2,y).times(o+""))),u=ln(u,new v(p),f,1),null!=t)return v.precision=y,u;if(!rn(u.d,f-10,m,a))return an(u,v.precision=y,m,_t=!0);v.precision=f+=10,s=l=d=ln(c.minus(1),c.plus(1),f,1),h=an(d.times(d),f,1),i=a=1}u=s,i+=2}}function bn(e){return String(e.s*e.s/0)}function wn(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Kt,n<0&&(r+=Kt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Kt;r<i;)e.d.push(+t.slice(r,r+=Kt));t=t.slice(r),r=Kt-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),_t&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function $n(e,t){var n,r,i,o,l,a,u,s,f;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Yt.test(t))return wn(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Wt.test(t))n=16,t=t.toLowerCase();else if(Ht.test(t))n=2;else{if(!Vt.test(t))throw Error(It+t);n=8}for((o=t.search(/p/i))>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),l=(o=t.indexOf("."))>=0,r=e.constructor,l&&(o=(a=(t=t.replace(".","")).length)-o,i=dn(r,new r(n),o,2*o)),o=f=(s=on(t,n,Zt)).length-1;0===s[o];--o)s.pop();return o<0?new r(0*e.s):(e.e=sn(s,f),e.d=s,_t=!1,l&&(e=ln(e,i,4*a)),u&&(e=e.times(Math.abs(u)<54?Qt(2,u):pr.pow(2,u))),_t=!0,e)}function xn(e,t,n,r,i){var o,l,a,u,s=e.precision,f=Math.ceil(s/Kt);for(_t=!1,u=n.times(n),a=new e(r);;){if(l=ln(a.times(u),new e(t++*t++),s,1),a=i?r.plus(l):r.minus(l),r=ln(l.times(u),new e(t++*t++),s,1),void 0!==(l=a.plus(r)).d[f]){for(o=f;l.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=r,r=l,l=o}return _t=!0,l.d.length=f+1,l}function Mn(e,t){for(var n=e;--t;)n*=e;return n}function Sn(e,t){var n,r=t.s<0,i=cn(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return Ct=r?4:1,t;if((n=t.divToInt(i)).isZero())Ct=r?3:2;else{if((t=t.minus(n.times(i))).lte(o))return Ct=gn(n)?r?2:3:r?4:1,t;Ct=gn(n)?r?1:4:r?3:2}return t.minus(i).abs()}function En(e,t,n,r){var i,o,l,a,u,s,f,c,h,p=e.constructor,d=void 0!==n;if(d?(nn(n,1,Ft),void 0===r?r=p.rounding:nn(r,0,8)):(n=p.precision,r=p.rounding),e.isFinite()){for(d?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(l=(f=un(e)).indexOf("."))>=0&&(f=f.replace(".",""),(h=new p(1)).e=f.length-l,h.d=on(un(h),10,i),h.e=h.d.length),o=u=(c=on(f,10,i)).length;0==c[--u];)c.pop();if(c[0]){if(l<0?o--:((e=new p(e)).d=c,e.e=o,c=(e=ln(e,h,n,r,0,i)).d,o=e.e,s=Dt),l=c[n],a=i/2,s=s||void 0!==c[n+1],s=r<4?(void 0!==l||s)&&(0===r||r===(e.s<0?3:2)):l>a||l===a&&(4===r||s||6===r&&1&c[n-1]||r===(e.s<0?8:7)),c.length=n,s)for(;++c[--n]>i-1;)c[n]=0,n||(++o,c.unshift(1));for(u=c.length;!c[u-1];--u);for(l=0,f="";l<u;l++)f+=Tt.charAt(c[l]);if(d){if(u>1)if(16==t||8==t){for(l=16==t?4:3,--u;u%l;u++)f+="0";for(u=(c=on(f,i,t)).length;!c[u-1];--u);for(l=1,f="1.";l<u;l++)f+=Tt.charAt(c[l])}else f=f.charAt(0)+"."+f.slice(1);f=f+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)f="0"+f;f="0."+f}else if(++o>u)for(o-=u;o--;)f+="0";else o<u&&(f=f.slice(0,o)+"."+f.slice(o))}else f=d?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=bn(e);return e.s<0?"-"+f:f}function kn(e,t){if(e.length>t)return e.length=t,!0}function Rn(e){return new this(e).abs()}function Pn(e){return new this(e).acos()}function Ln(e){return new this(e).acosh()}function Dn(e,t){return new this(e).plus(t)}function Cn(e){return new this(e).asin()}function qn(e){return new this(e).asinh()}function Fn(e){return new this(e).atan()}function Tn(e){return new this(e).atanh()}function On(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?cn(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=cn(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(ln(e,t,o,1)),t=cn(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(ln(e,t,o,1)):(n=cn(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function jn(e){return new this(e).cbrt()}function An(e){return an(e=new this(e),e.e+1,2)}function _n(e,t,n){return new this(e).clamp(t,n)}function Nn(e){if(!e||"object"!=typeof e)throw Error(Nt+"Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,Ft,"rounding",0,8,"toExpNeg",-qt,0,"toExpPos",0,qt,"maxE",0,qt,"minE",-qt,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=At[n]),void 0!==(r=e[n])){if(!(Ut(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(It+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=At[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(It+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Gt);this[n]=!0}else this[n]=!1}return this}function In(e){return new this(e).cos()}function zn(e){return new this(e).cosh()}function Gn(e,t){return new this(e).div(t)}function Bn(e){return new this(e).exp()}function Un(e){return an(e=new this(e),e.e+1,3)}function Qn(){var e,t,n=new this(0);for(_t=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return _t=!0,new this(1/0);n=t}return _t=!0,n.sqrt()}function Hn(e){return e instanceof pr||e&&e.toStringTag===Bt||!1}function Wn(e){return new this(e).ln()}function Vn(e,t){return new this(e).log(t)}function Yn(e){return new this(e).log(2)}function Zn(e){return new this(e).log(10)}function Kn(){return vn(this,arguments,"lt")}function Xn(){return vn(this,arguments,"gt")}function Jn(e,t){return new this(e).mod(t)}function er(e,t){return new this(e).mul(t)}function tr(e,t){return new this(e).pow(t)}function nr(e){var t,n,r,i,o=0,l=new this(1),a=[];if(void 0===e?e=this.precision:nn(e,1,Ft),r=Math.ceil(e/Kt),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(Gt);for(t=crypto.randomBytes(r*=4);o<r;)(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=r/4}else for(;o<r;)a[o++]=1e7*Math.random()|0;for(r=a[--o],e%=Kt,r&&e&&(i=Qt(10,Kt-e),a[o]=(r/i|0)*i);0===a[o];o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=Kt)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Kt&&(n-=Kt-r)}return l.e=n,l.d=a,l}function rr(e){return an(e=new this(e),e.e+1,this.rounding)}function ir(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function or(e){return new this(e).sin()}function lr(e){return new this(e).sinh()}function ar(e){return new this(e).sqrt()}function ur(e,t){return new this(e).sub(t)}function sr(){var e=0,t=arguments,n=new this(t[e]);for(_t=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return _t=!0,an(n,this.precision,this.rounding)}function fr(e){return new this(e).tan()}function cr(e){return new this(e).tanh()}function hr(e){return an(e=new this(e),e.e+1,1)}en[Symbol.for("nodejs.util.inspect.custom")]=en.toString,en[Symbol.toStringTag]="Decimal";var pr=en.constructor=function e(t){var n,r,i;function o(e){var t,n,r,i=this;if(!(i instanceof o))return new o(e);if(i.constructor=o,Hn(e))return i.s=e.s,void(_t?!e.d||e.e>o.maxE?(i.e=NaN,i.d=null):e.e<o.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(_t?t>o.maxE?(i.e=NaN,i.d=null):t<o.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):wn(i,e.toString())}if("string"!==r)throw Error(It+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),Yt.test(e)?wn(i,e):$n(i,e)}if(o.prototype=en,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=Nn,o.clone=e,o.isDecimal=Hn,o.abs=Rn,o.acos=Pn,o.acosh=Ln,o.add=Dn,o.asin=Cn,o.asinh=qn,o.atan=Fn,o.atanh=Tn,o.atan2=On,o.cbrt=jn,o.ceil=An,o.clamp=_n,o.cos=In,o.cosh=zn,o.div=Gn,o.exp=Bn,o.floor=Un,o.hypot=Qn,o.ln=Wn,o.log=Vn,o.log10=Zn,o.log2=Yn,o.max=Kn,o.min=Xn,o.mod=Jn,o.mul=er,o.pow=tr,o.random=nr,o.round=rr,o.sign=ir,o.sin=or,o.sinh=lr,o.sqrt=ar,o.sub=ur,o.sum=sr,o.tan=fr,o.tanh=cr,o.trunc=hr,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(At);function dr(e,t){return new pr(e).eq(t)}function gr(e,t,n){if("==="===t)return dr(e,n);if("!=="===t)return function(e,t){return!dr(e,t)}(e,n);if(">="===t)return function(e,t){return new pr(e).gte(t)}(e,n);if(">"===t)return function(e,t){return new pr(e).gt(t)}(e,n);if("<="===t)return function(e,t){return new pr(e).lte(t)}(e,n);if("<"===t)return function(e,t){return new pr(e).lt(t)}(e,n);throw console.log(t),new Error("invalid op")}Ot=new pr(Ot),jt=new pr(jt);let vr="-",mr="NP",yr=`is not a number or '${vr}' or '${mr}'`,br=yr;function wr(e){let t=null;if(vt(e))t=Lt(e);else{if(e!==vr&&e!==mr)throw new Error(`LL[${e}] ${yr}`);t=40}return t}function $r(e){let t=null;if(vt(e))t=Lt(e);else{if(e!==vr&&e!==mr)throw new Error(`PI[${e}] ${yr}`);t=0}return t}function xr(e,t){let n=!0;try{ht(e=t(e))?(e<0||e>100)&&(n=!1):n=!1}catch(e){n=!1}return n}let Mr=e=>xr(e,wr),Sr=e=>xr(e,$r);function Er(e,t){return e>=4&&t>=1&&t<=3}function kr(e,t){return e>=6&&t>=1&&t<=3}function Rr(e,t){let n=null,r=null;n=$r(e),r=wr(t);let i=.73*(r-20);return n>7&&n>=i?"C":n<4||n<i?"M":"C-M"}function Pr(e){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(e)}function Lr(e){var t=function(e,t){if("object"!==Pr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pr(t)?t:String(t)}function Dr(e,t,n){return(t=Lr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cr(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var qr,Fr=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),l=o.length;l--;){var a=o[qr?l:++r];if(!1===t(i[a],a,i))break}return e},Tr=Fr;function Or(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function jr(e){return g(e)&&"[object Arguments]"==d(e)}var Ar=Object.prototype,_r=Ar.hasOwnProperty,Nr=Ar.propertyIsEnumerable,Ir=jr(function(){return arguments}())?jr:function(e){return g(e)&&_r.call(e,"callee")&&!Nr.call(e,"callee")},zr=Ir;var Gr="object"==typeof e&&e&&!e.nodeType&&e,Br=Gr&&"object"==typeof module&&module&&!module.nodeType&&module,Ur=Br&&Br.exports===Gr?i.Buffer:void 0,Qr=(Ur?Ur.isBuffer:void 0)||function(){return!1},Hr=9007199254740991,Wr=/^(?:0|[1-9]\d*)$/;function Vr(e,t){var n=typeof e;return!!(t=null==t?Hr:t)&&("number"==n||"symbol"!=n&&Wr.test(e))&&e>-1&&e%1==0&&e<t}var Yr={};function Zr(e){return function(t){return e(t)}}Yr["[object Float32Array]"]=Yr["[object Float64Array]"]=Yr["[object Int8Array]"]=Yr["[object Int16Array]"]=Yr["[object Int32Array]"]=Yr["[object Uint8Array]"]=Yr["[object Uint8ClampedArray]"]=Yr["[object Uint16Array]"]=Yr["[object Uint32Array]"]=!0,Yr["[object Arguments]"]=Yr["[object Array]"]=Yr["[object ArrayBuffer]"]=Yr["[object Boolean]"]=Yr["[object DataView]"]=Yr["[object Date]"]=Yr["[object Error]"]=Yr["[object Function]"]=Yr["[object Map]"]=Yr["[object Number]"]=Yr["[object Object]"]=Yr["[object RegExp]"]=Yr["[object Set]"]=Yr["[object String]"]=Yr["[object WeakMap]"]=!1;var Kr="object"==typeof e&&e&&!e.nodeType&&e,Xr=Kr&&"object"==typeof module&&module&&!module.nodeType&&module,Jr=Xr&&Xr.exports===Kr&&n.process,ei=function(){try{var e=Xr&&Xr.require&&Xr.require("util").types;return e||Jr&&Jr.binding&&Jr.binding("util")}catch(e){}}(),ti=ei&&ei.isTypedArray,ni=ti?Zr(ti):function(e){return g(e)&&Ie(e.length)&&!!Yr[d(e)]},ri=Object.prototype.hasOwnProperty;function ii(e,n){var r=t(e),i=!r&&zr(e),o=!r&&!i&&Qr(e),l=!r&&!i&&!o&&ni(e),a=r||i||o||l,u=a?Or(e.length,String):[],s=u.length;for(var f in e)!n&&!ri.call(e,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||l&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Vr(f,s))||u.push(f);return u}function oi(e){return ze(e)?ii(e):xe(e)}var li=function(e,t){return function(n,r){if(null==n)return n;if(!ze(n))return e(n,r);for(var i=n.length,o=t?i:-1,l=Object(n);(t?o--:++o<i)&&!1!==r(l[o],o,l););return n}}((function(e,t){return e&&Tr(e,t,oi)})),ai=li;function ui(e){return e}function si(e){return"function"==typeof e?e:ui}function fi(e,n){return(t(e)?Cr:ai)(e,si(n))}function ci(e){var t=this.__data__=new W(e);this.size=t.size}ci.prototype.clear=function(){this.__data__=new W,this.size=0},ci.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ci.prototype.get=function(e){return this.__data__.get(e)},ci.prototype.has=function(e){return this.__data__.has(e)},ci.prototype.set=function(e,t){var n=this.__data__;if(n instanceof W){var r=n.__data__;if(!V||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Z(r)}return n.set(e,t),this.size=n.size,this};function hi(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Z;++t<n;)this.add(e[t])}function pi(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function di(e,t){return e.has(t)}hi.prototype.add=hi.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},hi.prototype.has=function(e){return this.__data__.has(e)};var gi=1,vi=2;function mi(e,t,n,r,i,o){var l=n&gi,a=e.length,u=t.length;if(a!=u&&!(l&&u>a))return!1;var s=o.get(e),f=o.get(t);if(s&&f)return s==t&&f==e;var c=-1,h=!0,p=n&vi?new hi:void 0;for(o.set(e,t),o.set(t,e);++c<a;){var d=e[c],g=t[c];if(r)var v=l?r(g,d,c,t,e,o):r(d,g,c,e,t,o);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!pi(t,(function(e,t){if(!di(p,t)&&(d===e||i(d,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(d!==g&&!i(d,g,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}var yi=i.Uint8Array;function bi(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function wi(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var $i=1,xi=2,Mi="[object Boolean]",Si="[object Date]",Ei="[object Error]",ki="[object Map]",Ri="[object Number]",Pi="[object RegExp]",Li="[object Set]",Di="[object String]",Ci="[object Symbol]",qi="[object ArrayBuffer]",Fi="[object DataView]",Ti=o?o.prototype:void 0,Oi=Ti?Ti.valueOf:void 0;function ji(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ai(e,n,r){var i=n(e);return t(e)?i:ji(i,r(e))}function _i(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var l=e[n];t(l,n,e)&&(o[i++]=l)}return o}function Ni(){return[]}var Ii=Object.prototype.propertyIsEnumerable,zi=Object.getOwnPropertySymbols,Gi=zi?function(e){return null==e?[]:(e=Object(e),_i(zi(e),(function(t){return Ii.call(e,t)})))}:Ni;function Bi(e){return Ai(e,oi,Gi)}var Ui=1,Qi=Object.prototype.hasOwnProperty;var Hi=1,Wi="[object Arguments]",Vi="[object Array]",Yi="[object Object]",Zi=Object.prototype.hasOwnProperty;function Ki(e,n,r,i,o,l){var a=t(e),u=t(n),s=a?Vi:_e(e),f=u?Vi:_e(n),c=(s=s==Wi?Yi:s)==Yi,h=(f=f==Wi?Yi:f)==Yi,p=s==f;if(p&&Qr(e)){if(!Qr(n))return!1;a=!0,c=!1}if(p&&!c)return l||(l=new ci),a||ni(e)?mi(e,n,r,i,o,l):function(e,t,n,r,i,o,l){switch(n){case Fi:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qi:return!(e.byteLength!=t.byteLength||!o(new yi(e),new yi(t)));case Mi:case Si:case Ri:return U(+e,+t);case Ei:return e.name==t.name&&e.message==t.message;case Pi:case Di:return e==t+"";case ki:var a=bi;case Li:var u=r&$i;if(a||(a=wi),e.size!=t.size&&!u)return!1;var s=l.get(e);if(s)return s==t;r|=xi,l.set(e,t);var f=mi(a(e),a(t),r,i,o,l);return l.delete(e),f;case Ci:if(Oi)return Oi.call(e)==Oi.call(t)}return!1}(e,n,s,r,i,o,l);if(!(r&Hi)){var d=c&&Zi.call(e,"__wrapped__"),g=h&&Zi.call(n,"__wrapped__");if(d||g){var v=d?e.value():e,m=g?n.value():n;return l||(l=new ci),o(v,m,r,i,l)}}return!!p&&(l||(l=new ci),function(e,t,n,r,i,o){var l=n&Ui,a=Bi(e),u=a.length;if(u!=Bi(t).length&&!l)return!1;for(var s=u;s--;){var f=a[s];if(!(l?f in t:Qi.call(t,f)))return!1}var c=o.get(e),h=o.get(t);if(c&&h)return c==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var d=l;++s<u;){var g=e[f=a[s]],v=t[f];if(r)var m=l?r(v,g,f,t,e,o):r(g,v,f,e,t,o);if(!(void 0===m?g===v||i(g,v,n,r,o):m)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,n,r,i,o,l))}function Xi(e,t,n,r,i){return e===t||(null==e||null==t||!g(e)&&!g(t)?e!=e&&t!=t:Ki(e,t,n,r,Xi,i))}var Ji=1,eo=2;function to(e){return e==e&&!$(e)}function no(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function ro(e){var t=function(e){for(var t=oi(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,to(i)]}return t}(e);return 1==t.length&&t[0][2]?no(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,l=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(l&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var u=(a=n[i])[0],s=e[u],f=a[1];if(l&&a[2]){if(void 0===s&&!(u in e))return!1}else{var c=new ci;if(r)var h=r(s,f,u,e,t,c);if(!(void 0===h?Xi(f,s,Ji|eo,r,c):h))return!1}}return!0}(n,e,t)}}function io(e,t){return null!=e&&t in Object(e)}function oo(e,n){return null!=e&&function(e,n,r){for(var i=-1,o=(n=he(n,e)).length,l=!1;++i<o;){var a=de(n[i]);if(!(l=null!=e&&r(e,a)))break;e=e[a]}return l||++i!=o?l:!!(o=null==e?0:e.length)&&Ie(o)&&Vr(a,o)&&(t(e)||zr(e))}(e,n,io)}var lo=1,ao=2;function uo(e){return w(e)?Be(de(e)):function(e){return function(t){return ge(t,e)}}(e)}function so(e){return"function"==typeof e?e:null==e?ui:"object"==typeof e?t(e)?(n=e[0],r=e[1],w(n)&&to(r)?no(de(n),r):function(e){var t=ve(e,n);return void 0===t&&t===r?oo(e,n):Xi(r,t,lo|ao)}):ro(e):uo(e);var n,r}function fo(e,t){var n=-1,r=ze(e)?Array(e.length):[];return ai(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function co(e,n){return(t(e)?le:fo)(e,so(n))}var ho=function(){try{var e=N(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),po=ho;function go(e,t,n){"__proto__"==t&&po?po(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var vo=Object.prototype.hasOwnProperty;function mo(e,t,n){var r=e[t];vo.call(e,t)&&U(r,n)&&(void 0!==n||t in e)||go(e,t,n)}function yo(e,t,n,r){var i=!n;n||(n={});for(var o=-1,l=t.length;++o<l;){var a=t[o],u=r?r(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),i?go(n,a,u):mo(n,a,u)}return n}var bo=Object.prototype.hasOwnProperty;function wo(e){if(!$(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ye(e),n=[];for(var r in e)("constructor"!=r||!t&&bo.call(e,r))&&n.push(r);return n}function $o(e){return ze(e)?ii(e,!0):wo(e)}var xo="object"==typeof e&&e&&!e.nodeType&&e,Mo=xo&&"object"==typeof module&&module&&!module.nodeType&&module,So=Mo&&Mo.exports===xo?i.Buffer:void 0,Eo=So?So.allocUnsafe:void 0;function ko(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Ro=be(Object.getPrototypeOf,Object),Po=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ji(t,Gi(e)),e=Ro(e);return t}:Ni,Lo=Po;function Do(e){return Ai(e,$o,Lo)}var Co=Object.prototype.hasOwnProperty;function qo(e){var t=new e.constructor(e.byteLength);return new yi(t).set(new yi(e)),t}var Fo=/\w*$/;var To=o?o.prototype:void 0,Oo=To?To.valueOf:void 0;var jo="[object Boolean]",Ao="[object Date]",_o="[object Map]",No="[object Number]",Io="[object RegExp]",zo="[object Set]",Go="[object String]",Bo="[object Symbol]",Uo="[object ArrayBuffer]",Qo="[object DataView]",Ho="[object Float32Array]",Wo="[object Float64Array]",Vo="[object Int8Array]",Yo="[object Int16Array]",Zo="[object Int32Array]",Ko="[object Uint8Array]",Xo="[object Uint8ClampedArray]",Jo="[object Uint16Array]",el="[object Uint32Array]";function tl(e,t,n){var r,i=e.constructor;switch(t){case Uo:return qo(e);case jo:case Ao:return new i(+e);case Qo:return function(e,t){var n=t?qo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Ho:case Wo:case Vo:case Yo:case Zo:case Ko:case Xo:case Jo:case el:return function(e,t){var n=t?qo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case _o:return new i;case No:case Go:return new i(e);case Io:return function(e){var t=new e.constructor(e.source,Fo.exec(e));return t.lastIndex=e.lastIndex,t}(e);case zo:return new i;case Bo:return r=e,Oo?Object(Oo.call(r)):{}}}var nl=Object.create,rl=function(){function e(){}return function(t){if(!$(t))return{};if(nl)return nl(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),il=rl;var ol=ei&&ei.isMap,ll=ol?Zr(ol):function(e){return g(e)&&"[object Map]"==_e(e)};var al=ei&&ei.isSet,ul=al?Zr(al):function(e){return g(e)&&"[object Set]"==_e(e)},sl=1,fl=2,cl=4,hl="[object Arguments]",pl="[object Function]",dl="[object GeneratorFunction]",gl="[object Object]",vl={};function ml(e,n,r,i,o,l){var a,u=n&sl,s=n&fl,f=n&cl;if(r&&(a=o?r(e,i,o,l):r(e)),void 0!==a)return a;if(!$(e))return e;var c=t(e);if(c){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Co.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return ko(e,a)}else{var h=_e(e),p=h==pl||h==dl;if(Qr(e))return function(e,t){if(t)return e.slice();var n=e.length,r=Eo?Eo(n):new e.constructor(n);return e.copy(r),r}(e,u);if(h==gl||h==hl||p&&!o){if(a=s||p?{}:function(e){return"function"!=typeof e.constructor||ye(e)?{}:il(Ro(e))}(e),!u)return s?function(e,t){return yo(e,Lo(e),t)}(e,function(e,t){return e&&yo(t,$o(t),e)}(a,e)):function(e,t){return yo(e,Gi(e),t)}(e,function(e,t){return e&&yo(t,oi(t),e)}(a,e))}else{if(!vl[h])return o?e:{};a=tl(e,h,u)}}l||(l=new ci);var d=l.get(e);if(d)return d;l.set(e,a),ul(e)?e.forEach((function(t){a.add(ml(t,n,r,t,e,l))})):ll(e)&&e.forEach((function(t,i){a.set(i,ml(t,n,r,i,e,l))}));var g=c?void 0:(f?s?Do:Bi:s?$o:oi)(e);return Cr(g||e,(function(t,i){g&&(t=e[i=t]),mo(a,i,ml(t,n,r,i,e,l))})),a}vl[hl]=vl["[object Array]"]=vl["[object ArrayBuffer]"]=vl["[object DataView]"]=vl["[object Boolean]"]=vl["[object Date]"]=vl["[object Float32Array]"]=vl["[object Float64Array]"]=vl["[object Int8Array]"]=vl["[object Int16Array]"]=vl["[object Int32Array]"]=vl["[object Map]"]=vl["[object Number]"]=vl[gl]=vl["[object RegExp]"]=vl["[object Set]"]=vl["[object String]"]=vl["[object Symbol]"]=vl["[object Uint8Array]"]=vl["[object Uint8ClampedArray]"]=vl["[object Uint16Array]"]=vl["[object Uint32Array]"]=!0,vl["[object Error]"]=vl[pl]=vl["[object WeakMap]"]=!1;var yl=1,bl=4;function wl(e){return ml(e,yl|bl)}function $l(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function xl(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:$l(e,t,n)}function Ml(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Sl(e){return e!=e}function El(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ml(e,Sl,n)}var kl="\\ud800-\\udfff",Rl="["+kl+"]",Pl="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ll="\\ud83c[\\udffb-\\udfff]",Dl="[^"+kl+"]",Cl="(?:\\ud83c[\\udde6-\\uddff]){2}",ql="[\\ud800-\\udbff][\\udc00-\\udfff]",Fl="(?:"+Pl+"|"+Ll+")"+"?",Tl="[\\ufe0e\\ufe0f]?",Ol=Tl+Fl+("(?:\\u200d(?:"+[Dl,Cl,ql].join("|")+")"+Tl+Fl+")*"),jl="(?:"+[Dl+Pl+"?",Pl,Cl,ql,Rl].join("|")+")",Al=RegExp(Ll+"(?="+Ll+")|"+jl+Ol,"g");function _l(e){return He(e)?function(e){return e.match(Al)||[]}(e):function(e){return e.split("")}(e)}function Nl(e,t,n){if((e=ce(e))&&(n||void 0===t))return bt(e);if(!e||!(t=fe(t)))return e;var r=_l(e),i=_l(t),o=function(e,t){for(var n=-1,r=e.length;++n<r&&El(t,e[n],0)>-1;);return n}(r,i),l=function(e,t){for(var n=e.length;n--&&El(t,e[n],0)>-1;);return n}(r,i)+1;return xl(r,o,l).join("")}function Il(e){let t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function zl(e){return"[object Object]"===Object.prototype.toString.call(e)}function Gl(e){if(zl(e)){for(let t in e)return!0;return!1}return!1}var Bl="[object Boolean]";function Ul(e){return!0===(t=e)||!1===t||g(t)&&d(t)==Bl;var t}function Ql(e){var t=Pt(e),n=t%1;return t==t?n?t-n:t:0}function Hl(e){return!!vt(e)&&(e=Lt(e),"number"==typeof(t=e)&&t==Ql(t));var t}var Wl=i.isFinite,Vl=Math.min;var Yl=function(e){var t=Math[e];return function(e,n){if(e=Et(e),(n=null==n?0:Vl(Ql(n),292))&&Wl(e)){var r=(ce(e)+"e").split("e");return+((r=(ce(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}("round"),Zl=Yl;function Kl(e){if(!vt(e))return 0;e=Lt(e);let t=Zl(e);return"0"===String(t)?0:t}var Xl=o?o.isConcatSpreadable:void 0;function Jl(e){return t(e)||zr(e)||!!(Xl&&e&&e[Xl])}function ea(e,t,n,r,i){var o=-1,l=e.length;for(n||(n=Jl),i||(i=[]);++o<l;){var a=e[o];t>0&&n(a)?t>1?ea(a,t-1,n,r,i):ji(i,a):r||(i[i.length]=a)}return i}function ta(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=m(e),l=void 0!==t,a=null===t,u=t==t,s=m(t);if(!a&&!s&&!o&&e>t||o&&l&&u&&!a&&!s||r&&l&&u||!n&&u||!i)return 1;if(!r&&!o&&!s&&e<t||s&&n&&i&&!r&&!o||a&&n&&i||!l&&i||!u)return-1}return 0}function na(e,n,r){n=n.length?le(n,(function(e){return t(e)?function(t){return ge(t,1===e.length?e[0]:e)}:e})):[ui];var i=-1;return n=le(n,Zr(so)),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(fo(e,(function(e,t,r){return{criteria:le(n,(function(t){return t(e)})),index:++i,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,l=i.length,a=n.length;++r<l;){var u=ta(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,r)}))}var ra=Math.max;function ia(e,t,n){return t=ra(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=ra(r.length-t,0),l=Array(o);++i<o;)l[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(l),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}var oa=po?function(e,t){return po(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:ui,la=oa,aa=Date.now;var ua=function(e){var t=0,n=0;return function(){var r=aa(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(la),sa=ua;function fa(e,t){return sa(ia(e,t,ui),e+"")}function ca(e,t,n){if(!$(n))return!1;var r=typeof t;return!!("number"==r?ze(n)&&Vr(t,n.length):"string"==r&&t in n)&&U(n[t],e)}var ha=fa((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ca(e,t[0],t[1])?t=[]:n>2&&ca(t[0],t[1],t[2])&&(t=[t[0]]),na(e,ea(t,1),[])}));function pa(e,t){let n=null;if(dt(t)){let r=ve(e,t);vt(r)&&(n=Lt(r))}else Il(t)&&(n=t(e));return n}function da(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];fi(e,(function(e){let i=pa(e,"depth"),o=pa(e,t);return null===i||(!n&&null===o||void r.push([i,o]))}));let i=0;return fi(r,(e=>{ht(e[1])||(i+=1)})),i===ut(r)&&(r=[]),r}var ga={pickData:pa,extractLtdtDepthAndData:da,extractLtdtDataXY:function(e,t,n){let r=[];return fi(e,(function(e){let i=pa(e,t),o=pa(e,n);if(null===i||null===o)return!0;r.push([i,o])})),r=ha(r,0),r}};let va={eps:1e-6,g:9.81,rw:9.81,Pa:.10139616,assesment_rd:18.03986577,assesment_rsat:21.26597315};function ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kPa";if("kPa"!==t&&"MPa"!==t)throw new Error(`unit[${t}] need kPa or MPa`);if(!vt(e))return null;let n=(e=Lt(e))*va.rw;return"MPa"===t&&(n/=1e3),n}function ya(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kPa";if("kPa"!==t&&"MPa"!==t)throw new Error(`unit[${t}] need kPa or MPa`);if(!vt(e))return null;let n=(e=Lt(e))*va.assesment_rsat,r=ma(e,"kPa"),i=n-r;i=Math.max(i,0);let o=e*va.assesment_rd;return"MPa"===t&&(n/=1e3,r/=1e3,o/=1e3),{sv:n,svp:i,svdry:o}}var ba={intrpDefPp:ma,intrpDefSvSvp:ya},wa=Math.ceil,$a=Math.max;var xa=function(e){return function(t,n,r){return r&&"number"!=typeof r&&ca(t,n,r)&&(n=r=void 0),t=Pt(t),void 0===n?(n=t,t=0):n=Pt(n),function(e,t,n,r){for(var i=-1,o=$a(wa((t-e)/(n||1)),0),l=Array(o);o--;)l[r?o:++i]=e,e+=n;return l}(t,n,r=void 0===r?t<n?1:-1:Pt(r),e)}}(),Ma=xa;function Sa(e,t){for(var n=-1,r=t.length,i=Array(r),o=null==e;++n<r;)i[n]=o?void 0:ve(e,t[n]);return i}function Ea(e){return(null==e?0:e.length)?ea(e,1):[]}function ka(e){return sa(ia(e,void 0,Ea),e+"")}var Ra=ka(Sa);function Pa(e){return"[object Array]"===Object.prototype.toString.call(e)}function La(e){return!!function(e){return"[object Undefined]"===Object.prototype.toString.call(e)}(e)||(!!function(e){return"[object Null]"===Object.prototype.toString.call(e)}(e)||(!!function(e){if(zl(e)){for(let t in e)return!1;return!0}return!1}(e)||(!!function(e){return!(!pt(e)||""!==e)}(e)||(!!function(e){return!!Pa(e)&&0===e.length}(e)||!!gt(e)))))}function Da(e){return!!Pa(e)&&(0!==e.length&&(1!==e.length||!La(e[0])))}function Ca(e){if(!Hl(e))return!1;return Kl(e)>=0}function qa(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}var Fa=NaN;function Ta(e){return function(e,t){var n=null==e?0:e.length;return n?qa(e,t)/n:Fa}(e,ui)}function Oa(e,t){var n=[];return ai(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ja(e,n){return(t(e)?_i:Oa)(e,so(n))}function Aa(e){if(!Pa(e))return null;if(0===ut(e))return null;let t=function(e){return Da(e)?e=co(e=ja(e=wl(e),vt),Lt):[]}(e);return 0===ut(t)?null:Ta(t)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var _a={};!function(e,t){e.exports=function(){var e=function(e,t){var n=Array.prototype.concat,r=Array.prototype.slice,i=Object.prototype.toString;function o(t,n){var r=t>n?t:n;return e.pow(10,17-~~(e.log(r>0?r:-r)*e.LOG10E))}var l=Array.isArray||function(e){return"[object Array]"===i.call(e)};function a(e){return"[object Function]"===i.call(e)}function u(e){return"number"==typeof e&&e-e==0}function s(e){return n.apply([],e)}function f(){return new f._init(arguments)}function c(){return 0}function h(){return 1}function p(e,t){return e===t?1:0}f.fn=f.prototype,f._init=function(e){if(l(e[0]))if(l(e[0][0])){a(e[1])&&(e[0]=f.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=a(e[1])?f.map(e[0],e[1]):e[0],this.length=1;else if(u(e[0]))this[0]=f.seq.apply(null,e),this.length=1;else{if(e[0]instanceof f)return f(e[0].toArray());this[0]=[],this.length=1}return this},f._init.prototype=f.prototype,f._init.constructor=f,f.utils={calcRdx:o,isArray:l,isFunction:a,isNumber:u,toVector:s},f._random_fn=e.random,f.setRandom=function(e){if("function"!=typeof e)throw new TypeError("fn is not a function");f._random_fn=e},f.extend=function(e){var t,n;if(1===arguments.length){for(n in e)f[n]=e[n];return this}for(t=1;t<arguments.length;t++)for(n in arguments[t])e[n]=arguments[t][n];return e},f.rows=function(e){return e.length||1},f.cols=function(e){return e[0].length||1},f.dimensions=function(e){return{rows:f.rows(e),cols:f.cols(e)}},f.row=function(e,t){return l(t)?t.map((function(t){return f.row(e,t)})):e[t]},f.rowa=function(e,t){return f.row(e,t)},f.col=function(e,t){if(l(t)){var n=f.arange(e.length).map((function(){return new Array(t.length)}));return t.forEach((function(t,r){f.arange(e.length).forEach((function(i){n[i][r]=e[i][t]}))})),n}for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=[e[i][t]];return r},f.cola=function(e,t){return f.col(e,t).map((function(e){return e[0]}))},f.diag=function(e){for(var t=f.rows(e),n=new Array(t),r=0;r<t;r++)n[r]=[e[r][r]];return n},f.antidiag=function(e){for(var t=f.rows(e)-1,n=new Array(t),r=0;t>=0;t--,r++)n[r]=[e[r][t]];return n},f.transpose=function(e){var t,n,r,i,o,a=[];for(l(e[0])||(e=[e]),n=e.length,r=e[0].length,o=0;o<r;o++){for(t=new Array(n),i=0;i<n;i++)t[i]=e[i][o];a.push(t)}return 1===a.length?a[0]:a},f.map=function(e,t,n){var r,i,o,a,u;for(l(e[0])||(e=[e]),i=e.length,o=e[0].length,a=n?e:new Array(i),r=0;r<i;r++)for(a[r]||(a[r]=new Array(o)),u=0;u<o;u++)a[r][u]=t(e[r][u],r,u);return 1===a.length?a[0]:a},f.cumreduce=function(e,t,n){var r,i,o,a,u;for(l(e[0])||(e=[e]),i=e.length,o=e[0].length,a=n?e:new Array(i),r=0;r<i;r++)for(a[r]||(a[r]=new Array(o)),o>0&&(a[r][0]=e[r][0]),u=1;u<o;u++)a[r][u]=t(a[r][u-1],e[r][u]);return 1===a.length?a[0]:a},f.alter=function(e,t){return f.map(e,t,!0)},f.create=function(e,t,n){var r,i,o=new Array(e);for(a(t)&&(n=t,t=e),r=0;r<e;r++)for(o[r]=new Array(t),i=0;i<t;i++)o[r][i]=n(r,i);return o},f.zeros=function(e,t){return u(t)||(t=e),f.create(e,t,c)},f.ones=function(e,t){return u(t)||(t=e),f.create(e,t,h)},f.rand=function(e,t){return u(t)||(t=e),f.create(e,t,f._random_fn)},f.identity=function(e,t){return u(t)||(t=e),f.create(e,t,p)},f.symmetric=function(e){var t,n,r=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<r;t++)for(n=0;n<r;n++)if(e[n][t]!==e[t][n])return!1;return!0},f.clear=function(e){return f.alter(e,c)},f.seq=function(e,t,n,r){a(r)||(r=!1);var i,l=[],u=o(e,t),s=(t*u-e*u)/((n-1)*u),f=e;for(i=0;f<=t&&i<n;f=(e*u+s*u*++i)/u)l.push(r?r(f,i):f);return l},f.arange=function(e,n,r){var i,o=[];if(r=r||1,n===t&&(n=e,e=0),e===n||0===r)return[];if(e<n&&r<0)return[];if(e>n&&r>0)return[];if(r>0)for(i=e;i<n;i+=r)o.push(i);else for(i=e;i>n;i+=r)o.push(i);return o},f.slice=function(){function e(e,n,r,i){var o,l=[],a=e.length;if(n===t&&r===t&&i===t)return f.copy(e);if(i=i||1,(n=(n=n||0)>=0?n:a+n)===(r=(r=r||e.length)>=0?r:a+r)||0===i)return[];if(n<r&&i<0)return[];if(n>r&&i>0)return[];if(i>0)for(o=n;o<r;o+=i)l.push(e[o]);else for(o=n;o>r;o+=i)l.push(e[o]);return l}function n(t,n){var r,i;return u((n=n||{}).row)?u(n.col)?t[n.row][n.col]:e(f.rowa(t,n.row),(r=n.col||{}).start,r.end,r.step):u(n.col)?e(f.cola(t,n.col),(i=n.row||{}).start,i.end,i.step):(i=n.row||{},r=n.col||{},e(t,i.start,i.end,i.step).map((function(t){return e(t,r.start,r.end,r.step)})))}return n}(),f.sliceAssign=function(n,r,i){var o,l;if(u(r.row)){if(u(r.col))return n[r.row][r.col]=i;r.col=r.col||{},r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,o=f.arange(r.col.start,e.min(n.length,r.col.end),r.col.step);var a=r.row;return o.forEach((function(e,t){n[a][e]=i[t]})),n}if(u(r.col)){r.row=r.row||{},r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,l=f.arange(r.row.start,e.min(n[0].length,r.row.end),r.row.step);var s=r.col;return l.forEach((function(e,t){n[e][s]=i[t]})),n}return i[0].length===t&&(i=[i]),r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,l=f.arange(r.row.start,e.min(n.length,r.row.end),r.row.step),o=f.arange(r.col.start,e.min(n[0].length,r.col.end),r.col.step),l.forEach((function(e,t){o.forEach((function(r,o){n[e][r]=i[t][o]}))})),n},f.diagonal=function(e){var t=f.zeros(e.length,e.length);return e.forEach((function(e,n){t[n][n]=e})),t},f.copy=function(e){return e.map((function(e){return u(e)?e:e.map((function(e){return e}))}))};var d=f.prototype;return d.length=0,d.push=Array.prototype.push,d.sort=Array.prototype.sort,d.splice=Array.prototype.splice,d.slice=Array.prototype.slice,d.toArray=function(){return this.length>1?r.call(this):r.call(this)[0]},d.map=function(e,t){return f(f.map(this,e,t))},d.cumreduce=function(e,t){return f(f.cumreduce(this,e,t))},d.alter=function(e){return f.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){d[e]=function(t){var n,r=this;return t?(setTimeout((function(){t.call(r,d[e].call(r))})),this):(n=f[e](this),l(n)?f(n):n)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){d[e]=function(t,n){var r=this;return n?(setTimeout((function(){n.call(r,d[e].call(r,t))})),this):f(f[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){d[e]=function(){return f(f[e].apply(null,arguments))}}(e[t])}("create zeros ones rand identity".split(" ")),f}(Math);return function(e,t){var n=e.utils.isFunction;function r(e,t){return e-t}function i(e,n,r){return t.max(n,t.min(e,r))}e.sum=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.sumsqrd=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n]*e[n];return t},e.sumsqerr=function(t){for(var n,r=e.mean(t),i=0,o=t.length;--o>=0;)i+=(n=t[o]-r)*n;return i},e.sumrow=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.product=function(e){for(var t=1,n=e.length;--n>=0;)t*=e[n];return t},e.min=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]<t&&(t=e[n]);return t},e.max=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]>t&&(t=e[n]);return t},e.unique=function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(n){var r=n.map(t.log),i=e.mean(r);return t.exp(i)},e.median=function(e){var t=e.length,n=e.slice().sort(r);return 1&t?n[t/2|0]:(n[t/2-1]+n[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,(function(e,t){return e+t}))},e.cumprod=function(t){return e.cumreduce(t,(function(e,t){return e*t}))},e.diff=function(e){var t,n=[],r=e.length;for(t=1;t<r;t++)n.push(e[t]-e[t-1]);return n},e.rank=function(e){var t,n=[],i={};for(t=0;t<e.length;t++)i[u=e[t]]?i[u]++:(i[u]=1,n.push(u));var o=n.sort(r),l={},a=1;for(t=0;t<o.length;t++){var u,s=i[u=o[t]],f=(a+(a+s-1))/2;l[u]=f,a+=s}return e.map((function(e){return l[e]}))},e.mode=function(e){var t,n=e.length,i=e.slice().sort(r),o=1,l=0,a=0,u=[];for(t=0;t<n;t++)i[t]===i[t+1]?o++:(o>l?(u=[i[t]],l=o,a=0):o===l&&(u.push(i[t]),a++),o=1);return 0===a?u[0]:u},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,n){return e.sumsqerr(t)/(t.length-(n?1:0))},e.pooledvariance=function(t){return t.reduce((function(t,n){return t+e.sumsqerr(n)}),0)/(t.reduce((function(e,t){return e+t.length}),0)-t.length)},e.deviation=function(t){for(var n=e.mean(t),r=t.length,i=new Array(r),o=0;o<r;o++)i[o]=t[o]-n;return i},e.stdev=function(n,r){return t.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return t.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),i=[],o=n.length-1;o>=0;o--)i.push(t.abs(n[o]-r));return e.mean(i)},e.meddev=function(n){for(var r=e.median(n),i=[],o=n.length-1;o>=0;o--)i.push(t.abs(n[o]-r));return e.median(i)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var n=e.length,i=e.slice().sort(r);return[i[t.round(n/4)-1],i[t.round(n/2)-1],i[t.round(3*n/4)-1]]},e.quantiles=function(e,n,o,l){var a,u,s,f,c,h=e.slice().sort(r),p=[n.length],d=e.length;for(void 0===o&&(o=3/8),void 0===l&&(l=3/8),a=0;a<n.length;a++)s=d*(u=n[a])+(o+u*(1-o-l)),f=t.floor(i(s,1,d-1)),c=i(s-f,0,1),p[a]=(1-c)*h[f-1]+c*h[f];return p},e.percentile=function(e,t,n){var i=e.slice().sort(r),o=t*(i.length+(n?1:-1))+(n?0:1),l=parseInt(o),a=o-l;return l+1<i.length?i[l-1]+a*(i[l]-i[l-1]):i[l-1]},e.percentileOfScore=function(e,t,n){var r,i,o=0,l=e.length,a=!1;for("strict"===n&&(a=!0),i=0;i<l;i++)r=e[i],(a&&r<t||!a&&r<=t)&&o++;return o/l},e.histogram=function(n,r){r=r||4;var i,o=e.min(n),l=(e.max(n)-o)/r,a=n.length,u=[];for(i=0;i<r;i++)u[i]=0;for(i=0;i<a;i++)u[t.min(t.floor((n[i]-o)/l),r-1)]+=1;return u},e.covariance=function(t,n){var r,i=e.mean(t),o=e.mean(n),l=t.length,a=new Array(l);for(r=0;r<l;r++)a[r]=(t[r]-i)*(n[r]-o);return e.sum(a)/(l-1)},e.corrcoeff=function(t,n){return e.covariance(t,n)/e.stdev(t,1)/e.stdev(n,1)},e.spearmancoeff=function(t,n){return t=e.rank(t),n=e.rank(n),e.corrcoeff(t,n)},e.stanMoment=function(n,r){for(var i=e.mean(n),o=e.stdev(n),l=n.length,a=0,u=0;u<l;u++)a+=t.pow((n[u]-i)/o,r);return a/n.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var o=e.prototype;!function(t){for(var r=0;r<t.length;r++)!function(t){o[t]=function(r,i){var l=[],a=0,u=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(u,o[t].call(u,r))})),this;if(this.length>1){for(u=!0===r?this:this.transpose();a<u.length;a++)l[a]=e[t](u[a]);return l}return e[t](this[0],r)}}(t[r])}("cumsum cumprod".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){o[t]=function(r,i){var l=[],a=0,u=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(u,o[t].call(u,r))})),this;if(this.length>1){for("sumrow"!==t&&(u=!0===r?this:this.transpose());a<u.length;a++)l[a]=e[t](u[a]);return!0===r?e[t](e.utils.toVector(l)):l}return e[t](this[0],r)}}(t[r])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){o[t]=function(){var r,i=[],l=0,a=this,u=Array.prototype.slice.call(arguments);if(n(u[u.length-1])){r=u[u.length-1];var s=u.slice(0,u.length-1);return setTimeout((function(){r.call(a,o[t].apply(a,s))})),this}r=void 0;var f=function(n){return e[t].apply(a,[n].concat(u))};if(this.length>1){for(a=a.transpose();l<a.length;l++)i[l]=f(a[l]);return i}return f(this[0])}}(t[r])}("quantiles percentileOfScore".split(" "))}(e,Math),function(e,t){e.gammaln=function(e){var n,r,i,o=0,l=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=1.000000000190015;for(i=(r=n=e)+5.5,i-=(n+.5)*t.log(i);o<6;o++)a+=l[o]/++r;return t.log(2.5066282746310007*a/n)-i},e.loggam=function(e){var n,r,i,o,l,a,u,s=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(n=e,u=0,1==e||2==e)return 0;for(e<=7&&(n=e+(u=t.floor(7-e))),r=1/(n*n),i=2*t.PI,l=s[9],a=8;a>=0;a--)l*=r,l+=s[a];if(o=l/n+.5*t.log(i)+(n-.5)*t.log(n)-n,e<=7)for(a=1;a<=u;a++)o-=t.log(n-1),n-=1;return o},e.gammafn=function(e){var n,r,i,o,l=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],a=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,s=0,f=0,c=0,h=e;if(e>171.6243769536076)return 1/0;if(h<=0){if(!(o=h%1+36e-17))return 1/0;u=(1&h?-1:1)*t.PI/t.sin(t.PI*o),h=1-h}for(i=h,r=h<1?h++:(h-=s=(0|h)-1)-1,n=0;n<8;++n)c=(c+l[n])*r,f=f*r+a[n];if(o=c/f+1,i<h)o/=i;else if(i>h)for(n=0;n<s;++n)o*=h,h++;return u&&(o=u/o),o},e.gammap=function(t,n){return e.lowRegGamma(t,n)*e.gammafn(t)},e.lowRegGamma=function(n,r){var i,o=e.gammaln(n),l=n,a=1/n,u=a,s=r+1-n,f=1/1e-30,c=1/s,h=c,p=1,d=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;p<=d;p++)a+=u*=r/++l;return a*t.exp(-r+n*t.log(r)-o)}for(;p<=d;p++)h*=(c=1/(c=(i=-p*(p-n))*c+(s+=2)))*(f=s+i/f);return 1-h*t.exp(-r+n*t.log(r)-o)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(t,n){return e.factorialln(t)-e.factorialln(n)-e.factorialln(t-n)},e.permutation=function(t,n){return e.factorial(t)/e.factorial(t-n)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(t,n){return e.gammaln(t)+e.gammaln(n)-e.gammaln(t+n)},e.betacf=function(e,n,r){var i,o,l,a,u=1e-30,s=1,f=n+r,c=n+1,h=n-1,p=1,d=1-f*e/c;for(t.abs(d)<u&&(d=u),a=d=1/d;s<=100&&(d=1+(o=s*(r-s)*e/((h+(i=2*s))*(n+i)))*d,t.abs(d)<u&&(d=u),p=1+o/p,t.abs(p)<u&&(p=u),a*=(d=1/d)*p,d=1+(o=-(n+s)*(f+s)*e/((n+i)*(c+i)))*d,t.abs(d)<u&&(d=u),p=1+o/p,t.abs(p)<u&&(p=u),a*=l=(d=1/d)*p,!(t.abs(l-1)<3e-7));s++);return a},e.gammapinv=function(n,r){var i,o,l,a,u,s,f=0,c=r-1,h=1e-8,p=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(u=t.log(c),s=t.exp(c*(u-1)-p),a=n<.5?n:1-n,i=(2.30753+.27061*(o=t.sqrt(-2*t.log(a))))/(1+o*(.99229+.04481*o))-o,n<.5&&(i=-i),i=t.max(.001,r*t.pow(1-1/(9*r)-i/(3*t.sqrt(r)),3))):i=n<(o=1-r*(.253+.12*r))?t.pow(n/o,1/r):1-t.log(1-(n-o)/(1-o));f<12;f++){if(i<=0)return 0;if((i-=o=(l=(e.lowRegGamma(r,i)-n)/(o=r>1?s*t.exp(-(i-c)+c*(t.log(i)-u)):t.exp(-i+c*t.log(i)-p)))/(1-.5*t.min(1,l*((r-1)/i-1))))<=0&&(i=.5*(i+o)),t.abs(o)<h*i)break}return i},e.erf=function(e){var n,r,i,o,l=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],a=l.length-1,u=!1,s=0,f=0;for(e<0&&(e=-e,u=!0),r=4*(n=2/(2+e))-2;a>0;a--)i=s,s=r*s-f+l[a],f=i;return o=n*t.exp(-e*e+.5*(l[0]+r*s)-f),u?o-1:1-o},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(n){var r,i,o,l,a=0;if(n>=2)return-100;if(n<=0)return 100;for(l=n<1?n:2-n,r=-.70711*((2.30753+.27061*(o=t.sqrt(-2*t.log(l/2))))/(1+o*(.99229+.04481*o))-o);a<2;a++)r+=(i=e.erfc(r)-l)/(1.1283791670955126*t.exp(-r*r)-r*i);return n<1?r:-r},e.ibetainv=function(n,r,i){var o,l,a,u,s,f,c,h,p,d,g=1e-8,v=r-1,m=i-1,y=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&i>=1?(a=n<.5?n:1-n,f=(2.30753+.27061*(u=t.sqrt(-2*t.log(a))))/(1+u*(.99229+.04481*u))-u,n<.5&&(f=-f),c=(f*f-3)/6,h=2/(1/(2*r-1)+1/(2*i-1)),p=f*t.sqrt(c+h)/h-(1/(2*i-1)-1/(2*r-1))*(c+5/6-2/(3*h)),f=r/(r+i*t.exp(2*p))):(o=t.log(r/(r+i)),l=t.log(i/(r+i)),f=n<(u=t.exp(r*o)/r)/(p=u+(s=t.exp(i*l)/i))?t.pow(r*p*n,1/r):1-t.pow(i*p*(1-n),1/i)),d=-e.gammaln(r)-e.gammaln(i)+e.gammaln(r+i);y<10;y++){if(0===f||1===f)return f;if((f-=u=(s=(e.ibeta(f,r,i)-n)/(u=t.exp(v*t.log(f)+m*t.log(1-f)+d)))/(1-.5*t.min(1,s*(v/f-m/(1-f)))))<=0&&(f=.5*(f+u)),f>=1&&(f=.5*(f+u+1)),t.abs(u)<g*f&&y>0)break}return f},e.ibeta=function(n,r,i){var o=0===n||1===n?0:t.exp(e.gammaln(r+i)-e.gammaln(r)-e.gammaln(i)+r*t.log(n)+i*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+i+2)?o*e.betacf(n,r,i)/r:1-o*e.betacf(1-n,i,r)/i)},e.randn=function(n,r){var i,o,l,a,u;if(r||(r=n),n)return e.create(n,r,(function(){return e.randn()}));do{i=e._random_fn(),o=1.7156*(e._random_fn()-.5),u=(l=i-.449871)*l+(a=t.abs(o)+.386595)*(.196*a-.25472*l)}while(u>.27597&&(u>.27846||o*o>-4*t.log(i)*i*i));return o/i},e.randg=function(n,r,i){var o,l,a,u,s,f,c=n;if(i||(i=r),n||(n=1),r)return(f=e.zeros(r,i)).alter((function(){return e.randg(n)})),f;n<1&&(n+=1),o=n-1/3,l=1/t.sqrt(9*o);do{do{u=1+l*(s=e.randn())}while(u<=0);u*=u*u,a=e._random_fn()}while(a>1-.331*t.pow(s,4)&&t.log(a)>.5*s*s+o*(1-u+t.log(u)));if(n==c)return o*u;do{a=e._random_fn()}while(0===a);return t.pow(a,1/c)*o*u},function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e.map(this,(function(n){return e[t](n)})))}}(t[n])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[n])}("randn".split(" "))}(e,Math),function(e,t){function n(e,n,r,i){for(var o,l=0,a=1,u=1,s=1,f=0,c=0;t.abs((u-c)/u)>i;)c=u,a=s+(o=-(n+f)*(n+r+f)*e/(n+2*f)/(n+2*f+1))*a,u=(l=u+o*l)+(o=(f+=1)*(r-f)*e/(n+2*f-1)/(n+2*f))*u,l/=s=a+o*s,a/=s,u/=s,s=1;return u/n}function r(e){return e/t.abs(e)}function i(n,r,i){var o=12,l=6,a=-30,u=-50,s=60,f=8,c=3,h=2,p=3,d=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],g=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],v=.5*n;if(v>=f)return 1;var m,y=2*e.normal.cdf(v,0,1,1,0)-1;y=y>=t.exp(u/i)?t.pow(y,i):0;for(var b=v,w=(f-v)/(m=n>c?h:p),$=b+w,x=0,M=i-1,S=1;S<=m;S++){for(var E=0,k=.5*($+b),R=.5*($-b),P=1;P<=o;P++){var L,D=k+R*(l<P?d[(L=o-P+1)-1]:-d[(L=P)-1]),C=D*D;if(C>s)break;var q=2*e.normal.cdf(D,0,1,1,0)*.5-2*e.normal.cdf(D,n,1,1,0)*.5;q>=t.exp(a/M)&&(E+=q=g[L-1]*t.exp(-.5*C)*t.pow(q,M))}x+=E*=2*R*i/t.sqrt(2*t.PI),b=$,$+=w}return(y+=x)<=t.exp(a/r)?0:(y=t.pow(y,r))>=1?1:y}function o(e,n,r){var i=.322232421088,o=.099348462606,l=-1,a=.588581570495,u=-.342242088547,s=.531103462366,f=-.204231210125,c=.10353775285,h=-453642210148e-16,p=.0038560700634,d=.8832,g=.2368,v=1.214,m=1.208,y=1.4142,b=120,w=.5-.5*e,$=t.sqrt(t.log(1/(w*w))),x=$+(((($*h+f)*$+u)*$+l)*$+i)/(((($*p+c)*$+s)*$+a)*$+o);r<b&&(x+=(x*x*x+x)/r/4);var M=d-g*x;return r<b&&(M+=-v/r+m*x/r),x*(M*t.log(n-1)+y)}!function(t){for(var n=0;n<t.length;n++)!function(t){e[t]=function e(t,n,r){return this instanceof e?(this._a=t,this._b=n,this._c=r,this):new e(t,n,r)},e.fn[t]=function(n,r,i){var o=e[t](n,r,i);return o.data=this,o},e[t].prototype.sample=function(n){var r=this._a,i=this._b,o=this._c;return n?e.alter(n,(function(){return e[t].sample(r,i,o)})):e[t].sample(r,i,o)},function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(r){var i=this._a,o=this._b,l=this._c;return r||0===r||(r=this.data),"number"!=typeof r?e.fn.map.call(r,(function(r){return e[t][n](r,i,o,l)})):e[t][n](r,i,o,l)}}(n[r])}("pdf cdf inv".split(" ")),function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(){return e[t][n](this._a,this._b,this._c)}}(n[r])}("mean median mode variance".split(" "))}(t[n])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,i){return n>1||n<0?0:1==r&&1==i?1:r<512&&i<512?t.pow(n,r-1)*t.pow(1-n,i-1)/e.betafn(r,i):t.exp((r-1)*t.log(n)+(i-1)*t.log(1-n)-e.betaln(r,i))},cdf:function(t,n,r){return t>1||t<0?1*(t>1):e.ibeta(t,n,r)},inv:function(t,n,r){return e.ibetainv(t,n,r)},mean:function(e,t){return e/(e+t)},median:function(t,n){return e.ibetainv(.5,t,n)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,n){var r=e.randg(t);return r/(r+e.randg(n))},variance:function(e,n){return e*n/(t.pow(e+n,2)*(e+n+1))}}),e.extend(e.centralF,{pdf:function(n,r,i){var o;return n<0?0:r<=2?0===n&&r<2?1/0:0===n&&2===r?1:1/e.betafn(r/2,i/2)*t.pow(r/i,r/2)*t.pow(n,r/2-1)*t.pow(1+r/i*n,-(r+i)/2):(o=r*n/(i+n*r),r*(i/(i+n*r))/2*e.binomial.pdf((r-2)/2,(r+i-2)/2,o))},cdf:function(t,n,r){return t<0?0:e.ibeta(n*t/(n*t+r),n/2,r/2)},inv:function(t,n,r){return r/(n*(1/e.ibetainv(t,n/2,r/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,n){return 2*e.randg(t/2)/t/(2*e.randg(n/2)/n)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,n,r){return r<0?0:r/(t.pow(e-n,2)+t.pow(r,2))/t.PI},cdf:function(e,n,r){return t.atan((e-n)/r)/t.PI+.5},inv:function(e,n,r){return n+r*t.tan(t.PI*(e-.5))},median:function(e){return e},mode:function(e){return e},sample:function(n,r){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:0===n&&2===r?.5:t.exp((r/2-1)*t.log(n)-n/2-r/2*t.log(2)-e.gammaln(r/2))},cdf:function(t,n){return t<0?0:e.lowRegGamma(n/2,t/2)},inv:function(t,n){return 2*e.gammapinv(t,.5*n)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,n){return e<0?0:n*t.exp(-n*e)},cdf:function(e,n){return e<0?0:1-t.exp(-n*e)},inv:function(e,n){return-t.log(1-e)/n},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(){return 0},sample:function(n){return-1/n*t.log(e._random_fn())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(n,r,i){return n<0?0:0===n&&1===r?1/i:t.exp((r-1)*t.log(n)-n/i-e.gammaln(r)-r*t.log(i))},cdf:function(t,n,r){return t<0?0:e.lowRegGamma(n,t/r)},inv:function(t,n,r){return e.gammapinv(t,n)*r},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,n){return e.randg(t)*n},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(n,r,i){return n<=0?0:t.exp(-(r+1)*t.log(n)-i/n-e.gammaln(r)+r*t.log(i))},cdf:function(t,n,r){return t<=0?0:1-e.lowRegGamma(n,r/t)},inv:function(t,n,r){return r/e.gammapinv(1-t,n)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,n){return n/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,n,r){return 0===e&&1===n?r:1===e&&1===r?n:t.exp(t.log(n)+t.log(r)+(n-1)*t.log(e)+(r-1)*t.log(1-t.pow(e,n)))},cdf:function(e,n,r){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,n),r)},inv:function(e,n,r){return t.pow(1-t.pow(1-e,1/r),1/n)},mean:function(t,n){return n*e.gammafn(1+1/t)*e.gammafn(n)/e.gammafn(1+1/t+n)},median:function(e,n){return t.pow(1-t.pow(2,-1/n),1/e)},mode:function(e,n){if(e>=1&&n>=1&&1!==e&&1!==n)return t.pow((e-1)/(e*n-1),1/e)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,n,r){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(r)-t.pow(t.log(e)-n,2)/(2*r*r))},cdf:function(n,r,i){return n<0?0:.5+.5*e.erf((t.log(n)-r)/t.sqrt(2*i*i))},inv:function(n,r,i){return t.exp(-1.4142135623730951*i*e.erfcinv(2*n)+r)},mean:function(e,n){return t.exp(e+n*n/2)},median:function(e){return t.exp(e)},mode:function(e,n){return t.exp(e-n*n)},sample:function(n,r){return t.exp(e.randn()*r+n)},variance:function(e,n){return(t.exp(n*n)-1)*t.exp(2*e+n*n)}}),e.extend(e.noncentralt,{pdf:function(n,r,i){var o=1e-14;return t.abs(i)<o?e.studentt.pdf(n,r):t.abs(n)<o?t.exp(e.gammaln((r+1)/2)-i*i/2-.5*t.log(t.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*t.sqrt(1+2/r),r+2,i)-e.noncentralt.cdf(n,r,i))},cdf:function(n,r,i){var o=1e-14,l=200;if(t.abs(i)<o)return e.studentt.cdf(n,r);var a=!1;n<0&&(a=!0,i=-i);for(var u=e.normal.cdf(-i,0,1),s=o+1,f=s,c=n*n/(n*n+r),h=0,p=t.exp(-i*i/2),d=t.exp(-i*i/2-.5*t.log(2)-e.gammaln(1.5))*i;h<l||f>o||s>o;)f=s,h>0&&(p*=i*i/(2*h),d*=i*i/(2*(h+.5))),u+=.5*(s=p*e.beta.cdf(c,h+.5,r/2)+d*e.beta.cdf(c,h+1,r/2)),h++;return a?1-u:u}}),e.extend(e.normal,{pdf:function(e,n,r){return t.exp(-.5*t.log(2*t.PI)-t.log(r)-t.pow(e-n,2)/(2*r*r))},cdf:function(n,r,i){return.5*(1+e.erf((n-r)/t.sqrt(2*i*i)))},inv:function(t,n,r){return-1.4142135623730951*r*e.erfcinv(2*t)+n},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},sample:function(t,n){return e.randn()*n+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,n,r){return e<n?0:r*t.pow(n,r)/t.pow(e,r+1)},cdf:function(e,n,r){return e<n?0:1-t.pow(n/e,r)},inv:function(e,n,r){return n/t.pow(1-e,1/r)},mean:function(e,n){if(!(n<=1))return n*t.pow(e,n)/(n-1)},median:function(e,n){return e*(n*t.SQRT2)},mode:function(e){return e},variance:function(e,n){if(!(n<=2))return e*e*n/(t.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(t.sqrt(r)*e.betafn(.5,r/2))*t.pow(1+n*n/r,-(r+1)/2)},cdf:function(n,r){var i=r/2;return e.ibeta((n+t.sqrt(n*n+r))/(2*t.sqrt(n*n+r)),i,i)},inv:function(n,r){var i=e.ibetainv(2*t.min(n,1-n),.5*r,.5);return i=t.sqrt(r*(1-i)/i),n>.5?i:-i},mean:function(e){return e>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(n){return e.randn()*t.sqrt(n/(2*e.randg(n/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,n,r){return e<0||n<0||r<0?0:r/n*t.pow(e/n,r-1)*t.exp(-t.pow(e/n,r))},cdf:function(e,n,r){return e<0?0:1-t.exp(-t.pow(e/n,r))},inv:function(e,n,r){return n*t.pow(-t.log(1-e),1/r)},mean:function(t,n){return t*e.gammafn(1+1/n)},median:function(e,n){return e*t.pow(t.log(2),1/n)},mode:function(e,n){return n<=1?0:e*t.pow((n-1)/n,1/n)},sample:function(n,r){return n*t.pow(-t.log(e._random_fn()),1/r)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-t.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(e,t,n){return e<t||e>n?0:1/(n-t)},cdf:function(e,t,n){return e<t?0:e<n?(e-t)/(n-t):1},inv:function(e,t,n){return t+e*(n-t)},mean:function(e,t){return.5*(e+t)},median:function(t,n){return e.mean(t,n)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,n){return t/2+n/2+(n/2-t/2)*(2*e._random_fn()-1)},variance:function(e,n){return t.pow(n-e,2)/12}}),e.extend(e.binomial,{pdf:function(n,r,i){return 0===i||1===i?r*i===n?1:0:e.combination(r,n)*t.pow(i,n)*t.pow(1-i,r-n)},cdf:function(r,i,o){var l,a=1e-10;if(r<0)return 0;if(r>=i)return 1;if(o<0||o>1||i<=0)return NaN;var u=o,s=(r=t.floor(r))+1,f=i-r,c=s+f,h=t.exp(e.gammaln(c)-e.gammaln(f)-e.gammaln(s)+s*t.log(u)+f*t.log(1-u));return l=u<(s+1)/(c+2)?h*n(u,s,f,a):1-h*n(1-u,f,s,a),t.round(1/a*(1-l))/(1/a)}}),e.extend(e.negbin,{pdf:function(n,r,i){return n===n>>>0&&(n<0?0:e.combination(n+r-1,r-1)*t.pow(1-i,n)*t.pow(i,r))},cdf:function(t,n,r){var i=0,o=0;if(t<0)return 0;for(;o<=t;o++)i+=e.negbin.pdf(o,n,r);return i}}),e.extend(e.hypgeom,{pdf:function(n,r,i,o){if(n!=n|0)return!1;if(n<0||n<i-(r-o))return 0;if(n>o||n>i)return 0;if(2*i>r)return 2*o>r?e.hypgeom.pdf(r-i-o+n,r,r-i,r-o):e.hypgeom.pdf(o-n,r,r-i,o);if(2*o>r)return e.hypgeom.pdf(i-n,r,i,r-o);if(i<o)return e.hypgeom.pdf(n,r,o,i);for(var l=1,a=0,u=0;u<n;u++){for(;l>1&&a<o;)l*=1-i/(r-a),a++;l*=(o-u)*(i-u)/((u+1)*(r-i-o+u+1))}for(;a<o;a++)l*=1-i/(r-a);return t.min(1,t.max(0,l))},cdf:function(n,r,i,o){if(n<0||n<i-(r-o))return 0;if(n>=o||n>=i)return 1;if(2*i>r)return 2*o>r?e.hypgeom.cdf(r-i-o+n,r,r-i,r-o):1-e.hypgeom.cdf(o-n-1,r,r-i,o);if(2*o>r)return 1-e.hypgeom.cdf(i-n-1,r,i,r-o);if(i<o)return e.hypgeom.cdf(n,r,o,i);for(var l=1,a=1,u=0,s=0;s<n;s++){for(;l>1&&u<o;){var f=1-i/(r-u);a*=f,l*=f,u++}l+=a*=(o-s)*(i-s)/((s+1)*(r-i-o+s+1))}for(;u<o;u++)l*=1-i/(r-u);return t.min(1,t.max(0,l))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!=0||n<0?0:t.pow(r,n)*t.exp(-r)/e.factorial(n)},cdf:function(t,n){var r=[],i=0;if(t<0)return 0;for(;i<=t;i++)r.push(e.poisson.pdf(i,n));return e.sum(r)},mean:function(e){return e},variance:function(e){return e},sampleSmall:function(n){var r=1,i=0,o=t.exp(-n);do{i++,r*=e._random_fn()}while(r>o);return i-1},sampleLarge:function(n){var r,i,o,l,a,u,s,f,c,h,p=n;for(l=t.sqrt(p),a=t.log(p),u=.02483*(s=.931+2.53*l)-.059,f=1.1239+1.1328/(s-3.4),c=.9277-3.6224/(s-2);;){if(i=t.random()-.5,o=t.random(),h=.5-t.abs(i),r=t.floor((2*u/h+s)*i+p+.43),h>=.07&&o<=c)return r;if(!(r<0||h<.013&&o>h)&&t.log(o)+t.log(f)-t.log(u/(h*h)+s)<=r*a-p-e.loggam(r+1))return r}},sample:function(e){return e<10?this.sampleSmall(e):this.sampleLarge(e)}}),e.extend(e.triangular,{pdf:function(e,t,n,r){return n<=t||r<t||r>n?NaN:e<t||e>n?0:e<r?2*(e-t)/((n-t)*(r-t)):e===r?2/(n-t):2*(n-e)/((n-t)*(n-r))},cdf:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=n?0:e>=r?1:e<=i?t.pow(e-n,2)/((r-n)*(i-n)):1-t.pow(r-e,2)/((r-n)*(r-i))},inv:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=(i-n)/(r-n)?n+(r-n)*t.sqrt(e*((i-n)/(r-n))):n+(r-n)*(1-t.sqrt((1-e)*(1-(i-n)/(r-n))))},mean:function(e,t,n){return(e+t+n)/3},median:function(e,n,r){return r<=(e+n)/2?n-t.sqrt((n-e)*(n-r))/t.sqrt(2):r>(e+n)/2?e+t.sqrt((n-e)*(r-e))/t.sqrt(2):void 0},mode:function(e,t,n){return n},sample:function(n,r,i){var o=e._random_fn();return o<(i-n)/(r-n)?n+t.sqrt(o*(r-n)*(i-n)):r-t.sqrt((1-o)*(r-n)*(r-i))},variance:function(e,t,n){return(e*e+t*t+n*n-e*t-e*n-t*n)/18}}),e.extend(e.arcsine,{pdf:function(e,n,r){return r<=n?NaN:e<=n||e>=r?0:2/t.PI*t.pow(t.pow(r-n,2)-t.pow(2*e-n-r,2),-.5)},cdf:function(e,n,r){return e<n?0:e<r?2/t.PI*t.asin(t.sqrt((e-n)/(r-n))):1},inv:function(e,n,r){return n+(.5-.5*t.cos(t.PI*e))*(r-n)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,n){return n<=e?NaN:t.pow(n-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,n,r){return r<=0?0:t.exp(-t.abs(e-n)/r)/(2*r)},cdf:function(e,n,r){return r<=0?0:e<n?.5*t.exp((e-n)/r):1-.5*t.exp(-(e-n)/r)},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},variance:function(e,t){return 2*t*t},sample:function(n,i){var o=e._random_fn()-.5;return n-i*r(o)*t.log(1-2*t.abs(o))}}),e.extend(e.tukey,{cdf:function(n,r,o){var l=1,a=r,u=16,s=8,f=-30,c=1e-14,h=100,p=800,d=5e3,g=25e3,v=1,m=.5,y=.25,b=.125,w=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],$=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(o<2||l<1||a<2)return NaN;if(!Number.isFinite(n))return 1;if(o>g)return i(n,l,a);var x,M=.5*o,S=M*t.log(o)-o*t.log(2)-e.gammaln(M),E=M-1,k=.25*o;x=o<=h?v:o<=p?m:o<=d?y:b,S+=t.log(x);for(var R=0,P=1;P<=50;P++){for(var L=0,D=(2*P-1)*x,C=1;C<=u;C++){var q,F;s<C?(q=C-s-1,F=S+E*t.log(D+w[q]*x)-(w[q]*x+D)*k):(q=C-1,F=S+E*t.log(D-w[q]*x)+(w[q]*x-D)*k),F>=f&&(L+=i(s<C?n*t.sqrt(.5*(w[q]*x+D)):n*t.sqrt(.5*(-w[q]*x+D)),l,a)*$[q]*t.exp(F))}if(P*x>=1&&L<=c)break;R+=L}if(L>c)throw new Error("tukey.cdf failed to converge");return R>1&&(R=1),R},inv:function(n,r,i){var l=1e-4,a=50;if(i<2||r<2)return NaN;if(n<0||n>1)return NaN;if(0===n)return 0;if(1===n)return 1/0;var u,s=o(n,r,i),f=e.tukey.cdf(s,r,i)-n;u=f>0?t.max(0,s-1):s+1;for(var c,h=e.tukey.cdf(u,r,i)-n,p=1;p<a;p++)if(c=u-h*(u-s)/(h-f),f=h,s=u,c<0&&(c=0,h=-n),h=e.tukey.cdf(c,r,i)-n,u=c,t.abs(u-s)<l)return c;throw new Error("tukey.inv failed to converge")}})}(e,Math),function(e,t){var n=Array.prototype.push,r=e.utils.isArray;function i(t){return r(t)||t instanceof e}e.extend({add:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e+n[t][r]}))):e.map(t,(function(e){return e+n}))},subtract:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e-n[t][r]||0}))):e.map(t,(function(e){return e-n}))},divide:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.multiply(t,e.inv(n))):e.map(t,(function(e){return e/n}))},multiply:function(t,n){var r,o,l,a,u,s,f,c;if(void 0===t.length&&void 0===n.length)return t*n;if(u=t.length,s=t[0].length,f=e.zeros(u,l=i(n)?n[0].length:s),c=0,i(n)){for(;c<l;c++)for(r=0;r<u;r++){for(a=0,o=0;o<s;o++)a+=t[r][o]*n[o][c];f[r][c]=a}return 1===u&&1===c?f[0][0]:f}return e.map(t,(function(e){return e*n}))},outer:function(t,n){return e.multiply(t.map((function(e){return[e]})),[n])},dot:function(t,n){i(t[0])||(t=[t]),i(n[0])||(n=[n]);for(var r,o,l=1===t[0].length&&1!==t.length?e.transpose(t):t,a=1===n[0].length&&1!==n.length?e.transpose(n):n,u=[],s=0,f=l.length,c=l[0].length;s<f;s++){for(u[s]=[],r=0,o=0;o<c;o++)r+=l[s][o]*a[s][o];u[s]=r}return 1===u.length?u[0]:u},pow:function(n,r){return e.map(n,(function(e){return t.pow(e,r)}))},exp:function(n){return e.map(n,(function(e){return t.exp(e)}))},log:function(n){return e.map(n,(function(e){return t.log(e)}))},abs:function(n){return e.map(n,(function(e){return t.abs(e)}))},norm:function(e,n){var r=0,o=0;for(isNaN(n)&&(n=2),i(e[0])&&(e=e[0]);o<e.length;o++)r+=t.pow(t.abs(e[o]),n);return t.pow(r,1/n)},angle:function(n,r){return t.acos(e.dot(n,r)/(e.norm(n)*e.norm(r)))},aug:function(e,t){var r,i=[];for(r=0;r<e.length;r++)i.push(e[r].slice());for(r=0;r<i.length;r++)n.apply(i[r],t[r]);return i},inv:function(t){for(var n,r=t.length,i=t[0].length,o=e.identity(r,i),l=e.gauss_jordan(t,o),a=[],u=0;u<r;u++)for(a[u]=[],n=i;n<l[0].length;n++)a[u][n-i]=l[u][n];return a},det:function e(t){if(2===t.length)return t[0][0]*t[1][1]-t[0][1]*t[1][0];for(var n=0,r=0;r<t.length;r++){for(var i=[],o=1;o<t.length;o++){i[o-1]=[];for(var l=0;l<t.length;l++)l<r?i[o-1][l]=t[o][l]:l>r&&(i[o-1][l-1]=t[o][l])}var a=r%2?-1:1;n+=e(i)*t[0][r]*a}return n},gauss_elimination:function(n,r){var i,o,l,a,u=0,s=0,f=n.length,c=n[0].length,h=1,p=0,d=[];for(i=(n=e.aug(n,r))[0].length,u=0;u<f;u++){for(o=n[u][u],s=u,a=u+1;a<c;a++)o<t.abs(n[a][u])&&(o=n[a][u],s=a);if(s!=u)for(a=0;a<i;a++)l=n[u][a],n[u][a]=n[s][a],n[s][a]=l;for(s=u+1;s<f;s++)for(h=n[s][u]/n[u][u],a=u;a<i;a++)n[s][a]=n[s][a]-h*n[u][a]}for(u=f-1;u>=0;u--){for(p=0,s=u+1;s<=f-1;s++)p+=d[s]*n[u][s];d[u]=(n[u][i-1]-p)/n[u][u]}return d},gauss_jordan:function(n,r){var i,o,l,a=e.aug(n,r),u=a.length,s=a[0].length,f=0;for(o=0;o<u;o++){var c=o;for(l=o+1;l<u;l++)t.abs(a[l][o])>t.abs(a[c][o])&&(c=l);var h=a[o];for(a[o]=a[c],a[c]=h,l=o+1;l<u;l++)for(f=a[l][o]/a[o][o],i=o;i<s;i++)a[l][i]-=a[o][i]*f}for(o=u-1;o>=0;o--){for(f=a[o][o],l=0;l<o;l++)for(i=s-1;i>o-1;i--)a[l][i]-=a[o][i]*a[l][o]/f;for(a[o][o]/=f,i=u;i<s;i++)a[o][i]/=f}return a},triaUpSolve:function(t,n){var r,i=t[0].length,o=e.zeros(1,i)[0],l=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),l=!0),e.arange(i-1,-1,-1).forEach((function(l){r=e.arange(l+1,i).map((function(e){return o[e]*t[l][e]})),o[l]=(n[l]-e.sum(r))/t[l][l]})),l?o.map((function(e){return[e]})):o},triaLowSolve:function(t,n){var r,i=t[0].length,o=e.zeros(1,i)[0],l=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),l=!0),e.arange(i).forEach((function(i){r=e.arange(i).map((function(e){return t[i][e]*o[e]})),o[i]=(n[i]-e.sum(r))/t[i][i]})),l?o.map((function(e){return[e]})):o},lu:function(t){var n,r=t.length,i=e.identity(r),o=e.zeros(t.length,t[0].length);return e.arange(r).forEach((function(e){o[0][e]=t[0][e]})),e.arange(1,r).forEach((function(l){e.arange(l).forEach((function(r){n=e.arange(r).map((function(e){return i[l][e]*o[e][r]})),i[l][r]=(t[l][r]-e.sum(n))/o[r][r]})),e.arange(l,r).forEach((function(r){n=e.arange(l).map((function(e){return i[l][e]*o[e][r]})),o[l][r]=t[n.length][r]-e.sum(n)}))})),[i,o]},cholesky:function(n){var r,i=n.length,o=e.zeros(n.length,n[0].length);return e.arange(i).forEach((function(l){r=e.arange(l).map((function(e){return t.pow(o[l][e],2)})),o[l][l]=t.sqrt(n[l][l]-e.sum(r)),e.arange(l+1,i).forEach((function(t){r=e.arange(l).map((function(e){return o[l][e]*o[t][e]})),o[t][l]=(n[l][t]-e.sum(r))/o[l][l]}))})),o},gauss_jacobi:function(n,r,i,o){for(var l,a,u,s,f=0,c=0,h=n.length,p=[],d=[],g=[];f<h;f++)for(p[f]=[],d[f]=[],g[f]=[],c=0;c<h;c++)f>c?(p[f][c]=n[f][c],d[f][c]=g[f][c]=0):f<c?(d[f][c]=n[f][c],p[f][c]=g[f][c]=0):(g[f][c]=n[f][c],p[f][c]=d[f][c]=0);for(u=e.multiply(e.multiply(e.inv(g),e.add(p,d)),-1),a=e.multiply(e.inv(g),r),l=i,s=e.add(e.multiply(u,i),a),f=2;t.abs(e.norm(e.subtract(s,l)))>o;)l=s,s=e.add(e.multiply(u,l),a),f++;return s},gauss_seidel:function(n,r,i,o){for(var l,a,u,s,f,c=0,h=n.length,p=[],d=[],g=[];c<h;c++)for(p[c]=[],d[c]=[],g[c]=[],l=0;l<h;l++)c>l?(p[c][l]=n[c][l],d[c][l]=g[c][l]=0):c<l?(d[c][l]=n[c][l],p[c][l]=g[c][l]=0):(g[c][l]=n[c][l],p[c][l]=d[c][l]=0);for(s=e.multiply(e.multiply(e.inv(e.add(g,p)),d),-1),u=e.multiply(e.inv(e.add(g,p)),r),a=i,f=e.add(e.multiply(s,i),u),c=2;t.abs(e.norm(e.subtract(f,a)))>o;)a=f,f=e.add(e.multiply(s,a),u),c+=1;return f},SOR:function(n,r,i,o,l){for(var a,u,s,f,c,h=0,p=n.length,d=[],g=[],v=[];h<p;h++)for(d[h]=[],g[h]=[],v[h]=[],a=0;a<p;a++)h>a?(d[h][a]=n[h][a],g[h][a]=v[h][a]=0):h<a?(g[h][a]=n[h][a],d[h][a]=v[h][a]=0):(v[h][a]=n[h][a],d[h][a]=g[h][a]=0);for(f=e.multiply(e.inv(e.add(v,e.multiply(d,l))),e.subtract(e.multiply(v,1-l),e.multiply(g,l))),s=e.multiply(e.multiply(e.inv(e.add(v,e.multiply(d,l))),r),l),u=i,c=e.add(e.multiply(f,i),s),h=2;t.abs(e.norm(e.subtract(c,u)))>o;)u=c,c=e.add(e.multiply(f,u),s),h++;return c},householder:function(n){for(var r,i,o,l,a=n.length,u=n[0].length,s=0,f=[],c=[];s<a-1;s++){for(r=0,l=s+1;l<u;l++)r+=n[l][s]*n[l][s];for(r=(n[s+1][s]>0?-1:1)*t.sqrt(r),i=t.sqrt((r*r-n[s+1][s]*r)/2),(f=e.zeros(a,1))[s+1][0]=(n[s+1][s]-r)/(2*i),o=s+2;o<a;o++)f[o][0]=n[o][s]/(2*i);c=e.subtract(e.identity(a,u),e.multiply(e.multiply(f,e.transpose(f)),2)),n=e.multiply(c,e.multiply(n,c))}return n},QR:function(){var n=e.sum,r=e.arange;function i(i){var o,l,a,u=i.length,s=i[0].length,f=e.zeros(s,s);for(i=e.copy(i),l=0;l<s;l++){for(f[l][l]=t.sqrt(n(r(u).map((function(e){return i[e][l]*i[e][l]})))),o=0;o<u;o++)i[o][l]=i[o][l]/f[l][l];for(a=l+1;a<s;a++)for(f[l][a]=n(r(u).map((function(e){return i[e][l]*i[e][a]}))),o=0;o<u;o++)i[o][a]=i[o][a]-i[o][l]*f[l][a]}return[i,f]}return i}(),lstsq:function(){function t(t){var n=(t=e.copy(t)).length,r=e.identity(n);return e.arange(n-1,-1,-1).forEach((function(n){e.sliceAssign(r,{row:n},e.divide(e.slice(r,{row:n}),t[n][n])),e.sliceAssign(t,{row:n},e.divide(e.slice(t,{row:n}),t[n][n])),e.arange(n).forEach((function(i){var o=e.multiply(t[i][n],-1),l=e.slice(t,{row:i}),a=e.multiply(e.slice(t,{row:n}),o);e.sliceAssign(t,{row:i},e.add(l,a));var u=e.slice(r,{row:i}),s=e.multiply(e.slice(r,{row:n}),o);e.sliceAssign(r,{row:i},e.add(u,s))}))})),r}function n(n,r){var i=!1;void 0===r[0].length&&(r=r.map((function(e){return[e]})),i=!0);var o=e.QR(n),l=o[0],a=o[1],u=n[0].length,s=e.slice(l,{col:{end:u}}),f=t(e.slice(a,{row:{end:u}})),c=e.transpose(s);void 0===c[0].length&&(c=[c]);var h=e.multiply(e.multiply(f,c),r);return void 0===h.length&&(h=[[h]]),i?h.map((function(e){return e[0]})):h}return n}(),jacobi:function(n){for(var r,i,o,l,a,u,s,f=1,c=n.length,h=e.identity(c,c),p=[];1===f;){for(a=n[0][1],o=0,l=1,r=0;r<c;r++)for(i=0;i<c;i++)r!=i&&a<t.abs(n[r][i])&&(a=t.abs(n[r][i]),o=r,l=i);for(u=n[o][o]===n[l][l]?n[o][l]>0?t.PI/4:-t.PI/4:t.atan(2*n[o][l]/(n[o][o]-n[l][l]))/2,(s=e.identity(c,c))[o][o]=t.cos(u),s[o][l]=-t.sin(u),s[l][o]=t.sin(u),s[l][l]=t.cos(u),h=e.multiply(h,s),n=e.multiply(e.multiply(e.inv(s),n),s),f=0,r=1;r<c;r++)for(i=1;i<c;i++)r!=i&&t.abs(n[r][i])>.001&&(f=1)}for(r=0;r<c;r++)p.push(n[r][r]);return[h,p]},rungekutta:function(e,t,n,r,i,o){var l,a,u;if(2===o)for(;r<=n;)i+=((l=t*e(r,i))+(a=t*e(r+t,i+l)))/2,r+=t;if(4===o)for(;r<=n;)i+=((l=t*e(r,i))+2*(a=t*e(r+t/2,i+l/2))+2*(u=t*e(r+t/2,i+a/2))+t*e(r+t,i+u))/6,r+=t;return i},romberg:function(e,n,r,i){for(var o,l,a,u,s,f=0,c=(r-n)/2,h=[],p=[],d=[];f<i/2;){for(s=e(n),a=n,u=0;a<=r;a+=c,u++)h[u]=a;for(o=h.length,a=1;a<o-1;a++)s+=(a%2!=0?4:2)*e(h[a]);s=c/3*(s+e(r)),d[f]=s,c/=2,f++}for(l=d.length,o=1;1!==l;){for(a=0;a<l-1;a++)p[a]=(t.pow(4,o)*d[a+1]-d[a])/(t.pow(4,o)-1);l=p.length,d=p,p=[],o++}return d},richardson:function(e,n,r,i){function o(e,t){for(var n,r=0,i=e.length;r<i;r++)e[r]===t&&(n=r);return n}for(var l,a,u,s,f,c=t.abs(r-e[o(e,r)+1]),h=0,p=[],d=[];i>=c;)l=o(e,r+i),a=o(e,r),p[h]=(n[l]-2*n[a]+n[2*a-l])/(i*i),i/=2,h++;for(s=p.length,u=1;1!=s;){for(f=0;f<s-1;f++)d[f]=(t.pow(4,u)*p[f+1]-p[f])/(t.pow(4,u)-1);s=d.length,p=d,d=[],u++}return p},simpson:function(e,t,n,r){for(var i,o=(n-t)/r,l=e(t),a=[],u=t,s=0,f=1;u<=n;u+=o,s++)a[s]=u;for(i=a.length;f<i-1;f++)l+=(f%2!=0?4:2)*e(a[f]);return o/3*(l+e(n))},hermite:function(e,t,n,r){for(var i,o=e.length,l=0,a=0,u=[],s=[],f=[],c=[];a<o;a++){for(u[a]=1,i=0;i<o;i++)a!=i&&(u[a]*=(r-e[i])/(e[a]-e[i]));for(s[a]=0,i=0;i<o;i++)a!=i&&(s[a]+=1/(e[a]-e[i]));f[a]=(1-2*(r-e[a])*s[a])*(u[a]*u[a]),c[a]=(r-e[a])*(u[a]*u[a]),l+=f[a]*t[a]+c[a]*n[a]}return l},lagrange:function(e,t,n){for(var r,i,o=0,l=0,a=e.length;l<a;l++){for(i=t[l],r=0;r<a;r++)l!=r&&(i*=(n-e[r])/(e[l]-e[r]));o+=i}return o},cubic_spline:function(t,n,r){for(var i,o=t.length,l=0,a=[],u=[],s=[],f=[],c=[],h=[],p=[];l<o-1;l++)c[l]=t[l+1]-t[l];for(s[0]=0,l=1;l<o-1;l++)s[l]=3/c[l]*(n[l+1]-n[l])-3/c[l-1]*(n[l]-n[l-1]);for(l=1;l<o-1;l++)a[l]=[],u[l]=[],a[l][l-1]=c[l-1],a[l][l]=2*(c[l-1]+c[l]),a[l][l+1]=c[l],u[l][0]=s[l];for(f=e.multiply(e.inv(a),u),i=0;i<o-1;i++)h[i]=(n[i+1]-n[i])/c[i]-c[i]*(f[i+1][0]+2*f[i][0])/3,p[i]=(f[i+1][0]-f[i][0])/(3*c[i]);for(i=0;i<o&&!(t[i]>r);i++);return n[i-=1]+(r-t[i])*h[i]+e.sq(r-t[i])*f[i]+(r-t[i])*e.sq(r-t[i])*p[i]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){var n,r,i=t.length,o=t[0].length,l=0,a=[],u=[],s=[],f=[],c=[],h=[],p=[],d=[],g=[],v=[];for(l=0;l<i;l++)a[l]=e.sum(t[l])/o;for(l=0;l<o;l++)for(p[l]=[],n=0;n<i;n++)p[l][n]=t[n][l]-a[n];for(p=e.transpose(p),l=0;l<i;l++)for(d[l]=[],n=0;n<i;n++)d[l][n]=e.dot([p[l]],[p[n]])/(o-1);for(g=(s=e.jacobi(d))[0],u=s[1],v=e.transpose(g),l=0;l<u.length;l++)for(n=l;n<u.length;n++)u[l]<u[n]&&(r=u[l],u[l]=u[n],u[n]=r,f=v[l],v[l]=v[n],v[n]=f);for(h=e.transpose(p),l=0;l<i;l++)for(c[l]=[],n=0;n<h.length;n++)c[l][n]=e.dot([v[l]],[h[n]]);return[t,u,v,c]}}),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(n,r){var i=this;return r?(setTimeout((function(){r.call(i,e.fn[t].call(i,n))}),15),this):"number"==typeof e[t](this,n)?e[t](this,n):e(e[t](this,n))}}(t[n])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(e,Math),function(e,t){var n=[].slice,r=e.utils.isNumber,i=e.utils.isArray;function o(e,n,r,i){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var o=(e*n+r*i)/(n+i);return(e-r)/t.sqrt(o*(1-o)*(1/n+1/i))}e.extend({zscore:function(){var t=n.call(arguments);return r(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var r,o=n.call(arguments);return i(o[1])?(r=e.zscore(o[0],o[1],o[3]),1===o[2]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):o.length>2?(r=e.zscore(o[0],o[1],o[2]),1===o[3]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):(r=o[0],1===o[1]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(n,r,i){var o=t.abs(this.zscore(n,i));return 1===r?e.normal.cdf(-o,0,1):2*e.normal.cdf(-o,0,1)}}),e.extend({tscore:function(){var r=n.call(arguments);return 4===r.length?(r[0]-r[1])/(r[2]/t.sqrt(r[3])):(r[0]-e.mean(r[1]))/(e.stdev(r[1],!0)/t.sqrt(r[1].length))},ttest:function(){var i,o=n.call(arguments);return 5===o.length?(i=t.abs(e.tscore(o[0],o[1],o[2],o[3])),1===o[4]?e.studentt.cdf(-i,o[3]-1):2*e.studentt.cdf(-i,o[3]-1)):r(o[1])?(i=t.abs(o[0]),1==o[2]?e.studentt.cdf(-i,o[1]-1):2*e.studentt.cdf(-i,o[1]-1)):(i=t.abs(e.tscore(o[0],o[1])),1==o[2]?e.studentt.cdf(-i,o[1].length-1):2*e.studentt.cdf(-i,o[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(n,r){return 1===r?1-e.studentt.cdf(t.abs(this.tscore(n)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(n)),this.cols()-1)}}),e.extend({anovafscore:function(){var r,i,o,l,a,u,s,f,c=n.call(arguments);if(1===c.length){for(a=new Array(c[0].length),s=0;s<c[0].length;s++)a[s]=c[0][s];c=a}for(i=new Array,s=0;s<c.length;s++)i=i.concat(c[s]);for(o=e.mean(i),r=0,s=0;s<c.length;s++)r+=c[s].length*t.pow(e.mean(c[s])-o,2);for(r/=c.length-1,u=0,s=0;s<c.length;s++)for(l=e.mean(c[s]),f=0;f<c[s].length;f++)u+=t.pow(c[s][f]-l,2);return r/(u/=i.length-c.length)},anovaftest:function(){var t,i,o,l,a=n.call(arguments);if(r(a[0]))return 1-e.centralF.cdf(a[0],a[1],a[2]);var u=e.anovafscore(a);for(t=a.length-1,o=0,l=0;l<a.length;l++)o+=a[l].length;return i=o-t-1,1-e.centralF.cdf(u,t,i)},ftest:function(t,n,r){return 1-e.centralF.cdf(t,n,r)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var t,n=0;for(t=0;t<this.length;t++)n+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var i,o,l,a,u,s=n.call(arguments);return r(s[0])?(i=s[0],o=s[1],l=s[2],a=s[3],u=s[4]):(i=e.mean(s[0]),o=e.mean(s[1]),l=s[0].length,a=s[1].length,u=s[2]),t.abs(i-o)/(u*t.sqrt((1/l+1/a)/2))},qtest:function(){var t,r=n.call(arguments);3===r.length?(t=r[0],r=r.slice(1)):7===r.length?(t=e.qscore(r[0],r[1],r[2],r[3],r[4]),r=r.slice(5)):(t=e.qscore(r[0],r[1],r[2]),r=r.slice(3));var i=r[0],o=r[1];return 1-e.tukey.cdf(t,o,i-o)},tukeyhsd:function(t){for(var n=e.pooledstdev(t),r=t.map((function(t){return e.mean(t)})),i=t.reduce((function(e,t){return e+t.length}),0),o=[],l=0;l<t.length;++l)for(var a=l+1;a<t.length;++a){var u=e.qtest(r[l],r[a],t[l].length,t[a].length,n,i,t.length);o.push([[l,a],u])}return o}}),e.extend({normalci:function(){var r,i=n.call(arguments),o=new Array(2);return r=4===i.length?t.abs(e.normal.inv(i[1]/2,0,1)*i[2]/t.sqrt(i[3])):t.abs(e.normal.inv(i[1]/2,0,1)*e.stdev(i[2])/t.sqrt(i[2].length)),o[0]=i[0]-r,o[1]=i[0]+r,o},tci:function(){var r,i=n.call(arguments),o=new Array(2);return r=4===i.length?t.abs(e.studentt.inv(i[1]/2,i[3]-1)*i[2]/t.sqrt(i[3])):t.abs(e.studentt.inv(i[1]/2,i[2].length-1)*e.stdev(i[2],!0)/t.sqrt(i[2].length)),o[0]=i[0]-r,o[1]=i[0]+r,o},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,n){return e.normalci(t,n,this.toArray())},tci:function(t,n){return e.tci(t,n,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,n,r,i){var l=o(t,n,r,i);return e.ztest(l,1)},twoSidedDifferenceOfProportions:function(t,n,r,i){var l=o(t,n,r,i);return e.ztest(l,2)}})}(e,Math),e.models=function(){function t(t){var r=t[0].length;return e.arange(r).map((function(i){var o=e.arange(r).filter((function(e){return e!==i}));return n(e.col(t,i).map((function(e){return e[0]})),e.col(t,o))}))}function n(t,n){var r=t.length,i=n[0].length-1,o=r-i-1,l=e.lstsq(n,t),a=e.multiply(n,l.map((function(e){return[e]}))).map((function(e){return e[0]})),u=e.subtract(t,a),s=e.mean(t),f=e.sum(a.map((function(e){return Math.pow(e-s,2)}))),c=e.sum(t.map((function(e,t){return Math.pow(e-a[t],2)}))),h=f+c;return{exog:n,endog:t,nobs:r,df_model:i,df_resid:o,coef:l,predict:a,resid:u,ybar:s,SST:h,SSE:f,SSR:c,R2:f/h}}function r(n){var r=t(n.exog),i=Math.sqrt(n.SSR/n.df_resid),o=r.map((function(e){var t=e.SST,n=e.R2;return i/Math.sqrt(t*(1-n))})),l=n.coef.map((function(e,t){return(e-0)/o[t]})),a=l.map((function(t){var r=e.studentt.cdf(t,n.df_resid);return 2*(r>.5?1-r:r)})),u=e.studentt.inv(.975,n.df_resid),s=n.coef.map((function(e,t){var n=u*o[t];return[e-n,e+n]}));return{se:o,t:l,p:a,sigmaHat:i,interval95:s}}function i(t){var n,r,i,o=t.R2/t.df_model/((1-t.R2)/t.df_resid);return{F_statistic:o,pvalue:1-(n=o,r=t.df_model,i=t.df_resid,e.beta.cdf(n/(i/r+n),r/2,i/2))}}function o(e,t){var o=n(e,t),l=r(o),a=i(o),u=1-(1-o.R2)*((o.nobs-1)/o.df_resid);return o.t=l,o.f=a,o.adjust_R2=u,o}return{ols:o}}(),e.extend({buildxmatrix:function(){for(var t=new Array(arguments.length),n=0;n<arguments.length;n++){var r=[1];t[n]=r.concat(arguments[n])}return e(t)},builddxmatrix:function(){for(var t=new Array(arguments[0].length),n=0;n<arguments[0].length;n++){var r=[1];t[n]=r.concat(arguments[0][n])}return e(t)},buildjxmatrix:function(t){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return e.builddxmatrix(n)},buildymatrix:function(t){return e(t).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(t,n){var r,i,o,l,a;if(t.cols()==n.rows()){if(n.rows()>1){for(l=[],r=0;r<t.rows();r++)for(l[r]=[],i=0;i<n.cols();i++){for(a=0,o=0;o<t.cols();o++)a+=t.toArray()[r][o]*n.toArray()[o][i];l[r][i]=a}return e(l)}for(l=[],r=0;r<t.rows();r++)for(l[r]=[],i=0;i<n.cols();i++){for(a=0,o=0;o<t.cols();o++)a+=t.toArray()[r][o]*n.toArray()[i];l[r][i]=a}return e(l)}},regress:function(t,n){var r=e.xtranspxinv(t),i=t.transpose(),o=e.matrixmult(e(r),i);return e.matrixmult(o,n)},regresst:function(t,n,r){var i=e.regress(t,n),o={anova:{}},l=e.jMatYBar(t,i);o.yBar=l;var a=n.mean();o.anova.residuals=e.residuals(n,l),o.anova.ssr=e.ssr(l,a),o.anova.msr=o.anova.ssr/(t[0].length-1),o.anova.sse=e.sse(n,l),o.anova.mse=o.anova.sse/(n.length-(t[0].length-1)-1),o.anova.sst=e.sst(n,a),o.anova.mst=o.anova.sst/(n.length-1),o.anova.r2=1-o.anova.sse/o.anova.sst,o.anova.r2<0&&(o.anova.r2=0),o.anova.fratio=o.anova.msr/o.anova.mse,o.anova.pvalue=e.anovaftest(o.anova.fratio,t[0].length-1,n.length-(t[0].length-1)-1),o.anova.rmse=Math.sqrt(o.anova.mse),o.anova.r2adj=1-o.anova.mse/o.anova.mst,o.anova.r2adj<0&&(o.anova.r2adj=0),o.stats=new Array(t[0].length);for(var u,s,f,c=e.xtranspxinv(t),h=0;h<i.length;h++)u=Math.sqrt(o.anova.mse*Math.abs(c[h][h])),s=Math.abs(i[h]/u),f=e.ttest(s,n.length-t[0].length-1,r),o.stats[h]=[i[h],u,s,f];return o.regress=i,o},xtranspx:function(t){return e.matrixmult(t.transpose(),t)},xtranspxinv:function(t){var n=e.matrixmult(t.transpose(),t);return e.inv(n)},jMatYBar:function(t,n){var r=e.matrixmult(t,n);return new e(r)},residuals:function(t,n){return e.matrixsubtract(t,n)},ssr:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},sse:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},sst:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},matrixsubtract:function(t,n){for(var r=new Array(t.length),i=0;i<t.length;i++){r[i]=new Array(t[i].length);for(var o=0;o<t[i].length;o++)r[i][o]=t[i][o]-n[i][o]}return e(r)}}),e.jStat=e,e}()}({get exports(){return _a},set exports(e){_a=e}});let Na=_a.jStat,Ia={beta:{pdf:Na.beta.pdf,cdf:Na.beta.cdf,inv:Na.beta.inv,sample:Na.beta.sample},centralF:{pdf:Na.centralF.pdf,cdf:Na.centralF.cdf,inv:Na.centralF.inv,sample:Na.centralF.sample},cauchy:{pdf:Na.cauchy.pdf,cdf:Na.cauchy.cdf,inv:Na.cauchy.inv,sample:Na.cauchy.sample},chisquare:{pdf:Na.chisquare.pdf,cdf:Na.chisquare.cdf,inv:Na.chisquare.inv,sample:Na.chisquare.sample},exponential:{pdf:Na.exponential.pdf,cdf:Na.exponential.cdf,inv:Na.exponential.inv,sample:Na.exponential.sample},gamma:{pdf:Na.gamma.pdf,cdf:Na.gamma.cdf,inv:Na.gamma.inv,sample:Na.gamma.sample},invgamma:{pdf:Na.invgamma.pdf,cdf:Na.invgamma.cdf,inv:Na.invgamma.inv,sample:Na.invgamma.sample},kumaraswamy:{pdf:Na.kumaraswamy.pdf,cdf:Na.kumaraswamy.cdf,inv:Na.kumaraswamy.inv,sample:Na.kumaraswamy.sample},lognormal:{pdf:Na.lognormal.pdf,cdf:Na.lognormal.cdf,inv:Na.lognormal.inv,sample:Na.lognormal.sample},normal:{pdf:Na.normal.pdf,cdf:Na.normal.cdf,inv:Na.normal.inv,sample:Na.normal.sample},pareto:{pdf:Na.pareto.pdf,cdf:Na.pareto.cdf,inv:Na.pareto.inv,sample:(e,t)=>{throw new Error("invalid pareto.sample")}},studentt:{pdf:Na.studentt.pdf,cdf:Na.studentt.cdf,inv:Na.studentt.inv,sample:Na.studentt.sample},tukey:{pdf:(e,t,n)=>{throw new Error("invalid tukey.pdf")},cdf:Na.tukey.cdf,inv:Na.tukey.inv,sample:(e,t)=>{throw new Error("invalid tukey.sample")}},weibull:{pdf:Na.weibull.pdf,cdf:Na.weibull.cdf,inv:Na.weibull.inv,sample:Na.weibull.sample},uniform:{pdf:Na.uniform.pdf,cdf:Na.uniform.cdf,inv:Na.uniform.inv,sample:Na.uniform.sample},binomial:{pdf:Na.binomial.pdf,cdf:Na.binomial.cdf,inv:(e,t,n)=>{throw new Error("invalid binomial.inv")},sample:(e,t)=>{throw new Error("invalid binomial.sample")}},negbin:{pdf:Na.negbin.pdf,cdf:Na.negbin.cdf,inv:(e,t,n)=>{throw new Error("invalid negbin.inv")},sample:(e,t)=>{throw new Error("invalid negbin.sample")}},hypgeom:{pdf:Na.hypgeom.pdf,cdf:Na.hypgeom.cdf,inv:(e,t,n,r)=>{throw new Error("invalid hypgeom.inv")},sample:(e,t,n)=>{throw new Error("invalid hypgeom.sample")}},poisson:{pdf:Na.poisson.pdf,cdf:Na.poisson.cdf,inv:(e,t)=>{throw new Error("invalid poisson.inv")},sample:Na.poisson.sample},triangular:{pdf:Na.triangular.pdf,cdf:Na.triangular.cdf,inv:(e,t,n,r)=>{throw new Error("invalid triangular.inv")},sample:Na.triangular.sample},arcsine:{pdf:Na.arcsine.pdf,cdf:Na.arcsine.cdf,inv:Na.arcsine.inv,sample:Na.arcsine.sample},std:e=>Na.stdev(e,!1),sampleStd:e=>Na.stdev(e,!0),emquantile:(e,t)=>Na.quantiles(e,[t],.4,.4)[0],emquantiles:Na.quantiles,percentile:Na.percentile};function za(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var l=e[i];t(r,l,n(l),e)}return r}function Ga(e,t,n,r){return ai(e,(function(e,i,o){t(r,e,n(e),o)})),r}var Ba,Ua,Qa=Object.prototype.hasOwnProperty,Ha=(Ba=function(e,t,n){Qa.call(e,n)?e[n].push(t):go(e,n,[t])},function(e,n){var r=t(e)?za:Ga,i=Ua?Ua():{};return r(e,Ba,so(n),i)}),Wa=Ha,Va=Array.prototype.reverse;function Ya(e){return null==e?e:Va.call(e)}function Za(e){if(!dt(e)&&!vt(e)&&!m(e))return"";let t="";try{t=String(e)}catch(e){}try{t=e.toString()}catch(e){}return t}function Ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ja(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===ut(e))return[];if(!dt(t))return[];let r=ve(n,"ranger.countHalf");Ca(r)||(r=5),r=Kl(r);let i=ve(n,"ranger.depthHalf");vt(i)||(i=.25),i=Lt(i);let o=ve(n,"keyDepth");dt(o)||(o="depth");let l=ve(n,"methodSmooth");"average"!==l&&"averageIn95"!==l&&"maxCount"!==l&&(l="average");let a=[];if(fi(e,(e=>{let n=ve(e,o),r=ve(e,t);vt(n)&&(dt(r)||vt(r))&&(e[o]=Lt(n),e[t]=r,a.push(e))})),0===ut(a))return[];a=ha(a,o);let u=ut(a)-1,s=[];return fi(a,((e,n)=>{let f=n,c=n;if(null!==r)f=Math.max(n-r,0),c=Math.min(n+r,u);else if(null!==i){for(let t=n;t>=0;t--){if(!(Math.abs(a[t][o]-e[o])<i))break;f=t}for(let t=n;t<=u;t++){if(!(Math.abs(a[t][o]-e[o])<i))break;c=t}}let h=function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Da(e))return[];if(!Ca(t))return[];if(t=Kl(t),La(r)){if(t>=e.length)return[];n=Ra(e,t)}else{if(!Ca(r))return[];if(r=Kl(r),t>=e.length||r>=e.length)return[];let i=Ma(t,r+1);n=Ra(e,i)}return n}(a,f,c),p=null;if("average"===l){let e=Aa(co(h,t));p={[t]:e}}else if("averageIn95"===l){let e=co(h,t),n=Aa(e),r=function(e){return Pa(e)?0===ut(e)||ut(e=co(e=ja(e,(e=>vt(e))),Lt))<=1?null:Ia.sampleStd(e):null}(e),i=[];fi(h,(e=>{let o=ve(e,t);vt(o)&&(o=Lt(o),o>=n-2*r&&o<=n+2*r&&i.push(o))}));let o=Aa(i);p={[t]:o}}else if("maxCount"===l){let e=function(e){if(!Pa(e))return[];if(0===ut(e))return[];let t=[];if(fi(e,(e=>{(vt(e)||dt(e))&&t.push(Za(e))})),0===ut(t))return[];t=co(t,(e=>({v:e})));let n=Wa(t,"v");return n=co(n,((e,t)=>({key:t,count:ut(e)}))),n=ha(n,"count"),n=Ya(n),n}(co(h,t)),n=ve(e,"0.key",""),r=ve(e,"0.count","");p={[t]:n,count:r}}let d=Xa(Xa({},e),p);s.push(d)})),s}function eu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!Da(e))return n;let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"stateConn");return"conn"!==o&&"overlap"!==o&&(o="conn"),fi(e,((e,t)=>{let o=ve(e,r,null),l=ve(e,i,null);vt(o)||n.push(`第 ${t} 樣本起始深度${r}[${o}]非有效數字`),vt(l)||n.push(`第 ${t} 樣本結束深度${i}[${l}]非有效數字`)})),fi(e=ha(e,(e=>Lt(e[r]))),((t,l)=>{let a=ve(t,r,null),u=ve(t,i,null);if(a=Lt(a),u=Lt(u),gr(a,">",u)&&n.push(`第 ${l} 個樣本起始深度${r}[${a}]大於結束深度${i}[${u}]`),0===l)return!0;let s=ve(e,l-1),f=ve(s,i,null);f=Lt(f),"conn"===o?gr(f,"!==",a)&&n.push(`第 ${l} 樣本結束深度${i}[${f}]不等於第 ${l+1} 個樣本起始深度${r}[${a}]`):"overlap"===o&&gr(f,">",a)&&n.push(`第 ${l} 樣本結束深度${i}[${f}]大於第 ${l+1} 個樣本起始深度${r}[${a}]`)})),n}let tu=va.rw;function nu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!vt(e))throw new Error(`v[${e}] is not a number`);if(e=Lt(e),!vt(t))throw new Error(`depth[${t}] is not a number`);if(t=Lt(t),"kPa"!==n&&"MPa"!==n)throw new Error(`unit[${n}] need kPa or MPa`);let i=2*t,o=25*t;if("MPa"===n&&(i/=1e3,o/=1e3),dt(r)||(r="v"),e<i)throw new Error(`${r}[${e}](${n}) < min[${i}](${n}) in depth[${t}](m)`);if(e>o)throw new Error(`${r}[${e}](${n}) > max[${o}](${n}) in depth[${t}](m)`)}function ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"keyDepth");dt(r)||(r="depth");let i=ve(n,"keyDepthStart");dt(i)||(i="depthStart");let o=ve(n,"keyDepthEnd");dt(o)||(o="depthEnd"),e=wl(e);let l=0;return e=co(e,((e,n)=>{let a=ve(e,"err",""),u=ve(e,i,null),s=ve(e,o,null);try{if(!vt(u))throw new Error(`第 ${n} 樣本起始深度(${i})非數值: ${u}`);if(!vt(s))throw new Error(`第 ${n} 樣本結束深度(${o})非數值: ${s}`);u=Lt(u),s=Lt(s),e[r]=(s+u)/2;let a=null;if(u<t&&s>t){let r=ve(e,"rsat",null);if(!vt(r))throw new Error(`第 ${n} 樣本飽和單位重(rsat)非數值: ${r}`);let i=ve(e,"rd",null);if(!vt(i))throw new Error(`第 ${n} 樣本乾單位重(rd)非數值: ${i}`);i=Lt(i);let o=t-u,l=s-t;a=(o*i+l*r)/(o+l)}else if(s<=t){let t=ve(e,"rd",null);if(!vt(t))throw new Error(`第 ${n} 樣本乾單位重(rd)非數值: ${t}`);a=t}else{if(!(u>=t))throw new Error("深度條件出現非預期情形");{let t=ve(e,"rsat",null);if(!vt(t))throw new Error(`第 ${n} 樣本飽和單位重(rsat)非數值: ${t}`);a=t}}0===l&&u>0&&(l=u*a);let f=(s-u)*a,c=l+f/2;e.sv=c,l+=f;let h=Math.max((u+s)/2-t,0)*tu;e.svp=Math.max(c-h,0)}catch(t){let n=t.toString();""===a?a=n:a.indexOf(n)<0&&(a+=`, ${n}`),e.sv="",e.svp="",e.err=a}return e})),e}function iu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Da(e))throw new Error("無有效數據");let n=ve(t,"unitSvSvp");if("kPa"!==n&&"MPa"!==n)throw new Error(`opt.unitSvSvp[${n}] need kPa or MPa`);let r=ve(t,"keyDepth");dt(r)||(r="depth");let i=ve(t,"keyDepthStart");dt(i)||(i="depthStart");let o=ve(t,"keyDepthEnd");dt(o)||(o="depthEnd");let l=eu(e=wl(e),t);if(ut(l)>0)throw new Error(ft(l,"; "));e=ha(e,(e=>Lt(e[i])));let a=ve(t,"waterLevelUsual");vt(a)||(a=0),a=Lt(a);let u=ve(t,"waterLevelDesign");vt(u)||(u=0),u=Lt(u);let s=ru(e,a,{keyDepth:r,keyDepthStart:i,keyDepthEnd:o}),f=ru(e,u,{keyDepth:r,keyDepthStart:i,keyDepthEnd:o});return e=co(e,((e,t)=>{e.waterLevelUsual=a,e.waterLevelDesign=u;let n=s[t],i=f[t];return e.sv=n.sv,e.svpUsual=n.svp,e.svpDesign=i.svp,e[r]=n[r],e})),"MPa"===n&&(e=co(e,(e=>(e.sv/=1e3,e.svpUsual/=1e3,e.svpDesign/=1e3,e)))),e}var ou={checkVerticalStress:nu,calcVerticalStress:iu};function lu(e,t){return!!zl(e)&&(!(!dt(t)&&!vt(t))&&t in e)}let au=null;function uu(){return null!==au||(au=[{nameCht:"礫質砂土",nameEng:"Gravelly sand",colorPrimary:"#467dec",colorSecondary:"rgb(173, 215, 255)",min:0,max:1.31},{nameCht:"砂土-純砂至粉質砂土",nameEng:"Sands-clean sand to silty sand",colorPrimary:"linear-gradient(90deg, #dad74d 0%, #467dec 100%)",colorSecondary:"rgb(193, 233, 247)",min:1.31,max:2.05},{nameCht:"混和砂土-粉質砂土至砂質粉土",nameEng:"Sand mixtures-silty sand to sandy silt",colorPrimary:"linear-gradient(90deg, #467dec 0%, #dad74d 100%)",colorSecondary:"rgb(223, 223, 247)",min:2.05,max:2.6},{nameCht:"粉土混合物-黏質粉土至粉質黏土",nameEng:"Silt mixtures-clayey silt to silty clay",colorPrimary:"linear-gradient(90deg, #ea4e2d 0%, #dad74d 100%)",colorSecondary:"rgb(253, 223, 225)",min:2.6,max:2.95},{nameCht:"黏土",nameEng:"Clays",colorPrimary:"#ea4e2d",colorSecondary:"rgb(253, 203, 207)",min:2.95,max:3.6},{nameCht:"有機土",nameEng:"Organic soils",colorPrimary:"#ea4e2d",colorSecondary:"rgb(255, 193, 227)",min:3.6,max:99}]),au}var su={getIcInfor:uu};function fu(e,t){if(!Da(e))return null;if(!Da(t))return null;let n=e[0],r=e[1],i=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let l=t[e][0],a=t[e][1],u=t[o][0],s=t[o][1];a>r!=s>r&&n<(u-l)*(r-a)/(s-a)+l&&(i=!i)}return i}let cu={zone1:[[.8042788645514245,-1],[1.4,-1],[1.4,-.04961518419811251],[1.3360639947293758,.00515510285998122],[.8042788645514245,-1]],zone2:[[.22901013093819989,-1],[.7989205421525307,-1],[.535671,-.732631],[.267238,-.973016],[.22901013093819989,-1]],zone3:[[-.0827455,-.507509],[.19919261999759594,-1],[.22901013093819989,-1],[.267238,-.973016],[.535671,-.732631],[.7989205421525307,-1],[.8042788645514245,-1],[1.3360639947293758,.00515510285998122],[.7507188345305402,.5065865313087334],[.00899762,-.488431],[-.0798201488308562,-.39581841738701223],[-.0827455,-.507509]],zone4:[[-.0798201488308562,-.39581841738701223],[.00899762,-.488431],[.75071883453054,.5065865313087332],[.46563663689560464,.750800002787402],[.00559973,-.282387],[-.0748262901884575,-.20092818800278278],[-.0776487,-.312912],[-.0798201488308562,-.39581841738701223]],zone5:[[-.0748262901884575,-.20092818800278278],[.00559973,-.282387],[.4656366368956047,.7508000027874022],[.28177542293386015,.9083032972911816],[.00559973,-.0610806],[-.06726062655330566,.04677010378206706],[-.0725518,-.110684],[-.0748262901884575,-.20092818800278278]],zone6:[[-.06726062655330566,.04677010378206706],[.00559973,-.0610806],[.28177542293386015,.9083032972911816],[.219667,.961508],[.19999604525814957,1.0454031412933176],[.00220183,.247985],[-.06071692978405572,.34104143783205454],[-.0623581,.274695],[-.065756,.0915446],[-.06726062655330566,.04677010378206706]],zone7:[[-.06071692978405572,.34104143783205454],[.00220183,.247985],[.19999604525814962,1.0454031412933178],[.1466205435691607,1.2730456382928406],[.00390078,.522711],[-.053725768119182775,.6023554362478534],[-.0555624,.54942],[-.06071692978405572,.34104143783205454]],zone8:[[-.053725768119182775,.6023554362478534],[.00390078,.522711],[.1466205435691607,1.2730456382928403],[.09752669166574157,1.4824272212471161],[.00390078,.866117],[-.042929930936118785,.9237944636517381],[-.0453687,.843223],[-.053725768119182775,.6023554362478534]],zone9:[[0,.8709212639576908],[.00390078,.866117],[.09752669166574157,1.4824272212471163],[.055798348065744074,1.6603954657070483],[.00390078,1.36215],[0,1.3672038510406228],[0,.8709212639576908]],zone10:[[0,1.3672038510406228],[.00390078,1.36215],[.055798348065744074,1.6603954657070483],[.0514713,1.67885],[.05300885596731013,2],[0,2],[0,1.3672038510406228]],"zone9,10,11,12":[[-.042929930936118785,.9237944636517381],[0,.8709212639576908],[0,2],[-.029975073717927975,2],[-.0283792,1.41938],[-.035175,1.18],[-.042929930936118785,.9237944636517381]]},hu={zone1:[[0,-1],[2.599004449,-.910151233],[2.59819,-.9033989],[2.47734,-.785331],[2.38066,-.683363],[2.22356,-.592129],[2.06647,-.479428],[1.90937,-.382826],[1.75227,-.307692],[1.51057,-.216458],[1.26888,-.152057],[.954683,-.103757],[.628399,-.0554559999999999],[.302115,-.0232560000000001],[0,.00770169199999993],[0,-1]],zone2:[[0,-1],[8,-1],[8,-.312420334],[7.98792,-.313059],[4.03625,-.860465],[0,-1]],zone3:[[1.91607919296796,-.386951534430881],[2.06647,-.479428],[2.22356,-.592129],[2.38066,-.683363],[2.47734,-.785331],[2.59819,-.9033989],[2.59900444877071,-.910151233011032],[4.03625,-.860465],[7.98792,-.313059],[8,-.312420334410403],[8,.73886157340706],[5.21686256331027,.74843976095338],[5.20846,.74419],[5.0997,.67442],[5.00302,.60465],[4.84592,.50805],[4.65257,.41682],[4.4713,.33095],[4.27795,.25045],[4.07251,.17531],[3.86707,.0948100000000001],[3.67372,.0357799999999999],[3.49245,-.012522],[3.29909,-.08229],[3.08157,-.13059],[2.87613,-.184258],[2.67069,-.243292],[2.429,-.291592],[2.1994,-.334526],[1.91607919296796,-.386951534430881]],zone4:[[1.51477387839753,-.218044829299632],[1.75227,-.307692],[1.90937,-.382826],[1.91607919296796,-.386951534430881],[2.1994,-.334526],[2.429,-.291592],[2.67069,-.243292],[2.87613,-.184258],[3.08157,-.13059],[3.29909,-.08229],[3.49245,-.012522],[3.67372,.0357799999999999],[3.86707,.0948100000000001],[4.07251,.17531],[4.27795,.25045],[4.4713,.33095],[4.65257,.41682],[4.84592,.50805],[5.00302,.60465],[5.0997,.67442],[5.20846,.74419],[5.21686256331027,.74843976095338],[4.89426,.74955],[4.59943743716958,.84244763970655],[4.59215,.84079],[4.41088,.72272],[4.29003,.63148],[4.14502,.56172],[4.01208,.48122],[3.87915,.41682],[3.72205,.35242],[3.56495,.28801],[3.40785,.23435],[3.19033,.16995],[2.97281,.11091],[2.7432,.04114],[2.50151,-.012522],[2.22356,-.08229],[1.98187,-.135957],[1.7281,-.189624],[1.51477387839753,-.218044829299632]],zone5:[[.60423,-.0500890000000001],[.604258597461038,-.053073655288784],[.628399,-.0554559999999999],[.954683,-.103757],[1.26888,-.152057],[1.51057,-.216458],[1.51477387839753,-.218044829299632],[1.7281,-.189624],[1.98187,-.135957],[2.22356,-.08229],[2.50151,-.012522],[2.7432,.04114],[2.97281,.11091],[3.19033,.16995],[3.40785,.23435],[3.56495,.28801],[3.72205,.35242],[3.87915,.41682],[4.01208,.48122],[4.14502,.56172],[4.29003,.63148],[4.41088,.72272],[4.59215,.84079],[4.59943743716958,.84244763970655],[3.89979234877181,1.06290355298692],[3.80665,.98569],[3.66163,.89982],[3.48036,.78712],[3.29909,.68515],[3.08157,.59392],[2.88822,.50805],[2.67069,.42218],[2.34441,.32021],[2.09063,.25581],[1.81269,.18068],[1.4864,.10555],[1.22054,.0518799999999999],[.89426,-.012522],[.60423,-.0500890000000001]],zone6:[[0,.00770169230769002],[.302115,-.0232560000000001],[.604258597461038,-.053073655288784],[.60423,-.0500890000000001],[.89426,-.012522],[1.22054,.0518799999999999],[1.4864,.10555],[1.81269,.18068],[2.09063,.25581],[2.34441,.32021],[2.67069,.42218],[2.88822,.50805],[3.08157,.59392],[3.29909,.68515],[3.48036,.78712],[3.66163,.89982],[3.80665,.98569],[3.89979234877181,1.06290355298692],[3.22606294765238,1.27519351669947],[3.04532,1.17352],[2.83988,1.05546],[2.62236,.95349],[2.429,.85152],[2.18731,.76029],[1.9577,.66905],[1.71601,.58318],[1.42598,.48122],[1.12387,.38998],[.809668,.32021],[.422961,.23435],[.0120846,.17531],[0,.17356],[0,.00770169230769002]],zone7:[[0,.17356],[.0120846,.17531],[.422961,.23435],[.809668,.32021],[1.12387,.38998],[1.42598,.48122],[1.71601,.58318],[1.9577,.66905],[2.18731,.76029],[2.429,.85152],[2.62236,.95349],[2.83988,1.05546],[3.04532,1.17352],[3.22606294765237,1.27519351669947],[2.42760757719909,1.52678423151461],[2.22356,1.38819],[2.07855,1.27549],[1.89728,1.16279],[1.69184,1.05009],[1.43807,.92129],[1.20846,.81932],[.930514,.72809],[.640483,.63685],[.314199,.54025],[0,.48856778143308],[0,.17356]],zone8:[[0,.48856778143308],[.314199,.54025],[.640483,.63685],[.930514,.72809],[1.20846,.81932],[1.43807,.92129],[1.69184,1.05009],[1.89728,1.16279],[2.07855,1.27549],[2.22356,1.38819],[2.42760757719909,1.52678423151461],[2.3565,1.54919],[2.18731,1.60823],[2.06647,1.6458],[1.98187,1.7102],[1.92145,1.78533],[1.84894,1.87657],[1.83686,2],[1.78852,1.86047],[1.71601,1.72093],[1.60725,1.5653],[1.4864,1.44723],[1.34139,1.33989],[1.22054,1.24866],[1.06344,1.14669],[.89426,1.07692],[.712991,.99642],[.386707,.91592],[0,.85689],[0,.48856778143308]],zone9:[[0,.85689],[.386707,.91592],[.712991,.99642],[.89426,1.07692],[1.06344,1.14669],[1.22054,1.24866],[1.34139,1.33989],[1.4864,1.44723],[1.60725,1.5653],[1.71601,1.72093],[1.78852,1.86047],[1.83686,2],[1.22054,2],[1.22054,1.99463],[1.11178,1.8229],[.990937,1.68873],[.845921,1.54919],[.652568,1.44723],[.386707,1.35063],[0,1.25175000154968],[0,.85689]],zone10:[[0,1.25175000154968],[.386707,1.35063],[.652568,1.44723],[.845921,1.54919],[.990937,1.68873],[1.11178,1.8229],[1.22054,1.99463],[1.22054,2],[0,2],[0,1.25175000154968]],zone11:[[3.89979234877181,1.06290355298692],[4.89426,.74955],[8,.73886157340706],[8,2],[4.70091,2],[4.59215,1.65116],[4.41088,1.50626],[4.25378,1.38283],[4.13293,1.26476],[3.98792,1.13596],[3.89979234877181,1.06290355298692]],zone12:[[1.83686,2],[1.84894,1.87657],[1.92145,1.78533],[1.98187,1.7102],[2.06647,1.6458],[2.18731,1.60823],[2.3565,1.54919],[3.89979234877181,1.06290355298692],[3.98792,1.13596],[4.13293,1.26476],[4.25378,1.38283],[4.41088,1.50626],[4.59215,1.65116],[4.70091,2],[1.83686,2]]},pu={zone1:[[.814956350795433,0],[1.4,0],[1.4,1.0444774529587604],[.814956350795433,0]],zone2:[[.15755797913451555,0],[.8081353465726996,0],[.803677,.00955108],[.542358,.411052],[.163577,.00955108],[.15755797913451555,0]],zone3:[[-.557635,1.27767],[.135961,.0225141],[.14709816115300722,0],[.15755797913451555,0],[.163577,.00955108],[.542358,.411052],[.803677,.00955108],[.8081353465726996,0],[.8159217107198008,0],[.824794,.015206],[1.38835,1.02178],[1.3952840233278456,1.0277257015798282],[.6051580468079697,1.6769417299522127],[.0144398,.684374],[-.389417,1.78897],[-.3965860167997673,1.8080830326156345],[-.557635,1.27767]],zone4:[[-.3965860167997673,1.8080830326156345],[-.389417,1.78897],[.0144398,.684374],[.6051580468079698,1.6769417299522127],[.4233286829382924,1.8263439024676476],[.01312,1.05006],[-.3126662899731374,2.0844717183302555],[-.3965860167997673,1.8080830326156345]],zone5:[[-.3126662899731374,2.0844717183302555],[.01312,1.05006],[.4233286829382924,1.8263439024676478],[.23050362977173397,1.9847808086162937],[.01312,1.46853],[-.24501712858513175,2.307273477973186],[-.3126662899731374,2.0844717183302555]],zone6:[[-.24501712858513178,2.307273477973186],[.01312,1.46853],[.23050362977173397,1.9847808086162937],[.182054,2.02459],[.14155632003411384,2.4608700593991886],[.0157596,2.2376],[-.15640870819128455,2.5991043237348594],[-.24501712858513178,2.307273477973186]],zone7:[[-.15640870819128455,2.5991043237348594],[.0157596,2.2376],[.14155632003411384,2.4608700593991886],[.091511603746722,3],[-.0346850003225585,3],[-.15640870819128455,2.5991043237348594]]},du={zone1:[[-1,0],[.214255,0],[.214255,.0100411],[.20255,.0539655],[.183822,.106126],[.165093,.155541],[.139342,.213191],[.113591,.276333],[.0808163,.328493],[.0574059,.386144],[.0269725,.438304],[-.00814305,.484973],[-.0385765,.520662],[-.0690099,.567332],[-.104125,.605766],[-.143923,.644199],[-.183721,.677143],[-.223518,.712831],[-.260975,.74852],[-.300772,.770482],[-.338229,.797935],[-.375685,.819897],[-.420165,.84735],[-.459963,.869312],[-.509124,.894019],[-.555945,.915981],[-.609789,.932453],[-.651928,.943434],[-.70343,.959906],[-.754933,.973632],[-.8158,.984613],[-.871985,.990104],[-.935193,.998],[-.982013,.995594],[-1,.9964730699272073],[-1,0]],zone2:[[.2064750618712659,.039236240054828495],[.214255,.0100411],[.214255,0],[1,0],[1,.8318045794934391],[.99382,.819897],[.965727,.762246],[.930612,.704595],[.897837,.638709],[.860381,.592039],[.827606,.55086],[.797173,.50419],[.748011,.441049],[.715237,.391634],[.682462,.344965],[.645006,.306531],[.60989,.279078],[.56541,.243389],[.516249,.213191],[.471769,.174758],[.417925,.14456],[.366422,.114362],[.310238,.0814182],[.261076,.059456],[.2064750618712659,.039236240054828495]],zone3:[[-.1691945840894161,.6651183192180945],[-.143923,.644199],[-.104125,.605766],[-.0690099,.567332],[-.0385765,.520662],[-.00814305,.484973],[.0269725,.438304],[.0574059,.386144],[.0808163,.328493],[.113591,.276333],[.139342,.213191],[.165093,.155541],[.183822,.106126],[.20255,.0539655],[.2064750618712659,.039236240054828495],[.261076,.059456],[.310238,.0814182],[.366422,.114362],[.417925,.14456],[.471769,.174758],[.516249,.213191],[.56541,.243389],[.60989,.279078],[.645006,.306531],[.682462,.344965],[.715237,.391634],[.748011,.441049],[.797173,.50419],[.827606,.55086],[.860381,.592039],[.897837,.638709],[.930612,.704595],[.965727,.762246],[.99382,.819897],[1,.8318045794934391],[1,1.743385534886701],[.965727,1.73133],[.911883,1.73682],[.839311,1.76153],[.7838498913648442,1.785615676370634],[.778445,1.75604],[.762057,1.69015],[.743329,1.62426],[.717578,1.56387],[.689485,1.49523],[.652029,1.43209],[.619254,1.36895],[.577116,1.30032],[.530295,1.23992],[.495179,1.18227],[.453041,1.13286],[.40622,1.07521],[.366422,1.03677],[.29385,.965396],[.237666,.918727],[.174458,.866567],[.106568,.819897],[.0410187,.773227],[-.0268713,.732048],[-.0994434,.690869],[-.1691945840894161,.6651183192180945]],zone4:[[-.5572591210207868,.9163830169648318],[-.555945,.915981],[-.509124,.894019],[-.459963,.869312],[-.420165,.84735],[-.375685,.819897],[-.338229,.797935],[-.300772,.770482],[-.260975,.74852],[-.223518,.712831],[-.183721,.677143],[-.1691945840894161,.6651183192180945],[-.0994434,.690869],[-.0268713,.732048],[.0410187,.773227],[.106568,.819897],[.174458,.866567],[.237666,.918727],[.29385,.965396],[.366422,1.03677],[.40622,1.07521],[.453041,1.13286],[.495179,1.18227],[.530295,1.23992],[.577116,1.30032],[.619254,1.36895],[.652029,1.43209],[.689485,1.49523],[.717578,1.56387],[.743329,1.62426],[.762057,1.69015],[.778445,1.75604],[.7838498913648442,1.785615676370634],[.776103,1.78898],[.733965,1.81918],[.689485,1.8631],[.652029,1.90428],[.614572,1.9482],[.5812671176412162,1.992142954030625],[.556046,1.91252],[.525613,1.83016],[.492838,1.74505],[.453041,1.6627],[.422607,1.6023],[.373446,1.54739],[.324284,1.48425],[.277463,1.44582],[.22596,1.3964],[.146365,1.33052],[.0714521,1.27012],[.00590315,1.20973],[-.0690099,1.15757],[-.134559,1.12188],[-.209472,1.07521],[-.293749,1.03128],[-.36398,1.00108],[-.445916,.965396],[-.523171,.929708],[-.5572591210207868,.9163830169648318]],zone5:[[-1,.9964730699272073],[-.982013,.995594],[-.935193,.998],[-.871985,.990104],[-.8158,.984613],[-.754933,.973632],[-.70343,.959906],[-.651928,.943434],[-.609789,.932453],[-.5572591210207868,.9163830169648318],[-.523171,.929708],[-.445916,.965396],[-.36398,1.00108],[-.293749,1.03128],[-.209472,1.07521],[-.134559,1.12188],[-.0690099,1.15757],[.00590315,1.20973],[.0714521,1.27012],[.146365,1.33052],[.22596,1.3964],[.277463,1.44582],[.324284,1.48425],[.373446,1.54739],[.422607,1.6023],[.453041,1.6627],[.492838,1.74505],[.525613,1.83016],[.556046,1.91252],[.5812671176412162,1.992142954030625],[.577116,1.99762],[.544341,2.0388],[.516249,2.10194],[.478792,2.14861],[.453041,2.20901],[.420266,2.2694],[.392174,2.3298],[.3884063655271938,2.33783211915801],[.375787,2.31607],[.343012,2.25018],[.305556,2.17332],[.263417,2.11018],[.223619,2.04429],[.165093,1.97291],[.113591,1.91526],[.062088,1.8631],[.00356212,1.8082],[-.0502817,1.76976],[-.111149,1.72584],[-.179039,1.67917],[-.230541,1.64348],[-.312478,1.59681],[-.40846,1.56387],[-.488055,1.53092],[-.58872,1.49798],[-.672997,1.47876],[-.773661,1.45955],[-.864962,1.44856],[-.944557,1.44307],[-1,1.4377631547427059],[-1,.9964730699272073]],zone6:[[-1,1.4377631547427059],[-.944557,1.44307],[-.864962,1.44856],[-.773661,1.45955],[-.672997,1.47876],[-.58872,1.49798],[-.488055,1.53092],[-.40846,1.56387],[-.312478,1.59681],[-.230541,1.64348],[-.179039,1.67917],[-.111149,1.72584],[-.0502817,1.76976],[.00356212,1.8082],[.062088,1.8631],[.113591,1.91526],[.165093,1.97291],[.223619,2.04429],[.263417,2.11018],[.305556,2.17332],[.343012,2.25018],[.375787,2.31607],[.3884063655271938,2.33783211915801],[.366422,2.3847],[.347694,2.42314],[.328966,2.47255],[.303215,2.51922],[.289168,2.56864],[.263417,2.62354],[.24703,2.66747],[.232983,2.71688],[.216596,2.75531],[.200209,2.81022],[.186163,2.85689],[.169776,2.9118],[.148706,2.95847],[.1412503458588957,3],[-.001459668032786902,3],[-.00346099,2.98592],[-.0385765,2.90356],[-.073692,2.83218],[-.118172,2.75531],[-.16031,2.68394],[-.200108,2.62354],[-.244588,2.57687],[-.29609,2.53295],[-.352275,2.48902],[-.403778,2.44784],[-.471668,2.40941],[-.527853,2.36823],[-.586379,2.33529],[-.649586,2.30509],[-.726841,2.27215],[-.804095,2.24744],[-.881349,2.21999],[-.956262,2.20077],[-1,2.1949642579667628],[-1,1.4377631547427059]],zone7:[[-1,2.1949642579667628],[-.956262,2.20077],[-.881349,2.21999],[-.804095,2.24744],[-.726841,2.27215],[-.649586,2.30509],[-.586379,2.33529],[-.527853,2.36823],[-.471668,2.40941],[-.403778,2.44784],[-.352275,2.48902],[-.29609,2.53295],[-.244588,2.57687],[-.200108,2.62354],[-.16031,2.68394],[-.118172,2.75531],[-.073692,2.83218],[-.0385765,2.90356],[-.00346099,2.98592],[-.001459668032786902,3],[-1,3],[-1,2.1949642579667628]],zone8:[[.1412503458588957,3],[.148706,2.95847],[.169776,2.9118],[.186163,2.85689],[.200209,2.81022],[.216596,2.75531],[.232983,2.71688],[.24703,2.66747],[.263417,2.62354],[.289168,2.56864],[.303215,2.51922],[.328966,2.47255],[.347694,2.42314],[.366422,2.3847],[.392174,2.3298],[.420266,2.2694],[.453041,2.20901],[.478792,2.14861],[.516249,2.10194],[.544341,2.0388],[.577116,1.99762],[.5812671176412162,1.992142954030625],[.58648,2.0086],[.607549,2.08821],[.628618,2.17881],[.647347,2.26666],[.661393,2.36549],[.670757,2.45883],[.67778,2.54393],[.682462,2.63727],[.689485,2.74159],[.689485,2.84591],[.687144,2.93925],[.6855251525327263,3],[.1412503458588957,3]],zone9:[[.5812671176412162,1.992142954030625],[.614572,1.9482],[.652029,1.90428],[.689485,1.8631],[.733965,1.81918],[.776103,1.78898],[.839311,1.76153],[.911883,1.73682],[.965727,1.73133],[1,1.743385534886701],[1,3],[.6855251525327263,3],[.687144,2.93925],[.689485,2.84591],[.689485,2.74159],[.682462,2.63727],[.67778,2.54393],[.670757,2.45883],[.661393,2.36549],[.647347,2.26666],[.628618,2.17881],[.607549,2.08821],[.58648,2.0086],[.5812671176412162,1.992142954030625]]},gu={zone1:[[1.40104,0],[1.40104,1],[.801704,0],[1.40104,0]],zone2:[[.801704,0],[.539905,.442651],[.141125,0],[.801704,0]],zone3:[[1.40104,1],[.8,1.60253],[.0303888,1.20246],[.0310289,1],[-.0304203,1],[-.0291401,1.20408],[-.6,1.39605],[.141125,0],[.539905,.442651],[.801704,0],[1.40104,1]],zone4a:[[-.1,3.78518],[-.6,1.39605],[-.0291401,1.20408],[-.1,3.78518]],zone4b:[[.0617535,3.78356],[.0303888,1.20246],[.8,1.60253],[.4,2],[.0617535,3.78356]],zone5a:[[-.0304203,3.78518],[-.1,3.78518],[-.0291401,1.20408],[-.0297802,1.31539],[-.0297802,1.70094],[-.0291401,2.2591],[-.0304203,3.78518]],zone5b:[[.0617535,3.78356],[.0297487,3.78679],[.0297487,2.28169],[.0297487,1.72352],[.031669,1.32184],[.0303888,1.20246],[.0617535,3.78356]],zone6:[[0,1.59285],[-.0297802,1.31539],[-.0291401,1.20408],[-.0304203,1],[.0310289,1],[.0303888,1.20246],[.031669,1.32184],[0,1.59285]],zone7:[[0,1.94937],[-.0297802,1.70094],[-.0297802,1.31539],[0,1.59285],[.031669,1.32184],[.0297487,1.72352],[0,1.94937]],zone8:[[0,2.48656],[-.0291401,2.2591],[-.0297802,1.70094],[0,1.94937],[.0297487,1.72352],[.0297487,2.28169],[0,2.48656]],zone9:[[.0297487,3.78679],[-.0304203,3.78518],[-.0291401,2.2591],[0,2.48656],[.0297487,2.28169],[.0297487,3.78679]]},vu={zone1:[[.170602,0],[0,.477345],[-.220456,.755759],[-.382872,.855193],[-1,1],[-1,0],[.170602,0]],zone2:[[1,0],[1,.413708],[.170602,0],[1,0]],zone3:[[1,1.53134],[.285712,1.19327],[.148527,1.17338],[-1,1],[-.382872,.855193],[-.220456,.755759],[0,.477345],[.170602,0],[1,.413708],[1,1.53134]],zone4:[[1,3.77456],[.143796,3.77456],[.285712,1.19327],[1,1.53134],[1,3.77456]],zone5:[[.143796,3.77456],[-.0265037,3.77456],[.0570693,2.49386],[.09176,1.98078],[.11699,1.60293],[.148527,1.17338],[.285712,1.19327],[.143796,3.77456]],zone6:[[.11699,1.60293],[-1,1.30066],[-1,1],[.148527,1.17338],[.11699,1.60293]],zone7:[[.09176,1.98078],[-1,1.69839],[-1,1.30066],[.11699,1.60293],[.09176,1.98078]],zone8:[[.0570693,2.49386],[-1,2.17567],[-1,1.69839],[.09176,1.98078],[.0570693,2.49386]],zone9:[[-.0265037,3.77456],[-1,3.77456],[-1,2.17567],[.0570693,2.49386],[-.0265037,3.77456]]},mu={1:"Sensitive fine grained",2:"Organic material",3:"Clay",4:"Silty clay to clay",5:"Clayey silt to silty clay",6:"Sandy silt to clayey silt",7:"Silty sand to sandy silt",8:"Sand to silty sand",9:"Sand",10:"Gravelly sand to sand",11:"Very stiff find grained(overconsolidated or cemented)",12:"Sand to clayer sand(overconsolidated or cemented)",13:"9,10,11,12"},yu={1:"Sensitive fine grained",2:"Organic soils - peats",3:"Clays - clay to silty clay",4:"Silt mixtures - clayey silt to silty clay",5:"Sand mixtures - silty sand to sandy silt",6:"Sands - clean sand to silty sand",7:"Gravelly sand to sand",8:"Very stiff sand to clayey sand(heavily overconsolidated or cemented)",9:"Very stiff fine grained(heavily overconsolidated or cemented)"},bu={1:"Extra sensitibe clay",2:"Organic clay and peat",3:"Clay(su/p0'<=1)",4:"Clay(su/p0'>1)",5:"Clayey sand",6:"Sandy very clayey silt",7:"Sandy silt",8:"Silty sand",9:"Clean to slightly silty sand"};function wu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"numOfType");3!==n&&4!==n&&5!==n&&6!==n&&(console.log(`invalid numOfType[${n}]`),n=3);let r=ve(t,"funAdjust");if(!vt(e))return"";let i="",o=Kl(e);if(3===n){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"silt",6:"silt",7:"silt",8:"sand",9:"sand",10:"sand",11:"sand",12:"sand",13:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}else if(4===n){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"clayey-silt",6:"clayey-silt",7:"sandy-silt",8:"sandy-silt",9:"sand",10:"sand",11:"sand",12:"sand",13:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}else if(5===n){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"clayey-silt",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand",10:"sand",11:"silty-sand",12:"sand",13:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}else if(6===n){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"clayey-silt",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand",10:"sand",11:"clayey-sand",12:"sand",13:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}return i}function $u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"returnZone");Ul(r)||(r=!1),e=vt(e)?Kl(e):null,t=vt(t)?Kl(t):null;let i=wu(e,n),o=wu(t,n);if(null===e&&null===t)return"";if(null!==e&&null===t)return r?e:i;if(null===e&&null!==t)return r?t:o;if(i!==o){let n=e>=6,l=t>=6;return n&&l?r?t:o:n||l?"":r?e:i}return r?e:i}function xu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"numOfType");3!==n&&4!==n&&5!==n&&6!==n&&(console.log(`invalid numOfType[${n}]`),n=3);let r=ve(t,"funAdjust");if(!vt(e))return"";let i="",o=Kl(e);if(3===n){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"silt",6:"sand",7:"sand",8:"sand",9:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}else if(4===n){let e={1:"clay",2:"clay",3:"clay",4:"clayey-silt",5:"sandy-silt",6:"sand",7:"sand",8:"sand",9:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}else if(5===n){let e={1:"clay",2:"clay",3:"clay",4:"clayey-silt",5:"sandy-silt",6:"silty-sand",7:"sand",8:"silty-sand",9:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}else if(6===n){let e={1:"clay",2:"clay",3:"clay",4:"clayey-silt",5:"sandy-silt",6:"silty-sand",7:"sand",8:"clayey-sand",9:"sand"};lu(e,o)&&(Il(r)&&(o=r(o,e,t)),i=e[o])}return i}function Mu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"returnZone");Ul(r)||(r=!1),e=vt(e)?Kl(e):null,t=vt(t)?Kl(t):null;let i=xu(e,n),o=xu(t,n);if(null===e&&null===t)return"";if(null!==e&&null===t)return r?e:i;if(null===e&&null!==t)return r?t:o;if(i!==o){let n=e>=6,l=t>=6;return n&&l?r?t:o:n||l?"":r?e:i}return r?e:i}function Su(e,t){return Mu(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function Eu(e){let t=ve(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"numOfType");if(3!==t&&4!==t&&5!==t&&6!==t&&(console.log(`invalid numOfType[${t}]`),t=3),!vt(e))return"";let n=Kl(e);if(3===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",6:"silt",7:"silt",5:"sand",8:"sand",9:"sand"};if(lu(e,n))return e[n]}else if(4===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",5:"sand",6:"clayey-silt",7:"sandy-silt",8:"sand",9:"sand"};if(lu(e,n))return e[n]}else if(5===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",5:"silty-sand",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand"};if(lu(e,n))return e[n]}else if(6===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",5:"clayey-sand",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand"};if(lu(e,n))return e[n]}return""}function ku(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"returnZone");Ul(r)||(r=!1),e=vt(e)?Kl(e):null,t=vt(t)?Kl(t):null;let i=Eu(e,n),o=Eu(t,n);if(null===e&&null===t)return"";if(null!==e&&null===t)return r?e:i;if(null===e&&null!==t)return r?e:o;if(i!==o){let n=5===e||8===e||9===e,l=5===t||8===t||9===t;return n&&l?r?e:o:n||l?"":r?e:i}return r?e:i}let Ru={csfIc:function(e){let t=null,n="",r=null,i=null;return ht(e)?(fi(uu(),((o,l)=>{if(e>=o.min&&e<o.max)return t=l+1,n=`${o.min}~${o.max}`,r=o.nameCht,i=o.nameEng,!1})),null===r||null===i?{error:"invalid Ic"}:{success:{int:t,rang:n,cht:r,eng:i}}):{error:"invalid Ic"}},csfRobRfqt:function(e,t){if(!ht(e))return{error:"invalid Rf"};if(!ht(t))return{error:"invalid qt"};if(e<0||e>8)return{error:"Rf < 0 or Rf > 8"};if(t<.1||t>100)return{error:"qt < 0.1 or qt > 100"};let n=[e,Math.log10(t)],r="";if(fi(hu,((e,t)=>{if(fu(n,e))return r=t,!1})),""===r)return{error:"no zone"};let i=r.replace("zone",""),o=null;return Hl(i)&&(o=Kl(i),i=`${o}: ${mu[o]}`),{success:{int:o,msg:i}}},csfRobBqqt:function(e,t){if(!ht(e))return{error:"invalid Bq"};if(!ht(t))return{error:"invalid qt"};if(e<-.2||e>1.4)return{error:"Bq < -0.2 or Bq > 1.4"};if(t<.1||t>100)return{error:"qt < 0.1 or qt > 100"};let n=[e,Math.log10(t)],r="";if(fi(cu,((e,t)=>{if(fu(n,e))return r=t,!1})),""===r)return{error:"no zone"};let i=r.replace("zone",""),o=null;return"9,10,11,12"===i&&(i="13"),Hl(i)&&(o=Kl(i),i=`${o}: ${mu[o]}`),{success:{int:o,msg:i}}},csfRobBqQt:function(e,t){if(!ht(e))return{error:"invalid Bq"};if(!ht(t))return{error:"invalid Qt"};if(e<-.6||e>1.4)return{error:"Bq < -0.6 or Bq > 1.4"};if(t<1||t>1e3)return{error:"Qt < 1 or Qt > 1000"};let n=[e,Math.log10(t)],r="";if(fi(pu,((e,t)=>{if(fu(n,e))return r=t,!1})),""===r)return{error:"no zone"};let i=r.replace("zone",""),o=null;return Hl(i)&&(o=Kl(i),i=`${o}: ${yu[o]}`),{success:{int:o,msg:i}}},csfRobFrQt:function(e,t){if(!ht(e))return{error:"invalid Fr"};if(!ht(t))return{error:"invalid Qt"};if(e<.1||e>10)return{error:"Fr < 0.1 or Fr > 10"};if(t<1||t>1e3)return{error:"Qt < 1 or Qt > 1000"};let n=[Math.log10(e),Math.log10(t)],r="";if(fi(du,((e,t)=>{if(fu(n,e))return r=t,!1})),""===r)return{error:"no zone"};let i=r.replace("zone",""),o=null;return Hl(i)&&(o=Kl(i),i=`${o}: ${yu[o]}`),{success:{int:o,msg:i}}},csfRamBqQt:function(e,t){if(!ht(e))return{error:"invalid Bq"};if(!ht(t))return{error:"invalid Qt"};if(e<-.6||e>1.4)return{error:"Bq < -0.6 or Bq > 1.4"};if(t<1||t>6097.895815)return{error:"Qt < 1 or Qt > 6097.895815"};let n=[e,Math.log10(t)],r="";if(fi(gu,((e,t)=>{if(fu(n,e))return r=t,!1})),""===r)return{error:"no zone"};let i=r.replace("zone","");i=i.replace("a",""),i=i.replace("b","");let o=null;return Hl(i)&&(o=Kl(i),i=`${o}: ${bu[o]}`),{success:{int:o,msg:i}}},csfRamFrQt:function(e,t){if(!ht(e))return{error:"invalid Fr"};if(!ht(t))return{error:"invalid Qt"};if(e<.1||e>10)return{error:"Fr < 0.1 or Fr > 10"};if(t<1||t>5950.589615)return{error:"Qt < 1 or Qt > 5950.589615"};let n=[Math.log10(e),Math.log10(t)],r="";if(fi(vu,((e,t)=>{if(fu(n,e))return r=t,!1})),""===r)return{error:"no zone"};let i=r.replace("zone",""),o=null;return Hl(i)&&(o=Kl(i),i=`${o}: ${bu[o]}`),{success:{int:o,msg:i}}}};var Pu={kpCPTClassForRobBqRfqt:mu,kpCPTClassForRobBqFrQt:yu,kpCPTClassForRamQt:bu,cptClassifyBond:{inforRobBqqt:{zones:cu,markers:{zone1:{p:[1.19678,-.727798566],text:"1"},zone2:{p:[.535691,-.855211033],text:"2"},zone3:{p:[.633441,-.444014891],text:"3"},zone4:{p:[.368489,.303088011],text:"4"},zone5:{p:[.255305,.511582591],text:"5"},zone6:{p:[.18328,.760617721],text:"6"},zone7:{p:[.136977,1.015443588],text:"7"},zone8:{p:[.0983923,1.229730464],text:"8"},zone9:{p:[.0495177,1.403475708],text:"9"},zone10:{p:[.0186495,1.75096559],text:"10"},"zone9,10,11,12":{p:[[-.014791,1.60617707],[-.0122186,1.189189825]],text:"9,<br>10,<br>11,<br>12"}}},inforRobRfqt:{zones:hu,markers:{zone1:{p:[.866142,-.534722],text:"1"},zone2:{p:[6.61417,-.833333],text:"2"},zone3:{p:[5.03937,-.083333],text:"3"},zone4:{p:[3.66929,.17361],text:"4"},zone5:{p:[2.97638,.3125],text:"5"},zone6:{p:[2.31496,.54861],text:"6"},zone7:{p:[1.65354,.8125],text:"7"},zone8:{p:[1.24409,1.05556],text:"8"},zone9:{p:[.866142,1.32639],text:"9"},zone10:{p:[.393701,1.76389],text:"10"},zone11:{p:[6.48819,1.48611],text:"11"},zone12:{p:[3.51181,1.72917],text:"12"}}},inforRobBqQt:{zones:pu,markers:{zone1:{p:[1.21905,.455696],text:"1"},zone2:{p:[.491429,.211573],text:"2"},zone3:{p:[.529524,.922242],text:"3"},zone4:{p:[.346667,1.48101],text:"4"},zone5:{p:[.198095,1.67631],text:"5"},zone6:{p:[.0761905,2.03436],text:"6"},zone7:{p:[.0609524,2.60398],text:"7"}}},inforRobFrQt:{zones:du,znoeNC:[[-.642563,2.38745],[.577116,.24888],[.607549,.218682],[.626277,.207701],[.649688,.204956],[.673098,.207701],[.682462,.229663],[.680121,.259861],[.666075,.292804],[.656711,.309276],[-.345252,2.64001],[-.642563,2.38745]],markers:{zone1:{p:[-.716937,.259459],text:"1"},zone2:{p:[.763341,.232432],text:"2"},zone3:{p:[.206497,.427027],text:"3"},zone4:{p:[-.141531,.951351],text:"4"},zone5:{p:[-.443155,1.2973],text:"5"},zone6:{p:[-.712297,1.85405],text:"6"},zone7:{p:[-.62877,2.77297],text:"7"},zone8:{p:[.419954,2.77297],text:"8"},zone9:{p:[.726218,2.18919],text:"9"},zoneNC:{p:[-.0719,1.679],text:"正常壓密(Normally consolidated)"}}},inforRamBqQt:{zones:gu,markers:{zone1:{p:[1.3078,.298266],text:"1"},zone2:{p:[.504128,.17341],text:"2"},zone3:{p:[.795872,.991908],text:"3"},zone4a:{p:[-.302294,2.00462],text:"4"},zone4b:{p:[.201376,1.99769],text:"4"},zone5a:{p:[-.0573394,3.60694],text:"5"},zone5b:{p:[.0472477,3.60694],text:"5"},zone6:{p:[.0059633,1.17225],text:"6"},zone7:{p:[.0059633,1.66474],text:"7"},zone8:{p:[458716e-9,2.15723],text:"8"},zone9:{p:[.0059633,3.00347],text:"9"}}},inforRamFrQt:{zones:vu,markers:{zone1:{p:[-.520058,.477345],text:"1"},zone2:{p:[.903837,.179044],text:"2"},zone3:{p:[.298327,.696099],text:"3"},zone4:{p:[.694116,2.00862],text:"4"},zone5:{p:[.129604,2.62113],text:"5"},zone6:{p:[-.521634,1.28475],text:"6"},zone7:{p:[-.521634,1.65862],text:"7"},zone8:{p:[-.521634,2.14385],text:"8"},zone9:{p:[-.524788,2.99898],text:"9"}}}},cptClassify:Ru,simplifyRobertson1986:$u,simplifyRobertson1990:Mu,simplifyRobertson2009:Su,simplifyRamsey:ku};function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Cu=va.Pa;function qu(e){let t=[];return fi(e,(e=>{let n={};fi(e,((e,t)=>{pt(e)&&(e=Nl(e)),n[t]=e}));let r=pa(e=n,"depth"),i=pa(e,"qc"),o=pa(e,"fs"),l=pa(e,"u2");t.push(Du(Du({},e),{},{depth:r,qc:i,fs:o,u2:l}))})),t}function Fu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"ranger");Gl(n)||(n={depthHalf:.25});let r=ve(t,"methodSmooth");return"none"!==r&&"average"!==r&&"averageIn95"!==r&&(r="none"),"none"!==r&&(e=Ja(e,"qc",{ranger:n,methodSmooth:r}),e=Ja(e,"fs",{ranger:n,methodSmooth:r}),e=Ja(e,"u2",{ranger:n,methodSmooth:r})),e}function Tu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"intrpSv");Il(n)||(n=e=>ya(e,"MPa"));let r=ve(t,"intrpU0");Il(r)||(r=e=>ma(e,"MPa"));let i=[];return fi(e,((t,o)=>{let l=pa(t,"depth"),a=n(l,o,t,e).sv;vt(a)&&(a=Lt(a));let u=r(l,o,t,e);vt(u)&&(u=Lt(u));let s=pa(t,"u2");if(null!==s&&s>10)return!0;let f=null;ht(a)&&ht(u)&&(f=a-u,f=Math.max(f,0)),i.push(Du(Du({},t),{},{sv:a,svp:f,u0:u}))})),i}function Ou(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=null,a=null,u=null,s=null,f=null,c=ve(o,"methodIterate","");"basic"!==c&&"binarySearch"!==c&&(c="basic");let h=ve(o,"useCnLeq",!1);Ul(h)||(h=!1);let p=()=>({n:a,Cn:u,Qtn:s,Icn:f,err:l});if(!vt(t))return l=`qnet[${t}] is not a number`,p();if(t<=0)return l=`qnet[${t}] <= 0`,p();if(!vt(r))return l=`Fr[${r}] is not a number`,p();if(r<=0)return l=`Fr[${r}] <= 0`,p();if(!vt(e))return l=`svp[${e}] is not a number`,p();if(e<=0)return l=`svp[${e}] <= 0`,p();let d=ve(o,"countMax");Hl(d)||(d=1e3),d=Kl(d);let g=n=>{let i=(Cu/e)**n;h&&(i=Math.min(i,1.7));let o=i*t/Cu,l=null,a=null;try{l=Math.sqrt((3.47-Math.log10(o))**2+(Math.log10(r)+1.22)**2),a=.381*l+e/Cu*.05-.15}catch(e){throw console.log(e),new Error("無法計算Icn與n")}return{n:n,Cn:i,Qtn:o,Icn:l,nn:a}},v=e=>{let t=g(e);return Math.abs(t.n-t.nn)},m=null;if("basic"===c){let n=.01,i=1,o=0;for(;;){if(o++,m=g(i),m.nn>1){1!==m.n&&(m=g(1));break}if(Math.abs(m.n-m.nn)<=n)break;if(i=m.nn,o>=d){console.log(`超過迭代次數上限countMax[${d}]`,m,{qnet:t,Fr:r,svp:e});break}}}else{let e=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!Il(e))throw new Error("invalid fun");if(!vt(t))throw new Error("xMin is not a number");if(t=Lt(t),!vt(n))throw new Error("xMax is not a number");n=Lt(n);let i=ve(r,"delta");vt(i)||(i=.1),i=Lt(i);let o=ve(r,"maxIterations");vt(o)||(o=100),o=Lt(o);let l=e(t),a=e(n),u=(t+n)/2,s=e(u),f=0,c=null;for(;;){if(f++,f>o)return null;if(l<=a&&l<=s){c={y:l,x:t};break}if(a<=l&&a<=s){c={y:a,x:n};break}a>=l?(a=s,a=e(n=u)):(l=s,l=e(t=u)),u=(t+n)/2,s=e(u)}return c}(v,0,1),t=e.x;m=g(t),m.nn>1&&(m=g(1))}let y=!1;return m.n>1||m.Icn>2.6?(y=!0,a=1,u=0,s=n,f=i):m.n<.5&&(y=!0,a=.5,u=(Cu/e)**a,h&&(u=Math.min(u,1.7)),s=u*t/Cu,f=Math.sqrt((3.47-Math.log10(s))**2+(Math.log10(r)+1.22)**2)),y&&(m.n=a,m.Cn=u,m.Qtn=s,m.Icn=f),a=ve(m,"n",null),u=ve(m,"Cn",null),s=ve(m,"Qtn",null),f=ve(m,"Icn",null),p()}function ju(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"unitSvSvp");if("kPa"!==r&&"MPa"!==r)throw new Error(`opt.unitSvSvp[${r}] need kPa or MPa`);let i=(e,t)=>ve(e,`success.${t}`,null),o=ve(e,"depth");o=vt(o)?Lt(o):null;let l=ve(e,"sv");l=vt(l)?Lt(l):null;let a=ve(e,"svp");if(a=vt(a)?Lt(a):null,ht(l))try{nu(l,o,r,"sv")}catch(t){console.log("偵測sv發現錯誤",t.toString(),e)}if(ht(a))try{nu(a,o,r,"svp")}catch(t){console.log("偵測svp發現錯誤",t.toString(),e)}"kPa"===r&&(l/=1e3,a/=1e3);let u=ve(e,"qc");u=vt(u)?Lt(u):null;let s=ve(e,"fs");s=vt(s)?Lt(s):null;let f=ve(e,"u0");f=vt(f)?Lt(f):null;let c=ve(e,"u2");if(c=vt(c)?Lt(c):null,!vt(t))throw new Error(`coe_a[${t}] is not a number`);t=Lt(t);let h=ve(n,"useCnLeq");Ul(h)||(h=!1);let p=null;ht(u)&&ht(f)&&ht(c)&&(p=u+c*(1-t),p=Math.max(p,0));let d=null;ht(p)&&ht(l)&&(d=p-l,d=Math.max(d,0));let g=null;ht(d)&&ht(c)&&d>0&&(g=(c-f)/d);let v=null;ht(p)&&ht(s)&&p>0&&(v=s/p*100,v=Math.max(v,0));let m=null;ht(d)&&ht(a)&&a>0&&(m=d/a,m=Math.max(m,0));let y=null;ht(d)&&ht(s)&&d>0&&(y=s/d*100,y=Math.max(y,0));let b=null;ht(m)&&ht(y)&&m>0&&y>0&&(b=Math.sqrt((3.47-Math.log10(m))**2+(Math.log10(y)+1.22)**2));let w=Ou(a,d,m,y,b,{useCnLeq:h}),$=ve(w,"n",null),x=ve(w,"Cn",null),M=ve(w,"Icn",null),S=ve(w,"Qtn",null),E=Ru.csfIc(b),k=Ru.csfIc(M),R=Ru.csfRobBqqt(g,p),P=Ru.csfRobRfqt(v,p),L=Ru.csfRobBqQt(g,m),D=Ru.csfRobFrQt(y,m),C=Ru.csfRobBqQt(g,S),q=Ru.csfRobFrQt(y,S),F=Ru.csfRamBqQt(g,m),T=Ru.csfRamFrQt(y,m),O=i(E,"int"),j=i(k,"int"),A=i(R,"int"),_=i(P,"int"),N=i(L,"int"),I=i(D,"int"),z=i(C,"int"),G=i(q,"int"),B=i(F,"int"),U=i(T,"int"),Q=Du(Du({},e),{},{sv:l,svp:a,qc:u,fs:s,u0:f,u2:c,qt:p,qnet:d,Bq:g,Qt:m,Qtn:S,Rf:v,Fr:y,Ic:b,Icn:M,n:$,Cn:x,iIc:O,iIcn:j,iRobBqqt:A,iRobRfqt:_,iRobBqQt:N,iRobFrQt:I,iRobBqQtn:z,iRobFrQtn:G,iRamBqQt:B,iRamFrQt:U});return"kPa"===r&&(Q.sv*=1e3,Q.svp*=1e3),Q}var Au={basic:qu,smooth:Fu,stress:Tu,calcCpt:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"unitSvSvp");if("kPa"!==n&&"MPa"!==n)throw new Error(`opt.unitSvSvp[${n}] need kPa or MPa`);let r=ve(t,"coe_a");return vt(r)||(r=.8),r=Lt(r),e=co(e=Tu(e=Fu(e=qu(e=wl(e)),t),t),(e=>ju(e,r,t)))},calcCptCore:ju};function _u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return vt(e)&&Ca(t)?(e=Lt(e),Zl(e,t).toFixed(t)):""}var Nu=Math.max;var Iu,zu=(Iu=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Ql(n);return i<0&&(i=Nu(r+i,0)),Ml(e,so(t),i)},function(e,t,n){var r=Object(e);if(!ze(e)){var i=so(t);e=oi(e),t=function(e){return i(r[e],e,r)}}var o=Iu(e,t,n);return o>-1?r[i?e[o]:o]:void 0}),Gu=zu;function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Qu=null;function Hu(){return null!==Qu||(Qu=[{key:"sand",nameCht:"砂土",nameEng:"Sand",nameEngineeringEng:"SAND",group:"粗粒料土壤",colorPrimary:"#467dec",colorSecondary:"#467dec"},{key:"silty-sand",nameCht:"粉質砂土",nameEng:"Silty-sand",nameEngineeringEng:"SILTY-SAND",group:"粗粒料土壤",colorPrimary:"linear-gradient(90deg, #dad74d 0%, #467dec 100%)",colorSecondary:"#00D9A3"},{key:"sand/silt",nameCht:"砂粉混合土",nameEng:"Sand/Silt",nameEngineeringEng:"SAND/SILT",group:"混合土壤",colorPrimary:"repeating-linear-gradient(90deg, #dad74d 5px, #467dec 10px, #dad74d 15px)",colorSecondary:"#87A7A3"},{key:"clayey-sand",nameCht:"黏質砂土",nameEng:"Clayey-sand",nameEngineeringEng:"CLAYEY-SAND",group:"粗粒料土壤",colorPrimary:"linear-gradient(90deg, #ea4e2d 0%, #467dec 100%)",colorSecondary:"#B973FF"},{key:"sand/clay",nameCht:"砂黏混合土",nameEng:"Sand/Clay",nameEngineeringEng:"SAND/CLAY",group:"混合土壤",colorPrimary:"repeating-linear-gradient(90deg, #ea4e2d 5px, #467dec 10px, #ea4e2d 15px)",colorSecondary:"#859C78"},{key:"sandy-silt",nameCht:"砂質粉土",nameEng:"Sandy-silt",nameEngineeringEng:"SANDY-SILT",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #467dec 0%, #dad74d 100%)",colorSecondary:"#00D9D9"},{key:"silt",nameCht:"粉土",nameEng:"Silt",nameEngineeringEng:"SILT",group:"細粒料土壤",colorPrimary:"#dad74d",colorSecondary:"#D9D900"},{key:"clayey-silt",nameCht:"黏質粉土",nameEng:"Clayey-silt",nameEngineeringEng:"CLAYEY-SILT",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #ea4e2d 0%, #dad74d 100%)",colorSecondary:"#FFBF00"},{key:"sandy-clay",nameCht:"砂質黏土",nameEng:"Sandy-clay",nameEngineeringEng:"SANDY-CLAY",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #467dec 0%, #ea4e2d 100%)",colorSecondary:"#2DB200"},{key:"silty-clay",nameCht:"粉質黏土",nameEng:"Silty-clay",nameEngineeringEng:"SILTY-CLAY",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #dad74d 0%, #ea4e2d 100%)",colorSecondary:"#FFDC73"},{key:"silt/clay",nameCht:"粉黏混合土",nameEng:"Silt/Clay",nameEngineeringEng:"SILT/CLAY",group:"細粒料土壤",colorPrimary:"repeating-linear-gradient(90deg, #dad74d 5px, #ea4e2d 10px, #dad74d 15px",colorSecondary:"#C6BEAC"},{key:"clay",nameCht:"黏土",nameEng:"Clay",nameEngineeringEng:"CLAY",group:"細粒料土壤",colorPrimary:"#ea4e2d",colorSecondary:"#ea4e2d"}]),Qu}function Wu(e,t,n){let r=Hu(),i=Gu(r,{[e]:t});return Gl(i)||(i=null),dt(n)&&(i=ve(i,n,null)),i}function Vu(){let e=["sand","sandy-silt","clayey-silt","clay"];return e=co(e,(e=>Wu("key",e,"nameEngineeringEng"))),e}function Yu(){let e=["sand","silty-sand","clayey-sand","sandy-silt","clayey-silt","clay"];return e=co(e,(e=>Wu("key",e,"nameEng"))),e}function Zu(){let e=["sand","silty-sand","clayey-sand","sandy-silt","silt","clayey-silt","sandy-clay","silty-clay","clay"];return e=co(e,(e=>Wu("key",e,"nameEng"))),e}function Ku(e){if("Ic"!==e&&"Icn"!==e)throw new Error(`k[${e}] must be Ic or Icn`);let t=uu(),n=[];return fi(t,(t=>{let r=`${e}(${_u(t.min,2)}-${_u(t.max,2)})`;n.push(r)})),n}function Xu(){return Ku("Ic")}function Ju(){return Ku("Icn")}var es={getSoilGroups:Hu,getSoilGroupByKV:Wu,sortSoilGroupsByKey:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key",n=Hu(),r={};if(fi(n,((e,n)=>{r[e[t]]=n})),Da(e))e=ha(e,(e=>r[e]));else{if(!Gl(e))return e;{let t=oi(e);t=ha(t,(e=>r[e]));let n={};fi(t,(t=>{n[t]=e[t]})),e=n}}return e},getSoilGroupsIc:Xu,getSoilGroupsIcn:Ju,getSoilGroupsT4:Vu,getSoilGroupsT6:Yu,getSoilGroupsT9:Zu,getKpSoilGroups:function(){let e={},t=Hu(),n=uu();return fi(["nameEng","nameEngineeringEng"],(n=>{fi(t,(t=>{let r=t[n];e[r]=Uu({key:r},t)}))})),fi(n,(t=>{fi(["Ic","Icn"],(n=>{let r=`${n}(${_u(t.min,2)}-${_u(t.max,2)})`;e[r]=Uu({key:r},t)}))})),e}};function ts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!Da(e))throw new Error("無有效資料");let r=ve(t,"keyDepth");dt(r)||(r="depth");let i=ve(t,"keyDepthStart");dt(i)||(i="depthStart");let o=ve(t,"keyDepthEnd");dt(o)||(o="depthEnd");let l=ve(t,"depthEndMax");if(l=vt(l)?Lt(l):null,fi(e=wl(e),((e,t)=>{let i=ve(e,r,null);vt(i)||n.push(`第 ${t} 樣本中點深度${r}[${i}]非有效數字`)})),ut(n)>0)throw new Error(ft(n,"; "));if(fi(e=ha(e,(e=>Lt(e[r]))),((t,i)=>{if(0===i)return!0;let o=ve(e,`${i-1}.${r}`,null),l=ve(t,r,null);o=Lt(o),l=Lt(l),gr(o,">=",l)&&n.push(`第 ${i-1} 樣本之中點深度${r}[${o}]大於等於第 ${i} 樣本之中點深度${r}[${l}]`)})),ut(n)>0)throw new Error(ft(n,"; "));let a=ut(e)-1;if(e=co(e,((t,n)=>{let l=ve(e,n-1),u=t,s=ve(e,n+1),f=ve(l,r,null),c=ve(u,r,null),h=ve(s,r,null),p=null;if(0===n){if(p=0,!vt(c))throw new Error("dc1 is not a number");c=Lt(c),p=Math.min(p,c)}else{if(!vt(f)||!vt(c))throw new Error("unexpected error: invalid ds");f=Lt(f),c=Lt(c),p=(f+c)/2}let d=null;if(n===a){if(!vt(c))throw new Error("dc1 is not a number");d=Lt(c)}else{if(!vt(c)||!vt(h))throw new Error("unexpected error: invalid de");c=Lt(c),h=Lt(h),d=(c+h)/2}return t[i]=p,t[o]=d,t})),ht(l)){gr(e[a][o],"<",l)&&(e[a][o]=l)}return e}function ns(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"keyDepth");dt(n)||(n="depth");let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"keyType");dt(o)||(o="type");let l=ve(t,"saveFromInds");Ul(l)||(l=!0);let a=ve(t,"keyInd");dt(a)||(a="ind");let u=ve(t,"keyFromInds");dt(u)||(u="fromInds");let s=wl(e);return l&&(s=co(s,((e,t)=>(vt(e[a])||(e[a]=t),e)))),fi(s,((e,t)=>{if(0===t)return!0;if(!Gl(e))throw new Error(`ltdt[${t}] is not an object`);let n=ve(s,t-1),f=e,c=ve(n,o,""),h=ve(n,i,""),p=ve(f,o,""),d=ve(f,r,"");if(!vt(h)||!vt(d))return!0;h=Lt(h),d=Lt(d),dt(c)&&c===p&&gr(h,"===",d)&&(l&&(Pa(s[t-1][u])||(s[t-1][u]=[s[t-1][a]]),Pa(s[t][u])||(s[t][u]=[s[t][a]]),s[t][u]=[...s[t-1][u],...s[t][u]]),s[t][r]=s[t-1][r],s[t-1]=null)})),s=ja(s,Gl),s}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let os=Xu(),ls=Ju(),as=Vu(),us=Yu(),ss=Zu();function fs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===ut(e))return[];let n=ve(t,"keyDepth");dt(n)||(n="depth");let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"depthStartMin");vt(o)&&(o=Lt(o));let l=ve(t,"depthEndMax");vt(l)&&(l=Lt(l));let a=ve(t,"keyType");dt(a)||(a="type");let u=ve(t,"getType",null),s=ve(t,"keyInd");dt(s)||(s="ind"),e=ts(e,t);let f=[];return fi(e,((e,t)=>{let c=ve(e,r,null);if(!vt(c))throw new Error(`depthStart[${c}] is not a number`);c=Lt(c);let h=ve(e,i,null);if(!vt(h))throw new Error(`depthEnd[${h}] is not a number`);h=Lt(h),ht(o)&&(c=Math.max(c,o)),ht(l)&&(h=Math.min(h,l));let p=(c+h)/2,d=ve(e,a,null);Il(u)&&(d=u(e,t)),dt(d)&&f.push({[n]:p,[r]:c,[i]:h,[a]:d,[s]:t})})),f}function cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t=>{let r=uu();if("Ic"!==t&&"Icn"!==t)throw new Error(`key[${t}] must be Ic or Icn`);let i=is(is({},n),{},{getType:(e,n)=>{let i=ve(e,t,""),o="";return fi(r,(e=>{if(i<e.max)return o=`${t}(${_u(e.min,2)}-${_u(e.max,2)})`,!1})),o}});return fs(e,i)},i=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let r=Kl(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=is(is({},n),{},{getType:(e,t)=>{let n=ve(e,"iRobFrQt",""),o=ve(e,"iRobBqQt",""),l="";try{l=Wu("key",$u(n,o,{numOfType:r}),i)}catch(e){console.log(e)}return l}});return fs(e,o)},o=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let r=Kl(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=is(is({},n),{},{getType:(e,t)=>{let n=ve(e,"iRobFrQt",""),o=ve(e,"iRobBqQt",""),l="";try{l=Wu("key",Mu(n,o,{numOfType:r}),i)}catch(e){console.log(e)}return l}});return fs(e,o)},l=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let r=Kl(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=is(is({},n),{},{getType:(e,t)=>{let n=ve(e,"iRobFrQtn",""),o=ve(e,"iRobBqQtn",""),l="";try{l=Wu("key",Su(n,o,{numOfType:r}),i)}catch(e){console.log(e)}return l}});return fs(e,o)},a=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let r=Kl(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=is(is({},n),{},{getType:(e,t)=>{let n=ve(e,"iRamFrQt",""),o=ve(e,"iRamBqQt",""),l="";try{l=Wu("key",ku(n,o,{numOfType:r}),i)}catch(e){console.log(e)}return l}});return fs(e,o)},u={Ic:()=>r("Ic"),Icn:()=>r("Icn"),Robertson1986T6:()=>i("T6"),Robertson1986T4:()=>i("T4"),Robertson1990T6:()=>o("T6"),Robertson1990T4:()=>o("T4"),Robertson2009T6:()=>l("T6"),Robertson2009T4:()=>l("T4"),RamseyT6:()=>a("T6"),RamseyT4:()=>a("T4")};if(!lu(u,t))throw console.log(`invalid method[${t}]`,u),new Error(`invalid method[${t}]`);let s=(0,u[t])();return s=ns(s,n),s}var hs={getKpSoilGroupsTn:function(){return{soilGroupsIc:os,soilGroupsIcn:ls,soilGroupsT4:as,soilGroupsT6:us,soilGroupsT9:ss}},genLayer:fs,calcLayersByMerge:ns,calcCptLayer:cs,calcCptLayers:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Da(t))throw new Error(`methods[${t}] is not an effective array`);return co(t,(t=>({method:t,ltdt:cs(e,t,n)})))}};function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let gs=va.Pa,vs=va.rw,ms={1:17.5,2:12.5,3:17.5,4:18,5:18,6:18,7:18.5,8:19,9:19.5,10:20,11:20.5,12:19,13:79/4},ys={1:17.5,2:12.5,3:17.5,4:18,5:18.25,6:19,7:19.75,8:19,9:20.5};function bs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"method","");"Robertson(1986)"!==r&&"Lunne(1997)"!==r&&"Lunne(1997) for Robertsion stress exponent"!==r&&"Robertson and Cabal(2010)"!==r&&"Mayne(2014)"!==r&&(r="Robertson(1986)");let i=ve(n,"rsatIni");vt(i)||(i=19.5),i=Lt(i);let o=ve(n,"rdiff");vt(o)||(o=3),o=Lt(o);let l=ve(n,"ratio");if(vt(l)||(l=.8),l=Lt(l),l<=0)throw new Error(`ratio[${l}]<=0`);if(l>1)throw new Error(`ratio[${l}]>1`);let a=e=>{let t=_u(e,2);return{vi:t,vd:Lt(t)}},u=1-l,s=l;e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"waterLevel");vt(n)||(n=0),n=Lt(n);let r=ve(t,"rdiff");vt(r)||(r=3),r=Lt(r);let i=n,o=n;return e=co(e=wl(e),((e,t)=>{let n=ve(e,"rsat");if(!vt(n))throw console.log("stress",t,e),new Error("stress: 樣本無飽和單位重rsat");n=Lt(n);let i=n-r;return e.rsat=n,e.rd=i,e})),co(e=iu(e,ds(ds({},t),{},{waterLevelUsual:i,waterLevelDesign:o,unitSvSvp:"MPa"})),(e=>{let t=ve(e,"svpUsual");return e.svp=t,delete e.svpUsual,delete e.svpDesign,delete e.waterLevelUsual,delete e.waterLevelDesign,e}))}(e,n),e=co(e,(e=>ju(e,t,{unitSvSvp:"MPa",useCnLeq:!1})));let f=!1;return e=co(e,((e,t)=>{if(!vt(e.rsat))throw console.log("樣本無飽和單位重rsat",t,e),new Error("樣本無飽和單位重rsat");let n=null;if("Robertson(1986)"===r){if(null===n&&Hl(e.iRobRfqt)&&(n=ve(ms,e.iRobRfqt,null),!vt(n)))throw new Error(`於kpCPTClassForRobBqRfqt找不到iRobRfqt[${e.iRobRfqt}]區域`);if(null===n&&Hl(e.iRobBqqt)&&(n=ve(ms,e.iRobBqqt,null),!vt(n)))throw new Error(`於kpCPTClassForRobBqRfqt找不到iRobBqqt[${e.iRobBqqt}]區域`);vt(n)||(n=i)}else if("Lunne(1997)"===r){if(null===n&&Hl(e.iRobFrQt)&&(n=ve(ys,e.iRobFrQt,null),!vt(n)))throw new Error(`於kpCPTClassForLunneBqFrQt找不到iRobFrQt[${e.iRobFrQt}]區域`);if(null===n&&Hl(e.iRobBqQt)&&(n=ve(ys,e.iRobBqQt,null),!vt(n)))throw new Error(`於kpCPTClassForLunneBqFrQt找不到iRobBqQt[${e.iRobBqQt}]區域`);vt(n)||(n=i)}else if("Lunne(1997) for Robertsion stress exponent"===r){if(null===n&&Hl(e.iRobFrQtn)&&(n=ve(ys,e.iRobFrQtn,null),!vt(n)))throw new Error(`於kpCPTClassForLunneBqFrQt找不到iRobFrQtn[${e.iRobFrQtn}]`);if(null===n&&Hl(e.iRobBqQtn)&&(n=ve(ys,e.iRobBqQtn,null),!vt(n)))throw new Error(`於kpCPTClassForLunneBqFrQt找不到iRobBqQtn[${e.iRobBqQtn}]`);vt(n)||(n=i)}else if("Robertson and Cabal(2010)"===r)n=vs*(.27*Math.log10(e.Rf)+.36*Math.log10(e.qt/gs)+1.236),vt(n)||(n=i);else if("Mayne(2014)"===r){let t=1e3*e.fs;n=26-14/(1+(.5*Math.log10(t+1))**2),vt(n)||(n=i);let r=12,o=23;n<r&&(n=r),n>o&&(n=o)}let l=Lt(e.rsat),c=n,h=a(l),p=a(c),d=h.vi,g=p.vi;if(l=h.vd,c=p.vd,d!==g){f=!0;let t=l*u+c*s;e.rsat=a(t).vd;let n=t-o;e.rd=a(n).vd}return e})),{bUpdate:f,ltdt:e}}let ws=va.Pa;function $s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!Da(e))throw new Error("無有效資料");let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"depthEndMax");if(o=vt(o)?Lt(o):null,fi(e=wl(e),((e,t)=>{let o=ve(e,r,null),l=ve(e,i,null);vt(o)||n.push(`第 ${t} 樣本起始深度${r}[${o}]非有效數字`),vt(l)||n.push(`第 ${t} 樣本結束深度${i}[${l}]非有效數字`)})),ut(n)>0)throw new Error(ft(n,", "));if(fi(e=ha(e,(e=>Lt(e[r]))),((t,o)=>{if(0===o)return!0;let l=ve(e,`${o-1}.${i}`,null),a=ve(t,r,null);l=Lt(l),a=Lt(a),gr(l,">",a)&&n.push(`第 ${o-1} 樣本之結束深度${i}[${l}]大於第 ${o} 樣本之起點深度${r}[${a}]`)})),ut(n)>0)throw new Error(ft(n,", "));if(fi(e,((t,n)=>{if(0===n)return!0;let o=ve(e,`${n-1}.${i}`,null),l=ve(t,r,null);if(o=Lt(o),l=Lt(l),gr(o,"<",l)){let t=(o+l)/2;e[n-1][i]=t,e[n+0][r]=t}})),ht(o)){let t=ut(e)-1;gr(e[t][i],"<",o)&&(e[t][i]=o)}return e}function xs(e,t){return null==(e=function(e,t){return t.length<2?e:ge(e,$l(t,0,-1))}(e,t=he(t,e)))||delete e[de((n=t,r=null==n?0:n.length,r?n[r-1]:void 0))];var n,r}var Ms=Array.prototype.splice;var Ss=ka((function(e,t){var n=null==e?0:e.length,r=Sa(e,t);return function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Vr(i)?Ms.call(e,i,1):xs(e,i)}}}(e,le(t,(function(e){return Vr(e,n)?+e:e})).sort(ta)),r})),Es=Ss;function ks(e,t){return!!(null==e?0:e.length)&&El(e,t,0)>-1}function Rs(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Ps=Ee&&1/wi(new Ee([,-0]))[1]==1/0?function(e){return new Ee(e)}:function(){},Ls=Ps,Ds=200;function Cs(e,t,n){var r=-1,i=ks,o=e.length,l=!0,a=[],u=a;if(n)l=!1,i=Rs;else if(o>=Ds){var s=t?null:Ls(e);if(s)return wi(s);l=!1,i=di,u=new hi}else u=t?[]:a;e:for(;++r<o;){var f=e[r],c=t?t(f):f;if(f=n||0!==f?f:0,l&&c==c){for(var h=u.length;h--;)if(u[h]===c)continue e;t&&u.push(c),a.push(f)}else i(u,c,n)||(u!==a&&u.push(c),a.push(f))}return a}function qs(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],l=t(o);if(null!=l&&(void 0===a?l==l&&!m(l):n(l,a)))var a=l,u=o}return u}function Fs(e,t){return e>t}function Ts(e,t){if(!dt(e))return[];if(!dt(t))return[];let n=function(e,t){return dt(e)&&dt(t)?e.split(t):[]}(e,t);n=co(n,Nl);let r=[];return fi(n,(function(e){dt(e)&&r.push(e)})),r}function Os(e,t){function n(e){return Pa(e)?e:[e]}if(La(e))return!1;if(0===(e=n(e)).length)return!1;if(La(e))return!1;if(0===(t=n(t)).length)return!1;for(let n=0;n<e.length;n++)for(let o=0;o<t.length;o++)if(r=e[n],i=t[o],Xi(r,i))return!0;var r,i;return!1}function js(e,t){return ht(t)||(t=.1),e=Math.ceil(e/t)*t}function As(e,t){return ht(t)||(t=.1),e=Math.floor(e/t)*t}function _s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"keyDepth");dt(n)||(n="depth");let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"approximate");Ul(o)||(o=!1);let l=-1e20;return fi(e,(e=>{vt(e[r])&&(l=Math.max(l,Lt(e[r]))),vt(e[i])&&(l=Math.max(l,Lt(e[i]))),vt(e[n])&&(l=Math.max(l,Lt(e[n])))})),o&&(l=js(l)),l}function Ns(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"keyDepth");dt(n)||(n="depth");let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"approximate");Ul(o)||(o=!1);let l=1e20;return fi(e,(e=>{vt(e[r])&&(l=Math.min(l,Lt(e[r]))),vt(e[i])&&(l=Math.min(l,Lt(e[i]))),vt(e[n])&&(l=Math.min(l,Lt(e[n])))})),o&&(l=As(l)),l}var Is={getDepthMaxCeil:js,getDepthMinFloor:As,getDepthMax:_s,getDepthMin:Ns,getDepthMaxMin:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"keyDepth");dt(n)||(n="depth");let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"approximate");return Ul(o)||(o=!1),{depthMax:_s(e,t),depthMin:Ns(e,t)}}};function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!lu(e,"depthStart"))throw new Error("invalid depthStart");if(!lu(e,"depthEnd"))throw new Error("invalid depthEnd");Ca(t)||(t=1),t=Kl(t);let n=null;vt(e.depthStart)&&(n=_u(e.depthStart,t));let r=null;if(vt(e.depthEnd)&&(r=_u(e.depthEnd,t)),dt(n)&&dt(r)&&n===r&&(n=null,r=null),e.depthStart=n,e.depthEnd=r,lu(e,"depth")){let n=null;vt(e.depth)&&(n=_u(e.depth,t+1)),e.depth=n}return e}function Us(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=ja(e=co(e,(e=>Bs(e,t,n))),(e=>null!==e.depthStart&&null!==e.depthEnd))}function Qs(e){let t=!1;if(!dt(e))throw console.log("invalid type",e),new Error("invalid type");return t=e.indexOf("/")>=0,t}function Hs(e){return"sand"===e||"silty-sand"===e||"clayey-sand"===e}function Ws(e){return!!Qs(e)||!!Hs(e)}function Vs(e){return Hs(e)?"sand":function(e){return"silt"===e||"sandy-silt"===e||"clayey-silt"===e}(e)?"silt":function(e){return"clay"===e||"sandy-clay"===e||"silty-clay"===e}(e)?"clay":e}function Ys(e,t){let n=`${Za(e)},${Za(t)}`;return n=Ts(n,","),n=ft(n,","),n}function Zs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"combineMethod");if("none"!==r&&"general"!==r&&"generalAndNoSand"!==r&&(r="general"),"none"===r)return t;let i=ve(n,"keyTestRela");dt(i)||(i="testRela");let o=ve(n,"keySampleGroupId");dt(o)||(o="sampleGroupId");let l=ve(n,"combineDepthMin");l=vt(l)?Lt(l):null;let a=ve(n,"combineRatioLim");vt(a)||(a=.11),a=Lt(a);let u=ve(n,"combineDisableType"),s=ve(n,"combineDisableTestRela"),f=ve(n,"combineThicknessMax");function c(){let n=ut(t=wl(t))-1,c=[];if(fi(t,((e,i)=>{if(null!==l&&Lt(e.depthStart)<=l)return!0;let o={},f=i,h=e,p=h.type,d=h.testRela,g=Lt(h.depthEnd)-Lt(h.depthStart);if("general"===r&&Qs(h.type))return!0;if("generalAndNoSand"===r&&Ws(h.type))return!0;if(Da(u)&&Os(u,p))return!0;if(Da(s)){if(Os(s,Ts(d,",")))return!0}else if("all"===s&&dt(d))return!0;let v=Vs(p);lu(o,v)||(o[v]=0),o[v]+=g;let m=null;fi(Ma(1,n+1),(e=>{let i=f+e;if(i>n)return!1;let l=t[i],c=l.type,p=l.testRela,d=Lt(l.depthEnd)-Lt(l.depthStart);if("general"===r&&Qs(l.type))return!1;if("generalAndNoSand"===r&&Ws(l.type))return!1;if(Da(u)&&Os(u,c))return!1;if(Da(s)){if(Os(s,Ts(p,",")))return!1}else if("all"===s&&dt(p))return!1;let g=Vs(c);if(lu(o,g)||(o[g]=0),o[g]+=d,2!==ut(oi(o)))return!1;let v=(e=>{let t=oi(e);if(ut(t)<=1)return 0;if(ut(t)>=3)return 1;let n=e[t[0]],r=e[t[1]],i=n+r,o=Math.abs(n-r);return i<=0?1:o/i})(o);v<=a&&(m={kgs:wl(o),kgsRatio:v,k0:f,kn:i,tks:Lt(l.depthEnd)-Lt(h.depthStart)})})),null!==m&&c.push(m)})),ut(c)>0&&vt(f)&&(c=ja(c,(e=>e.tks<=f))),ut(c)>0){let n=(p="tks",(h=c)&&h.length?qs(h,so(p),Fs):void 0),r=((e,t)=>{let n=oi(t);if(2!==ut(n))return"";let r=n[0],i=n[1],o="";return"sand"!==r&&"sand"!==i||(o+="砂"),"silt"!==r&&"silt"!==i||(o+="粉"),"clay"!==r&&"clay"!==i||(o+="黏"),o+="混合土",e.getSoilGroupByKV("nameCht",o,"key")})(e,n.kgs);if(!dt(r))throw console.log("vdMax.kgs",n.kgs),new Error("invalid soilGroupKey");t[n.k0].type=r,t[n.k0].depthEnd=t[n.kn].depthEnd;let l=t[n.k0][i],a=t[n.k0][o];for(let e=n.k0+1;e<=n.kn;e++)l+=`,${Za(t[e][i])}`,a+=`,${Za(t[e][o])}`,t[e]={needDelete:!0};t[n.k0][i]=ft(Ts(l,","),","),t[n.k0][o]=ft(Ts(a,","),","),t=ja(t,(e=>!lu(e,"needDelete")))}var h,p;return t}f=vt(f)?Lt(f):null;let h=ut(t),p=ut(t=c());for(;h!==p;)h=p,p=ut(t=c());return t}function Ks(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ve(n,"combineMethod");try{t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"mergeMethod");if("none"!==n&&"general"!==n&&"type"!==n&&"gtype"!==n&&(n="general"),"none"===n)return e;let r=ve(t,"keyTestRela");dt(r)||(r="testRela");let i=ve(t,"keySampleGroupId");dt(i)||(i="sampleGroupId");let o=ve(t,"mergeDisableType"),l=ve(t,"mergeDisableTestRela");function a(){let t=ut(e=wl(e))-1;return fi(e,((a,u)=>{if(u>=t)return!1;let s=!1,f=u,c=a,h=c.type,p=c.testRela,d=Lt(c.depthEnd)-Lt(c.depthStart),g=f+1,v=e[g],m=v.type,y=v.testRela,b=Lt(v.depthEnd)-Lt(v.depthStart),w=Vs(h),$=Vs(m);if(!s&&("general"===n||"type"===n)&&h===m&&(s=!0),!s&&("general"===n||"gtype"===n)&&w===$){if(Da(o)&&h!==m&&(Os(o,h)||Os(o,m)))return!0;if(h!==m)if(Da(l)){if(Os(l,Ts(p,","))||Os(l,Ts(y,",")))return!0}else if("all"===l&&(dt(p)||dt(y)))return!0;s=!0}return!s||(d>=b?(e[f].depthEnd=e[g].depthEnd,e[f][r]=Ys(e[f][r],e[g][r]),e[f][i]=Ys(e[f][i],e[g][i]),e[g]={needDelete:!0}):(e[g].depthStart=e[f].depthStart,e[g][r]=Ys(e[g][r],e[f][r]),e[g][i]=Ys(e[g][i],e[f][i]),e[f]={needDelete:!0}),!1)})),e=ja(e,(e=>!lu(e,"needDelete")))}let u=ut(e),s=ut(e=a());for(;u!==s;)u=s,s=ut(e=a());return e}(t,n)}catch(e){throw console.log(e,"layers",t,"opt",n),new Error(e)}try{t=Zs(e,t,n)}catch(e){throw console.log(e,"layers",t,"opt",n),new Error(e)}try{t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"removeMethod");if("none"!==n&&"general"!==n&&"type"!==n&&"gtype"!==n&&(n="general"),"none"===n)return e;let r=ve(t,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(t,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(t,"keyType");dt(o)||(o="type");let l=ve(t,"keyTestRela");dt(l)||(l="testRela");let a=ve(t,"keySampleGroupId");dt(a)||(a="sampleGroupId");let u=ve(t,"removeDisableGeneralType"),s=ve(t,"removeDepthMin");s=vt(s)?Lt(s):null;let f=ve(t,"removeThicknessMax");if(!vt(f))return e;if(f=Lt(f),f<=0)return e;let c=ve(t,"removeDisableType"),h=ve(t,"removeDisableTestRela"),p=eu(e,{keyDepthStart:r,keyDepthEnd:i});if(ut(p)>0)throw new Error(ft(p,", "));let d=e=>{let t=ve(e,r,null);vt(t)&&(t=Lt(t));let n=ve(e,i,null);vt(n)&&(n=Lt(n));let a=null;null!==t&&null!==n&&(a=n-t);let u=ve(e,o,null),s=null;return dt(u)&&(s=Vs(u)),{tk:a,type:u,gtype:s,testRela:ve(e,l,null)}},g=function(t,n){let u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("up"===t)e[n][r]=e[n-1][r],e[n][l]=Ys(e[n][l],e[n-1][l]),e[n][a]=Ys(e[n][a],e[n-1][a]),u&&(e[n][o]=e[n-1][o]),e[n-1]={needDelete:!0};else{if("down"!==t)throw new Error(`invalid mode(${t})`);e[n][i]=e[n+1][i],e[n][l]=Ys(e[n][l],e[n+1][l]),e[n][a]=Ys(e[n][a],e[n+1][a]),u&&(e[n][o]=e[n+1][o]),e[n+1]={needDelete:!0}}};function v(){return fi(e=wl(e),((t,r)=>{if(null!==s&&Lt(t.depthStart)<=s)return!0;let i=ve(e,r-1,null),o=ve(e,r+0,null),l=ve(e,r+1,null),a=d(i),p=ve(a,"tk"),v=ve(a,"type"),m=ve(a,"gtype"),y=ve(a,"testRela"),b=!1;Da(c)&&Os(c,v)&&(b=!0);let w=!1;Da(u)&&Os(u,m)&&(w=!0);let $=!1;Da(h)?Os(h,Ts(y,","))&&($=!0):"all"===h&&dt(y)&&($=!0);let x=!b&&!w&&!$,M=d(o),S=ve(M,"tk"),E=ve(M,"type"),k=ve(M,"gtype"),R=ve(M,"testRela");if(Da(c)&&Os(c,E))return!0;if(Da(u)&&Os(u,k))return!0;if(Da(h)){if(Os(h,Ts(R,",")))return!0}else if("all"===h&&dt(R))return!0;let P=d(l),L=ve(P,"tk"),D=ve(P,"type"),C=ve(P,"gtype"),q=ve(P,"testRela"),F=!1;Da(c)&&Os(c,D)&&(F=!0);let T=!1;Da(u)&&Os(u,C)&&(T=!0);let O=!1;Da(h)?Os(h,Ts(q,","))&&(O=!0):"all"===h&&dt(q)&&(O=!0);let j=!F&&!T&&!O;if(S<=f){if("general"===n||"type"===n){if(null!==v&&E===v&&x)return g("up",r),!1;if(null!==D&&E===D&&j)return g("down",r),!1}if("general"===n||"gtype"===n){if(null!==m&&k===m&&x)return g("up",r),!1;if(null!==C&&k===C&&j)return g("down",r),!1}if(null!==p&&null!==L)if(p>=L){if(x)return g("up",r,!0),!1}else if(j)return g("down",r,!0),!1;if(null===p&&null!==L)if(S>=L){if(j)return g("down",r),!1}else if(j)return g("down",r,!0),!1;if(null!==p&&null===L)if(S>=p){if(x)return g("up",r),!1}else if(x)return g("up",r,!0),!1;if(null!==S)return 0===r?(g("up",r+1),!1):(g("down",r-1),!1)}})),e=ja(e,(e=>!lu(e,"needDelete")))}let m=ut(e),y=ut(e=v());for(;m!==y;)m=y,y=ut(e=v());return e}(t,n)}catch(e){throw console.log(e,"layers",t,"opt",n),new Error(e)}return t}function Xs(){return[{mergeMethod:"type",mergeDisableTestRela:"all",combineMethod:"none",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"",combineRatioLimForSimple:"",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"type",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:"all",removeThicknessMaxForAll:"0.49",removeThicknessMaxForMix:"",removeThicknessMaxForSimple:""}]}function Js(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"useMix");Ul(r)||(r=!0);let i=ve(n,"stages");return Pa(i)||(i=[{mergeMethod:"type",mergeDisableTestRela:"all",combineMethod:"none",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"",combineRatioLimForSimple:"",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"type",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:"all",removeThicknessMaxForAll:"0.49",removeThicknessMaxForMix:"",removeThicknessMaxForSimple:""}]),fi(i,(i=>{let o=ve(i,"numLayersLessThen",null);if(ht(o))return!(ut(t)<=o);let l=ve(i,"mergeMethod",""),a=ve(i,"mergeDisableTestRela",[]),u=ve(i,"combineMethod",""),s=ve(i,"combineDepthMin",""),f="",c=ve(i,"combineRatioLimForAll",""),h=ve(i,"combineRatioLimForMix",""),p=ve(i,"combineRatioLimForSimple","");if("none"!==u)if(vt(c))f=c;else{if(!vt(h)||!vt(p)){let e="stage.combineRatioLim設定錯誤，至少要提供ForAll或(ForMix與ForSimple)二擇一";throw console.log(e),new Error(e)}f=r?h:p}let d=ve(i,"combineDisableTestRela",[]),g=ve(i,"combineThicknessMax",""),v=ve(i,"removeMethod",""),m=ve(i,"removeDepthMin",""),y=ve(i,"removeDisableGeneralType",[]),b="",w=ve(i,"removeThicknessMaxForAll",""),$=ve(i,"removeThicknessMaxForMix",""),x=ve(i,"removeThicknessMaxForSimple","");if(vt(w))b=w;else{if(!vt($)||!vt(x)){let e="stage.removeThicknessMax設定錯誤，至少要提供ForAll或(ForMix與ForSimple)二擇一";throw console.log(e),new Error(e)}b=r?$:x}let M=ve(i,"removeDisableTestRela",[]);t=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Gs(Gs({},n),r),o=ut(t),l=ut(t=Ks(e,t,i));for(;o!==l;)o=l,l=ut(t=Ks(e,t,i));return t}(t,{mergeMethod:l,mergeDisableTestRela:a,combineMethod:u,combineDepthMin:s,combineRatioLim:f,combineDisableTestRela:d,combineThicknessMax:g,removeMethod:v,removeDepthMin:m,removeDisableGeneralType:y,removeThicknessMax:b,removeDisableTestRela:M})})),t}var ef={getSlIntegrateStagesForTest:Xs,getSlIntegrateStagesForDesign:function(){return[{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"none",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"",combineRatioLimForSimple:"",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"0.49",removeThicknessMaxForMix:"",removeThicknessMaxForSimple:""},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.11",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"0.51",removeThicknessMaxForMix:"",removeThicknessMaxForSimple:""},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.11",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"0.76",removeThicknessMaxForMix:"",removeThicknessMaxForSimple:""},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.11",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"1.01",removeThicknessMaxForMix:"",removeThicknessMaxForSimple:""},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.21",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"1.01",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.21",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"1.26",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.41",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"1.26",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.41",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:2,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"1.51",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.41",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:3,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"1.76",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.41",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:4,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"2.01",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.41",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:5,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"2.26",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"},{numLayersLessThen:35},{mergeMethod:"general",mergeDisableTestRela:[],combineMethod:"general",combineDepthMin:"",combineRatioLimForAll:"",combineRatioLimForMix:"0.41",combineRatioLimForSimple:"0",combineDisableTestRela:[],combineThicknessMax:6,removeMethod:"general",removeDepthMin:"",removeDisableGeneralType:[],removeDisableTestRela:[],removeThicknessMaxForAll:"2.51",removeThicknessMaxForMix:"0",removeThicknessMaxForSimple:"0"}]},compressLayerByDig:Bs,compressLayersByDig:Us,compressLayersByLabAndCpt:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=ve(r,"cutCptLen");if(!vt(i))throw new Error(`cutCptLen[${i}] is not a number`);i=Lt(i);let o=i/2,l=ve(r,"useSoilTypeSpec");"USCS"!==l&&"ISO"!==l&&(l="ISO");let a=ve(r,"useSimplify");"simplifyRobertson1986"!==a&&"simplifyRobertson1990"!==a&&"simplifyRobertson2009"!==a&&"simplifyRamsey"!==a&&(a="simplifyRobertson1990");let u=ve(r,"thicknessMaxForInfluence");vt(u)||(u=1.5),u=Lt(u);let s=ve(r,"depthMax");if(vt(s)&&(s=Lt(s)),Da(t)||(t=[]),Da(n)||(n=[]),0===ut(t)&&0===ut(n))throw new Error("無有效試驗與CPT數據可進行自動分層");let f=!(0===ut(t)||0===ut(n)),c=_s([...n,...t],{useCeil:!0});ht(s)||(s=c);let h={};"USCS"===l?h.numOfType=3:"ISO"===l&&(h.numOfType=5);let p=[];fi(n,(e=>{let t=Gs(Gs(Gs({},r),h),{},{data:e}),n="";"simplifyRobertson1986"===a?n=$u(e.iRobRfqt,e.iRobBqqt,t):"simplifyRobertson1990"===a?n=Mu(e.iRobFrQt,e.iRobBqQt,t):"simplifyRobertson2009"===a?n=Su(e.iRobFrQtn,e.iRobBqQtn,t):"simplifyRamsey"===a&&(n=ku(e.iRamFrQt,e.iRamBqQt,t)),dt(n)&&p.push({type:n,depth:Lt(e.depth)})}));let d={ranger:{depthHalf:o},methodSmooth:"maxCount"},g=[];try{g=Ja(p,"type",d)}catch(e){console.log(e)}let v=[];var m,y;fi(t,(e=>{if("GPP"!==e.test)return!0;let t=ve(e,"layerSoilTypeISO",""),n=null;return dt(t)&&(n=t),null===n||(!(vt(e.depth)&&vt(e.depthStart)&&vt(e.depthEnd))||void v.push({type:n,test:e.test,testRela:e.testRela,sampleGroupId:e.sampleGroupId,depth:Lt(e.depth),depthStart:Lt(e.depthStart),depthEnd:Lt(e.depthEnd)}))})),fi(Wa(v,"depth"),((e,t)=>{ut(e)>1&&console.log("發現樣本深度重複",t,wl(co(e,(e=>({test:e.test,testRela:e.testRela,sampleGroupId:e.sampleGroupId,depth:e.depth})))))})),y="depth",v=(m=v)&&m.length?Cs(m,so(y)):[],v=ha(v,"depth"),fi(v,((e,t)=>{if(0===t)return!0;let n=ve(v,t-1),r=e;gr(n.depthEnd,">",r.depthStart)&&console.log("試驗數據起訖深度有重疊",n,r)}));let b=eu(v,{stateConn:"overlap"});if(ut(b)>0)throw console.log("試驗數據起訖深度有重疊",ft(b,", ")),new Error("試驗數據起訖深度有重疊");let w=ut(v)-1;v=co(v,((e,t)=>{let n=ve(e,"depthStart");vt(n)&&(n=Lt(n));let r=ve(e,"depthEnd");vt(r)&&(r=Lt(r));let i=ve(e,"depth");if(vt(i)&&(i=Lt(i)),null!==n&&null!==r&&null!==i){let o=r-n;if(o<=0&&console.log(`樣本厚度[${o}]<=0`,e),o>0&&o<u){if(t>0){let e=ve(v,t-1),r=ve(e,"depthEnd"),o=ve(e,"depth");vt(o)&&(o=Lt(o),i-o>u?n=i-u/2:vt(r)&&(n=(n+r)/2))}else n=i-u/2;if(t<w){let e=ve(v,t+1),n=ve(e,"depthStart"),o=ve(e,"depth");vt(o)&&(o=Lt(o),o-i>u?r=i+u/2:vt(n)&&(r=(r+n)/2))}else r=i+u/2;n=Math.max(n,0),r=Math.min(r,s),e.depthStartNew=n,e.depthEndNew=r}}return e})),v=co(v,((e,t)=>(ht(e.depthStartNew)&&(e.depthStart=e.depthStartNew,delete e.depthStartNew),ht(e.depthEndNew)&&(e.depthEnd=e.depthEndNew,delete e.depthEndNew),e.depth=(e.depthStart+e.depthEnd)/2,e)));let $=wl(g);fi(v,(e=>{$=ja($,(t=>t.depth<e.depthStart||t.depth>e.depthEnd))})),fi(v,(e=>{$.push(e)})),$=ha($,"depth");let x=ut($)-1;$=co($,((e,t)=>{let n=t,r=t+1,i=ve($,t-1),o=ve(i,"depthEnd"),l=ve(i,"depth"),a=ve($,n),u=ve(a,"depthStart"),f=ve(a,"depthEnd"),c=ve(a,"depth"),h=ve($,r),p=ve(h,"depthStart"),d=ve(h,"depth");return 0===t?e.depthStart=0:vt(u)?e.depthStart=u:vt(o)?e.depthStart=o:vt(c)&&vt(l)?e.depthStart=(c+l)/2:console.log("無depthStart時但無足夠資料補算",o,c,l),t===x?e.depthEnd=s:vt(f)?e.depthEnd=f:vt(p)?e.depthEnd=p:vt(c)&&vt(d)?e.depthEnd=(c+d)/2:console.log("無depthEnd時但無足夠資料補算",p,c,d),e.depth=(e.depthStart+e.depthEnd)/2,e}));let M=[];try{M=$s($,{depthEndMax:s})}catch(e){console.log("psMerge",$),console.log(e)}let S=eu(M);if(ut(S)>0)throw console.log("分層起訖深度無連接",ft(S,", ")),new Error("分層起訖深度無連接");let E=!1;if(fi(M,(e=>{dt(e.type)||(console.log("發現無type分層",e),E=!0)})),E)throw new Error("發現無type分層");try{M=Us(M,r)}catch(e){console.log(e)}try{M=Js(e,M,Gs(Gs({},r),{},{useMix:f}))}catch(e){console.log(e)}try{M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"depthMax");vt(n)&&(n=Lt(n));let r=[];return fi(e,(e=>{let t=null;vt(e.depthStart)&&(t=Lt(e.depthStart));let i=null;if(vt(e.depthEnd)&&(i=Lt(e.depthEnd)),ht(n)){if(t=Math.min(t,n),i=Math.min(i,n),t>=i)return console.log("depthStart >= depthEnd",t,i),!0;e.depthStart=t,e.depthEnd=i}r.push(e)})),Us(e=r,t)}(M,r)}catch(e){console.log(e)}try{M=function(e){let t=[];return fi(e,(e=>{t.push({type:e.type,depthStart:e.depthStart,depthEnd:e.depthEnd})})),t}(M)}catch(e){console.log(e)}let k=ut(M);return console.log(`${Za(r.modeName)}分層數:`,k),"設計"===r.modeName&&(k<=19||k>=40)&&console.log(`${r.modeName}分層數[${k}]<=19或>=40`),M}};function tf(e,t){return e<t}function nf(e){return e&&e.length?qs(e,ui,tf):void 0}function rf(e){return e&&e.length?qs(e,ui,Fs):void 0}function of(e){return ce(e).toLowerCase()}var lf=ei&&ei.isRegExp,af=lf?Zr(lf):function(e){return g(e)&&"[object RegExp]"==d(e)},uf=4294967295;function sf(e,t){return dt(e)&&Ca(t)?0===(t=Kl(t))?"":e.substring(0,t):""}function ff(e,t){if(!dt(e))return"";if(!Ca(t))return"";if(0===(t=Kl(t)))return"";let n=e.length-t;return n<0&&(n=0),e.substr(n,t)}function cf(e,t,n){if(!dt(e))return"";if(!dt(t))return"";if(!pt(n))return"";return String(e).replaceAll(t,n)}let hf="in x-range",pf="out of x-range",df="order list",gf="reverse order list";function vf(e,t){let n=null,r=null;return n=e[0].x,r=e[ut(e)-1].x,t<n?{err:pf,msg:`x[${t}] less than lower limit[${n}]`,data:{ps:e,x:t,xmin:n,xmax:r}}:t>r?{err:pf,msg:`x[${t}] greater than upper limit[${r}]`,data:{ps:e,x:t,xmin:n,xmax:r}}:hf}function mf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Pa(e))return{err:"ps is not an array"};{let e=!vt(t),n=!Pa(t);if(e&&n)return{err:"px is not a number or an array"}}let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ut(e)<=0)return[];let n=ve(t,"keyX");dt(n)||(n="x");let r=ve(t,"keyY");dt(r)||(r="y");let i=[];return fi(e,(e=>{let t=null,o=null;Pa(e)&&ut(e)>=2?(t=ve(e,0),o=ve(e,1)):(t=ve(e,n,null),o=ve(e,r,null)),vt(t)&&vt(o)&&(t=Et(t),o=Et(o),i.push({x:t,y:o}))})),i}(e,n);if(ve(r,"err"))return ve(r,"err");if(0===ut(r))return{err:"ps(length=0) is not an effective array",ps:e,psEff:r};if(1===ut(r))return{err:"ps(length=1) is one point only",ps:e,psEff:r};let i=function(e){let t=!0,n=!0;for(let r=1;r<ut(e);r++){let i=e[r-1],o=e[r];if(t&&i.x>o.x&&(t=!1),n&&i.x<o.x&&(n=!1),i.x===o.x)return{err:`x can not be equal: i=${r}, x=${i.x}`}}return t?df:n?gf:"no"}(r);if("no"===i)return{err:"psEff is not increasing or decreasing"};i===gf&&(i=df,r=Ya(r));let o=!Pa(t);o&&(t=[t]);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ut(e)<=0)return[];let n=ve(t,"keyX");dt(n)||(n="x");let r=[];return fi(e,(e=>{let t=null;t=vt(e)?Et(e):Pa(e)&&ut(e)>=1?ve(e,0):ve(e,n,null),vt(t)&&(t=Et(t),r.push({x:t}))})),r}(t,n),a=ve(n,"mode");"linear"!==a&&"stairs"!==a&&"blocks"!==a&&(a="linear");let u,s=co(l,((e,t)=>{let i=ve(e,"x"),o=null;try{"linear"===a?o=function(e,t){let n=vf(e,t);if(n!==hf)return n;let r=null;for(let n=1;n<ut(e);n++){let i=e[n-1],o=e[n];if(i.x<=t&&t<=o.x){r=((t-i.x)*o.y+(o.x-t)*i.y)/(o.x-i.x);break}}return null===r?{err:pf}:r}(r,i):"blocks"===a?o=function(e,t){let n=vf(e,t);if(n!==hf)return n;let r=null;for(let n=1;n<ut(e);n++){let i=e[n-1],o=e[n],l=i.x,a=o.x;if(l<=t&&t<=a){r=o.y;break}}return null===r?{err:pf}:r}(r,i):"stairs"===a&&(o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"xMin");if(ht(r)){if(r>e[0].x)return{err:`xMin=${r} > ps[0].x=${e[0].x}`};r===e[0].x||(e=[{x:r,y:e[0].y},...e])}let i=ve(n,"xMax");if(ht(i)){if(i<e[ut(e)-1].x)return{err:`xMax=${i} < ps[size(ps)-1].x=${e[ut(e)-1].x}`};if(i===e[ut(e)-1].x);else{let t={x:i,y:e[ut(e)-1].y};e=[...e,t]}}let o=vf(e,t);if(o!==hf)return o;let l=null;for(let n=0;n<ut(e);n++){let r=ve(e,n-1,null),i=ve(e,n,null),o=ve(e,n+1,null),a=i.x;r&&(a=(r.x+i.x)/2);let u=i.x;if(o&&(u=(o.x+i.x)/2),a<=t&&t<=u){l=i.y;break}}return null===l?{err:pf}:l}(r,i,n))}catch(e){o={err:e.toString()}}return o}));return u=o?s[0]:s,u}function yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!Da(t))return{};let r={};return fi(t,(function(t){r[t]=ve(e,t,n)})),r}function bf(e){return null==e?[]:function(e,t){return le(t,(function(t){return e[t]}))}(e,oi(e))}let wf=va.rw;function $f(e,t){return e*wf/(1+t)}function xf(e,t){return e-t*wf/(1+t)}function Mf(e,t){return(e-wf)*t/(t-1)}function Sf(e,t){return(e+t)*wf/(1+t)}function Ef(e,t){return e+t*wf/(1+t)}function kf(e,t){return e*(t-1)/t+wf}function Rf(e,t){return(e*wf-t)/t}function Pf(e,t){return(e-t)/(t-wf-e)}function Lf(e,t){return(e*wf-t)/(t-wf)}function Df(e,t){return e*(1+t)/wf}function Cf(e,t){return e/(e-(t-wf))}function qf(e,t){return(e+e*t-t*wf)/wf}function Ff(e,t,n,r){let i={},o=ve(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},"returnFuncs");function l(){let o,l,a,u,s=!1;return!ht(o)&&ht(n)&&ht(r)&&(o=$f(n,r)),!ht(o)&&ht(t)&&ht(r)&&(o=xf(t,r)),!ht(o)&&ht(t)&&ht(n)&&1!==n&&(o=Mf(t,n)),ht(e)?Math.abs(e-o)>o/100*5&&(i.ck_rd=`輸入乾單位重[${e}]與反算出乾單位重[${o}]差距過大`):(e=o,s=!0),!ht(l)&&ht(n)&&ht(r)&&(l=Sf(n,r)),!ht(l)&&ht(e)&&ht(r)&&(l=Ef(e,r)),!ht(l)&&ht(e)&&ht(n)&&(l=kf(e,n)),ht(t)?Math.abs(t-l)>l/100*5&&(i.ck_rsat=`輸入飽和單位重[${t}]與反算出飽和單位重[${l}]差距過大`):(t=l,s=!0),!ht(a)&&ht(n)&&ht(e)&&(a=Rf(n,e)),!ht(a)&&ht(t)&&ht(e)&&t-wf-e!=0&&(a=Pf(e,t)),!ht(a)&&ht(t)&&ht(n)&&t-wf!=0&&(a=Lf(n,t)),ht(r)?Math.abs(r-a)>a/100*5&&(i.ck_e=`輸入孔隙比[${r}]與反算出孔隙比[${a}]差距過大`):(r=a,s=!0),!ht(u)&&ht(e)&&ht(r)&&(u=Df(e,r)),!ht(u)&&ht(e)&&ht(t)&&e-(t-wf)!=0&&(u=Cf(e,t)),!ht(u)&&ht(t)&&ht(r)&&(u=qf(t,r)),ht(n)?Math.abs(n-u)>u/100*5&&(i.ck_GS=`輸入比重[${n}]與反算出比重[${u}]差距過大`):(n=u,s=!0),s}Ul(o)||(o=!1),vt(e)?((e=Lt(e))<=0&&(i.rd=`乾單位重[${e}]為數字但<=0，自動清除`),e<=wf&&(i.rd=`乾單位重[${e}]<=水單位重[${wf}]`)):e=null,vt(t)?((t=Lt(t))<=0&&(i.rsat=`飽和單位重[${t}]為數字但<=0，自動清除`),t<=wf&&(i.rsat=`飽和單位重[${t}]<=水單位重[${wf}]`)):t=null,vt(n)?(n=Lt(n))<=0&&(i.GS=`比重[${n}]為數字但<=0，自動清除`):n=null,vt(r)?(r=Lt(r))<=0&&(i.e=`孔隙比[${r}]為數字但<=0，自動清除`):r=null;let a=0;if(a+=vt(e)?1:0,a+=vt(t)?1:0,a+=vt(n)?1:0,a+=vt(r)?1:0,a>=2){let e=l();for(;e;)e=l()}let u={rd:e,rsat:t,GS:n,e:r};if(Gl(i)){let e=ft(bf(i),", ");u.err=e}return o&&(u.coreFuncs={get_rd_from_GS_e:$f,get_rd_from_rsat_e:xf,get_rd_from_rsat_GS:Mf,get_rsat_from_GS_e:Sf,get_rsat_from_rd_e:Ef,get_rsat_from_rd_GS:kf,get_e_from_GS_rd:Rf,get_e_from_rd_rsat:Pf,get_e_from_GS_rsat:Lf,get_GS_from_rd_e:Df,get_GS_from_rd_rsat:Cf,get_GS_from_rsat_e:qf}),u}function Tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tf(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let jf=1/va.g*1e3/1e4;function Af(e){let t=Nl(Za(e));return""!==t?`[${t}]`:""}function _f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new",n=sf(e,1),r=sf(e,2);if("new"===t)return"C"===n||"O"===n||"P"===n||"M"===n&&"ML"!==r&&"MH"!==r;if("classic"===t)return"S"!==n&&"G"!==n;throw new Error(`invalid mode[${t}]`)}function Nf(e,t,n){if(ut(e)<=0)return{err:"invalid vx"};if(ut(t)<=0)return{err:"invalid vy"};if(ut(e)!==ut(t))return{err:"size of vx is not equal to size of vy"};let r=mf(co(e,((n,r)=>({x:e[r],y:t[r]}))),n);return r.err&&"ps is not effective array"===r.err&&(r.err="無有效數據"),r}function If(e,t,n){return((n-e.x)*t.y+(t.x-n)*e.y)/(t.x-e.x)}function zf(e,t){let n=[],r=[{volumetricStrain:10,data:[[1.15304,.6],[1.10234,.0413661],[1.10234,.0348459],[1.04383,.0253621],[.956072,.0161746],[.722041,.0093581],[0,0]]},{volumetricStrain:5,data:[[3.00384,.6],[2.97459,.0591482],[2.94533,.0523317],[2.82832,.0431443],[2.56503,.0348459],[2.12623,.0253621],[1.21936,.0126182],[0,0]]},{volumetricStrain:4,data:[[5.11012,.6],[5.11012,.111606],[5.05161,.103604],[5.02236,.0947126],[4.87609,.0849324],[4.72982,.0754486],[4.52504,.0656684],[4.20325,.0579628],[3.82295,.0499608],[3.32563,.0407733],[2.53578,.0286221],[1.5704,.0161746],[0,0]]},{volumetricStrain:3,data:[[7.68446,.6],[7.53819,.234896],[7.53819,.212964],[7.50893,.191033],[7.39192,.165249],[7.33341,.142428],[7.24565,.125831],[7.07012,.111013],[6.8946,.09738],[6.66057,.0887852],[6.45579,.0804869],[6.07549,.0730776],[5.66594,.0665575],[5.28564,.0606301],[4.75907,.0523317],[4.08623,.043737],[0,0]]},{volumetricStrain:2,data:[[14.1203,.6],[14.091,.248529],[13.974,.231043],[13.7985,.216521],[13.6815,.201702],[13.3597,.184513],[13.2134,.173843],[13.0087,.16347],[12.7161,.152208],[12.131,.139168],[11.546,.12761],[10.8439,.116644],[0,0]]},{volumetricStrain:1,data:[[27.5771,.6],[27.5771,.541935],[27.6063,.507852],[27.5478,.485625],[27.5186,.465471],[27.5186,.445022],[27.4893,.424869],[27.3723,.41005],[27.1675,.392268],[26.9335,.376264],[26.5532,.357889],[26.2021,.339514],[25.7048,.324399],[25.1783,.311655],[24.6224,.298022],[23.9496,.282908],[23.2182,.269571],[22.4576,.256531],[21.7556,.244676],[20.8779,.232525],[19.9126,.218892],[0,0]]},{volumetricStrain:.5,data:[[33.0183,.6],[33.0183,.570979],[32.9598,.554086],[32.9013,.536007],[32.6965,.516743],[32.5502,.500147],[32.3747,.482068],[32.0529,.464582],[31.6726,.445022],[31.3216,.425461],[30.9998,.410939],[30.5025,.394935],[29.9466,.376264],[29.3908,.356704],[28.3962,.335958],[27.1383,.313137],[25.5586,.287057],[23.7156,.261865],[21.8141,.238452],[19.7078,.212964],[0,0]]},{volumetricStrain:.2,data:[[35.4,.6],[35.3,.574535],[35.1,.555864],[34.9,.539267],[34.6,.515558],[34.3,.497183],[34,.477919],[33.4544,.455691],[33,.434353],[32.6087,.415385],[31.8774,.397306],[30.8242,.369151],[30.0051,.348998],[29.069,.327067],[28.1329,.308099],[27.1383,.291799],[25.8218,.271349],[24.3884,.252974],[23.2768,.237859],[21.8726,.220373],[19.9711,.200517],[18.5961,.186291],[17.1627,.170583],[15.583,.154876],[14.3543,.14065],[12.8331,.124942],[10.7269,.103307],[8.59132,.081376],[6.39729,.0612228],[4.17399,.0389951],[2.15548,.0188419],[0,0]]},{volumetricStrain:.1,data:[[36.7,.6],[36.5,.571572],[36.2,.544602],[35.8,.520596],[35.4,.490366],[35,.466657],[34.6,.446207],[34.2,.424869],[33.5,.404419],[32.7,.379228],[32,.358482],[30.9998,.331809],[29.5956,.305432],[28.0159,.278758],[26.9335,.262162],[25.266,.238156],[23.2768,.214446],[21.2875,.192515],[19.0642,.170583],[16.8117,.149541],[14.5006,.129684],[12.2481,.108938],[10.0248,.0881925],[7.77222,.0671502],[5.63669,.0472934],[4.70056,.038106],[3.23787,.0259548],[2.38951,.0194347],[.926818,.00669077],[0,0]]}];r=co(r,(e=>{let t=co(e.data,(e=>e[1])),n=co(e.data,(e=>e[0]));return e.vx=t,e.vy=n,e}));let i=co(r,"volumetricStrain"),o=co(r,(e=>{let n=Nf(e.vx,e.vy,t);return ve(n,"err")?n.err:n})),l=o[0],a=[o[0]],u=[i[0]];fi(o,((e,t)=>{t>0&&o[t]>=l&&(l=o[t],a.push(o[t]),u.push(i[t]))})),o=a,i=u;let s=Nf(o,i,e);if(ve(s,"err"))if("out of x-range"===s.err){let r=s.data.ps,i=rf(o),l=nf(o);if(e>i){let o=r[ut(r)-1].y;n.push(`出現外插情形 N160=${e} > N160Max=${i}，依照CSR=${t}並給予最小體積應變vstr=${o}%`),s=o}else if(e<l){let i=If(r[0],r[1],e);n.push(`出現外插情形 N160=${e} < N160Min=${l}，依照CSR=${t}並依據最近2點外插體積應變vstr=${i}%`),s=i}else n.push("非預期外插情形，請洽開發者修復問題"),s=""}else n.push(s.err),s="";return{err:n,vstr:s}}function Gf(e,t){let n=[],r=[{N172:3,data:[[0,5.48516],[.791714,5.48516],[.889946,5.48274],[.957602,5.47549],[.972564,5.43681],[.981021,5.37154],[.982973,4.71396],[.984274,4.17243],[.985575,3.45201],[.988177,2.61312],[.992081,2.25532],[.996634,1.94104],[1.00379,1.68961],[1.01095,1.54214],[1.02981,1.32698],[1.04347,1.16501],[1.06624,1.00303],[1.09096,.879735],[1.11503,.773363],[1.1391,.703254],[1.17944,.616222],[1.23018,.529191],[1.28873,.444576],[1.35378,.384138],[1.41558,.333369],[1.48064,.275348],[1.5548,.231832],[2,0]]},{N172:6,data:[[0,4.51524],[.789554,4.51524],[.890726,4.51176],[.938502,4.49784],[.957238,4.45954],[.960985,4.31681],[.962858,3.76677],[.964732,3.36294],[.966605,2.92778],[.971289,2.57618],[.97691,2.27679],[.980657,2.07487],[.990962,1.85903],[1.00314,1.57705],[1.01813,1.35773],[1.03686,1.18367],[1.05935,1.02005],[1.08089,.88428],[1.09401,.818136],[1.13148,.696291],[1.17082,.60926],[1.22367,.517103],[1.28287,.437324],[1.34597,.376885],[1.40778,.323699],[1.47673,.268096],[1.55154,.222162],[2,0]]},{N172:10,data:[[0,3.50567],[.738969,3.50567],[.841077,3.50219],[.896347,3.49523],[.912272,3.43953],[.919767,3.34206],[.928198,3.02874],[.938502,2.64928],[.94787,2.29419],[.961922,1.9774],[.972226,1.74763],[.989088,1.50743],[1.00876,1.28811],[1.03031,1.11404],[1.05466,.953905],[1.08745,.807692],[1.12398,.682366],[1.16333,.584891],[1.21673,.50134],[1.27762,.421271],[1.33757,.358608],[1.39752,.306389],[1.46966,.25417],[1.54366,.205433],[2,0]]},{N172:14,data:[[0,2.77461],[.693066,2.77461],[.763325,2.77113],[.797049,2.73283],[.815784,2.68061],[.831709,2.57966],[.867307,2.26634],[.88979,2.01221],[.915083,1.74763],[.936629,1.54224],[.960985,1.34729],[.991898,1.12797],[1.01532,.978274],[1.04248,.852949],[1.0734,.731104],[1.10712,.623185],[1.14834,.539634],[1.18206,.480453],[1.22797,.414309],[1.28417,.36209],[1.34975,.299427],[1.4275,.240245],[1.51368,.184545],[2,0]]},{N172:20,data:[[0,2.17235],[.511332,2.17235],[.605009,2.16539],[.660279,2.13406],[.69213,2.1062],[.722107,2.0505],[.751147,1.95999],[.794238,1.75808],[.825152,1.6049],[.865433,1.40299],[.901968,1.24285],[.939439,1.06182],[.994709,.859911],[1.04717,.689329],[1.09869,.550078],[1.15021,.459565],[1.20267,.386459],[1.25888,.327277],[1.31228,.271577],[1.38441,.22632],[1.46403,.177583],[2,0]]},{N172:25,data:[[0,1.73371],[.396108,1.73371],[.49447,1.71978],[.544119,1.69542],[.579716,1.65712],[.619998,1.58053],[.660279,1.48306],[.703371,1.37862],[.734285,1.28463],[.775503,1.17671],[.816721,1.06182],[.865433,.93998],[.910399,.82858],[.956301,.724142],[1.00595,.602297],[1.0556,.508303],[1.11743,.403865],[1.16989,.337721],[1.22703,.285502],[1.27855,.247208],[1.33663,.208914],[1.4172,.167139],[1.49963,.132326],[2,0]]},{N172:30,data:[[0,1.30203],[.264959,1.30203],[.388614,1.29159],[.476671,1.26026],[.527257,1.20108],[.588147,1.11056],[.647164,1.01657],[.694003,.919093],[.759578,.804211],[.821405,.689329],[.884169,.591853],[.964732,.47349],[1.02469,.386459],[1.09963,.309871],[1.16895,.25417],[1.24764,.19847],[1.32726,.156695],[1.40876,.125364],[1.48558,.100995],[1.55303,.0870696],[1.63453,.0627007],[2,0]]}];r=co(r,(e=>{let t=co(e.data,(e=>e[0])),n=co(e.data,(e=>e[1]));return e.vx=t,e.vy=n,e}));let i=co(r,"N172"),o=co(r,(e=>{let n=Nf(e.vx,e.vy,t);return ve(n,"err")?n.err:n})),l=o[0],a=[o[0]],u=[i[0]];fi(o,((e,t)=>{t>0&&o[t]<=l&&(l=o[t],a.push(o[t]),u.push(i[t]))})),o=a,i=u;let s=Nf(i,o,e);if(ve(s,"err"))if("out of x-range"===s.err){let r=s.data.ps,o=rf(i),l=nf(i);if(e>o){let i=r[ut(r)-1].y;n.push(`出現外插情形 N172=${e} > N172Max=${o}，依照FS=${t}並給予最小體積應變vstr=${i}%`),s=i}else if(e<l){let i=If(r[0],r[1],e);n.push(`出現外插情形 N172=${e} < N172Min=${l}，依照FS=${t}並依據最近2點外插體積應變vstr=${i}%`),s=i}else n.push("非預期外插情形，請洽開發者修復問題"),s=""}else n.push(s.err),s="";return{err:n,vstr:s}}function Bf(e,t,n,r){let i=[],o=0;!function(){if(n<0)return i.push(`Volumetric Strain(Tokimatsu And Seed): CSR${Af(n)}<0`),void(o="");n>.6&&(i.push("Volumetric Strain(Tokimatsu And Seed): CSR大於0.6超過原研究範疇，強制改為0.6"),n=.6),o=zf(e,n),ut(o.err)>0&&fi(o.err,(e=>{i.push(`Volumetric Strain(Tokimatsu And Seed): ${e}`)})),o=o.vstr}();let l=0;return function(){if(r<0)return i.push(`Volumetric Strain(Ishihara And Yoshimine): FS${Af(r)}<0`),void(l="");r>=2&&(r=2),l=Gf(t,r),ut(l.err)>0&&fi(l.err,(e=>{i.push(`Volumetric Strain(Ishihara And Yoshimine): ${e}`)})),l=l.vstr}(),{err:i,vstrTS:o,vstrIY:l}}function Uf(e){let{ver:t="2012",noLiqueMode:n="new",waterLevelDesign:r,soilClassification:i,depth:o,N60:l,FC:a,PI:u,sv:s,svpUsual:f,svpDesign:c,PGA:h,Mw:p}=e,d=[],g="",v="",m="",y="",b="",w="",$="",x="",M="",S="",E="",k="",R="";function P(){let e={rrd:v,ks:m,CN:y,N160:b,N160cs:w,N172:$,CRR75:x,CRR:M,CSR:S,FS:E,vstrTS:k,vstrIY:R,err:ft(d,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let L=!1,D=!1;for(;;){if("2012"!==t&&"2017"!==t)return d.push(`ver${Af(t)}非2012或2017`),P();if(!vt(o))return d.push(`depth${Af(o)}非數字`),P();if(o=Lt(o),o<0)return d.push(`depth${Af(o)}<0`),P();if("new"!==n&&"classic"!==n&&(d.push(`noLiqueMode${Af(n)}非'new'或'classic'，強制預設為'new'`),n="new"),vt(r)?(r=Lt(r),r<0&&(d.push(`waterLevelDesign${Af(r)}<0，強制預設為0(m)`),r=0)):(d.push(`waterLevelDesign${Af(r)}非數字，強制預設為0(m)`),r=0),dt(i)||(d.push(`soilClassification${Af(i)}非有效字串，強制預設為SW`),i="SW"),(o<r||_f(i,n))&&(L=!0),o>20&&(L=!0),"NP"===Nl(Za(u))&&(u=0),vt(u)?Lt(u)>7&&(L=!0):d.push(`PI${Af(u)}非數字與非NP，強制略過部份非液化條件檢核`),vt(l)?(l=Lt(l),l<0&&(d.push(`N60${Af(l)}<0`),D=!0),l>=50&&(L=!0)):(d.push(`N60${Af(l)}非數字`),D=!0),vt(a)?(a=Lt(a),a<0&&(d.push(`FC${Af(a)}<0`),D=!0)):(d.push(`FC${Af(a)}非數字`),D=!0),!vt(f))return d.push(`svpUsual${Af(f)}非數字`),P();if(f=Lt(f),f<0)return d.push(`svpUsual${Af(f)}<0`),P();if(!vt(c))return d.push(`svpDesign${Af(c)}非數字`),P();if(c=Lt(c),c<0)return d.push(`svpDesign${Af(c)}<0`),P();if(!vt(s))return d.push(`sv${Af(s)}非數字`),P();if(s=Lt(s),s<0)return d.push(`sv${Af(s)}<0`),P();if(!vt(h))return d.push(`PGA${Af(h)}非數字`),P();if(h=Lt(h),h<0)return d.push(`PGA${Af(h)}<0`),P();if(!vt(p))return d.push(`Mw${Af(p)}非數字`),P();if(p=Lt(p),p<0)return d.push(`Mw${Af(p)}<0`),P();break}if(!0===L)return d=[],M="-",S="-",E=10,P();if(!0===D)return P();let C=null;"2012"===t?C=-3.3:"2017"===t&&(C=-1.8),g=(p/7.5)**C,v=o<=10?1-.01*o:1.2-.03*o,m=a<=10?1:1+.07*Math.sqrt(a-10);let q=1e3*va.Pa;if(y=Math.min(Math.sqrt(q/f),1.7),b=y*l,w=m*b,w>=39)return M="-",S="-",E=10,P();x=.08+.0035*w/(1-w/39),M=x*g,ht(M)&&(M=Math.min(M,1e20)),S=null,S=c>0?s/c*.65*h*v:1e20,ht(S)&&(S=Math.min(S,1e20)),ht(M)&&ht(S)&&S>0&&(E=M/S),ht(E)&&E>10&&(E=10),M<0&&d.push(`CRR${Af(M)}<0`),S<=0&&d.push(`CSR${Af(S)}<=0`),ht(E)?E<0&&(d.push(`FS${Af(E)}<0，強制改為0`),E=0):d.push(`FS${Af(E)}非數字`),$=b/1.2;let F=Bf(b,$,S,E);return d=[...d,...F.err],k=F.vstrTS,R=F.vstrIY,P()}function Qf(e){let{ver:t="1996",noLiqueMode:n="new",waterLevelDesign:r,soilClassification:i,vibrationType:o,depth:l,N60:a,FC:u,PI:s,D50:f,D10:c,sv:h,svpUsual:p,svpDesign:d,PGA:g}=e,v=[],m="",y="",b="",w="",$="",x="",M="",S="",E="",k="",R="",P="",L="",D="",C="",q="";function F(){let e={rrd:m,N160:R,N172:b,c1:w,c2:$,cFC:x,Na:M,RL:S,cw:E,CN:k,CRR75:"",CRR:P,CSR:L,FS:D,vstrTS:C,vstrIY:q,err:ft(v,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let T=!1,O=!1;for(;;){if("1996"!==t&&"2017"!==t)return v.push(`ver${Af(t)} 非1996或2017`),F();if(!vt(l))return v.push(`depth${Af(l)}非數字`),F();if(l=Lt(l),l<0)return v.push(`depth${Af(l)}<0`),F();if("new"!==n&&"classic"!==n&&(v.push(`noLiqueMode${Af(n)}非'new'或'classic'，強制預設為'new'`),n="new"),vt(r)?(r=Lt(r),r<0&&(v.push(`waterLevelDesign${Af(r)}<0，強制預設為0(m)`),r=0)):(v.push(`waterLevelDesign${Af(r)}非數字，強制預設為0(m)`),r=0),dt(i)||(v.push(`soilClassification${Af(i)}非有效字串，強制預設為SW`),i="SW"),_f(i,n)&&(T=!0),l>20&&(T=!0),vt(a)?(a=Lt(a),a<0&&(v.push(`N60${Af(a)}<0`),O=!0),a>=50&&(T=!0)):(v.push(`N60${Af(a)}非數字`),O=!0),(l<r||r>10)&&(T=!0),vt(u)?(u=Lt(u),u<0?(v.push(`FC${Af(u)}<0`),O=!0):u<=35||("NP"===Nl(Za(s))&&(s=0),vt(s)?(s=Lt(s),s<15||(T=!0)):v.push(`PI${Af(s)}非數字與非NP，強制略過部份非液化條件檢核`))):(v.push(`FC${Af(u)}非數字`),O=!0),vt(f)||v.push(`D50${Af(f)}非數字，強制略過部份非液化條件檢核`),vt(c)||v.push(`D10${Af(c)}非數字，強制略過部份非液化條件檢核`),vt(f)&&vt(c)&&(f=Lt(f),c=Lt(c),f>10&&(T=!0),c>1&&(T=!0)),vt(o)?(o=Kl(o),1!==o&&2!==o&&(v.push(`vibrationType${Af(o)}不等於1或2，更改為預設值1`),o=1)):(v.push(`vibrationType${Af(o)}非數字，更改為預設值1`),o=1),!vt(p))return v.push(`svpUsual${Af(p)}非數字`),F();if(p=Lt(p),p<0)return v.push(`svpUsual${Af(p)}<0`),F();if(!vt(d))return v.push(`svpDesign${Af(d)}非數字`),F();if(d=Lt(d),d<0)return v.push(`svpDesign${Af(d)}<0`),F();if(!vt(h))return v.push(`sv${Af(h)}非數字`),F();if(h=Lt(h),h<0)return v.push(`sv${Af(h)}<0`),F();if(!vt(g))return v.push(`PGA${Af(g)}非數字`),F();if(g=Lt(g),g<0)return v.push(`PGA${Af(g)}<0`),F();break}if(!0===T)return v=[],P="-",L="-",D=10,F();if(!0===O)return F();m=1-.015*l,y=a/1.2,k=170/(p+70),b=k*y;M=(()=>{let e=0,n="";return vt(f)?n=Lt(f)<2?"sand":"gravel":!function(e){let t=sf(e,1),n=sf(e,2);return"S"===t||"ML"===n||"MH"===n}(i)?function(e){return"G"===sf(e,1)}(i)&&(n="gravel"):n="sand","sand"!==n&&"gravel"!==n&&(v.push(`無法由D50${Af(f)}或土壤分類${Af(i)}區分砂或礫石，強制視為砂土`),n="sand"),"sand"===n?"1996"===t?e=(()=>{let e=0;return w=u<10?1:u<60?(u+40)/50:u/20-1,$=u<10?0:(u-10)/18,e=w*b+$,e})():"2017"===t&&(e=(()=>{let e=0;return x=u<10?1:u<40?(u+20)/30:(u-16)/12,e=x*(b+2.47)-2.47,e})()):"gravel"===n&&(vt(f)||(v.push(`因D50${Af(f)}未給予或非數字，故改使用土壤分類來區分砂或礫質土，卻又被分為礫質土仍需要用D50，故強制設定D50為10(mm)`),f=10),f=Lt(f),e=(1-.361*Math.log10(f/2))*b),e})(),M<14?"1996"===t?S=.0882*Math.sqrt(M/1.7):"2017"===t&&(S=.0882*Math.sqrt((.85*M+2.1)/1.7)):S=.0882*Math.sqrt(M/1.7)+16e-7*(M-14)**4.5,E=2===o?S<=.1?1:S<=.4?3.3*S+.67:2:1,P=E*S,ht(P)&&(P=Math.min(P,1e20)),L=null,L=d>0?m*g*h/d:1e20,ht(L)&&(L=Math.min(L,1e20)),ht(P)&&ht(L)&&L>0&&(D=P/L),ht(D)&&D>10&&(D=10),P<0&&v.push(`CRR${Af(P)}<0`),L<=0&&v.push(`CSR${Af(L)}<=0`),ht(D)?D<0&&(v.push(`FS${Af(D)}<0，強制改為0`),D=0):v.push(`FS${Af(D)}非數字`),R=b/(60/72);let j=Bf(R,b,L,D);return v=[...v,...j.err],C=j.vstrTS,q=j.vstrIY,F()}function Hf(){let e="\n    \n    u0,\n    qt,\n    qnet,\n    Bq,\n    Qt,\n\n    ";return e=cf(e,",",""),Ts(e,"\n")}function Wf(e){return yf(e,function(){let e="\n        \n    Qtn,\n    Rf,\n    Fr,\n    Ic,\n    Icn,\n    n,\n    Cn,\n\n    iIc,\n    iIcn,\n    iRobBqqt,\n    iRobRfqt,\n    iRobBqQt,\n    iRobFrQt,\n    iRobBqQtn,\n    iRobFrQtn,\n    iRamBqQt,\n    iRamFrQt,\n\n    ";return e=cf(e,",",""),Ts(e,"\n")}())}function Vf(e){return Of(Of({},function(e){return yf(e,Hf())}(e)),Wf(e))}function Yf(e,t,n,r,i,o,l,a){let u=null;u=ju({depth:e,sv:o/1e3,svp:l/1e3,qc:n,fs:r,u0:ma(e,"MPa"),u2:i},t,{useCnLeq:a,unitSvSvp:"MPa"});return u}function Zf(e){let{ver:t="2012",waterLevelDesign:n,depth:r,coe_a:i,qc:o,fs:l,u2:a,svp:u,svpUsual:s,svpDesign:f,sv:c,PGA:h,Mw:p}=e,d=[],g="",v={},m="",y="",b="",w="",$="",x="",M="",S="",E="",k="",R="",P="",L="";function D(){let e=Of(Of({},Vf(v)),{},{rrd:y,Ic:b,Icn:w,qc1N:x,Kc:E,qc1Ncs:M,CRR75:k,CRR:R,CSR:P,FS:L,msg:g,err:ft(d,"; ")});return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let C=!1,q=!1;for(;;){if("2012"!==t&&"2017"!==t&&"2021"!==t)return d.push(`ver${Af(t)}非2012或2017或2021`),D();if(vt(i)?i=Lt(i):(d.push(`coe_a${Af(i)}非數字，強制預設為0.8`),i=.8),!vt(r))return d.push(`depth${Af(r)}非數字`),D();if(r=Lt(r),r<0)return d.push(`depth${Af(r)}<0`),D();if(vt(n)?(n=Lt(n),n<0&&(d.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(d.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),r<n&&(g=`判定非液化: 樣本深度[${r}]位於地下水位[${n}]之上`,C=!0),r>20&&(g=`判定非液化: 樣本深度[${r}]大於20m`,C=!0),vt(o)?(o=Lt(o),o<0&&(d.push(`qc${Af(o)}<0`),q=!0)):(d.push(`qc${Af(o)}非數字`),q=!0),vt(l)?(l=Lt(l),l<0&&(d.push(`fs${Af(l)}<0`),q=!0)):(d.push(`fs${Af(l)}非數字`),q=!0),vt(a)?a=Lt(a):(d.push(`u2${Af(a)}非數字`),q=!0),vt(u)&&(u=Lt(u),s=u,f=u),!vt(s))return d.push(`svpUsual${Af(s)}非數字`),D();if(s=Lt(s),s<0)return d.push(`svpUsual${Af(s)}<0`),D();if(!vt(f))return d.push(`svpDesign${Af(f)}非數字`),D();if(f=Lt(f),f<0)return d.push(`svpDesign${Af(f)}<0`),D();if(!vt(c))return d.push(`sv${Af(c)}非數字`),D();if(c=Lt(c),c<0)return d.push(`sv${Af(c)}<0`),D();if(!vt(h))return d.push(`PGA${Af(h)}非數字`),D();if(h=Lt(h),h<0)return d.push(`PGA${Af(h)}<0`),D();if(!vt(p))return d.push(`Mw${Af(p)}非數字`),D();if(p=Lt(p),p<0)return d.push(`Mw${Af(p)}<0`),D();break}if(!0===C)return d=[],R="-",P="-",L=10,D();if(!0===q)return D();if(v=Yf(r,i,o,l,a,c,s,!0),b=ve(v,"Ic",null),w=ve(v,"Icn",null),$=ve(v,"qt",null),S=ve(v,"Rf",null),!vt($))return d.push(`qt${Af($)}非數字`),D();c*=jf,s*=jf,f*=jf,$=1e3*$*jf;let F=null;if("2012"===t?F=-3.3:"2017"!==t&&"2021"!==t||(F=-1.8),m=(p/7.5)**F,y=r<=10?1-.01*r:1.2-.03*r,x=1.7/(s+.7)*$,E=S<=.1?1:.4*S**2-.08*S+1.004,M=E*x,k=1e20,M<180&&(k=.09+28e-5*M/(1-M/180)),R=k*m,ht(R)&&(R=Math.min(R,1e20)),P=null,P=f>0?.65*h*(c/f)*y:1e20,ht(P)&&(P=Math.min(P,1e20)),ht(R)&&ht(P)&&P>0&&(L=R/P),ht(L)&&L>10&&(L=10),M>=180)return g=`判定非液化: qc1Ncs[${M}]>=180`,L=10,D();if("2021"===t){let e=null;if(null===e&&ht(w)&&(e=w),null===e&&ht(b)&&(d.push("無法計算Icn，強制降轉使用Ic"),e=b),e>2.6)return g=`判定非液化: 判定用Ic[${e}]>2.6`,L=10,D()}return R<0&&d.push(`CRR${Af(R)}<0`),P<=0&&d.push(`CSR${Af(P)}<=0`),ht(L)?L<0&&(d.push(`FS${Af(L)}<0，強制改為0`),L=0):d.push(`FS${Af(L)}非數字`),L>=1&&(g=`判定非液化: FS[${L}]>=1`),D()}let Kf={SPT:{sptSeed:function(e){let{noLiqueMode:t="new",waterLevelDesign:n,soilClassification:r,depth:i,N60:o,FC:l,sv:a,svpUsual:u,svpDesign:s,PGA:f,Mw:c}=e,h=[],p="",d="",g="",v="",m="",y="",b="",w="",$="",x="",M="";function S(){let e={rrd:d,CN:g,N160:v,N172:m,CRR75:y,CRR:b,CSR:w,FS:$,vstrTS:x,vstrIY:M,err:ft(h,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let E=!1,k=!1;for(;;){if(!vt(i))return h.push(`depth${Af(i)}非數字`),S();if(i=Lt(i),i<0)return h.push(`depth${Af(i)}<0`),S();if("new"!==t&&"classic"!==t&&(h.push(`noLiqueMode${Af(t)}非'new'或'classic'，強制預設為'new'`),t="new"),vt(n)?(n=Lt(n),n<0&&(h.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(h.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),dt(r)||(h.push(`soilClassification${Af(r)}非有效字串，強制預設為SW`),r="SW"),(i<n||_f(r,t))&&(E=!0),i>20&&(E=!0),vt(o)?(o=Lt(o),o<0&&(h.push(`N60${Af(o)}<0`),k=!0),o>=50&&(E=!0)):(h.push(`N60${Af(o)}非數字`),k=!0),vt(l)?(l=Lt(l),l<0&&(h.push(`FC${Af(l)}<0`),k=!0)):(h.push(`FC${Af(l)}非數字`),k=!0),!vt(u))return h.push(`svpUsual${Af(u)}非數字`),S();if(u=Lt(u),u<0)return h.push(`svpUsual${Af(u)}<0`),S();if(!vt(s))return h.push(`svpDesign${Af(s)}非數字`),S();if(s=Lt(s),s<0)return h.push(`svpDesign${Af(s)}<0`),S();if(!vt(a))return h.push(`sv${Af(a)}非數字`),S();if(a=Lt(a),a<0)return h.push(`sv${Af(a)}<0`),S();if(!vt(f))return h.push(`PGA${Af(f)}非數字`),S();if(f=Lt(f),f<0)return h.push(`PGA${Af(f)}<0`),S();if(!vt(c))return h.push(`Mw${Af(c)}非數字`),S();if(c=Lt(c),c<0)return h.push(`Mw${Af(c)}<0`),S();break}if(!0===E)return h=[],b="-",w="-",$=10,S();if(!0===k)return S();p=(c/7.5)**-1.11,d=(1-.4113*i**.5+.04052*i+.001753*i**1.5)/(1-.4177*i**.5+.05729*i-.006205*i**1.5+.00121*i**2);let R=1e3*va.Pa;g=Math.min(Math.sqrt(R/u),1.7),v=g*o;let P=[{FC:5,data:[[0,.0496622],[2.65306,.0547297],[4.38776,.0628378],[6.02041,.0719595],[7.55102,.0831081],[8.97959,.100338],[10.5102,.114527],[12.2449,.131757],[13.5714,.146959],[14.7959,.161149],[16.1224,.177365],[17.7551,.193581],[19.1837,.211824],[20.7143,.232095],[22.0408,.248311],[23.2653,.265541],[24.5918,.285811],[25.6122,.307095],[26.4286,.327365],[27.2449,.347635],[27.9592,.372973],[28.3673,.398311],[28.7755,.423649],[28.9796,.444932],[29.2857,.473311],[29.3,.6],[100,100]]},{FC:15,data:[[0,.065],[1.63265,.068],[2.85714,.074],[3.87755,.082],[5.10204,.0932432],[6.22449,.110473],[7.44898,.123649],[8.57143,.136824],[9.69388,.151014],[10.9184,.164189],[11.9388,.178378],[13.0612,.192568],[13.8776,.203716],[14.6939,.214865],[16.1224,.232095],[17.551,.251351],[18.5714,.270608],[19.898,.288851],[20.7143,.308108],[21.4286,.327365],[22.0408,.347635],[22.449,.370946],[22.8571,.393243],[23.2653,.417568],[23.6735,.439865],[23.9796,.460135],[24.05,.483446],[24.0816,.515878],[24.1,.6],[100,101]]},{FC:35,data:[[0,.075],[1.32653,.082],[2.44898,.09],[3.26531,.0962838],[4.79592,.116554],[6.22449,.134797],[7.34694,.152027],[8.87755,.171284],[10.102,.185473],[11.4286,.20777],[13.2653,.228041],[14.5918,.247297],[15.7143,.267568],[16.7347,.287838],[17.7551,.313176],[18.6735,.343581],[19.1837,.364865],[19.6939,.382095],[20.102,.410473],[20.4082,.433784],[20.5102,.464189],[20.7143,.490541],[20.9184,.519932],[20.92,.6],[100,102]]}],L=co(P,"FC");P=co(P,(e=>{let t=co(e.data,(e=>e[0])),n=co(e.data,(e=>e[1]));return e.vx=t,e.vy=n,e}));let D=co(P,(e=>{let t=Nf(e.vx,e.vy,v);return ve(t,"err")?t.err:t}));if(y=Nf(L,D,l),ve(y,"err")){if("out of x-range"!==y.err)return h.push(y.err),y="",S();{let e=y.data.ps,t=rf(L),n=nf(L);if(l>t)y=If(e[ut(e)-2],e[ut(e)-1],l),h.push(`出現外插情形 FC=${l} > FCMax=${t}，依據最近2點外插CRR75=${y}`);else{if(!(l<n))return h.push("非預期外插情形，請洽開發者修復問題"),y="",S();y=If(e[0],e[1],l),y=Math.max(y,0),h.push(`出現外插情形 FC=${l} < FCMin=${n}，依據最近2點外插CRR75=${y}`)}}}if(!ht(y))return h.push(`CRR75${Af(y)}非數字`),S();y>.6&&(h.push(`CRR75${Af(y)}大於0.6超過原研究範疇，強制改為0.6`),y=.6),b=y*p,ht(b)&&(b=Math.min(b,1e20)),w=null,w=s>0?a/s*.65*f*d:1e20,ht(w)&&(w=Math.min(w,1e20)),ht(b)&&ht(w)&&w>0&&($=b/w),ht($)&&$>10&&($=10),b<0&&h.push(`CRR${Af(b)}<0`),w<=0&&h.push(`CSR${Af(w)}<=0`),ht($)?$<0&&(h.push(`FS${Af($)}<0，強制改為0`),$=0):h.push(`FS${Af($)}非數字`),m=v/1.2;let C=Bf(v,m,w,$);return h=[...h,...C.err],x=C.vstrTS,M=C.vstrIY,S()},sptHBF2012:e=>Uf(e=Of(Of({},e),{},{ver:"2012"})),sptHBF2017:e=>Uf(e=Of(Of({},e),{},{ver:"2017"})),sptNCEER:function(e){let{noLiqueMode:t="new",waterLevelDesign:n,soilClassification:r,depth:i,N60:o,FC:l,sv:a,svpUsual:u,svpDesign:s,PGA:f,Mw:c}=e,h=[],p="",d="",g="",v="",m="",y="",b="",w="",$="",x="",M="",S="",E="",k="";function R(){let e={rrd:d,alpha:g,beta:v,CN:m,N160:y,N160cs:b,N172:w,CRR75:$,CRR:x,CSR:M,FS:S,vstrTS:E,vstrIY:k,err:ft(h,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let P=!1,L=!1;for(;;){if(!vt(i))return h.push(`depth${Af(i)}非數字`),R();if(i=Lt(i),i<0)return h.push(`depth${Af(i)}<0`),R();if("new"!==t&&"classic"!==t&&(h.push(`noLiqueMode${Af(t)}非'new'或'classic'，強制預設為'new'`),t="new"),vt(n)?(n=Lt(n),n<0&&(h.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(h.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),dt(r)||(h.push(`soilClassification${Af(r)}非有效字串，強制預設為SW`),r="SW"),(i<n||_f(r,t))&&(P=!0),i>20&&(P=!0),vt(o)?(o=Lt(o),o<0&&(h.push(`N60${Af(o)}<0`),L=!0),o>=50&&(P=!0)):(h.push(`N60${Af(o)}非數字`),L=!0),vt(l)?(l=Lt(l),l<0&&(h.push(`FC${Af(l)}<0`),L=!0)):(h.push(`FC${Af(l)}非數字`),L=!0),!vt(u))return h.push(`svpUsual${Af(u)}非數字`),R();if(u=Lt(u),u<0)return h.push(`svpUsual${Af(u)}<0`),R();if(!vt(s))return h.push(`svpDesign${Af(s)}非數字`),R();if(s=Lt(s),s<0)return h.push(`svpDesign${Af(s)}<0`),R();if(!vt(a))return h.push(`sv${Af(a)}非數字`),R();if(a=Lt(a),a<0)return h.push(`sv${Af(a)}<0`),R();if(!vt(f))return h.push(`PGA${Af(f)}非數字`),R();if(f=Lt(f),f<0)return h.push(`PGA${Af(f)}<0`),R();if(!vt(c))return h.push(`Mw${Af(c)}非數字`),R();if(c=Lt(c),c<0)return h.push(`Mw${Af(c)}<0`),R();break}if(!0===P)return h=[],x="-",M="-",S=10,R();if(!0===L)return R();p=(c/7.5)**-2.56,d=(1-.4113*i**.5+.04052*i+.001753*i**1.5)/(1-.4177*i**.5+.05729*i-.006205*i**1.5+.00121*i**2),g=l<=5?0:l<=35?Math.exp(1.76-190/l**2):5,v=l<=5?1:l<=35?.99+l**1.5/1e3:1.2;let D=1e3*va.Pa;if(m=Math.min(Math.sqrt(D/u),1.7),y=m*o,b=g+v*y,b>=30)return x="-",M="-",S=10,R();$=(.04844+-.004721*b+6136e-7*b**2+-1673e-8*b**3)/(1+-.1248*b+.009578*b**2+-3285e-7*b**3+3714e-9*b**4),x=$*p,ht(x)&&(x=Math.min(x,1e20)),M=null,M=s>0?a/s*.65*f*d:1e20,ht(M)&&(M=Math.min(M,1e20)),ht(x)&&ht(M)&&M>0&&(S=x/M),ht(S)&&S>10&&(S=10),x<0&&h.push(`CRR${Af(x)}<0`),M<=0&&h.push(`CSR${Af(M)}<=0`),ht(S)?S<0&&(h.push(`FS${Af(S)}<0，強制改為0`),S=0):h.push(`FS${Af(S)}非數字`),w=y/1.2;let C=Bf(y,w,M,S);return h=[...h,...C.err],E=C.vstrTS,k=C.vstrIY,R()},sptNJRA1996:e=>Qf(e=Of(Of({},e),{},{ver:"1996"})),sptNJRA2017:e=>Qf(e=Of(Of({},e),{},{ver:"2017"})),sptTY:function(e){let{noLiqueMode:t="new",waterLevelDesign:n,soilClassification:r,depth:i,a:o,n:l,Cr:a,Cs:u,N60:s,FC:f,sv:c,svpUsual:h,svpDesign:p,PGA:d,Mw:g}=e,v=[],m="",y="",b="",w="",$="",x="",M="",S="",E="",k="",R="",P="";function L(){let e={rrd:m,N160:M,N172:b,dNf:w,Na:$,CN:x,CRR75:"",CRR:S,CSR:E,FS:k,vstrTS:R,vstrIY:P,err:ft(v,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let D=!1,C=!1;for(;;){if(!vt(i))return v.push(`depth${Af(i)}非數字`),L();if(i=Lt(i),i<0)return v.push(`depth${Af(i)}<0`),L();if("new"!==t&&"classic"!==t&&(v.push(`noLiqueMode${Af(t)}非'new'或'classic'，強制預設為'new'`),t="new"),vt(n)?(n=Lt(n),n<0&&(v.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(v.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),dt(r)||(v.push(`soilClassification${Af(r)}非有效字串，強制預設為SW`),r="SW"),(i<n||_f(r,t))&&(D=!0),i>20&&(D=!0),vt(s)?(s=Lt(s),s<0&&(v.push(`N60${Af(s)}<0`),C=!0),s>=50&&(D=!0)):(v.push(`N60${Af(s)}非數字`),C=!0),vt(f)?(f=Lt(f),f<0&&(v.push(`FC${Af(f)}<0`),C=!0)):(v.push(`FC${Af(f)}非數字`),C=!0),!vt(h))return v.push(`svpUsual${Af(h)}非數字`),L();if(h=Lt(h),h<0)return v.push(`svpUsual${Af(h)}<0`),L();if(!vt(p))return v.push(`svpDesign${Af(p)}非數字`),L();if(p=Lt(p),p<0)return v.push(`svpDesign${Af(p)}<0`),L();if(!vt(c))return v.push(`sv${Af(c)}非數字`),L();if(c=Lt(c),c<0)return v.push(`sv${Af(c)}<0`),L();if(!vt(d))return v.push(`PGA${Af(d)}非數字`),L();if(d=Lt(d),d<0)return v.push(`PGA${Af(d)}<0`),L();if(!vt(g))return v.push(`Mw${Af(g)}非數字`),L();if(g=Lt(g),g<0)return v.push(`Mw${Af(g)}<0`),L();break}if(!0===D)return v=[],S="-",E="-",k=10,L();if(!0===C)return L();vt(o)||(o=.45),o=Lt(o),vt(l)||(l=14),l=Lt(l),vt(a)||(a=.57),a=Lt(a),vt(u)||(u=85),u=Lt(u),m=1-.015*i,y=s/1.2,x=170/(h+70),b=x*y,w=f<=5?0:f<=10?f-5:.1*f+4,$=b+w,S=o*a*(16*Math.sqrt($)/100+(16*Math.sqrt($)/u)**l),ht(S)&&(S=Math.min(S,1e20)),E=null,E=p>0?.1*(g-1)*d*(c/p)*m:1e20,ht(E)&&(E=Math.min(E,1e20)),ht(S)&&ht(E)&&E>0&&(k=S/E),ht(k)&&k>10&&(k=10),S<0&&v.push(`CRR${Af(S)}<0`),E<=0&&v.push(`CSR${Af(E)}<=0`),ht(k)?k<0&&(v.push(`FS${Af(k)}<0，強制改為0`),k=0):v.push(`FS${Af(k)}非數字`),M=b/(60/72);let q=Bf(M,b,E,k);return v=[...v,...q.err],R=q.vstrTS,P=q.vstrIY,L()}},CPT:{cptHBF2012:e=>Zf(e=Of(Of({},e),{},{ver:"2012"})),cptHBF2017:e=>Zf(e=Of(Of({},e),{},{ver:"2017"})),cptHBF2021:e=>Zf(e=Of(Of({},e),{},{ver:"2021"})),cptNCEER1997:e=>function(e){let{ver:t="1997",waterLevelDesign:n,depth:r,coe_a:i,qc:o,fs:l,u2:a,svp:u,svpUsual:s,svpDesign:f,sv:c,PGA:h,Mw:p}=e,d=[],g={},v="",m="",y="",b="",w="",$="",x="",M="",S="",E="",k="",R="",P="";function L(){vt(x)&&(x/=jf),vt(S)&&(S/=jf);let e=Of(Of({},Vf(g)),{},{rrd:m,Qt1n:x,Ic:y,Kc:M,Qt1ncs:S,CRR75:E,CRR:k,CSR:R,FS:P,msg:"",err:ft(d,"; ")});return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let D=!1,C=!1;for(;;){if("1997"!==t)return d.push(`ver${Af(t)}非1997`),L();if(vt(i)?i=Lt(i):(d.push(`coe_a${Af(i)}非數字，強制預設為0.8`),i=.8),!vt(r))return d.push(`depth${Af(r)}非數字`),L();if(r=Lt(r),r<0)return d.push(`depth${Af(r)}<0`),L();if(vt(n)?(n=Lt(n),n<0&&(d.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(d.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),r<n&&(D=!0),r>20&&(D=!0),vt(o)?(o=Lt(o),o<0&&(d.push(`qc${Af(o)}<0`),C=!0)):(d.push(`qc${Af(o)}非數字`),C=!0),vt(l)?(l=Lt(l),l<0&&(d.push(`fs${Af(l)}<0`),C=!0)):(d.push(`fs${Af(l)}非數字`),C=!0),vt(a)?a=Lt(a):(d.push(`u2${Af(a)}非數字`),C=!0),vt(u)&&(u=Lt(u),s=u,f=u),!vt(s))return d.push(`svpUsual${Af(s)}非數字`),L();if(s=Lt(s),s<0)return d.push(`svpUsual${Af(s)}<0`),L();if(!vt(f))return d.push(`svpDesign${Af(f)}非數字`),L();if(f=Lt(f),f<0)return d.push(`svpDesign${Af(f)}<0`),L();if(!vt(c))return d.push(`sv${Af(c)}非數字`),L();if(c=Lt(c),c<0)return d.push(`sv${Af(c)}<0`),L();if(!vt(h))return d.push(`PGA${Af(h)}非數字`),L();if(h=Lt(h),h<0)return d.push(`PGA${Af(h)}<0`),L();if(!vt(p))return d.push(`Mw${Af(p)}非數字`),L();if(p=Lt(p),p<0)return d.push(`Mw${Af(p)}<0`),L();break}if(!0===D)return d=[],k="-",R="-",P=10,L();if(!0===C)return L();if(g=Yf(r,i,o,l,a,c,s,!1),b=ve(g,"Fr",null),y=ve(g,"Ic",null),w=ve(g,"qt",null),$=ve(g,"Qt",null),!vt(w))return d.push(`qt${Af(w)}非數字`),L();c*=jf,s*=jf,f*=jf,w=1e3*w*jf,v=(p/7.5)**-2.56,m=(1-.4113*r**.5+.04052*r+.001753*r**1.5)/(1-.4177*r**.5+.05729*r-.006205*r**1.5+.00121*r**2);let q=$,F=b,T=Math.sqrt((3.47-Math.log10(q))**2+(Math.log10(F)+1.22)**2);if(T<=2.6){let e=1e3*va.Pa;e*=jf,x=s>0?w/e*(e/s)**.5:1e20;let t=Math.sqrt((3.47-Math.log10(x))**2+(Math.log10(F)+1.22)**2);t<=2.6?y=t:(x=s>0?w/e*(e/s)**.75:1e20,y=Math.sqrt((3.47-Math.log10(x))**2+(Math.log10(F)+1.22)**2))}else x=q,y=T;return y>=2.6?(k="-",R="-",P=10,L()):(y<=1.64?M=1:(M=-.403*y**4+5.581*y**3-21.63*y**2+33.75*y-17.88,y<2.36&&F<.5&&(M=1)),S=M*x,S>=160?(k="-",R="-",P=10,L()):(E=null,E=S<50?S/1e3*.833+.05:93*(S/1e3)**3+.08,k=E*v,ht(k)&&(k=Math.min(k,1e20)),R=null,R=f>0?.65*h*(c/f)*m:1e20,ht(R)&&(R=Math.min(R,1e20)),ht(k)&&ht(R)&&R>0&&(P=k/R),ht(P)&&P>10&&(P=10),k<0&&d.push(`CRR${Af(k)}<0`),R<=0&&d.push(`CSR${Af(R)}<=0`),ht(P)?P<0&&(d.push(`FS${Af(P)}<0，強制改為0`),P=0):d.push(`FS${Af(P)}非數字`),L()))}(e=Of(Of({},e),{},{ver:"1997"})),cptRobertson2009:e=>function(e){let{ver:t="2009",waterLevelDesign:n,depth:r,coe_a:i,qc:o,fs:l,u2:a,svp:u,svpUsual:s,svpDesign:f,sv:c,tou_s:h,su:p,PGA:d,Mw:g}=e,v=[],m={},y="",b="",w="",$="",x="",M="",S="",E="",k="",R="",P="",L="",D="",C="",q="";function F(){let e=Of(Of({},Vf(m)),{},{rrd:b,Kc:w,Kalpha:$,Fr:x,Ic:M,Icn:S,Qt:k,Qtn:R,Qtncs:P,CRR75:L,CRR:D,CSR:C,FS:q,msg:"",err:ft(v,"; ")});return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let T=!1,O=!1;for(;;){if("2009"!==t)return v.push(`ver${Af(t)}非2009`),F();if(vt(i)?i=Lt(i):(v.push(`coe_a${Af(i)}非數字，強制預設為0.8`),i=.8),!vt(r))return v.push(`depth${Af(r)}非數字`),F();if(r=Lt(r),r<0)return v.push(`depth${Af(r)}<0`),F();if(vt(n)?(n=Lt(n),n<0&&(v.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(v.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),r<n&&(T=!0),r>20&&(T=!0),vt(o)?(o=Lt(o),o<0&&(v.push(`qc${Af(o)}<0`),O=!0)):(v.push(`qc${Af(o)}非數字`),O=!0),vt(l)?(l=Lt(l),l<0&&(v.push(`fs${Af(l)}<0`),O=!0)):(v.push(`fs${Af(l)}非數字`),O=!0),vt(a)?a=Lt(a):(v.push(`u2${Af(a)}非數字`),O=!0),vt(u)&&(u=Lt(u),s=u,f=u),!vt(s))return v.push(`svpUsual${Af(s)}非數字`),F();if(s=Lt(s),s<0)return v.push(`svpUsual${Af(s)}<0`),F();if(!vt(f))return v.push(`svpDesign${Af(f)}非數字`),F();if(f=Lt(f),f<0)return v.push(`svpDesign${Af(f)}<0`),F();if(!vt(c))return v.push(`sv${Af(c)}非數字`),F();if(c=Lt(c),c<0)return v.push(`sv${Af(c)}<0`),F();if(!vt(d))return v.push(`PGA${Af(d)}非數字`),F();if(d=Lt(d),d<0)return v.push(`PGA${Af(d)}<0`),F();if(!vt(g))return v.push(`Mw${Af(g)}非數字`),F();if(g=Lt(g),g<0)return v.push(`Mw${Af(g)}<0`),F();break}if(!0===T)return v=[],D="-",C="-",q=10,F();if(!0===O)return F();if(m=Yf(r,i,o,l,a,c,s,!1),x=ve(m,"Fr",null),M=ve(m,"Ic",null),S=ve(m,"Icn",null),E=ve(m,"qt",null),k=ve(m,"Qt",null),R=ve(m,"Qtn",null),!vt(E))return v.push(`qt${Af(E)}非數字`),F();c*=jf,s*=jf,f*=jf,E=1e3*E*jf;let j=null;null===j&&ht(S)&&(j=S),null===j&&ht(M)&&(v.push("無法計算Icn，強制降轉使用Ic"),j=M);let A=null;if(null===A&&ht(R)&&(A=R),null===A&&ht(k)&&(v.push("無法計算Qtn，強制降轉使用Qt"),A=k),y=(g/7.5)**-2.56,b=(1-.4113*r**.5+.04052*r+.001753*r**1.5)/(1-.4177*r**.5+.05729*r-.006205*r**1.5+.00121*r**2),P=null,L=null,j<=2.5)j<=1.64?w=1:(w=-.403*j**4+5.581*j**3-21.63*j**2+33.75*j-17.88,j<2.36&&x<.5&&(w=1)),P=w*A,L=P<50?P/1e3*.833+.05:93*(P/1e3)**3+.08,L=Math.max(L,.05);else if(j<2.7)w=6e-7*j**16.76,P=w*A,L=P<50?P/1e3*.833+.05:93*(P/1e3)**3+.08;else{if($=null,vt(h)||(v.push(`tou_s${Af(h)}非數字，強制使用Kalpha=1`),$=1),vt(p)||(v.push(`su${Af(p)}非數字，強制使用Kalpha=1`),$=1),null===$){if(h=Lt(h),h<0)return v.push(`tou_s${Af(h)}<0`),F();if(p=Lt(p),p<=0)return v.push(`su${Af(p)}<=0`),F();if(h===p)return v.push(`出現tou_s${Af(h)}=su${Af(p)}，無法計算Kalpha`),F();$=1.344-.344/(1-h/p)**.638}P=$*A,L=.053*P}return D=L*y,ht(D)&&(D=Math.min(D,1e20)),C=null,C=f>0?.65*d*(c/f)*b:1e20,ht(C)&&(C=Math.min(C,1e20)),ht(D)&&ht(C)&&C>0&&(q=D/C),ht(q)&&q>10&&(q=10),D<0&&v.push(`CRR${Af(D)}<0`),C<=0&&v.push(`CSR${Af(C)}<=0`),ht(q)?q<0&&(v.push(`FS${Af(q)}<0，強制改為0`),q=0):v.push(`FS${Af(q)}非數字`),F()}(e=Of(Of({},e),{},{ver:"2009"})),cptJuang2002:e=>function(e){let{ver:t="2002",waterLevelDesign:n,depth:r,coe_a:i,qc:o,fs:l,u2:a,svp:u,svpUsual:s,svpDesign:f,sv:c,PGA:h,Mw:p}=e,d=[],g={},v="",m="",y="",b="",w="",$="",x="",M="",S="",E="",k="";function R(){let e=Of(Of({},Vf(g)),{},{rrd:m,qc1N:$,Ic:y,qc1Ncs:x,CRR75:M,CRR:S,CSR:E,FS:k,msg:"",err:ft(d,"; ")});return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let P=!1,L=!1;for(;;){if("2002"!==t)return d.push(`ver${Af(t)}非2002`),R();if(vt(i)?i=Lt(i):(d.push(`coe_a${Af(i)}非數字，強制預設為0.8`),i=.8),!vt(r))return d.push(`depth${Af(r)}非數字`),R();if(r=Lt(r),r<0)return d.push(`depth${Af(r)}<0`),R();if(vt(n)?(n=Lt(n),n<0&&(d.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(d.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),r<n&&(P=!0),r>20&&(P=!0),vt(o)?(o=Lt(o),o<0&&(d.push(`qc${Af(o)}<0`),L=!0)):(d.push(`qc${Af(o)}非數字`),L=!0),vt(l)?(l=Lt(l),l<0&&(d.push(`fs${Af(l)}<0`),L=!0)):(d.push(`fs${Af(l)}非數字`),L=!0),vt(a)?a=Lt(a):(d.push(`u2${Af(a)}非數字`),L=!0),vt(u)&&(u=Lt(u),s=u,f=u),!vt(s))return d.push(`svpUsual${Af(s)}非數字`),R();if(s=Lt(s),s<0)return d.push(`svpUsual${Af(s)}<0`),R();if(!vt(f))return d.push(`svpDesign${Af(f)}非數字`),R();if(f=Lt(f),f<0)return d.push(`svpDesign${Af(f)}<0`),R();if(!vt(c))return d.push(`sv${Af(c)}非數字`),R();if(c=Lt(c),c<0)return d.push(`sv${Af(c)}<0`),R();if(!vt(h))return d.push(`PGA${Af(h)}非數字`),R();if(h=Lt(h),h<0)return d.push(`PGA${Af(h)}<0`),R();if(!vt(p))return d.push(`Mw${Af(p)}非數字`),R();if(p=Lt(p),p<0)return d.push(`Mw${Af(p)}<0`),R();break}if(!0===P)return d=[],S="-",E="-",k=10,R();if(!0===L)return R();if(g=Yf(r,i,o,l,a,c,s,!1),b=ve(g,"Fr",null),w=ve(g,"qt",null),!vt(w))return d.push(`qt${Af(w)}非數字`),R();c*=jf,s*=jf,f*=jf,w=1e3*w*jf,v=(p/7.5)**-2.56,m=(1-.4113*r**.5+.04052*r+.001753*r**1.5)/(1-.4177*r**.5+.05729*r-.006205*r**1.5+.00121*r**2);let D=b;$=null,s>0&&($=w/Math.sqrt(s)),y=null,ht($)&&ht(D)&&(y=Math.sqrt((3.47-Math.log10($))**2+(Math.log10(D)+1.22)**2)),x=null,ht($)&&ht(y)&&(x=$*(2.429*y**4-16.943*y**3+44.551*y**2-51.497*y+22.802));let C=-.016*(s/100)**3+.178*(s/100)**2-s/100*.063+.903;return M=null,ht(C)&&ht(x)&&(M=C*Math.exp(1.264*(x/100)**1.25-2.957)),S=null,ht(M)&&ht(v)&&(S=M*v),ht(S)&&(S=Math.min(S,1e20)),E=null,E=f>0?.65*h*(c/f)*m:1e20,ht(E)&&(E=Math.min(E,1e20)),ht(S)&&ht(E)&&E>0&&(k=S/E),ht(k)&&k>10&&(k=10),S<0&&d.push(`CRR${Af(S)}<0`),E<=0&&d.push(`CSR${Af(E)}<=0`),ht(k)?k<0&&(d.push(`FS${Af(k)}<0，強制改為0`),k=0):d.push(`FS${Af(k)}非數字`),R()}(e=Of(Of({},e),{},{ver:"2002"})),cptKuAndJuang2012:e=>function(e){let{ver:t="2012",waterLevelDesign:n,depth:r,coe_a:i,qc:o,fs:l,u2:a,svp:u,svpUsual:s,svpDesign:f,sv:c,PGA:h,Mw:p}=e,d=[],g={},v="",m="",y="",b="",w="",$="",x="",M="",S="",E="",k="",R="",P="",L="",D="",C="";function q(){let e=Of(Of({},Vf(g)),{},{rrd:m,Fr:y,Bq:b,Ic:w,Icn:$,Qt:M,Qtn:S,Icbj:E,Csigma:k,Ksigma:R,CRR75:P,CRR:L,CSR:D,FS:C,msg:"",err:ft(d,"; ")});return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let F=!1,T=!1;for(;;){if("2012"!==t)return d.push(`ver${Af(t)}非2012`),q();if(vt(i)?i=Lt(i):(d.push(`coe_a${Af(i)}非數字，強制預設為0.8`),i=.8),!vt(r))return d.push(`depth${Af(r)}非數字`),q();if(r=Lt(r),r<0)return d.push(`depth${Af(r)}<0`),q();if(vt(n)?(n=Lt(n),n<0&&(d.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(d.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),r<n&&(F=!0),r>20&&(F=!0),vt(o)?(o=Lt(o),o<0&&(d.push(`qc${Af(o)}<0`),T=!0)):(d.push(`qc${Af(o)}非數字`),T=!0),vt(l)?(l=Lt(l),l<0&&(d.push(`fs${Af(l)}<0`),T=!0)):(d.push(`fs${Af(l)}非數字`),T=!0),vt(a)?a=Lt(a):(d.push(`u2${Af(a)}非數字`),T=!0),vt(u)&&(u=Lt(u),s=u,f=u),!vt(s))return d.push(`svpUsual${Af(s)}非數字`),q();if(s=Lt(s),s<0)return d.push(`svpUsual${Af(s)}<0`),q();if(!vt(f))return d.push(`svpDesign${Af(f)}非數字`),q();if(f=Lt(f),f<0)return d.push(`svpDesign${Af(f)}<0`),q();if(!vt(c))return d.push(`sv${Af(c)}非數字`),q();if(c=Lt(c),c<0)return d.push(`sv${Af(c)}<0`),q();if(!vt(h))return d.push(`PGA${Af(h)}非數字`),q();if(h=Lt(h),h<0)return d.push(`PGA${Af(h)}<0`),q();if(!vt(p))return d.push(`Mw${Af(p)}非數字`),q();if(p=Lt(p),p<0)return d.push(`Mw${Af(p)}<0`),q();break}if(!0===F)return d=[],L="-",D="-",C=10,q();if(!0===T)return q();if(g=Yf(r,i,o,l,a,c,s,!0),x=ve(g,"qt",null),y=ve(g,"Fr",null),b=ve(g,"Bq",null),w=ve(g,"Ic",null),$=ve(g,"Icn",null),M=ve(g,"Qt",null),S=ve(g,"Qtn",null),!vt(x))return d.push(`qt${Af(x)}非數字`),q();c*=jf,s*=jf,f*=jf;let O=null;null===O&&ht($)&&(O=$),null===O&&ht(w)&&(d.push("無法計算Icn，強制降轉使用Ic"),O=w);let j=null;null===j&&ht(S)&&(j=S),null===j&&ht(M)&&(d.push("無法計算Qtn，強制降轉使用Qt"),j=M),v=6.9*Math.exp(-p/4)-.058,v=Math.min(v,1.8);let A=-1.012-1.126*Math.sin(r/11.73+5.133),_=.106+.118*Math.sin(r/11.28+5.142);if(m=Math.exp(A+_*p),m=Math.min(m,1),E=null,!(ht(M)&&ht(b)&&ht(y)))return d.push("無法計算Ic(BJ)"),q();E=Math.sqrt((3-Math.log10(M*(1-b)+1))**2+(Math.log10(y)+1.22)**2);let N=E*(j/100)-14.7,I=.909*E**3-7.47*E+19.28,z=.059+.015*E**2;P=.05+Math.exp(N+I*(j/100)**z),ht(P)&&(P=Math.min(P,1e20)),k=null,k=S<=37?.063:S<211?1/(37.3-8.27*S**.264):.3,k=Math.min(k,.3);let G=1e3*va.Pa;return G*=jf,R=1-k*Math.log(s/G),R=Math.min(R,1),L=P*v*R,ht(L)&&(L=Math.min(L,1e20)),D=null,D=f>0?.65*h*(c/f)*m:1e20,ht(D)&&(D=Math.min(D,1e20)),ht(L)&&ht(D)&&D>0&&(C=L/D),ht(C)&&C>10&&(C=10),L<0&&d.push(`CRR${Af(L)}<0`),D<=0&&d.push(`CSR${Af(D)}<=0`),ht(C)?C<0&&(d.push(`FS${Af(C)}<0，強制改為0`),C=0):d.push(`FS${Af(C)}非數字`),q()}(e=Of(Of({},e),{},{ver:"2012"})),cptOlsen1997:e=>function(e){let{ver:t="1997",waterLevelDesign:n,depth:r,coe_a:i,qc:o,fs:l,u2:a,svp:u,svpUsual:s,svpDesign:f,sv:c,PGA:h,Mw:p}=e,d=[],g={},v="",m="",y="",b="",w="",$="",x="",M="",S="";function E(){let e=Of(Of({},Vf(g)),{},{rrd:m,qc1:b,Rf:w,CRR75:$,CRR:x,CSR:M,FS:S,msg:"",err:ft(d,"; ")});return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let k=!1,R=!1;for(;;){if("1997"!==t)return d.push(`ver${Af(t)}非1997`),E();if(vt(i)?i=Lt(i):(d.push(`coe_a${Af(i)}非數字，強制預設為0.8`),i=.8),!vt(r))return d.push(`depth${Af(r)}非數字`),E();if(r=Lt(r),r<0)return d.push(`depth${Af(r)}<0`),E();if(vt(n)?(n=Lt(n),n<0&&(d.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(d.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),r<n&&(k=!0),r>20&&(k=!0),vt(o)?(o=Lt(o),o<0&&(d.push(`qc${Af(o)}<0`),R=!0)):(d.push(`qc${Af(o)}非數字`),R=!0),vt(l)?(l=Lt(l),l<0&&(d.push(`fs${Af(l)}<0`),R=!0)):(d.push(`fs${Af(l)}非數字`),R=!0),vt(a)?a=Lt(a):(d.push(`u2${Af(a)}非數字`),R=!0),vt(u)&&(u=Lt(u),s=u,f=u),!vt(s))return d.push(`svpUsual${Af(s)}非數字`),E();if(s=Lt(s),s<0)return d.push(`svpUsual${Af(s)}<0`),E();if(!vt(f))return d.push(`svpDesign${Af(f)}非數字`),E();if(f=Lt(f),f<0)return d.push(`svpDesign${Af(f)}<0`),E();if(!vt(c))return d.push(`sv${Af(c)}非數字`),E();if(c=Lt(c),c<0)return d.push(`sv${Af(c)}<0`),E();if(!vt(h))return d.push(`PGA${Af(h)}非數字`),E();if(h=Lt(h),h<0)return d.push(`PGA${Af(h)}<0`),E();if(!vt(p))return d.push(`Mw${Af(p)}非數字`),E();if(p=Lt(p),p<0)return d.push(`Mw${Af(p)}<0`),E();break}return!0===k?(d=[],x="-",M="-",S=10,E()):!0===R?E():(g=Yf(r,i,o,l,a,c,s,!1),y=ve(g,"qt",null),w=ve(g,"Rf",null),vt(y)?(c*=jf,s*=jf,f*=jf,y=1e3*y*jf,v=(p/7.5)**-2.56,m=(1-.4113*r**.5+.04052*r+.001753*r**1.5)/(1-.4177*r**.5+.05729*r-.006205*r**1.5+.00121*r**2),b=s>0?y/s**.7:1e20,$=.00128*b-.025+.17*w-.028*w**2+.0016*w**3,x=$*v,ht(x)&&(x=Math.min(x,1e20)),M=null,M=f>0?.65*h*(c/f)*m:1e20,ht(M)&&(M=Math.min(M,1e20)),ht(x)&&ht(M)&&M>0&&(S=x/M),ht(S)&&S>10&&(S=10),x<0&&d.push(`CRR${Af(x)}<0`),M<=0&&d.push(`CSR${Af(M)}<=0`),ht(S)?S<0&&(d.push(`FS${Af(S)}<0，強制改為0`),S=0):d.push(`FS${Af(S)}非數字`),E()):(d.push(`qt${Af(y)}非數字`),E()))}(e=Of(Of({},e),{},{ver:"1997"})),cptShibata1988:e=>function(e){let{ver:t="1988",waterLevelDesign:n,depth:r,coe_a:i,qc:o,fs:l,u2:a,svp:u,svpUsual:s,svpDesign:f,sv:c,PGA:h,Mw:p,D50:d}=e,g=[],v={},m="",y="",b="",w="",$="",x="",M="",S="";function E(){vt($)&&($/=jf);let e=Of(Of({},Vf(v)),{},{rrd:y,qc1:w,qc1cr:$,CRR75:"",CRR:x,CSR:M,FS:S,msg:"",err:ft(g,"; ")});return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}let k,R=!1,P=!1;for(;;){if("1988"!==t)return g.push(`ver${Af(t)}非1988`),E();if(vt(i)?i=Lt(i):(g.push(`coe_a${Af(i)}非數字，強制預設為0.8`),i=.8),!vt(r))return g.push(`depth${Af(r)}非數字`),E();if(r=Lt(r),r<0)return g.push(`depth${Af(r)}<0`),E();if(vt(n)?(n=Lt(n),n<0&&(g.push(`waterLevelDesign${Af(n)}<0，強制預設為0(m)`),n=0)):(g.push(`waterLevelDesign${Af(n)}非數字，強制預設為0(m)`),n=0),r<n&&(R=!0),r>20&&(R=!0),vt(o)?(o=Lt(o),o<0&&(g.push(`qc${Af(o)}<0`),P=!0)):(g.push(`qc${Af(o)}非數字`),P=!0),vt(l)?(l=Lt(l),l<0&&(g.push(`fs${Af(l)}<0`),P=!0)):(g.push(`fs${Af(l)}非數字`),P=!0),vt(a)?a=Lt(a):(g.push(`u2${Af(a)}非數字`),P=!0),vt(d)?(d=Lt(d),d<0&&(g.push(`D50${Af(d)}<0`),P=!0)):(g.push(`D50${Af(d)}非數字`),P=!0),vt(u)&&(u=Lt(u),s=u,f=u),!vt(s))return g.push(`svpUsual${Af(s)}非數字`),E();if(s=Lt(s),s<0)return g.push(`svpUsual${Af(s)}<0`),E();if(!vt(f))return g.push(`svpDesign${Af(f)}非數字`),E();if(f=Lt(f),f<0)return g.push(`svpDesign${Af(f)}<0`),E();if(!vt(c))return g.push(`sv${Af(c)}非數字`),E();if(c=Lt(c),c<0)return g.push(`sv${Af(c)}<0`),E();if(!vt(h))return g.push(`PGA${Af(h)}非數字`),E();if(h=Lt(h),h<0)return g.push(`PGA${Af(h)}<0`),E();if(!vt(p))return g.push(`Mw${Af(p)}非數字`),E();if(p=Lt(p),p<0)return g.push(`Mw${Af(p)}<0`),E();break}if(!0===R)return g=[],x="-",M="-",S=10,E();if(!0===P)return E();if(v=Yf(r,i,o,l,a,c,s,!1),b=ve(v,"qt",null),!vt(b))return g.push(`qt${Af(b)}非數字`),E();c*=jf,s*=jf,f*=jf,b=1e3*b*jf,m=(p/7.5)**-2.56,y=1-.015*r,w=1.7/(s+.7)*b,k=d>=.25?1:d/.25;let L=null;L=f>0?.1*(m-1)*h*(c/f)*y:1e20;let D=null;return D=-.1!==L?(L-.1)/(L+.1):1e20,$=k*(50+200*D),$=rf($),x=w,M=$,ht(x)&&ht(M)&&M>0&&(S=x/M),ht(S)&&S>10&&(S=10),x<0&&g.push(`CRR${Af(x)}<0`),M<=0&&g.push(`CSR${Af(M)}<=0`),ht(S)?S<0&&(g.push(`FS${Af(S)}<0，強制改為0`),S=0):g.push(`FS${Af(S)}非數字`),E()}(e=Of(Of({},e),{},{ver:"1988"}))},VS:{vsHBF:function(e){let{waterLevelDesign:t,depth:n,Vs:r,FC:i,svpDesign:o,sv:l,PGA:a,Mw:u}=e,s=[],f="",c="",h="",p="",d="";function g(){let e={CRR75:c,CRR:h,CSR:p,FS:d,err:ft(s,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}if(vt(t)||(s.push(`waterLevelDesign${Af(t)}非數字，強制預設為0(m)`),t=0),t=Lt(t),t<0&&(s.push(`waterLevelDesign${Af(t)}<0，強制預設為0(m)`),t=0),!vt(n))return s.push(`depth${Af(n)}非數字`),g();if(n=Lt(n),n<0)return s.push(`depth${Af(n)}<0`),g();if(!vt(r))return s.push(`Vs${Af(r)}非數字`),g();if(r=Lt(r),r<0)return s.push(`Vs${Af(r)}<0`),g();if(!vt(i))return s.push(`FC${Af(i)}非數字`),g();if(i=Lt(i),i<0)return s.push(`FC${Af(i)}<0`),g();if(!vt(o))return s.push(`svpDesign${Af(o)}非數字`),g();if(o=Lt(o),o<0)return s.push(`svpDesign${Af(o)}<0`),g();if(!vt(l))return s.push(`sv${Af(l)}非數字`),g();if(l=Lt(l),l<0)return s.push(`sv${Af(l)}<0`),g();if(!vt(a))return s.push(`PGA${Af(a)}非數字`),g();if(a=Lt(a),a<0)return s.push(`PGA${Af(a)}<0`),g();if(!vt(u))return s.push(`Mw${Af(u)}非數字`),g();if(u=Lt(u),u<0)return s.push(`Mw${Af(u)}<0`),g();f=(u/7.5)**-3.3;let v,m=(1-.4113*n**.5+.04052*n+.001753*n**1.5)/(1-.4177*n**.5+.05729*n-.006205*n**1.5+.00121*n**2),y=1/Math.sqrt(o)*r;console.log("待確認此處svpDesign,Vs的單位"),v=i<=10?1:29e-5*i**2-.00355*i+1.00651;let b=v*(y-100);return b=Math.min(b,134.5),c=null,c=y<=100?.09:.09+22e-5*b/(1-b/135),h=c*f,ht(h)&&(h=Math.min(h,1e20)),p=null,p=o>0?.65*a*(l/o)*m:1e20,ht(p)&&(p=Math.min(p,1e20)),ht(h)&&ht(p)&&p>0&&(d=h/p),ht(d)&&d>10&&(d=10),n>20?(h="-",p="-",d=10,g()):(h<0&&s.push(`CRR${Af(h)}<0`),p<=0&&s.push(`CSR${Af(p)}<=0`),ht(d)?d<0&&(s.push(`FS${Af(d)}<0，強制改為0`),d=0):s.push(`FS${Af(d)}非數字`),g())},vsAndrus:function(e){let{waterLevelDesign:t,depth:n,Vs:r,FC:i,svpDesign:o,sv:l,PGA:a,Mw:u}=e,s=[],f="",c="",h="",p="";function d(){let e={CRR75:f,CRR:c,CSR:h,FS:p,err:ft(s,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}if(vt(t)||(s.push(`waterLevelDesign${Af(t)}非數字，強制預設為0(m)`),t=0),t=Lt(t),t<0&&(s.push(`waterLevelDesign${Af(t)}<0，強制預設為0(m)`),t=0),!vt(n))return s.push(`depth${Af(n)}非數字`),d();if(n=Lt(n),n<0)return s.push(`depth${Af(n)}<0`),d();if(!vt(r))return s.push(`Vs${Af(r)}非數字`),d();if(r=Lt(r),r<0)return s.push(`Vs${Af(r)}<0`),d();if(!vt(i))return s.push(`FC${Af(i)}非數字`),d();if(i=Lt(i),i<0)return s.push(`FC${Af(i)}<0`),d();if(!vt(o))return s.push(`svpDesign${Af(o)}非數字`),d();if(o=Lt(o),o<0)return s.push(`svpDesign${Af(o)}<0`),d();if(!vt(l))return s.push(`sv${Af(l)}非數字`),d();if(l=Lt(l),l<0)return s.push(`sv${Af(l)}<0`),d();if(!vt(a))return s.push(`PGA${Af(a)}非數字`),d();if(a=Lt(a),a<0)return s.push(`PGA${Af(a)}<0`),d();if(!vt(u))return s.push(`Mw${Af(u)}非數字`),d();if(u=Lt(u),u<0)return s.push(`Mw${Af(u)}<0`),d();let g,v=(u/7.5)**-3.3,m=(1-.4113*n**.5+.04052*n+.001753*n**1.5)/(1-.4177*n**.5+.05729*n-.006205*n**1.5+.00121*n**2),y=1/Math.sqrt(o)*r;return console.log("待確認此處svpDesign,Vs的單位"),g=i<=5?215:i<=35?215-.5*(i-5):200,f=.022*(y/100)**2+2.8*(1/(g-y)-1/g),f=rf(f),c=f*v,ht(c)&&(c=Math.min(c,1e20)),h=null,h=o>0?.65*a*(l/o)*m:1e20,ht(h)&&(h=Math.min(h,1e20)),ht(c)&&ht(h)&&h>0&&(p=c/h),ht(p)&&p>10&&(p=10),n>20?(c="-",h="-",p=10,d()):(c<0&&s.push(`CRR${Af(c)}<0`),h<=0&&s.push(`CSR${Af(h)}<=0`),ht(p)?p<0&&(s.push(`FS${Af(p)}<0，強制改為0`),p=0):s.push(`FS${Af(p)}非數字`),d())},vsNCEER:function(e){let{waterLevelDesign:t,depth:n,Vs:r,FC:i,svpDesign:o,sv:l,PGA:a,Mw:u}=e,s=[],f="",c="",h="",p="";function d(){let e={CRR75:f,CRR:c,CSR:h,FS:p,err:ft(s,"; ")};return fi(e,((t,n)=>{dt(t)||vt(t)||(e[n]="")})),e}if(vt(t)||(s.push(`waterLevelDesign${Af(t)}非數字，強制預設為0(m)`),t=0),t=Lt(t),t<0&&(s.push(`waterLevelDesign${Af(t)}<0，強制預設為0(m)`),t=0),!vt(n))return s.push(`depth${Af(n)}非數字`),d();if(n=Lt(n),n<0)return s.push(`depth${Af(n)}<0`),d();if(!vt(r))return s.push(`Vs${Af(r)}非數字`),d();if(r=Lt(r),r<0)return s.push(`Vs${Af(r)}<0`),d();if(!vt(i))return s.push(`FC${Af(i)}非數字`),d();if(i=Lt(i),i<0)return s.push(`FC${Af(i)}<0`),d();if(!vt(o))return s.push(`svpDesign${Af(o)}非數字`),d();if(o=Lt(o),o<0)return s.push(`svpDesign${Af(o)}<0`),d();if(!vt(l))return s.push(`sv${Af(l)}非數字`),d();if(l=Lt(l),l<0)return s.push(`sv${Af(l)}<0`),d();if(!vt(a))return s.push(`PGA${Af(a)}非數字`),d();if(a=Lt(a),a<0)return s.push(`PGA${Af(a)}<0`),d();if(!vt(u))return s.push(`Mw${Af(u)}非數字`),d();if(u=Lt(u),u<0)return s.push(`Mw${Af(u)}<0`),d();let g,v=(u/7.5)**-3.3,m=(1-.4113*n**.5+.04052*n+.001753*n**1.5)/(1-.4177*n**.5+.05729*n-.006205*n**1.5+.00121*n**2),y=1/Math.sqrt(o)*r;return console.log("待確認此處svpDesign的單位"),g=i<=5?220:i<=35?210:200,f=.03*(y/100)**2+.9*(1/(g-y)-1/g),f=rf(f),c=f*v,ht(c)&&(c=Math.min(c,1e20)),h=null,h=o>0?.65*a*(l/o)*m:1e20,ht(h)&&(h=Math.min(h,1e20)),ht(c)&&ht(h)&&h>0&&(p=c/h),ht(p)&&p>10&&(p=10),n>20?(c="-",h="-",p=10,d()):(c<0&&s.push(`CRR${Af(c)}<0`),h<=0&&s.push(`CSR${Af(h)}<=0`),ht(p)?p<0&&(s.push(`FS${Af(p)}<0，強制改為0`),p=0):s.push(`FS${Af(p)}非數字`),d())}}};let Xf={mLiques:Kf,mSettls:{SPT:{sptVolumetricStrainTokimatsuAndSeed:zf,sptVolumetricStrainIshiharaAndYoshimine:Gf}},calc:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("SPT"!==e&&"CPT"!==e&&"VS"!==e)throw new Error(`kind(分析種類)${Af(e)}非有效值: SPT, CPT, VS`);let r=ve(n,"unitSvSvp");if("kPa"!==r&&"MPa"!==r)throw new Error(`opt.unitSvSvp[${r}] need kPa or MPa`);let i=ve(n,"methods",[]),o="depth",l="depthStart",a="depthEnd",u=e=>oi(ve(e,0,[])),s=e=>(e=wl(e),fi(u(e),(t=>{if(t.indexOf("-vstr")>=0){let o=(n=t,r="-vstr",i&&"number"!=typeof i&&ca(n,r,i)&&(r=i=void 0),(i=void 0===i?uf:i>>>0)?(n=ce(n))&&("string"==typeof r||null!=r&&!af(r))&&!(r=fe(r))&&He(n)?xl(_l(n),0,i):n.split(r,i):[]),u=ve(o,0,""),s=ve(o,1,""),f=0;e=co(e,((e,n)=>{if(vt(e[l])&&vt(e[a])&&vt(e[t])){let n=Lt(e[l]),r=Lt(e[a]),i=Lt(e[t])/100;f+=i*(r-n)}return e[`${u}-stl${s}`]=f,e}))}var n,r,i})),e);if(!Da(t))throw new Error("無有效數據");if(!dt(e))throw new Error("kind(分析種類)非字串");if("SPT"!==e&&"CPT"!==e&&"VS"!==e)throw new Error(`kind(分析種類)${Af(e)}非有效值: SPT, CPT, VS`);let f=eu(t=wl(t));if(ut(f)>0)throw new Error(ft(f,", "));return t=ha(t,(e=>Lt(e[l]))),t=((e,t)=>{{let e=(e=>{let t=null;return vt(t)||(t=ve(e,"0.waterLevelUsual","")),vt(t)||(t=ve(n,"waterLevelUsual","")),vt(t)&&(t=Lt(t)),vt(t)||(t=0),t})(t),i=(e=>{let t=null;return vt(t)||(t=ve(e,"0.waterLevelDesign","")),vt(t)||(t=ve(n,"waterLevelDesign","")),vt(t)&&(t=Lt(t)),vt(t)||(t=0),t})(t);t=((e,t,n)=>(t=Lt(t),n=Lt(n),co(e,((e,r)=>{let i=ve(e,"err","");e.waterLevelUsual=t,e.waterLevelDesign=n;let u=ve(e,l,null),s=ve(e,a,null);if(vt(u)&&vt(s)){u=Lt(u),s=Lt(s);let t=(u+s)/2;e[o]=t}else e[o]="";let f=ve(e,"e",null),c=ve(e,"GS",null),h=Ff(ve(e,"rd",null),ve(e,"rsat",null),c,f);return ve(h,"err")&&(""===i?i=h.err:i.indexOf(h.err)<0&&(i+=`, ${h.err}`),e.err=i),ht(h.rd)?e.rd=h.rd:e.rd="",ht(h.rsat)?e.rsat=h.rsat:e.rsat="",ht(h.GS)?e.GS=h.GS:e.GS="",ht(h.e)?e.e=h.e:e.e="",e}))))(t,e,i);let u=!0;fi(t,(e=>{let t=vt(e.sv),n=vt(e.svp),r=vt(e.svpUsual)&&vt(e.svpDesign);if(!(t&&(n||r)))return u=!1,!1})),u?("MPa"===r&&(t=co(t,((e,t)=>(ht(e.sv)&&(e.sv*=1e3),ht(e.svp)&&(e.svp*=1e3),ht(e.svpUsual)&&(e.svpUsual*=1e3),ht(e.svpDesign)&&(e.svpDesign*=1e3),e)))),fi(t,((e,t)=>{ht(e.sv)&&nu(e.sv,e[o],"kPa","sv"),ht(e.svp)&&nu(e.svp,e[o],"kPa","svp"),ht(e.svpUsual)&&nu(e.svpUsual,e[o],"kPa","svpUsual"),ht(e.svpDesign)&&nu(e.svpDesign,e[o],"kPa","svpDesign")})),t=co(t,((t,n)=>{t.waterLevelUsual=e,t.waterLevelDesign=i;let r=ve(t,l,null),u=ve(t,a,null);if(!vt(r))throw new Error(`第 ${n} 樣本起始深度(depthStart)非數值: ${r}`);if(!vt(u))throw new Error(`第 ${n} 樣本結束深度(depthEnd)非數值: ${u}`);return r=Lt(r),u=Lt(u),t[o]=(u+r)/2,t}))):t=iu(t,{waterLevelUsual:e,waterLevelDesign:i,unitSvSvp:"kPa"})}{let e=(e=>{let t=null,r=null;vt(t)||(t=ve(e,"0.Mw",""),r=t);let i=null;if(vt(t)||(t=ve(n,"Mw",""),i=t),vt(t)&&(t=Lt(t)),!vt(t))throw new Error("rows[0].Mw or opt.Mw is not a number");if(t<=0)throw console.log("rows[0].Mw",r),console.log("opt.Mw",i),new Error(`Mw[${t}]<=0`);return t})(t),r=(e=>{let t=null,r=null;vt(t)||(t=ve(e,"0.PGA",""),r=t);let i=null;if(vt(t)||(t=ve(n,"PGA",""),i=t),vt(t)&&(t=Lt(t)),!vt(t))throw new Error("rows[0].PGA or opt.PGA is not a number");if(t<0)throw console.log("rows[0].PGA",r),console.log("opt.PGA",i),new Error(`PGA[${t}]<0`);return t})(t);t=co(t,((t,n)=>(t.Mw=e,t.PGA=r,t)))}if("SPT"===e){let e=(e=>{let t=null;return vt(t)||(t=ve(e,"0.vibrationType","")),vt(t)||(t=ve(n,"vibrationType","")),vt(t)&&(t=Lt(t)),1!==t&&2!==t&&(t=1),t})(t);t=co(t,((t,n)=>(t.vibrationType=e,t)))}if("CPT"===e){let e=(e=>{let t=null;return vt(t)||(t=ve(e,"0.coe_a","")),vt(t)||(t=ve(n,"coe_a","")),vt(t)&&(t=Lt(t)),vt(t)||(t=.8),t})(t);t=co(t,((t,n)=>(t.coe_a=e,t)))}return t})(e,t),t=co(t,((t,n)=>((e,t)=>{t=wl(t);let n=oi(Kf[e]);return ut(i)>0&&(n=i),fi(n,(n=>{let r=ve(Kf,e,{}),i=ve(r,n,null);if(!Il(i))throw console.log("kind",e,"method",n,"keys(methodLiques[kind])",oi(Kf[e])),new Error("func is not a function");let o=i(t);if("SPT"===e)fi(o,((e,r)=>{t[`${n}-${r}`]=e}));else if("CPT"===e){let e=Hf();fi(e,(e=>{t[`${e}`]=o[e]})),fi(e,(e=>{delete o[e]})),fi(o,((e,r)=>{t[`${n}-${r}`]=e}))}})),t})(e,t))),"SPT"===e&&(t=(e=>(e=wl(e),fi(u(e),(t=>{if(t.indexOf("-FS")<0)return;let n=t.replace("-FS",""),r=0;e=co(e,((e,i)=>{if(vt(e[l])&&vt(e[a])&&vt(e[o])&&vt(e[t])){let n=Lt(e[l]),i=Lt(e[a]),u=Lt(e[o]),s=Lt(e[t]),f=1-Math.min(Math.max(s,0),1);r+=f*(10-.5*u)*(i-n)}return e[`${n}-PL`]=r,e}))})),e))(t)),"SPT"===e&&(t=s(t)),"SPT"===e&&(t=(e=>(e=wl(e),fi(u(e),(t=>{if(t.indexOf("-FS")<0)return;let n=t.replace("-FS",""),r=!0,i=0;e=co(e,((e,o)=>{if(vt(e[l])&&vt(e[a])&&vt(e[t])){let n=Lt(e[l]),o=Lt(e[a]),u=Lt(e[t])>=1;r&&!u&&(r=!1),r&&(i+=u?o-n:0,i=Math.min(i,7))}return e[`${n}-H1`]=i,e}))})),e))(t)),"SPT"===e&&(t=(e=>(e=wl(e),fi(u(e),(t=>{if(t.indexOf("-FS")<0)return;let n=t.replace("-FS",""),r=`${n}-H1`,i=`${n}-PL`;e=co(e,((e,t)=>{let o="-";if(vt(e[r])&&vt(e[i])){let t=Lt(e[r]),n=Lt(e[i]);o=t<=3?n>=5?"C":"B3":t<=5?n>=5?"B2":"B1":"A"}return e[`${n}-H1PL`]=o,e}))})),e))(t)),t=co(t,(t=>{let n={},r=of(e),i=ut(r);return fi(t,((e,t)=>{sf(t,i)!==r&&(n[t]=e)})),fi(Kf[e],((e,r)=>{let i=ut(r),o="",l="";fi(t,((e,t)=>{sf(t,i)===r&&("-err"===ff(t,4)?(o=t,l=e):n[t]=e)})),""!==o&&(n[o]=l)})),n})),fi(t,((e,n)=>{fi(e,((e,r)=>{dt(e)||vt(e)||(t[n][r]="")}))})),"MPa"===r&&(t=co(t,(e=>(ht(e.sv)&&(e.sv/=1e3),ht(e.svp)&&(e.svp/=1e3),ht(e.svpUsual)&&(e.svpUsual/=1e3),ht(e.svpDesign)&&(e.svpDesign/=1e3),e)))),t}};function Jf(e,t){if(!pt(t))try{t=t.toString()}catch(e){}if(!pt(t))try{t=Za(t)}catch(e){}if(!dt(t))return e.err="",e;let n=ve(e,"err","");return""===n?n=t:n+=`; ${t}`,e.err=n,e}function ec(e){return e=co(e,(e=>(e.sv="",e.svp="",e.svpUsual="",e.svpDesign="",e)))}function tc(e){return e&&e.length?Cs(e):[]}function nc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"mergeTo");dt(n)||(n="last");let r=ve(t,"returnLastone");if(Ul(r)||(r=!0),0===ut(e))return e;let i=oi(ve(e=wl(e),0));i=ja(i,(e=>e.indexOf("-err")>=0)),i=[...i,"err"];let o=ut(e)-1;if(fi(i,(t=>{let r=[];if(fi(e,(e=>{if(!dt(e[t]))return!0;let n=ve(e,"depthStart",""),i=ve(e,"depthEnd","");vt(n)&&(n=Lt(n),n=_u(n,3)),vt(i)&&(i=Lt(i),i=_u(i,3)),r.push(`depth[${n}-${i}]: ${e[t]}`)})),ut(r)>0){let i=ft(r,"; ");i=Ts(i,"; "),i=tc(i),i=ft(i,"; "),ut(i)>1e3&&(i=sf(i,1e3)+"..."),"last"===n?e[o][t]=i:e[0][t]=i}})),r){return ve(e,o)}return e}function rc(e){return e=co(e,(e=>{let t=null;vt(ve(e,"FC"))?t=Lt(e.FC):vt(ve(e,"ctFine"))?t=Lt(e.ctFine):vt(ve(e,"ctSilt"))&&vt(ve(e,"ctClay"))&&(t=Lt(e.ctSilt)+Lt(e.ctClay)),e.FC=t;let n=null;vt(ve(e,"rd"))?n=Lt(e.rd):vt(ve(e,"Gt_dry"))&&(n=Lt(e.Gt_dry)),e.rd=n;let r=null;vt(ve(e,"rsat"))?r=Lt(e.rsat):vt(ve(e,"Gt_sat"))&&(r=Lt(e.Gt_sat)),e.rsat=r;let i=null;vt(ve(e,"N60"))?i=Lt(e.N60):vt(ve(e,"SPTN"))&&(i=Lt(e.SPTN)),e.N60=i;let o="";return dt(ve(e,"soilClassification"))?o=e.soilClassification:dt(ve(e,"USCS"))&&(o=e.USCS),e.soilClassification=o,e})),e}function ic(e,t,n,r,i){return e=co(e,(e=>(e.PGA=t,e.Mw=n,e.waterLevelUsual=r,e.waterLevelDesign=i,e)))}function oc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===ut(e))throw new Error("invalid ltdt");if(0===ut(t))throw new Error("invalid methods");let r=ve(n,"PGA",""),i=ve(n,"Mw",""),o=!1,l="",a=!1,u="";if(fi(t,(e=>{e.indexOf("JRA")>=0||(a=!0,u=e),o=!0,l=e})),o&&!vt(r))throw new Error(`use method[${l}] but PGA is not a number`);if(a&&!vt(i))throw new Error(`use method[${u}] but Mw is not a number`);let s=ve(n,"waterLevelUsual",0);s=Lt(s);let f=ve(n,"waterLevelDesign",0);f=Lt(f);let c=ve(n,"unitSvSvp","");dt(c)||(c="kPa"),e=ic(e=rc(e=ec(e=wl(e))),r,i,s,f);let h="";try{let n={unitSvSvp:c,methods:t};e=Xf.calc("SPT",e,n)}catch(e){console.log(e),h=e.toString()}let p=nc(e,{returnLastone:!0});return p=Jf(p,h),{ltdt:e,dtRes:p}}var lc=9007199254740991,ac=4294967295,uc=Math.min;function sc(e,t){if((e=Ql(e))<1||e>lc)return[];var n=ac,r=uc(e,ac);t=si(t),e-=ac;for(var i=Or(r,t);++n<e;)t(n);return i}function fc(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}var cc=Array.prototype.splice;var hc=fa((function(e,t){return e&&e.length&&t&&t.length?function(e,t,n,r){var i=r?fc:El,o=-1,l=t.length,a=e;for(e===t&&(t=ko(t)),n&&(a=le(e,Zr(n)));++o<l;)for(var u=0,s=t[o],f=n?n(s):s;(u=i(a,f,u,r))>-1;)a!==e&&cc.call(a,u,1),cc.call(e,u,1);return e}(e,t):e})),pc=hc;function dc(e,t){let n=oi(ve(e,0));return n=ja(n,(e=>e.indexOf(t)>=0)),n}function gc(e,t,n){let r="未有沉陷危害",i="無",o="",l=ve(e,ut(e)-1),a=ve(l,t,"");return ht(a)?a>=n?(r="具沉陷危害",i=`超過指定沉陷值(${a}>=${n}m)`,o=l.PGA):i=`沉陷(${a}m)`:(r="錯誤",i=`欄位(${t})的沉陷值(${a})非數字`),{state:r,failurePGA:o,msg:i}}function vc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!vt(t))throw new Error("PGA is not a number");if(t=Lt(t),!Da(n))throw new Error(`methods[${n}] is not an effective array`);let i=ve(r,"Mw",""),o=ve(r,"waterLevelUsual",0);o=Lt(o);let l=ve(r,"waterLevelDesign",0);l=Lt(l);let a=ve(r,"unitSvSvp","");dt(a)||(a="kPa");let u=ve(r,"pgaMax","");vt(u)||(u=2),u=Lt(u);let s=ve(r,"useFS",!0);Ul(s)||(s=!0);let f=ve(r,"usePL",!0);Ul(f)||(f=!0);let c=ve(r,"useStl",!0);Ul(c)||(c=!0);let h=ve(r,"stlLims",[]);Da(h)||(h=[.3]);let p=ve(r,"useH1PL",!0);Ul(p)||(p=!0);let d=oc(e,n,{PGA:t,Mw:i,waterLevelUsual:o,waterLevelDesign:l,unitSvSvp:a}),g=d.ltdt,v=d.dtRes,m=dc(g,"-FS"),y=dc(g,"-PL"),b=dc(g,"-stlTS"),w=dc(g,"-stlIY"),$=dc(g,"-H1PL"),x=e=>vt(e)?e:u;return s&&fi(m,(e=>{let t=function(e,t){let n="未液化",r="無",i=1e20,o="";return fi(e,(e=>{let l=ve(e,t,"");return!ht(l)||(l<=1?(n="已液化",r=`深度(${e.depthStart}-${e.depthEnd}m)發生液化(FS=${l}<=1)`,o=e.PGA,!1):void(i=Math.min(i,l)))})),"未液化"===n&&(r=`最小安全係數值(${i})`),{state:n,failurePGA:o,msg:r}}(g,e);v[`${e}-state`]=t.state,v[`${e}-failurePGA`]=x(t.failurePGA),v[`${e}-msg`]=t.msg})),f&&fi(y,(e=>{let t=function(e,t){let n="未有液化潛勢",r="無",i="",o=ve(e,ut(e)-1),l=ve(o,t,"");return ht(l)?l>=15?(n="具液化潛勢",r=`超過指定液化潛勢值(${l}>=15)`,i=o.PGA):r=`液化潛勢值(${l})`:(n="錯誤",r=`欄位(${t})的液化潛勢值(${l})非數字`),{state:n,failurePGA:i,msg:r}}(g,e);v[`${e}-state`]=t.state,v[`${e}-failurePGA`]=x(t.failurePGA),v[`${e}-msg`]=t.msg})),c&&fi(h,(e=>{fi(b,(t=>{let n=gc(g,t,e);v[`${t}${e}-state`]=n.state,v[`${t}${e}-failurePGA`]=x(n.failurePGA),v[`${t}${e}-msg`]=n.msg})),fi(w,(t=>{let n=gc(g,t,e);v[`${t}${e}-state`]=n.state,v[`${t}${e}-failurePGA`]=x(n.failurePGA),v[`${t}${e}-msg`]=n.msg}))})),p&&fi($,(e=>{let t=function(e,t){let n="未有高可能性的顯著液化破壞",r="無",i="",o=ve(e,ut(e)-1),l=ve(o,t,"");return"A"!==l&&"B1"!==l&&"B2"!==l&&"B3"!==l&&"C"!==l?(n="錯誤",r=`欄位(${t})的顯著液化破壞之可能性值(${l})非['A','B1','B2','B3','C']`):"C"===l?(n="具液化潛勢",r=`已達高可能性的顯著液化破壞(${l})`,i=o.PGA):r=`顯著液化破壞之可能性值(${l})`,{state:n,failurePGA:i,msg:r}}(g,e);v[`${e}-state`]=t.state,v[`${e}-failurePGA`]=x(t.failurePGA),v[`${e}-msg`]=t.msg})),{ltdt:g,dtRes:v}}function mc(e){return e&&e.length?qa(e,ui):0}function yc(e){if(0===e.length)return 0;var t,n=e[0],r=0;if("number"!=typeof n)return NaN;for(var i=1;i<e.length;i++){if("number"!=typeof e[i])return NaN;t=n+e[i],Math.abs(n)>=Math.abs(e[i])?r+=n-t+e[i]:r+=e[i]-t+n,n=t}return n+r}function bc(e){if(0===e.length)throw new Error("mean requires at least one data point");return yc(e)/e.length}function wc(e,t){var n,r,i=bc(e),o=0;if(2===t)for(r=0;r<e.length;r++)o+=(n=e[r]-i)*n;else for(r=0;r<e.length;r++)o+=Math.pow(e[r]-i,t);return o}function $c(e){if(0===e.length)throw new Error("variance requires at least one data point");return wc(e,2)/e.length}function xc(e){if(1===e.length)return 0;var t=$c(e);return Math.sqrt(t)}function Mc(e){if(0===e.length)throw new Error("mode requires at least one data point");if(1===e.length)return e[0];for(var t=e[0],n=NaN,r=0,i=1,o=1;o<e.length+1;o++)e[o]!==t?(i>r&&(r=i,n=t),i=1,t=e[o]):i++;return n}function Sc(e){return e.slice().sort((function(e,t){return e-t}))}function Ec(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function kc(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function Rc(e){for(var t=0,n=0;n<e.length;n++){if("number"!=typeof e[n])return NaN;t+=e[n]}return t}function Pc(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function Lc(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,l=Math.log(i),a=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*a*(i-a)/i);o-i/2<0&&(u*=-1),Lc(e,t,Math.max(n,Math.floor(t-o*a/i+u)),Math.min(r,Math.floor(t+(i-o)*a/i+u)))}var s=e[t],f=n,c=r;for(Dc(e,n,t),e[r]>s&&Dc(e,n,r);f<c;){for(Dc(e,f,c),f++,c--;e[f]<s;)f++;for(;e[c]>s;)c--}e[n]===s?Dc(e,n,c):Dc(e,++c,r),c<=t&&(n=c+1),t<=c&&(r=c-1)}}function Dc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Cc(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(Tc(e.length,t[r]));n.push(e.length-1),n.sort(Fc);var i=[0,n.length-1];for(;i.length;){var o=Math.ceil(i.pop()),l=Math.floor(i.pop());if(!(o-l<=1)){var a=Math.floor((l+o)/2);qc(e,n[a],Math.floor(n[l]),Math.ceil(n[o])),i.push(l,a,a,o)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=Pc(n,t[i]);return r}return qc(n,Tc(n.length,t),0,n.length-1),Pc(n,t)}function qc(e,t,n,r){t%1==0?Lc(e,t,n,r):(Lc(e,t=Math.floor(t),n,r),Lc(e,t+1,t+1,r))}function Fc(e,t){return e-t}function Tc(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}function Oc(e,t){if(t<e[0])return 0;if(t>e[e.length-1])return 1;var n=function(e,t){var n=0,r=0,i=e.length;for(;r<i;)t<=e[n=r+i>>>1]?i=n:r=-~n;return r}(e,t);if(e[n]!==t)return n/e.length;n++;var r=function(e,t){var n=0,r=0,i=e.length;for(;r<i;)t>=e[n=r+i>>>1]?r=-~n:i=n;return r}(e,t);if(r===n)return n/e.length;var i=r-n+1;return i*(r+n)/2/i/e.length}function jc(e){var t=Cc(e,.75),n=Cc(e,.25);if("number"==typeof t&&"number"==typeof n)return t-n}function Ac(e){return+Cc(e,.5)}function _c(e){for(var t=Ac(e),n=[],r=0;r<e.length;r++)n.push(Math.abs(e[r]-t));return Ac(n)}function Nc(e,t){t=t||Math.random;for(var n,r,i=e.length;i>0;)r=Math.floor(t()*i--),n=e[i],e[i]=e[r],e[r]=n;return e}function Ic(e,t){return Nc(e.slice(),t)}function zc(e,t,n){return Ic(e,n).slice(0,t)}function Gc(e,t){for(var n=[],r=0;r<e;r++){for(var i=[],o=0;o<t;o++)i.push(0);n.push(i)}return n}function Bc(e){for(var t,n=0,r=0;r<e.length;r++)0!==r&&e[r]===t||(t=e[r],n++);return n}function Uc(e,t,n,r){var i;if(e>0){var o=(n[t]-n[e-1])/(t-e+1);i=r[t]-r[e-1]-(t-e+1)*o*o}else i=r[t]-n[t]*n[t]/(t+1);return i<0?0:i}function Qc(e,t,n,r,i,o,l){if(!(e>t)){var a=Math.floor((e+t)/2);r[n][a]=r[n-1][a-1],i[n][a]=a;var u=n;e>n&&(u=Math.max(u,i[n][e-1]||0)),u=Math.max(u,i[n-1][a]||0);var s,f,c,h=a-1;t<r[0].length-1&&(h=Math.min(h,i[n][t+1]||0));for(var p=h;p>=u&&!((s=Uc(p,a,o,l))+r[n-1][u-1]>=r[n][a]);--p)(f=Uc(u,a,o,l)+r[n-1][u-1])<r[n][a]&&(r[n][a]=f,i[n][a]=u),u++,(c=s+r[n-1][p-1])<r[n][a]&&(r[n][a]=c,i[n][a]=p);Qc(e,a-1,n,r,i,o,l),Qc(a+1,t,n,r,i,o,l)}}function Hc(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=bc(e),r=bc(t),i=0,o=0;o<e.length;o++)i+=(e[o]-n)*(t[o]-r);return i/(e.length-1)}function Wc(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");return wc(e,2)/(e.length-1)}function Vc(e){var t=Wc(e);return Math.sqrt(t)}function Yc(e,t){return Hc(e,t)/Vc(e)/Vc(t)}function Zc(e,t,n,r){return(e*t+n*r)/(t+r)}function Kc(e){if(0===e.length)throw new Error("meanSimple requires at least one data point");return Rc(e)/e.length}function Xc(e){if(0===e.length)throw new Error("rootMeanSquare requires at least one data point");for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return Math.sqrt(t/e.length)}var Jc=function(){this.totalCount=0,this.data={}};Jc.prototype.train=function(e,t){for(var n in this.data[t]||(this.data[t]={}),e){var r=e[n];void 0===this.data[t][n]&&(this.data[t][n]={}),void 0===this.data[t][n][r]&&(this.data[t][n][r]=0),this.data[t][n][r]++}this.totalCount++},Jc.prototype.score=function(e){var t,n={};for(var r in e){var i=e[r];for(t in this.data)n[t]={},this.data[t][r]?n[t][r+"_"+i]=(this.data[t][r][i]||0)/this.totalCount:n[t][r+"_"+i]=0}var o={};for(t in n)for(var l in o[t]=0,n[t])o[t]+=n[t][l];return o};var eh=function(){this.weights=[],this.bias=0};eh.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,n=0;n<this.weights.length;n++)t+=this.weights[n]*e[n];return(t+=this.bias)>0?1:0},eh.prototype.train=function(e,t){if(0!==t&&1!==t)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var n=this.predict(e);if("number"==typeof n&&n!==t){for(var r=t-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*e[i];this.bias+=r}return this};var th=1e-4;function nh(e){if(e<0)throw new Error("factorial requires a non-negative value");if(Math.floor(e)!==e)throw new Error("factorial requires an integer input");for(var t=1,n=2;n<=e;n++)t*=n;return t}var rh=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],ih=Math.log(Math.sqrt(2*Math.PI));var oh={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}};var lh=Math.sqrt(2*Math.PI),ah={gaussian:function(e){return Math.exp(-.5*e*e)/lh}},uh={nrd:function(e){var t=Vc(e),n=jc(e);return"number"==typeof n&&(t=Math.min(t,n/1.34)),1.06*t*Math.pow(e.length,-.2)}};function sh(e,t,n){var r,i;if(void 0===t)r=ah.gaussian;else if("string"==typeof t){if(!ah[t])throw new Error('Unknown kernel "'+t+'"');r=ah[t]}else r=t;if(void 0===n)i=uh.nrd(e);else if("string"==typeof n){if(!uh[n])throw new Error('Unknown bandwidth method "'+n+'"');i=uh[n](e)}else i=n;return function(t){var n=0,o=0;for(n=0;n<e.length;n++)o+=r((t-e[n])/i);return o/i/e.length}}var fh=Math.sqrt(2*Math.PI);function ch(e){for(var t=e,n=e,r=1;r<15;r++)t+=n*=e*e/(2*r+1);return Math.round(1e4*(.5+t/fh*Math.exp(-e*e/2)))/1e4}for(var hh=[],ph=0;ph<=3.09;ph+=.01)hh.push(ch(ph));function dh(e){var t=1/(1+.5*Math.abs(e)),n=t*Math.exp(-e*e+((((((((.17087277*t-.82215223)*t+1.48851587)*t-1.13520398)*t+.27886807)*t-.18628806)*t+.09678418)*t+.37409196)*t+1.00002368)*t-1.26551223);return e>=0?1-n:n-1}function gh(e){var t=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*t)+Math.log(1-e*e)/2,2)-Math.log(1-e*e)/t)-(2/(Math.PI*t)+Math.log(1-e*e)/2));return e>=0?n:-n}function vh(e){if("number"==typeof e)return e<0?-1:0===e?0:1;throw new TypeError("not a number")}function mh(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function yh(e,t){return e.map((function(e){for(var n=Number.MAX_VALUE,r=-1,i=0;i<t.length;i++){var o=mh(e,t[i]);o<n&&(n=o,r=i)}return r}))}function bh(e,t,n){for(var r=e[0].length,i=Gc(n,r),o=Array(n).fill(0),l=e.length,a=0;a<l;a++){for(var u=e[a],s=t[a],f=i[s],c=0;c<r;c++)f[c]+=u[c];o[s]+=1}for(var h=0;h<n;h++){if(0===o[h])throw new Error("Centroid "+h+" has no friends");for(var p=i[h],d=0;d<r;d++)p[d]/=o[h]}return i}function wh(e,t){for(var n=0,r=0;r<e.length;r++)n+=mh(e[r],t[r]);return n}function $h(e,t){if(e.length!==t.length)throw new Error("must have exactly as many labels as points");for(var n=function(e){for(var t=1+kc(e),n=Array(t),r=0;r<e.length;r++){var i=e[r];void 0===n[i]&&(n[i]=[]),n[i].push(r)}return n}(t),r=function(e){for(var t=e.length,n=Gc(t,t),r=0;r<t;r++)for(var i=0;i<r;i++)n[r][i]=mh(e[r],e[i]),n[i][r]=n[r][i];return n}(e),i=[],o=0;o<e.length;o++){var l=0;if(n[t[o]].length>1){var a=Mh(o,n[t[o]],r),u=xh(o,t,n,r);l=(u-a)/Math.max(a,u)}i.push(l)}return i}function xh(e,t,n,r){for(var i=t[e],o=Number.MAX_VALUE,l=0;l<n.length;l++)if(l!==i){var a=Mh(e,n[l],r);a<o&&(o=a)}return o}function Mh(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=n[e][t[i]];return r/t.length}function Sh(e,t){return 0===e&&0===t?0:Math.abs((e-t)/t)}var Eh=Object.freeze({__proto__:null,BayesianClassifier:Jc,PerceptronModel:eh,addToMean:function(e,t,n){return e+(n-e)/(t+1)},approxEqual:function(e,t,n){return void 0===n&&(n=th),Sh(e,t)<=n},average:bc,averageSimple:Kc,bayesian:Jc,bernoulliDistribution:function(e){if(e<0||e>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-e,e]},binomialDistribution:function(e,t){if(!(t<0||t>1||e<=0||e%1!=0)){var n=0,r=0,i=[],o=1;do{i[n]=o*Math.pow(t,n)*Math.pow(1-t,e-n),r+=i[n],o=o*(e-++n+1)/n}while(r<1-th);return i}},bisect:function(e,t,n,r,i){if("function"!=typeof e)throw new TypeError("func must be a function");for(var o=0;o<r;o++){var l=(t+n)/2;if(0===e(l)||Math.abs((n-t)/2)<i)return l;vh(e(l))===vh(e(t))?t=l:n=l}throw new Error("maximum number of iterations exceeded")},chiSquaredDistributionTable:oh,chiSquaredGoodnessOfFit:function(e,t,n){for(var r=0,i=t(bc(e)),o=[],l=[],a=0;a<e.length;a++)void 0===o[e[a]]&&(o[e[a]]=0),o[e[a]]++;for(var u=0;u<o.length;u++)void 0===o[u]&&(o[u]=0);for(var s in i)s in o&&(l[+s]=i[s]*e.length);for(var f=l.length-1;f>=0;f--)l[f]<3&&(l[f-1]+=l[f],l.pop(),o[f-1]+=o[f],o.pop());for(var c=0;c<o.length;c++)r+=Math.pow(o[c]-l[c],2)/l[c];var h=o.length-1-1;return oh[h][n]<r},chunk:function(e,t){var n=[];if(t<1)throw new Error("chunk size must be a positive number");if(Math.floor(t)!==t)throw new Error("chunk size must be an integer");for(var r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},ckmeans:function(e,t){if(t>e.length)throw new Error("cannot generate more classes than there are data values");var n=Sc(e);if(1===Bc(n))return[n];var r=Gc(t,n.length),i=Gc(t,n.length);!function(e,t,n){for(var r=t[0].length,i=e[Math.floor(r/2)],o=[],l=[],a=0,u=void 0;a<r;++a)u=e[a]-i,0===a?(o.push(u),l.push(u*u)):(o.push(o[a-1]+u),l.push(l[a-1]+u*u)),t[0][a]=Uc(0,a,o,l),n[0][a]=0;for(var s=1;s<t.length;++s)Qc(s<t.length-1?s:r-1,r-1,s,t,n,o,l)}(n,r,i);for(var o=[],l=i[0].length-1,a=i.length-1;a>=0;a--){var u=i[a][l];o[a]=n.slice(u,l+1),a>0&&(l=u-1)}return o},coefficientOfVariation:function(e){return Vc(e)/bc(e)},combinations:function e(t,n){var r,i,o,l,a=[];for(r=0;r<t.length;r++)if(1===n)a.push([t[r]]);else for(o=e(t.slice(r+1,t.length),n-1),i=0;i<o.length;i++)(l=o[i]).unshift(t[r]),a.push(l);return a},combinationsReplacement:function e(t,n){for(var r=[],i=0;i<t.length;i++)if(1===n)r.push([t[i]]);else for(var o=e(t.slice(i,t.length),n-1),l=0;l<o.length;l++)r.push([t[i]].concat(o[l]));return r},combineMeans:Zc,combineVariances:function(e,t,n,r,i,o){var l=Zc(t,n,i,o);return(n*(e+Math.pow(t-l,2))+o*(r+Math.pow(i-l,2)))/(n+o)},cumulativeStdLogisticProbability:function(e){return 1/(Math.exp(-e)+1)},cumulativeStdNormalProbability:function(e){var t=Math.abs(e),n=Math.min(Math.round(100*t),hh.length-1);return e>=0?hh[n]:+(1-hh[n]).toFixed(4)},epsilon:th,equalIntervalBreaks:function(e,t){if(e.length<2)return e;for(var n=Ec(e),r=kc(e),i=[n],o=(r-n)/t,l=1;l<t;l++)i.push(i[0]+o*l);return i.push(r),i},erf:dh,errorFunction:dh,extent:function(e){if(0===e.length)throw new Error("extent requires at least one data point");for(var t=e[0],n=e[0],r=1;r<e.length;r++)e[r]>n&&(n=e[r]),e[r]<t&&(t=e[r]);return[t,n]},extentSorted:function(e){return[e[0],e[e.length-1]]},factorial:nh,gamma:function e(t){if(Number.isInteger(t))return t<=0?NaN:nh(t-1);if(--t<0)return Math.PI/(Math.sin(Math.PI*-t)*e(-t));var n=t+1/4;return Math.pow(t/Math.E,t)*Math.sqrt(2*Math.PI*(t+1/6))*(1+1/144/Math.pow(n,2)-1/12960/Math.pow(n,3)-257/207360/Math.pow(n,4)-52/2612736/Math.pow(n,5)+5741173/9405849600/Math.pow(n,6)+37529/18811699200/Math.pow(n,7))},gammaln:function(e){if(e<=0)return 1/0;e--;for(var t=rh[0],n=1;n<15;n++)t+=rh[n]/(e+n);var r=5.2421875+e;return ih+Math.log(t)-r+(e+.5)*Math.log(r)},geometricMean:function(e){if(0===e.length)throw new Error("geometricMean requires at least one data point");for(var t=1,n=0;n<e.length;n++){if(e[n]<0)throw new Error("geometricMean requires only non-negative numbers as input");t*=e[n]}return Math.pow(t,1/e.length)},harmonicMean:function(e){if(0===e.length)throw new Error("harmonicMean requires at least one data point");for(var t=0,n=0;n<e.length;n++){if(e[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");t+=1/e[n]}return e.length/t},interquartileRange:jc,inverseErrorFunction:gh,iqr:jc,jenks:function(e,t){if(t>e.length)return null;var n=function(e,t){var n,r,i=[],o=[],l=0;for(n=0;n<e.length+1;n++){var a=[],u=[];for(r=0;r<t+1;r++)a.push(0),u.push(0);i.push(a),o.push(u)}for(n=1;n<t+1;n++)for(i[1][n]=1,o[1][n]=0,r=2;r<e.length+1;r++)o[r][n]=1/0;for(var s=2;s<e.length+1;s++){for(var f=0,c=0,h=0,p=0,d=1;d<s+1;d++){var g=s-d+1,v=e[g-1];if(l=(c+=v*v)-(f+=v)*f/++h,0!=(p=g-1))for(r=2;r<t+1;r++)o[s][r]>=l+o[p][r-1]&&(i[s][r]=g,o[s][r]=l+o[p][r-1])}i[s][1]=1,o[s][1]=l}return{lowerClassLimits:i,varianceCombinations:o}}(e=e.slice().sort((function(e,t){return e-t})),t);return function(e,t,n){var r=e.length,i=[],o=n;for(i[n]=e[e.length-1];o>0;)i[o-1]=e[t[r][o]-1],r=t[r][o]-1,o--;return i}(e,n.lowerClassLimits,t)},kMeansCluster:function(e,t,n){void 0===n&&(n=Math.random);for(var r=null,i=zc(e,t,n),o=null,l=Number.MAX_VALUE;0!==l;)r=i,l=wh(i=bh(e,o=yh(e,i),t),r);return{labels:o,centroids:i}},kde:sh,kernelDensityEstimation:sh,linearRegression:function(e){var t,n,r=e.length;if(1===r)t=0,n=e[0][1];else{for(var i,o,l,a=0,u=0,s=0,f=0,c=0;c<r;c++)a+=o=(i=e[c])[0],u+=l=i[1],s+=o*o,f+=o*l;n=u/r-(t=(r*f-a*u)/(r*s-a*a))*a/r}return{m:t,b:n}},linearRegressionLine:function(e){return function(t){return e.b+e.m*t}},logAverage:function(e){if(0===e.length)throw new Error("logAverage requires at least one data point");for(var t=0,n=0;n<e.length;n++){if(e[n]<0)throw new Error("logAverage requires only non-negative numbers as input");t+=Math.log(e[n])}return Math.exp(t/e.length)},logit:function(e){if(e<=0||e>=1)throw new Error("p must be strictly between zero and one");return Math.log(e/(1-e))},mad:_c,max:kc,maxSorted:function(e){return e[e.length-1]},mean:bc,meanSimple:Kc,median:Ac,medianAbsoluteDeviation:_c,medianSorted:function(e){return Pc(e,.5)},min:Ec,minSorted:function(e){return e[0]},mode:function(e){return Mc(Sc(e))},modeFast:function(e){for(var t,n=new Map,r=0,i=0;i<e.length;i++){var o=n.get(e[i]);void 0===o?o=1:o++,o>r&&(t=e[i],r=o),n.set(e[i],o)}if(0===r)throw new Error("mode requires at last one data point");return t},modeSorted:Mc,numericSort:Sc,perceptron:eh,permutationTest:function(e,t,n,r,i){if(void 0===r&&(r=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'.");for(var o=bc(e)-bc(t),l=new Array(r),a=e.concat(t),u=Math.floor(a.length/2),s=0;s<r;s++){Nc(a,i);var f=a.slice(0,u),c=a.slice(u,a.length),h=bc(f)-bc(c);l[s]=h}var p=0;if("two_side"===n)for(var d=0;d<=r;d++)Math.abs(l[d])>=Math.abs(o)&&(p+=1);else if("greater"===n)for(var g=0;g<=r;g++)l[g]>=o&&(p+=1);else for(var v=0;v<=r;v++)l[v]<=o&&(p+=1);return p/r},permutationsHeap:function(e){for(var t=new Array(e.length),n=[e.slice()],r=0;r<e.length;r++)t[r]=0;for(var i=0;i<e.length;)if(t[i]<i){var o=0;i%2!=0&&(o=t[i]);var l=e[o];e[o]=e[i],e[i]=l,n.push(e.slice()),t[i]++,i=0}else t[i]=0,i++;return n},poissonDistribution:function(e){if(!(e<=0)){var t=0,n=0,r=[],i=1;do{r[t]=Math.exp(-e)*Math.pow(e,t)/i,n+=r[t],i*=++t}while(n<1-th);return r}},probit:function(e){return 0===e?e=th:e>=1&&(e=1-th),Math.sqrt(2)*gh(2*e-1)},product:function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t},quantile:Cc,quantileRank:function(e,t){return Oc(Sc(e),t)},quantileRankSorted:Oc,quantileSorted:Pc,quickselect:Lc,rSquared:function(e,t){if(e.length<2)return 1;for(var n=0,r=0;r<e.length;r++)n+=e[r][1];for(var i=n/e.length,o=0,l=0;l<e.length;l++)o+=Math.pow(i-e[l][1],2);for(var a=0,u=0;u<e.length;u++)a+=Math.pow(e[u][1]-t(e[u][0]),2);return 1-a/o},relativeError:Sh,rms:Xc,rootMeanSquare:Xc,sample:zc,sampleCorrelation:Yc,sampleCovariance:Hc,sampleKurtosis:function(e){var t=e.length;if(t<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,r=bc(e),i=0,o=0,l=0;l<t;l++)i+=(n=e[l]-r)*n,o+=n*n*n*n;return(t-1)/((t-2)*(t-3))*(t*(t+1)*o/(i*i)-3*(t-1))},sampleRankCorrelation:function(e,t){for(var n=e.map((function(e,t){return[e,t]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]})),r=t.map((function(e,t){return[e,t]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]})),i=Array(n.length),o=Array(n.length),l=0;l<n.length;l++)i[n[l]]=l,o[r[l]]=l;return Yc(i,o)},sampleSkewness:function(e){if(e.length<3)throw new Error("sampleSkewness requires at least three data points");for(var t,n=bc(e),r=0,i=0,o=0;o<e.length;o++)r+=(t=e[o]-n)*t,i+=t*t*t;var l=e.length-1,a=Math.sqrt(r/l),u=e.length;return u*i/((u-1)*(u-2)*Math.pow(a,3))},sampleStandardDeviation:Vc,sampleVariance:Wc,sampleWithReplacement:function(e,t,n){if(0===e.length)return[];n=n||Math.random;for(var r=e.length,i=[],o=0;o<t;o++){var l=Math.floor(n()*r);i.push(e[l])}return i},shuffle:Ic,shuffleInPlace:Nc,sign:vh,silhouette:$h,silhouetteMetric:function(e,t){return kc($h(e,t))},standardDeviation:xc,standardNormalTable:hh,subtractFromMean:function(e,t,n){return(e*t-n)/(t-1)},sum:yc,sumNthPowerDeviations:wc,sumSimple:Rc,tTest:function(e,t){return(bc(e)-t)/(xc(e)/Math.sqrt(e.length))},tTestTwoSample:function(e,t,n){var r=e.length,i=t.length;if(!r||!i)return null;n||(n=0);var o=bc(e),l=bc(t),a=Wc(e),u=Wc(t);if("number"==typeof o&&"number"==typeof l&&"number"==typeof a&&"number"==typeof u){var s=((r-1)*a+(i-1)*u)/(r+i-2);return(o-l-n)/Math.sqrt(s*(1/r+1/i))}},uniqueCountSorted:Bc,variance:$c,wilcoxonRankSum:function(e,t){if(!e.length||!t.length)throw new Error("Neither sample can be empty");for(var n=e.map((function(e){return{label:"x",value:e}})).concat(t.map((function(e){return{label:"y",value:e}}))).sort((function(e,t){return e.value-t.value})),r=0;r<n.length;r++)n[r].rank=r;for(var i=[n[0].rank],o=1;o<n.length;o++)n[o].value===n[o-1].value?(i.push(n[o].rank),o===n.length-1&&l(n,i)):i.length>1?l(n,i):i=[n[o].rank];function l(e,t){for(var n=(t[0]+t[t.length-1])/2,r=0;r<t.length;r++)e[t[r]].rank=n}for(var a=0,u=0;u<n.length;u++){var s=n[u];"x"===s.label&&(a+=s.rank+1)}return a},zScore:function(e,t,n){return(e-t)/n}});let kh=ve(Rh=Eh,"default.default")?Rh.default.default:ve(Rh,"default")?Rh.default:Rh;var Rh;function Ph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"interpX");vt(n)||(n=null);let r=ve(t,"useRegIntercept");Ul(r)||(r=!0);let i=ve(t,"useSync");Ul(i)||(i=!1);let o=()=>{let t=[];if(fi(e,(e=>{let n=ve(e,0),r=ve(e,1);vt(n)&&vt(r)&&t.push([Lt(n),Lt(r)])})),0===ut(t))return null;let i=null;if(r)i=kh.linearRegression(t);else{let e=0,n=0;fi(t,(t=>{e+=t[0]**2,n+=t[0]*t[1]}));let r=null;0!==e&&(r=n/e),i={m:r,b:0}}if(vt(n)){n=Lt(n);let e=kh.linearRegressionLine(i)(n);i.interpY=e}return i};return i?o():(async()=>{let e=null;try{return e=o(),Gl(e)?e:Promise.reject("no effective data")}catch(e){return console.log(e),Promise.reject(e.toString())}})()}function Lh(e){if(!Hl(e))return!1;return Kl(e)>0}async function Dh(e,t){if(!Lh(e))return Promise.reject(`n[${e}] is not positive integer`);if((e=Kl(e))<=1)return Promise.reject(`n[${e}] <= 1`);if(vt(t)||(t=.95),(t=Lt(t))<0)return Promise.reject(`p[${t}] < 0`);if(t>1)return Promise.reject(`p[${t}] > 1`);let n=e-1;return Ia.studentt.inv(t,n)}function Ch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!Da(e))return n;let r=ve(t,"keyDepth");return dt(r)||(r="depth"),fi(e=wl(e),((e,t)=>{let i=ve(e,r,null);vt(i)||n.push(`第 ${t} 樣本中點深度${r}[${i}]非有效數字`)})),ut(n)>0||fi(e=ha(e,(e=>Lt(e[r]))),((t,i)=>{if(0===i)return!0;let o=ve(e,`${i-1}.${r}`,null),l=ve(t,r,null);o=Lt(o),l=Lt(l),gr(o,">=",l)&&n.push(`第 ${i-1} 樣本之中點深度${r}[${o}]大於等於第 ${i} 樣本之中點深度${r}[${l}]`)})),n}function qh(e,t,n){return null==e?e:function(e,t,n,r){if(!$(e))return e;for(var i=-1,o=(t=he(t,e)).length,l=o-1,a=e;null!=a&&++i<o;){var u=de(t[i]),s=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=l){var f=a[u];void 0===(s=r?r(f,u,a):void 0)&&(s=$(f)?f:Vr(t[i+1])?[]:{})}mo(a,u,s),a=a[u]}return e}(e,t,n)}function Fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fh(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oh(e,t,n){let r=ve(e,`${n}.${t}`);return r=vt(r)?Lt(r):null,r}function jh(e,t,n,r,i,o){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=ve(l,"dir");"before"!==a&&"after"!==a&&(a="after");let u=ve(l,"searchMode");if("all"!==u&&"no"!==u&&"peak"!==u&&"half-closed-value"!==u&&"double-closed-value"!==u&&"closed-value"!==u&&(u="all"),0===ut(e))return null;if("no"===u)return{k:r,depth:ve(e,`${r}.${t}`),value:ve(e,`${r}.${n}`)};if(!vt(o))return{k:r,depth:ve(e,`${r}.${t}`),value:ve(e,`${r}.${n}`)};let s=Oh(e,t,r),f=[];if("after"===a)for(let o=r+1;o<ut(e)-1;o++){let r=Oh(e,t,o),l=Oh(e,n,o),a=Math.abs(r-s)>i;f.push({k:o,depth:r,value:l,outRange:a})}else for(let o=r-1;o>0;o--){let r=Oh(e,t,o),l=Oh(e,n,o),a=Math.abs(r-s)>i;f.push({k:o,depth:r,value:l,outRange:a})}let c=[];for(let e=0;e<f.length;e++){let t=f[e];if(ht(t.depth)){if(t.outRange&&ut(c)>0)break;ht(t.value)&&c.push(t)}}if(0===ut(c))return null;if("all"===u||"peak"===u)for(let e=1;e<c.length-1;e++){let t=c[e-1],n=c[e+0],r=c[e+1],i=1;if(0!==o&&(i=n.value/o),n.value>=t.value&&n.value>=r.value&&t.value!==r.value&&i>.5&&i<2)return{k:n.k,depth:n.depth,value:n.value}}if("all"===u||"closed-value"===u){let e=1e20,t=null;for(let n=0;n<c.length;n++){let r=c[n+0];if(r.outRange)break;let i=Math.abs(r.value-o);e>i&&(e=i,t={k:r.k,depth:r.depth,value:r.value})}if(null!==t)return t}let h=null;if("all"===u||"half-closed-value"===u){let e=1e20,t=null;for(let n=0;n<c.length;n++){let r=c[n+0],i=Math.abs(r.value-o/2);e>i&&(e=i,t={diff:e,k:r.k,depth:r.depth,value:r.value})}null!==t&&(h=t)}let p=null;if("all"===u||"double-closed-value"===u){let e=1e20,t=null;for(let n=0;n<c.length;n++){let r=c[n+0],i=Math.abs(r.value-1.5*o);e>i&&(e=i,t={diff:e,k:r.k,depth:r.depth,value:r.value})}null!==t&&(p=t)}if(null!==h&&null===p)return delete h.diff,h;if(null===h&&null!==p)return delete p.diff,p;if(null===h&&null===p){let e=null;return e=h.diff<=p.diff?h:p,delete e.diff,e}return null}var Ah=1/0;function _h(e){return(null==e?0:e.length)?ea(e,Ah):[]}function Nh(e,t){let n=function(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}();if(!Pa(e)&&!zl(e))return n.reject("rs is not an array or object"),n;let r=!1;if(zl(e)){r=!0;let t=[];fi(e,((e,n)=>{t.push({k:n,v:e})})),e=t}Il(t)||(t=function(e){return e});let i=-1,o=[];return e.reduce((function(e,n){return e.then((function(e){o.push(e),i+=1;let l=i,a=n;return r&&(l=n.k,a=n.v),Il(t)?t(a,l):a}))}),Promise.resolve()).then((function(e){var t,r,i,l;o.push(e),l=null==(t=o)?0:t.length,o=l?$l(t,(r=i||void 0===r?1:Ql(r))<0?0:r,l):[],n.resolve(o)})).catch((function(e){n.reject(e)})),n}function Ih(e){return ce(e).toUpperCase()}function zh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return dt(e)&&Ca(t)?(n=Lh(n)?Kl(n):1,e.substring(t,t+n)):""}let Gh={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function Bh(e){return Qh(e,1)}function Uh(e){return Qh(e,360)}function Qh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.indexOf("%")>=0){if(!vt(e=cf(e,"%","")))throw new Error("invalid color: value is not a number");e=Lt(e)/100}else{if(!vt(e))throw new Error("invalid color: value is not a number");e=Lt(e)/t}if(e>1)throw new Error("invalid color: value > 1");if(e<0)throw new Error("invalid color: value < 0");return e}function Hh(e){if(!vt(e))throw new Error("invalid color: value is not a number");if((e=Lt(e))>1)throw new Error("invalid color: value > 1");if(e<0)throw new Error("invalid color: value < 0");return e}function Wh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba";if(!Pa(e))throw new Error("invalid colors array");let n=ve(e,0,0),r=ve(e,1,0),i=ve(e,2,0),o=ve(e,3,1);if(t=t.split(""),4!==ut(t))throw new Error("tar.length !== 4");return{[ve(t,0)]:n,[ve(t,1)]:r,[ve(t,2)]:i,[ve(t,3)]:o}}function Vh(e){e=function(e,t){return dt(e)&&Ca(t)?0===(t=Kl(t))?e:ff(e,e.length-t):""}(e,1);let t=ut(e);if(2===t)e=`${e}${e}${e}ff`;else if(3===t){let t=zh(e,0,1),n=zh(e,1,1),r=zh(e,2,1);e=`${t}${t}${n}${n}${r}${r}ff`}else if(6===t)e=`${e}ff`;else if(8!==t)throw new Error("invalid hex color");function n(e){if(2!==ut(e))throw new Error("hex.length of color is not equal to 2");if(!vt(e=parseInt(e,16)))throw new Error("invalid hex of color");return(e=Lt(e))/255}return{r:n(zh(e,0,2)),g:n(zh(e,2,2)),b:n(zh(e,4,2)),a:n(zh(e,6,2))}}function Yh(e){return e=Wh(e=co(e,((e,t)=>t<=2?Qh(e,255):3===t?Hh(e):null)),"rgba")}function Zh(e){return e=ip(e=Wh(e=co(e,((e,t)=>0===t?Uh(e):1===t||2===t?Bh(e):3===t?Hh(e):null)),"hsla"))}function Kh(e){return e=op(e=Wh(e=co(e,((e,t)=>0===t?Uh(e):1===t||2===t?Bh(e):3===t?Hh(e):null)),"hsva"))}function Xh(e){if("transparent"===e)return{r:0,g:0,b:0,a:0};if(function(e){return lu(Gh,e)}(e))return e=function(e){return`#${Gh[e]}`}(e),Vh(e);if(function(e){return"#"===sf(e,1)&&(!!/[0-9A-Fa-f]{2}/g.test(e)||(!!/[0-9A-Fa-f]{3}/g.test(e)||(!!/[0-9A-Fa-f]{6}/g.test(e)||!!/[0-9A-Fa-f]{8}/g.test(e))))}(e))return Vh(e);if(function(e){return"rgb"===sf(e,3)||"rgba"===sf(e,4)}(e))return function(e){return e=cf(e,"rgba",""),e=cf(e,"rgb",""),Yh(Ts(e=cf(e=e.replace(/[()]/g,""),","," ")," "))}(e);if(function(e){return"hsl"===sf(e,3)||"hsla"===sf(e,4)}(e))return function(e){return e=cf(e,"hsla",""),e=cf(e,"hsl",""),Zh(Ts(e=cf(e=e.replace(/[()]/g,""),","," ")," "))}(e);if(function(e){return"hsv"===sf(e,3)||"hsva"===sf(e,4)}(e))return function(e){return e=cf(e,"hsva",""),e=cf(e,"hsv",""),Kh(Ts(e=cf(e=e.replace(/[()]/g,""),","," ")," "))}(e);throw new Error("format of color string is not hex-color, name-color, rgba, hsla, hsva")}function Jh(e,t){return!!lu(e,t=of(t))||!!lu(e,t=Ih(t))}function ep(e,t,n){let r;return r=ve(e,t,null),null!==r?r:(r=ve(e,t=Ih(t),null),null!==r?r:n)}function tp(e){if(function(e){let t=Jh(e,"r"),n=Jh(e,"g"),r=Jh(e,"b");return t&&n&&r}(e))return function(e){let t=[ep(e,"r",null),ep(e,"g",null),ep(e,"b",null),ep(e,"a",1)];return t=co(t,Za),Yh(t)}(e);if(function(e){let t=Jh(e,"h"),n=Jh(e,"s"),r=Jh(e,"l");return t&&n&&r}(e))return function(e){let t=[ep(e,"h",null),ep(e,"s",null),ep(e,"l",null),ep(e,"a",1)];return t=co(t,Za),Zh(t)}(e);if(function(e){let t=Jh(e,"h"),n=Jh(e,"s"),r=Jh(e,"v");return t&&n&&r}(e))return function(e){let t=[ep(e,"h",null),ep(e,"s",null),ep(e,"v",null),ep(e,"a",1)];return t=co(t,Za),Kh(t)}(e);throw new Error("color object is not one of rgba, hsla, hsva")}function np(e){let t,n,r=e.r,i=e.g,o=e.b,l=Math.max(r,i,o),a=Math.min(r,i,o),u=(l+a)/2;if(l===a)t=n=0;else{let e=l-a;switch(n=u>.5?e/(2-l-a):e/(l+a),l){case r:t=(i-o)/e+(i<o?6:0);break;case i:t=(o-r)/e+2;break;case o:t=(r-i)/e+4}t/=6}return{h:t,s:n,l:u,a:e.a}}function rp(e){let t,n,r=e.r,i=e.g,o=e.b,l=Math.max(r,i,o),a=Math.min(r,i,o),u=l,s=l-a;if(n=0===l?0:s/l,l===a)t=0;else{switch(l){case r:t=(i-o)/s+(i<o?6:0);break;case i:t=(o-r)/s+2;break;case o:t=(r-i)/s+4}t/=6}return{h:t,s:n,v:u,a:e.a}}function ip(e){let t,n,r,i=e.h,o=e.s,l=e.l;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0===o)t=n=r=l;else{let e=l<.5?l*(1+o):l+o-l*o,u=2*l-e;t=a(u,e,i+1/3),n=a(u,e,i),r=a(u,e,i-1/3)}return{r:t,g:n,b:r,a:e.a}}function op(e){let t,n,r,i=e.h,o=e.s,l=e.v,a=Math.floor(6*i),u=6*i-a,s=l*(1-o),f=l*(1-u*o),c=l*(1-(1-u)*o);switch(a%6){case 0:t=l,n=c,r=s;break;case 1:t=f,n=l,r=s;break;case 2:t=s,n=l,r=c;break;case 3:t=s,n=f,r=l;break;case 4:t=c,n=s,r=l;break;case 5:t=l,n=s,r=f}return{r:t,g:n,b:r,a:e.a}}function lp(e){let t=Math.round(255*e).toString(16);if(1===ut(t))return`0${t}`;if(2===ut(t))return t;throw new Error("invalid value")}function ap(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.r,r=e.g,i=e.b,o=e.a,l=`${lp(n)}${lp(r)}${lp(i)}`;return t&&(l=`${l}${lp(o)}`),l}function up(e){return Math.min(1,Math.max(0,e))}function sp(e,t){if(!dt(t))throw new Error("fmtOutput is not a string");if(!Bp[t])throw console.log(`fmtOutput must be [${oi(Bp)}]`),new Error("invalid fmtOutput");return e=Bp[t](e)}function fp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");let r=np(e);return r.h+=t,r.h=r.h%1,sp(ip(r),n)}function cp(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"toRgbString";if(t<0||t>1)throw new Error("w1 < 0 or > 1");if(r<0||r>1)throw new Error("w1 < 0 or > 1");return sp({r:e.r*t+n.r*r,g:e.g*t+n.g*r,b:e.b*t+n.b*r,a:e.a*t+n.a*r},i)}function hp(e){return`${Zl(100*e,1)}%`}function pp(e){return Zl(e,0)}function dp(e){return Zl(e,3)}function gp(e){return{r:pp(255*e.r),g:pp(255*e.g),b:pp(255*e.b)}}function vp(e){return`rgb(${pp(255*e.r)}, ${pp(255*e.g)}, ${pp(255*e.b)})`}function mp(e){return{r:pp(255*e.r),g:pp(255*e.g),b:pp(255*e.b),a:dp(e.a)}}function yp(e){return`rgba(${pp(255*e.r)}, ${pp(255*e.g)}, ${pp(255*e.b)}, ${dp(e.a)})`}function bp(e){let t=np(e);return{h:pp(360*t.h),s:dp(t.s),l:dp(t.l)}}function wp(e){let t=np(e);return`hsl(${pp(360*t.h)}, ${dp(t.s)}, ${dp(t.l)})`}function $p(e){let t=np(e);return{h:pp(360*t.h),s:dp(t.s),l:dp(t.l),a:dp(t.a)}}function xp(e){let t=np(e);return`hsla(${pp(360*t.h)}, ${dp(t.s)}, ${dp(t.l)}, ${dp(t.a)})`}function Mp(e){let t=rp(e);return{h:pp(360*t.h),s:dp(t.s),v:dp(t.v)}}function Sp(e){let t=rp(e);return`hsv(${pp(360*t.h)}, ${dp(t.s)}, ${dp(t.v)})`}function Ep(e){let t=rp(e);return{h:pp(360*t.h),s:dp(t.s),v:dp(t.v),a:dp(t.a)}}function kp(e){let t=rp(e);return`hsva(${pp(360*t.h)}, ${dp(t.s)}, ${dp(t.v)}, ${dp(t.a)})`}function Rp(e){return{r:hp(e.r),g:hp(e.g),b:hp(e.b)}}function Pp(e){return`rgb(${hp(e.r)}, ${hp(e.g)}, ${hp(e.b)})`}function Lp(e){return{r:hp(e.r),g:hp(e.g),b:hp(e.b),a:dp(e.a)}}function Dp(e){return`rgba(${hp(e.r)}, ${hp(e.g)}, ${hp(e.b)}, ${dp(e.a)})`}function Cp(e){let t=np(e);return{h:pp(360*t.h),s:hp(t.s),l:hp(t.l)}}function qp(e){let t=np(e);return`hsl(${pp(360*t.h)}, ${hp(t.s)}, ${hp(t.l)})`}function Fp(e){let t=np(e);return{h:pp(360*t.h),s:hp(t.s),l:hp(t.l),a:dp(t.a)}}function Tp(e){let t=np(e);return`hsla(${pp(360*t.h)}, ${hp(t.s)}, ${hp(t.l)}, ${dp(t.a)})`}function Op(e){let t=rp(e);return{h:pp(360*t.h),s:hp(t.s),v:hp(t.v)}}function jp(e){let t=rp(e);return`hsv(${pp(360*t.h)}, ${hp(t.s)}, ${hp(t.v)})`}function Ap(e){let t=rp(e);return{h:pp(360*t.h),s:hp(t.s),v:hp(t.v),a:dp(t.a)}}function _p(e){let t=rp(e);return`hsva(${pp(360*t.h)}, ${hp(t.s)}, ${hp(t.v)}, ${dp(t.a)})`}function Np(e){let t=function(e){return ap(e,!1)}(e);return`#${t}`}function Ip(e){return`#${ap(e)}`}function zp(e){let t=null,n=null,r=null;if(dt(e))t=of(Nl(e));else{if(!Gl(e))throw console.log("color=",e),new Error("color is not a string or an object");n=e}if(null!==t)try{r=Xh(t)}catch(e){throw console.log(e),new Error(`can not parse color: ${t}`)}else if(null!==n)try{r=tp(n)}catch(e){throw console.log(e),new Error(`can not parse color: ${JSON.stringify(n)}`)}return r}function Gp(e){if(!Gl(e))return console.log("gradient is not an effective object"),e=>`rgb(${255*(e=Math.min(Math.max(e,0),1))},${255*e},${255*e})`;let t=[];return fi(e,((e,n)=>{t.push([Lt(n),mp(zp(e)),e])})),t=ha(t,0),function(e){let n=null;for(let r=1;r<t.length;r++){let i=t[r-1][0],o=t[r-1][1],l=t[r][0],a=t[r][1];if(i<=e&&l>=e){let t=(l-e)/(l-i),r=(e-i)/(l-i);n=cp(zp(o),t,zp(a),r,"toRgbaString");break}}return n}}let Bp={toRgb:gp,toRgbString:vp,toRgba:mp,toRgbaString:yp,toHsl:bp,toHslString:wp,toHsla:$p,toHslaString:xp,toHsv:Mp,toHsvString:Sp,toHsva:Ep,toHsvaString:kp,toRgbP:Rp,toRgbPString:Pp,toRgbaP:Lp,toRgbaPString:Dp,toHslP:Cp,toHslPString:qp,toHslaP:Fp,toHslaPString:Tp,toHsvP:Op,toHsvPString:jp,toHsvaP:Ap,toHsvaPString:_p,toHexString:Np,toHex8String:Ip};var Up=function(){let e={toRgb:e=>gp(zp(e)),toRgbString:e=>vp(zp(e)),toRgba:e=>mp(zp(e)),toRgbaString:e=>yp(zp(e)),toHsl:e=>bp(zp(e)),toHslString:e=>wp(zp(e)),toHsla:e=>$p(zp(e)),toHslaString:e=>xp(zp(e)),toHsv:e=>Mp(zp(e)),toHsvString:e=>Sp(zp(e)),toHsva:e=>Ep(zp(e)),toHsvaString:e=>kp(zp(e)),toRgbP:e=>Rp(zp(e)),toRgbPString:e=>Pp(zp(e)),toRgbaP:e=>Lp(zp(e)),toRgbaPString:e=>Dp(zp(e)),toHslP:e=>Cp(zp(e)),toHslPString:e=>qp(zp(e)),toHslaP:e=>Fp(zp(e)),toHslaPString:e=>Tp(zp(e)),toHsvP:e=>Op(zp(e)),toHsvPString:e=>jp(zp(e)),toHsvaP:e=>Ap(zp(e)),toHsvaPString:e=>_p(zp(e)),toHexString:e=>Np(zp(e)),toHex8String:e=>Ip(zp(e)),modSaturate:(e,t,n)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");let r=np(e);return r.s+=t,r.s=up(r.s),sp(ip(r),n)}(zp(e),t,n),modGrey:(e,t)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"toRgbString",n=np(e);return n.s=0,sp(ip(n),t)}(zp(e),t),modLighten:(e,t,n)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");let r=np(e);return r.l+=t,r.l=up(r.l),sp(ip(r),n)}(zp(e),t,n),modBrighten:(e,t,n)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");return e.r+=t,e.r=up(e.r),e.g+=t,e.g=up(e.g),e.b+=t,e.b=up(e.b),sp(e,n)}(zp(e),t,n),modHue:(e,t,n)=>fp(zp(e),t,n),modComplement:(e,t)=>function(e){return fp(e,.5,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"toRgbString")}(zp(e),t),spreadHue:(e,t,n)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(!Hl(t))throw new Error("num is not an integer");if((t=Kl(t))<=1)return[e];let r=np(e),i=1/t,o=[];for(let e=0;e<t;e++)o.push(sp(ip(r),n)),r.h+=i,r.h=r.h%1;return o}(zp(e),t,n),spreadMonochromatic:(e,t,n)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(!Hl(t))throw new Error("num is not an integer");if((t=Kl(t))<=1)return[e];let r=rp(e);r.s=1,r.l=1;let i=1/t,o=[];for(let e=0;e<t;e++)o.push(sp(op(r),n)),r.h-=i,r.l-=i;return o}(zp(e),t,n),mix:(e,t,n,r,i)=>cp(zp(e),t,zp(n),r,i),getBrightness:e=>function(e){if(1!==e.a)throw new Error("alpha of color can not be equal to 1");return(299*e.r+587*e.g+114*e.b)/1e3}(zp(e)),getLuminance:e=>function(e){if(1!==e.a)throw new Error("alpha of color can not be equal to 1");let t,n,r,i=e.r,o=e.g,l=e.b;return t=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),n=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),r=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4),.2126*t+.7152*n+.0722*r}(zp(e)),interp:Gp};return e}();function Qp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"listL");Da(n)||(n=[.35,.7]);let r=ve(t,"listS");Da(r)||(r=[.9,.5,.2]);let i=ve(t,"opacity");vt(i)||(i=1),i=Lt(i),i=Math.max(i,0),i=Math.min(i,1);let o=ve(t,"hueSliceNum");Lh(o)||(o=5),o=Kl(o);let l=[];fi(n,(function(e){fi(r,(function(t){sc(o,(function(n){let r=Up.toRgbaString({h:360*n/o,s:t,l:e,a:i});l.push(r)}))}))}));let a=e%l.length;return l[a]}function Hp(e){let t=function(){let e=ve(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"scale");vt(e)||(e=1);let t=[];return t.push(["circle",5]),t.push(["square",5]),t.push(["diamond",6]),t.push(["cross",5]),t.push(["plus",5]),t.push(["eradiate",6]),t.push(["rdout",6]),t.push(["gateway",7]),t.push(["hloff",7]),t.push(["star",5]),t.push(["triangle",5]),t.push(["triangle-down",5]),t.push(["triangle-right",5]),t.push(["checkok",5]),t.push(["crescent",5]),t.push(["lightning",5]),t.push(["spades",5]),t.push(["waterdrop",5]),t.push(["bird",5]),t.push(["fire",5]),t.push(["music",5]),t.push(["apple",5]),t.push(["cloud",5]),t.push(["heart",5]),t}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=e%t.length;return{symbol:t[n][0],size:t[n][1]}}function Wp(e,t,n,r){let i;if("line"===e||"line(grey)"===e){let r="rgba(100, 140, 220, 1)";"line(grey)"===e&&(r="#999"),i={type:"line",name:t,data:n,lineWidth:1,color:r,marker:{enabled:!1}}}else if("marker"===e)i={type:"scatter",name:t,data:n,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:4,lineWidth:0,fillColor:"rgba(100,170,255,1)",lineColor:"rgba(20,100,200,1)"}};else if("markers"===e){let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Qp(e,t),r=Qp(e,{opacity:.2}),i=Hp(e,t);return{lineColor:n,lineStyle:"Solid",marker:i.symbol,markerEdgecolor:n,markerFacecolor:r,markerSize:i.size}}(r);i={type:"scatter",name:t,data:n,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:e.marker,radius:e.markerSize,lineWidth:1,fillColor:e.markerFacecolor,lineColor:e.markerEdgecolor}}}else if("dot point"===e)i={type:"scatter",name:t,data:n,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:2,lineWidth:0,fillColor:"rgba(255, 34, 102, 1)",lineColor:"transparent"}};else if("small point"===e)i={type:"scatter",name:t,data:n,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:1,lineWidth:0,fillColor:"rgba(100, 140, 220, 1)",lineColor:"transparent"}};else{if("marker point"!==e)throw console.log("displayDataMode",e),new Error(`invalid displayDataMode[${e}]`);i={type:"scatter",name:t,data:n,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:4,lineWidth:1,fillColor:"transparent",lineColor:"#f26"}}}return i}function Vp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.plotLeft,r=e.plotTop,i=e.plotWidth,o=e.plotHeight,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"indXAxis");Ca(n)||(n=0),n=Kl(n);let r=ve(t,"indYAxis");Ca(r)||(r=0),r=Kl(r);let i=e.xAxis[n].min;i||(i=0);let o=e.xAxis[n].max;o||(o=0);let l=e.yAxis[r].min;l||(l=0);let a=e.yAxis[r].max;return a||(a=0),{xLimMin:i,xLimMax:o,yLimMin:l,yLimMax:a}}(e,t),a=ve(t,"cvLim");Il(a)&&(l=a(l));let{xLimMin:u,xLimMax:s,yLimMin:f,yLimMax:c}=l,h=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=(e[0]-u)/(s-u),a=(e[1]-f)/(c-f);if(t){let e=l;l=a,a=e}return[l*i+n,(1-a)*o+r]};return{lims:l,cvp:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(e=>{if(ht(ve(e,"0")))return"point";if(ht(ve(e,"0.0")))return"points";throw console.log("p",e),new Error("invalid type of p")})(e);if("point"===n)return h(e,t);if("points"===n){return co(e,(e=>h(e,t)))}throw new Error("invalid type")}}}function Yp(e){let t=ve(e,"x")||ve(e,"0");vt(t)||(t=0),t=Lt(t);let n=ve(e,"y")||ve(e,"1");return vt(n)||(n=0),n=Lt(n),[t,n]}function Zp(e){let t=ve(e,"w")||ve(e,"0");vt(t)||(t=0),t=Lt(t);let n=ve(e,"h")||ve(e,"1");return vt(n)||(n=0),n=Lt(n),[t,n]}let Kp="__fontFamily__";function Xp(){let e=ve(function(){let e=null;try{e=window.Highcharts}catch(e){}return e}(),Kp);return dt(e)||(e="'Times New Roman', 'DFKai-SB', 'DFKaiShu-SB-Estd-BF', 'KaiU', '標楷體'"),e}function Jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function td(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},[o,l]=Yp(t),[a,u]=Zp(n),s=t;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=ve(r,"edgeWidth");vt(i)||(i=1),i=Lt(i),i=Math.max(i,0);let o=ve(r,"edgeColor");dt(o)||(o="#000");let l=ve(r,"faceColor");dt(l)||(l="transparent");let a=ve(r,"radius");vt(a)||(a=0),a=Lt(a),a=Math.max(a,0);let u=ve(r,"zIndex");ht(u)||(u=void 0);let[s,f]=Yp(t),[c,h]=Zp(n);e.renderer.rect(s,f,c,h).attr({name:"hcextra",fill:l,"stroke-width":i,stroke:o,r:a,zIndex:u}).add()}(e,{x:o-a/2,y:l-u/2},n,i),function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=ve(r,"fontSize");vt(i)||(i=11),i=Lt(i),i=Math.max(i,6);let o=ve(r,"textAlign");"left"!==o&&"center"!==o&&"rigth"!==o&&(o="center"),o={left:"start",center:"middle",rigth:"end"}[o];let l=ve(r,"zIndex");ht(l)||(l=void 0);let a=ve(r,"style");Gl(a)||(a={});let u=ve(r,"attr");Gl(u)||(u={});let[s,f]=Yp(t),c=e.renderer,h=e.renderer.g().add();h.attr({transform:`translate(${s},${f})`,zIndex:l}),c.text(n,0,0).css(ed({color:"#000",fontFamily:Xp(),fontSize:`${i}pt`},a)).attr(ed({name:"hcextra","text-anchor":o,"alignment-baseline":"central",zIndex:l},u)).add(h)}(e,s,r,i)}function nd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11;return`<span style="font-family:${Xp()}; font-size:${t}pt;">${Za(e)}</span>`}function rd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11;return`<br><span style="font-family:${Xp()}; font-size:${t}pt;">${Za(e)}</span>`}function id(e){return dt(e)?` (${e})`:""}var od={genHtText:nd,genHtTextSub:rd,genTextParentheses:id,getFontfamily:Xp};function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ad(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ud(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ve(e,"dataPoints",[]),n=ve(e,"dataPointsColor",void 0),r=ve(e,"dataPointsMarkerSize",void 0),i=ve(e,"dataPointsMultiSeries",void 0),o=ve(e,"marginTop",70),l=ve(e,"marginBottom",10),a=ve(e,"marginLeft",90),u=ve(e,"marginRight",1),s=ve(e,"xLabel",""),f=ve(e,"xLabelFontSize",12),c=ve(e,"xTickLabelFontSize",12),h=ve(e,"xDig",void 0),p=ve(e,"xLimMin",void 0),d=ve(e,"xLimMax",void 0),g=ve(e,"xSoftMin",void 0),v=ve(e,"xSoftMax",void 0),m=ve(e,"useAutoXSoftMax",!0),y=ve(e,"ratioAutoXSoftMax",1.5),b=ve(e,"xTickInterval",void 0),w=ve(e,"yLabel",""),$=ve(e,"yLabelFontSize",12),x=ve(e,"yTickLabelFontSize",12),M=ve(e,"yDig",void 0),S=ve(e,"yLimMin",0),E=ve(e,"yLimMax",void 0),k=ve(e,"ySoftMin",void 0),R=ve(e,"ySoftMax",void 0),P=ve(e,"useAutoYSoftMax",!0),L=ve(e,"ratioAutoYSoftMax",1.1),D=ve(e,"condenseYLabel",!1),C=ve(e,"displayDataMode","line"),q=ve(e,"useLegend",!1),F=ve(e,"useTooltip",!0),T=ve(e,"addStaticPP",!1),O=ve(e,"addFS1",!1),j=ve(e,"addIcRanges",!1),A={marginTop:o,marginBottom:l,marginLeft:D?1:a,marginRight:u},_=[],N=!0;if(fi(t,((e,t)=>{if(ut(e.data)>0)return N=!1,!1})),N&&(t=[[[0,0]]],F=!1,q=!1),fi(t,((e,t)=>{let o=ve(e,"mode",""),l=null;if(""===o){let o=t;Hl(ve(e,"colorIndex"))&&(o=Kl(e.colorIndex)),l=Wp(C,e.name,e.data,o),dt(n)&&(l.marker.fillColor=n),vt(r)&&(l.marker.radius=Lt(r)),i&&(l.marker.symbol=Hp(t).symbol,l.marker.fillColor=Qp(t)),ve(e,"compare")&&(l.marker.radius-=1,l.marker.fillColor="transparent",l.marker.lineColor="rgba(0,0,0,0.5)")}else{if("custom"!==o)throw new Error(`invalid mode[${o}]`);l=e}Gl(l)&&_.push(l)})),P&&!ht(R)&&!ht(E)){let e=co(_,(e=>co(e.data,0)));e=_h(e),R=rf(e)*L}if(m&&!ht(v)&&!ht(d)){let e=co(_,(e=>co(e.data,1)));e=_h(e),v=rf(e)*y}if(T){let e=null;if(ht(E))e=E;else{let t=co(_,(e=>co(e.data,"0")));t=_h(t),e=rf(t)}let t={name:"static pp",data:[[0,0],[e,1*e*.00981]],lineWidth:2,color:"#f26",marker:{enabled:!1}};_.push(t)}if(O){let e=null;if(ht(E))e=E;else{let t=co(_,(e=>co(e.data,"0")));t=_h(t),e=rf(t)}let t={name:"FS=1",data:[[0,1],[e,1]],lineWidth:2,color:"#f26",marker:{enabled:!1}};_.push(t)}let I,z=!0;if(j){z=!1,I=co(uu(),(e=>({from:e.min,to:e.max,color:e.colorSecondary,borderColor:"rgba(255,255,255,0.5)",borderWidth:1})))}let G={credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},boost:{enabled:!1},chart:ad(ad({animation:!1,inverted:!0},A),{},{backgroundColor:"transparent",plotBorderColor:"#222",plotBorderWidth:1,events:{render:function(){if(N){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"invXY");Ul(n)||(n=!1);let r=Vp(e,t),{xLimMin:i,xLimMax:o,yLimMin:l,yLimMax:a}=r.lims,u=[(i+o)/2,(l+a)/2];u=r.cvp(u,n),td(e,u,{w:100,h:24},"無有效資料",{edgeColor:"#f26",faceColor:"#fff",zIndex:10})}(this,{invXY:!0})}}}}),plotOptions:{series:{animation:!1}},title:{text:""},xAxis:{crosshair:!0,title:{useHTML:!0,text:w,margin:5,style:{fontFamily:Xp(),fontSize:$+"pt",color:"#000",textAlign:"center",lineHeight:"1.1rem"}},lineColor:"rgba(0,0,0,0.8)",lineWidth:1,gridLineColor:"rgba(0,0,0,0.2)",gridLineWidth:1,minorGridLineColor:"rgba(0,0,0,0.1)",minorGridLineWidth:0,tickPosition:"inside",tickColor:"#222",tickWidth:1,minorTickPosition:"inside",minorTickColor:"#666",minorTickLength:5,minorTickWidth:1,softMin:k,softMax:R,labels:{autoRotation:0,style:{fontSize:x+"px",color:"#222"},formatter:function(){return ht(M)?_u(this.value,M):this.value}}},yAxis:{crosshair:!0,opposite:!0,title:{useHTML:!0,text:s,margin:0,y:-5,style:{fontFamily:Xp(),fontSize:f+"pt",color:"#000",textAlign:"center",lineHeight:"1.1rem"}},plotBands:I,plotLines:undefined,lineColor:"rgba(0,0,0,0.8)",lineWidth:1,tickInterval:b,gridLineColor:"rgba(0,0,0,0.2)",gridLineWidth:z?1:0,minorGridLineColor:"rgba(0,0,0,0.1)",minorGridLineWidth:0,tickPosition:"inside",tickColor:"#222",tickWidth:1,minorTickPosition:"inside",minorTickColor:"#666",minorTickLength:5,minorTickWidth:1,softMin:g,softMax:v,labels:{autoRotation:0,y:5,style:{fontSize:c+"px",color:"#222"},formatter:function(){return ht(h)?_u(this.value,h):this.value}}},tooltip:{enabled:!1},legend:{enabled:!1},series:_};return ht(S)&&(G.xAxis.min=S,G.xAxis.endOnTick=!1),ht(E)&&(G.xAxis.max=E,G.xAxis.endOnTick=!1),ht(p)&&(G.yAxis.min=p,G.yAxis.endOnTick=!1),ht(d)&&(G.yAxis.max=d,G.yAxis.endOnTick=!1),q&&(G.legend={enabled:!0,shared:!0,useHTML:!0,floating:!0,layout:"vertical",align:"right",verticalAlign:"bottom",x:-10,y:-10,backgroundColor:"rgba(255,255,255,0.8)",borderColor:"#aaa",borderWidth:1,symbolWidth:25}),F&&(G.tooltip={enabled:!0,shared:!0,useHTML:!0}),G}function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e._cpt=su,e._hc=od,e._share=ga,e._soilGroup=es,e.calcClassifyUscs=function(e){let t=[],n="",r="",i="",o=0;function l(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r(n)||t.push(`${e}[${n}] ${i}`),null}function a(e,n,r,i,o){let l=`${e}[${n}]`;dt(e)||(l=`${n}`);let a=`${i}[${o}]`;dt(i)||(a=`${o}`);{let e=!1;if(ht(n)||(e=!0,t.push(`${l} is not a number`)),ht(o)||(e=!0,t.push(`${a} is not a number`)),e)return}if(gr(n,r,o))return void t.push(`${l} ${r} ${a}`);return null}function u(e,t){return a(e,t,"<","",0),a(e,t,">","",100),null}let s=()=>ut(t)>0,f=()=>{if(s()){let e=ft(t,", ");return{USCS:n,USCSDspEng:r,USCSDspCht:i,icd:o,err:t,msg:e}}return dt(n)?{USCS:n,USCSDspEng:r,USCSDspCht:i,icd:o}:{USCS:n,USCSDspEng:r,USCSDspCht:i,icd:o,err:["invalid USCS"],msg:"invalid USCS"}},c=ve(e,"Organic",0);vt(c)&&(c=Lt(c));let h=ve(e,"LL","");vt(h)&&(h=Lt(h));let p=ve(e,"LLdry","");vt(p)&&(p=Lt(p));let d=ve(e,"PI","");vt(d)&&(d=Lt(d));let g=ve(e,"Cu","");vt(g)&&(g=Lt(g));let v=ve(e,"Cc","");vt(v)&&(v=Lt(v));let m=ve(e,"ctClay","");vt(m)&&(m=Lt(m));let y=ve(e,"ctSilt","");vt(y)&&(y=Lt(y));let b=ve(e,"ctSand","");vt(b)&&(b=Lt(b));let w=ve(e,"ctGravel","");vt(w)&&(w=Lt(w));let $=ve(e,"FC","");ht(m)&&ht(y)?$=m+y:vt($)&&($=Lt($));let x="";if(ht(b)&&ht(w)?x=b+w:vt(x)?x=Lt(x):vt($)&&(x=100-$),!ht($)&&ht(x)&&($=100-x),u("rFineContent",$),u("rCoarseContent",x),s())return f();if(x>50){if(u("ctGravel",w),u("ctSand",b),s())return f();if(w>b)if($<5){if(a("Cu",g,"<","",0),a("Cc",v,"<","",0),s())return f();Er(g,v)?(o=1,n="GW",b<15?(r="Well-graded gravel",i="級配良好礫石"):(r="Well-graded gravel with sand",i="含砂之級配良好礫石")):(o=2,n="GP",b<15?(r="Poorly graded gravel",i="級配不良礫石"):(r="Poorly graded gravel with sand",i="含砂之級配不良礫石"))}else if($>12){if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=Rr(d,h);"C"===e?(o=3,n="GC",b<15?(r="Clayey gravel",i="黏土質礫石"):(r="Clayey gravel with sand",i="含砂之黏土質礫石")):"M"===e?(o=4,n="GM",b<15?(r="Silty gravel",i="粉土質礫石"):(r="Silty gravel with sand",i="含砂之粉土質礫石")):"C-M"===e&&(o=5,n="GC-GM",b<15?(r="Silty, clayey gravel",i="粉土質、黏土質礫石"):(r="Silty, clayey gravel with sand",i="含砂之粉土質、黏土質礫石"))}else{if(a("Cu",g,"<","",0),a("Cc",v,"<","",0),s())return f();if(Er(g,v)){if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=Rr(d,h);"C"===e||"C-M"===e?(o=6,n="GW-GC",b<15?(r="Well-graded gravel with clay (or silty clay)",i="含黏土之級配良好礫石"):(r="Well-graded gravel with clay and sand (or silty clay and sand)",i="含黏土與砂之級配良好礫石")):"M"===e&&(o=7,n="GW-GM",b<15?(r="Well-graded gravel with silt",i="含粉土之級配良好礫石"):(r="Well-graded gravel with silt and sand",i="含粉土與砂之級配良好礫石"))}else{if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=Rr(d,h);"C"===e||"C-M"===e?(o=8,n="GP-GC",b<15?(r="Poorly graded gravel with clay (or silty clay)",i="含黏土之級配不良礫石"):(r="Poorly graded gravel with clay and sand (or silty clay and sand)",i="含黏土與砂之級配不良礫石")):"M"===e&&(o=9,n="GP-GM",b<15?(r="Poorly graded gravel with silt",i="含粉土之級配不良礫石"):(r="Poorly graded gravel with silt and sand",i="含粉土及砂之級配不良礫石"))}}else if($<5){if(a("Cu",g,"<","",0),a("Cc",v,"<","",0),s())return f();kr(g,v)?(o=10,n="SW",w<15?(r="Well-graded sand",i="級配良好砂"):(r="Well-graded sand with gravel",i="含礫石之級配良好砂")):(o=11,n="SP",w<15?(r="Poorly graded sand",i="級配不良砂"):(r="Poorly graded sand with gravel",i="含礫石之級配不良砂"))}else if($>12){if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=Rr(d,h);"C"===e?(o=12,n="SC",w<15?(r="Clayey sand",i="黏土質砂"):(r="Clayey sand with gravel",i="含礫石之黏土質砂")):"M"===e?(o=13,n="SM",w<15?(r="Silty sand",i="粉土質砂"):(r="Silty sand with gravel",i="含礫石之粉土質砂")):"C-M"===e&&(o=14,n="SC-SM",w<15?(r="Silty, clayey sand",i="粉土質、黏土質砂"):(r="Silty,clayey sand with gravel",i="含礫石之粉土質、黏土質砂"))}else{if(a("Cu",g,"<","",0),a("Cc",v,"<","",0),s())return f();if(kr(g,v)){if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=Rr(d,h);"C"===e||"C-M"===e?(o=15,n="SW-SC",w<15?(r="Well-graded sand with clay (or silty clay)",i="含黏土之級配良好砂"):(r="Well-graded sand with clay and gravel (or silty clay and gravel)",i="含黏土與礫石之級配良好砂")):"M"===e&&(o=16,n="SW-SM",w<15?(r="Well-graded sand with silt",i="含粉土之級配良好砂"):(r="Well-graded sand with silt and gravel",i="含粉土與礫石之級配良好砂"))}else{if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=Rr(d,h);"C"===e||"C-M"===e?(o=17,n="SP-SC",w<15?(r="Poorly graded sand with clay (or silty clay)",i="含黏土之級配不良砂"):(r="Poorly graded sand with clay and gravel (or silty clay and gravel)",i="含黏土與礫石之級配不良砂")):"M"===e&&(o=18,n="SP-SM",w<15?(r="Poorly graded sand with silt",i="含粉土之級配不良砂"):(r="Poorly graded sand with silt and gravel",i="含粉土與礫石之級配不良砂"))}}}else{if(l("LL",h,Mr,yr),s())return f();if(ht(h))if(h>=50){if(0!==c&&1!==c&&t.push("Organic is not 0 or 1"),s())return f();if(0===c){if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=function(e,t){let n=null,r=null;return n=$r(e),r=wr(t),n>=.73*(r-20)?"C":"M"}(d,h);if("C"===e)if(o=19,n="CH",x<30)if(x<15)r="Fat clay",i="高塑性黏土";else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?(r="Fat clay with sand",i="含砂之高塑性黏土"):(r="Fat clay with gravel",i="含礫石之高塑性黏土")}else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?w<15?(r="Sandy fat clay",i="砂質高塑性黏土"):(r="Sandy fat clay with gravel",i="含礫石之砂質高塑性黏土"):w<15?(r="Gravelly fat clay",i="礫石質高塑性黏土"):(r="Gravelly fat clay with sand",i="含砂之礫石質高塑性黏土")}else if("M"===e)if(o=20,n="MH",x<30)if(x<15)r="Elastic silt",i="彈性粉土";else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?(r="Elastic silt with sand",i="含砂之彈性粉土"):(r="Elastic silt with gravel",i="含礫石之彈性粉土")}else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?w<15?(r="Sandy Elastic silt",i="砂質彈性粉土"):(r="Sandy Elastic silt with gravel",i="含礫石之砂質彈性粉土"):w<15?(r="Gravelly Elastic silt",i="礫石質彈性粉土"):(r="Gravelly Elastic silt with sand",i="含砂之礫石質彈性粉土")}}else if(1===c){if(l("LL",h,Mr,yr),l("LLdry",p,Mr,yr),s())return f();p/h<.75?(o=21,n="OH",r=vr,i=vr):(o=22,n="PT(待確認)",r=vr,i=vr)}}else{if(0!==c&&1!==c&&t.push("Organic is not 0 or 1"),s())return f();if(0===c){if(l("PI",d,Sr,br),l("LL",h,Mr,yr),s())return f();let e=Rr(d,h);if("C"===e)if(o=23,n="CL",x<30)if(x<15)r="Lean clay",i="低塑性黏土";else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?(r="Lean clay with sand",i="含砂之低塑性黏土"):(r="Lean clay with gravel",i="含礫石之低塑性黏土")}else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?w<15?(r="Sandy lean clay",i="砂質低塑性黏土"):(r="Sandy lean clay with gravel",i="含礫石之砂質低塑性黏土"):w<15?(r="Gravelly lean clay",i="礫石質低塑性黏土"):(r="Gravelly lean clay with sand",i="含砂之礫石質低塑性黏土")}else if("M"===e)if(o=24,n="ML",x<30)if(x<15)r="Silt",i="粉土";else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?(r="Silt with sand",i="含砂之粉土"):(r="Silt with gravel",i="含礫石之粉土")}else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?w<15?(r="Sandy silt",i="砂質粉土"):(r="Sandy silt with gravel",i="含礫石之砂質粉土"):w<15?(r="Gravelly silt",i="礫石質粉土"):(r="Gravelly silt with sand",i="含砂之礫石質粉土")}else if("C-M"===e)if(o=25,n="CL-ML",x<30)if(x<15)r="Silty clay",i="粉土質黏土";else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?(r="Silty clay with sand",i="含砂之粉土質黏土"):(r="Silty clay with gravel",i="含礫石之粉土質黏土")}else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?w<15?(r="Sandy Silty clay",i="砂質粉土質黏土"):(r="Sandy Silty clay with gravel",i="含礫石之砂質粉土質黏土"):w<15?(r="Gravelly Silty clay",i="礫石質粉土質黏土"):(r="Gravelly Silty clay with sand",i="含砂之礫石質粉土質黏土")}}else if(1===c){if(l("LL",h,Mr,yr),l("LLdry",p,Mr,yr),s())return f();p/h<.75?(o=26,n="OL",r=vr,i=vr):(o=27,n="PT(待確認)",r=vr,i=vr)}}else if(o=99,n="ML",x<30)if(x<15)r="Silt",i="粉土";else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?(r="Silt with sand",i="含砂之粉土"):(r="Silt with gravel",i="含礫石之粉土")}else{if(u("ctGravel",w),u("ctSand",b),s())return f();b>=w?w<15?(r="Sandy silt",i="砂質粉土"):(r="Sandy silt with gravel",i="含礫石之砂質粉土"):w<15?(r="Gravelly silt",i="礫石質粉土"):(r="Gravelly silt with sand",i="含砂之礫石質粉土")}}return f()},e.calcCpt=Au,e.calcCptClassify=Pu,e.calcCptLayers=hs,e.calcCptUnitWeight=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"unitSvSvp");if("kPa"!==n&&"MPa"!==n)throw new Error(`opt.unitSvSvp[${n}] need kPa or MPa`);let r=ve(t,"rsatIni");if(vt(r)||(r=19.5),r=Lt(r),r<=0)throw new Error(`rsatIni[${r}]<=0`);let i=ve(t,"coe_a");if(vt(i)||(i=.8),i=Lt(i),i<=0)throw new Error(`coe_a[${i}]<=0`);let o=ve(t,"keyDepth");dt(o)||(o="depth");let l=ve(t,"keyDepthStart");dt(l)||(l="depthStart");let a=ve(t,"keyDepthEnd");dt(a)||(a="depthEnd");let u=ve(e=qu(e=wl(e)),`0.${o}`),s=ve(e,`0.${l}`),f=ve(e,`0.${a}`);return!vt(u)||vt(s)||vt(f)?!vt(u)&&vt(s)&&vt(f)&&(e=co(e,((e,t)=>{let n=ve(e,l),r=ve(e,a);if(!vt(n)||!vt(r))throw console.log(t,e),new Error(`第 ${t} 樣本無起始深度(${l})或結束深度(${a})數據`);{n=Lt(n),r=Lt(r);let t=(n+r)/2;e[o]=t}return e}))):e=ts(e,t),e=co(e,(e=>(e.rsat=r,e))),e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"countMax");Hl(r)||(r=100),r=Kl(r);let i=-1,o=!0,l=e;for(;o;){i++;let e=bs(l,t,n);if(o=e.bUpdate,l=e.ltdt,i>=r)break}return l}(e=co(e,(e=>(e.u0=ma(e.depth,"MPa"),e))),i,t),"kPa"===n&&(e=co(e,(e=>(e.sv*=1e3,e.svp*=1e3,e)))),e},e.calcCptVelocityShear=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ve(t,"method","");"Baldi(1989) for sand"!==n&&"Hegazy and Mayne(1995) by svp for sand"!==n&&"Hegazy and Mayne(1995) by fs for sand"!==n&&"Robertson(2009) for sand"!==n&&"Sinotech(2023) for sand"!==n&&"Hegazy and Mayne(1995) by fs for clay"!==n&&"Mayne & Rix(1995) for clay"!==n&&"Mayne(2006) for clay"!==n&&"Sinotech(2023) for clay"!==n&&"Hegazy and Mayne(1995) for all"!==n&&"Andrus(2007) for Holocene soil"!==n&&"Andrus(2007) for Pleistocene soil"!==n&&(n="Hegazy and Mayne(1995) for all");let r=ve(t,"unitSvSvp");if("kPa"!==r&&"MPa"!==r)throw new Error(`opt.unitSvSvp[${r}] need kPa or MPa`);let i=ve(t,"keyDepth");dt(i)||(i="depth");let o=ve(t,"keyDepthStart");dt(o)||(o="depthStart");let l=ve(t,"keyDepthEnd");dt(l)||(l="depthEnd");let a=ve(t,"sepIc");vt(a)||(a=2.6),a=Lt(a);let u=ve(t,"sepIcn");return vt(u)||(u=2.6),u=Lt(u),e=co(e=wl(e),(e=>{let t=null;if("Baldi(1989) for sand"===n){let n=ve(e,"_Ic",null),r=ve(e,"qc",null),i=ve(e,"_svp",null);vt(n)&&vt(r)&&vt(i)&&(n=Lt(n),n<=a&&(r=Lt(r),i=Lt(i),r*=1e3,i*=1e3,t=17.48*r**.13*i**.27))}else if("Hegazy and Mayne(1995) by svp for sand"===n){let n=ve(e,"_Ic",null),r=ve(e,"qc",null),i=ve(e,"_svp",null);vt(n)&&vt(r)&&vt(i)&&(n=Lt(n),n<=a&&(r=Lt(r),i=Lt(i),r*=1e3,i*=1e3,t=13.18*r**.192*i**.179))}else if("Hegazy and Mayne(1995) by fs for sand"===n){let n=ve(e,"_Ic",null),r=ve(e,"qc",null),i=ve(e,"fs",null);vt(n)&&vt(r)&&vt(i)&&(n=Lt(n),n<=a&&(r=Lt(r),i=Lt(i),r*=1e3,i*=1e3,t=12.02*r**.319*i**-.0466))}else if("Robertson(2009) for sand"===n){let n=ve(e,"_Ic",null),r=ve(e,"qnet",null);if(vt(n)&&vt(r)&&(n=Lt(n),n<=u)){r=Lt(r),r*=1e3;let e=1e3*ws,i=10**(.55*n+1.68);t=Math.sqrt(i*r/e)}}else if("Sinotech(2023) for sand"===n){let n=ve(e,"qt",null),r=ve(e,"_Ic",null),i=ve(e,"depth",null);if(vt(r)&&vt(n)&&(r=Lt(r),r<=u)){n=Lt(n),r=Lt(r),i=Lt(i),n*=1e3,t=2.27*n**.451*r**1.25*i**-.103*1}}else if("Hegazy and Mayne(1995) by fs for clay"===n){let n=ve(e,"_Ic",null),r=ve(e,"qc",null),i=ve(e,"fs",null);vt(n)&&vt(r)&&vt(i)&&(n=Lt(n),n>a&&(r=Lt(r),i=Lt(i),r*=1e3,i*=1e3,t=3.18*r**.549*i**.025))}else if("Mayne & Rix(1995) for clay"===n){let n=ve(e,"_Ic",null),r=ve(e,"qc",null);vt(n)&&vt(r)&&(n=Lt(n),n>a&&(r=Lt(r),r*=1e3,t=1.75*r**.627))}else if("Mayne(2006) for clay"===n){let n=ve(e,"_Ic",null),r=ve(e,"fs",null);vt(n)&&vt(r)&&(n=Lt(n),n>u&&(r=Lt(r),r*=1e3,t=118.8*Math.log10(r)+18.5))}else if("Sinotech(2023) for clay"===n){let n=ve(e,"qt",null),r=ve(e,"_Ic",null),i=ve(e,"depth",null);if(vt(r)&&vt(n)&&(r=Lt(r),r>u)){n=Lt(n),r=Lt(r),i=Lt(i),n*=1e3,t=2.27*n**.36*r**1.992*i**-.096*1}}else if("Hegazy and Mayne(1995) for all"===n){let n=ve(e,"qc",null),r=ve(e,"fs",null);vt(n)&&vt(r)&&(n=Lt(n),r=Lt(r),n*=1e3,r*=1e3,n>0&&(t=(10.1*Math.log10(n)-11.4)**1.67*(r/n*100)**.3))}else if("Andrus(2007) for Holocene soil"===n){let n=ve(e,"qt",null),r=ve(e,"_Ic",null),i=ve(e,"depth",null);if(vt(r)&&vt(n)){r=Lt(r),n=Lt(n),r=Lt(r),i=Lt(i),n*=1e3,t=2.27*n**.412*r**.989*i**.033*1}}else if("Andrus(2007) for Pleistocene soil"===n){let n=ve(e,"qt",null),r=ve(e,"_Ic",null),i=ve(e,"depth",null);if(vt(r)&&vt(n)){n=Lt(n),r=Lt(r),i=Lt(i),n*=1e3,t=2.62*n**.395*r**.912*i**.124*1.115}}return e.vs=t,e}))},e.calcDepthByDepthStartEnd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!Da(e))throw new Error("無有效資料");let r=ve(t,"keyDepth");dt(r)||(r="depth");let i=ve(t,"keyDepthStart");dt(i)||(i="depthStart");let o=ve(t,"keyDepthEnd");if(dt(o)||(o="depthEnd"),fi(e=wl(e),((e,t)=>{let r=ve(e,i,null);vt(r)||n.push(`第 ${t} 樣本開始深度${i}[${r}]非有效數字`);let l=ve(e,o,null);vt(l)||n.push(`第 ${t} 樣本結束深度${o}[${l}]非有效數字`)})),ut(n)>0)throw new Error(ft(n,"; "));return fi(e=ha(e,(e=>Lt(e[i]))),((e,t)=>{let n=ve(e,i,null),l=ve(e,o,null);n=Lt(n),l=Lt(l);let a=(n+l)/2;e[r]=a})),e},e.calcDepthStartEndByConnect=$s,e.calcDepthStartEndByDepth=ts,e.calcDepthStartEndByGroup=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!Da(e))throw new Error("無有效資料");let r=ve(t,"keyDepth");dt(r)||(r="depth");let i=ve(t,"keyGroup");dt(i)||(i="group");let o=ve(t,"keyDepthStart");dt(o)||(o="depthStart");let l=ve(t,"keyDepthEnd");dt(l)||(l="depthEnd");let a=ve(t,"depthEndMax");if(a=vt(a)?Lt(a):null,fi(e=wl(e),((e,t)=>{let o=ve(e,r,null);vt(o)||n.push(`第 ${t} 樣本中點深度${r}[${o}]非有效數字`);let l=ve(e,i,"");dt(l)||vt(l)||n.push(`第 ${t} 樣本群組代號${i}[${l}]非有效字串或數字`)})),ut(n)>0)throw new Error(ft(n,"; "));if(fi(e=ha(e,(e=>Lt(e[r]))),((t,i)=>{if(0===i)return!0;let o=ve(e,`${i-1}.${r}`,null),l=ve(t,r,null);o=Lt(o),l=Lt(l),gr(o,">=",l)&&n.push(`第 ${i-1} 樣本之中點深度${r}[${o}]大於等於第 ${i} 樣本之中點深度${r}[${l}]`)})),ut(n)>0)throw new Error(ft(n,"; "));let u={};if(fi(e,(e=>{let t=e[i];u[t]=!0})),0===ut(oi(u)))throw new Error("無有效群數");let s=wl(e=ts(e,{keyDepth:r,keyDepthStart:o,keyDepthEnd:l,depthEndMax:a})),f=-1;for(;f++,!(f>=ut(e)-1);){let t=ve(e,f),n=ve(e,f+1);ve(t,i,"g1")===ve(n,i,"g2")&&(e[f][l]=e[f+1][l],Es(e,f+1),f--)}let c=co(e,(e=>({[i]:e[i],[o]:e[o],[l]:e[l]})));return c=co(c,(e=>{let t=e[o],n=e[l],i=[],a=[];return fi(s,((e,o)=>{let l=e[r];if(gr(l,">=",t)&&gr(l,"<=",n)&&(i.push(o),a.push(e)),gr(l,">",n))return!1})),e.rows=wl(a),Es(s,i),e})),c},e.calcDepthStartEndFromCenter=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("Deprecated: calcDepthStartEndFromCenter -> calcDepthStartEndByDepth"),e=ts(e,t)},e.calcLayersByCompress=ef,e.calcLayersByMerge=ns,e.calcLiquefaction=Xf,e.calcLiquefactionAddErr=Jf,e.calcLiquefactionClearStress=ec,e.calcLiquefactionExtractErr=nc,e.calcLiquefactionSpt=oc,e.calcLiquefactionSptAddPropsAdv=ic,e.calcLiquefactionSptAddPropsBasic=rc,e.calcLiquefactionSptForCriticalPga=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Da(e))throw new Error("ltdt is not an effective array");if(!Da(t))throw new Error(`methods[${t}] is not an effective array`);let r=ve(n,"Mw","");vt(r)||(r=6.8),r=Lt(r);let i=ve(n,"waterLevelUsual",0);i=Lt(i);let o=ve(n,"waterLevelDesign",0);o=Lt(o);let l=ve(n,"unitSvSvp","");dt(l)||(l="kPa");let a=ve(n,"pgaMax","");vt(a)||(a=2),a=Lt(a);let u=ve(n,"pgaSlice","");vt(u)||(u=.02),u=Lt(u);let s=ve(n,"useFS",!0);Ul(s)||(s=!0);let f=ve(n,"usePL",!0);Ul(f)||(f=!0);let c=ve(n,"useStl",!0);Ul(c)||(c=!0);let h=ve(n,"stlLims",[]);Da(h)||(h=[.3]);let p=ve(n,"useH1PL",!0);Ul(p)||(p=!0);let d=ve(n,"keysPick",[]);Da(d)||(d=[]);let g=ve(n,"returnLtdtForEachPga","");Ul(g)||(g=!1),e=rc(e);let v=sc(a/u),m=[],y=[];fi(v,(n=>{let d=(n+1)*u,v=vc(e,d,t,{Mw:r,waterLevelUsual:i,waterLevelDesign:o,unitSvSvp:l,pgaMax:a,useFS:s,usePL:f,useStl:c,stlLims:h,useH1PL:p}),b=v.ltdt,w=v.dtRes;w.inputPGA=d,g&&m.push({PGA:d,ltdt:b}),y.push(w)})),y=nc(y,{mergeTo:"last",returnLastone:!1});let b=wl(ve(y,ut(y)-1)),w=(e,t)=>{fi(e,(e=>{fi(y,(n=>{if(n[e]===t){let r=e.replace("-state","-failurePGA"),i=e.replace("-state","-msg");return b[e]=t,b[r]=n.PGA,b[i]=n[i],!1}}))}))};if(s){let e=dc(y,"-FS-state");w(e,"已液化")}if(f){let e=dc(y,"-PL-state");w(e,"具液化潛勢")}if(c&&fi(h,(e=>{let t=dc(y,`-stlTS${e}-state`);w(t,"具沉陷危害");let n=dc(y,`-stlIY${e}-state`);w(n,"具沉陷危害")})),p){let e=dc(y,"-H1PL-state");w(e,"具液化潛勢")}let $=[];s&&$.push("-FS"),f&&$.push("-PL"),c&&fi(h,(e=>{$.push(`-stlTS${e}`),$.push(`-stlIY${e}`)})),p&&$.push("-H1PL");let x=["-state","-failurePGA","-msg"],M=[...d,"inputPGA"];fi(t,(e=>{fi($,(t=>{fi(x,(n=>{let r=`${e}${t}${n}`;M.push(r)}))})),M.push(`${e}-err`)})),y=co(y,((e,t)=>yf(e,M))),pc(M,"inputPGA");let S=[b];S=co(S,((e,t)=>yf(e,M)));let E={ltdt:e,ltdtRes:y,ltdtResp:S};return g&&(E.pgasLtdt=m),E},e.calcPropInterfaceFrictionAngle=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"keyX","");dt(r)||(r="x");let i=ve(n,"keyY","");dt(i)||(i="y");let o=ve(n,"useRegIntercept");Ul(o)||(o=!0);let l=[];fi(e,(e=>{let t=ve(e,r,""),n=ve(e,i,"");vt(t)&&vt(n)&&(t=Lt(t),n=Lt(n),l.push([t,n]))}));let a=ut(l);if(0===a)throw new Error("no effective data");let u=null;u=1===a&&o?{m:0,interpY:l[0][1]}:await Ph(l,{useRegIntercept:o,useSync:!1});let s=co(l,(e=>u.m*e[0]+u.b)),f=co(l,((e,t)=>(l[t][1]-s[t])**2)),c=co(l,0),h=rf(c),p=nf(c),d=Ta(c),g=h-p,v=mc(co(c,(e=>(e-d)**2))),m=mc(f),y=a-1,b=await Dh(y,.975),w=u.m*t+u.b,$=b*(m/(a-2))**.5*(1/a+(t-d)**2/v)**.5,x=w+$,M=w-$,S=[],E=1;fi(Ma(11),(e=>{S.push(E),E*=1.1})),S=co(S,(e=>e-1));let k=g/S[10];S=co(S,(e=>p+e*k));let R=[],P=[],L=[];return fi(S,(e=>{let t=u.m*e+u.b,n=b*(m/(a-2))**.5*(1/a+(e-d)**2/v)**.5,r=t+n,i=t-n;R.push(t),P.push(r),L.push(i)})),{rgl:u,BE:w,UE:x,LE:M,psBE:R,psUE:P,psLE:L}},e.calcVerticalStress=ou,e.checkDepth=Ch,e.checkDepthStartEnd=eu,e.cnst=va,e.complementDepthData=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!dt(t))throw new Error("invalid keyDepth");if(!dt(n))throw new Error("invalid keyValue");if(!Da(r))throw new Error("invalid keysValueCmp");e=wl(e);let o=ve(i,"searchLen");vt(o)||(o=.5);let l=ve(i,"beforeSearchMode");"all"!==l&&"no"!==l&&"peak"!==l&&"half-closed-value"!==l&&"double-closed-value"!==l&&"closed-value"!==l&&(l="no");let a=ve(i,"afterSearchMode");"all"!==a&&"no"!==a&&"peak"!==a&&"half-closed-value"!==a&&"double-closed-value"!==a&&"closed-value"!==a&&(a="all");let u=ve(i,"cmpMode");"linear-fill"!==u&&"cut"!==u&&(u="linear-fill");let s=function(e,t,n){let r=[];return fi(e,((i,o)=>{if(0===o)return!0;let l=Oh(e,t,o-1),a=Oh(e,n,o-1),u=Oh(e,n,o);vt(a)&&!vt(u)&&r.push({k:o-1,depth:l,value:a})})),r}(e,t,n);return fi(s,(i=>{let s=null;if(s=function(e,t,n,r,i,o){return jh(e,t,n,r,i,o,Th({dir:"before"},arguments.length>6&&void 0!==arguments[6]?arguments[6]:{}))}(e,t,n,i.k,o,ve(i,"value"),{searchMode:l}),null===s)return!0;let f=null;if(f=function(e,t,n,r,i,o){return jh(e,t,n,r,i,o,Th({dir:"after"},arguments.length>6&&void 0!==arguments[6]?arguments[6]:{}))}(e,t,n,i.k,o,ve(s,"value")||ve(i,"value"),{searchMode:a}),null===f)return!0;"linear-fill"===u?e=function(e,t,n,r){if(n===r)return;if(n>r)throw new Error("k0 > k1");let i=wl(e);return fi(t,(t=>{let o=Oh(e,t,n),l=Oh(e,t,r),a=r-n;for(let e=n;e<=r;e++)qh(i,`${e}.${t}`,(r-e)/a*o+(e-n)/a*l)})),i}(e,r,s.k,f.k):"cut"===u&&(e=function(e,t,n,r){if(n===r)return;if(n>r)throw new Error("k0 > k1");let i=wl(e);return fi(t,(e=>{for(let t=n;t<=r;t++)qh(i,`${t}.${e}`,"")})),i}(e,r,s.k,f.k))})),e},e.getCptDepthHcOpt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ve(n,"xLabelPre",""),i=ve(n,"useXLabelChtAndEng",!0),o=ve(n,"useXYLabelEng",!0),l=ve(n,"useYLabel",!0),a=ve(n,"yLabelCht","深度"),u=ve(n,"yLabelEng","Depth"),s=ve(n,"yLabelTextSizeCht",12),f=ve(n,"yLabelTextSizeEng",10),c=ve(n,"yUnit","m"),h=ve(n,"yDig",void 0),p=ve(n,"yLimMin",void 0),d=ve(n,"yLimMax",void 0),g="";async function v(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=ve(r,"xLabelPre",""),a=ve(r,"xLabelCht",""),u=ve(r,"xLabelEng",void 0),s=ve(r,"xLabelTextSizePre",14),f=ve(r,"xLabelTextSizeCht",12),g=ve(r,"xLabelTextSizeEng",10),v=ve(r,"xUnit",void 0);i||(a="",u="");let m="";dt(l)&&(m+=nd(l,s)+"<br>"),dt(a)&&(dt(v)?m+=nd(a+id(v),f):m+=nd(a,f)),o&&dt(u)&&(m+=rd(u+id(v),g));let y=[{name:"",data:da(e,t,!0)}];return ud(ad(ad(ad({},n),r),{},{dataPoints:y,xLabel:m,yUnit:c,yDig:h,yLimMin:p,yLimMax:d}))}l&&(dt(a)&&(dt(c)?g+=nd(a+id(c),s):g+=nd(a,s)),o&&u&&(g+=rd(u+id(c),f)));let m=null;if("qc"===t?m=await v(e,"qc",{yLabel:g,xLabelPre:r,xLabelCht:"錐尖阻抗 q<sub>c</sub>",xLabelEng:"Cone resistance",xUnit:"MPa",xLimMin:0,xSoftMax:30,xTickInterval:10}):"qt"===t?m=await v(e,"qt",{yLabel:g,xLabelPre:r,xLabelCht:"校正錐尖阻抗 q<sub>t</sub>",xLabelEng:"Corrected cone resistance",xUnit:"MPa",xLimMin:0,xSoftMax:30}):"qnet"===t?m=await v(e,"qnet",{yLabel:g,xLabelPre:r,xLabelCht:"淨校正錐尖阻抗 q<sub>net</sub>",xLabelEng:"Net corrected cone resistance",xUnit:"MPa",xLimMin:0,xSoftMax:30}):"Qt"===t?m=await v(e,"Qt",{yLabel:g,xLabelPre:r,xLabelCht:"正規化錐尖阻抗 Q<sub>t</sub>",xLabelEng:"Normalized cone resistance Q<sub>t</sub>",xUnit:"",xLimMin:0,xLimMax:150}):"Qtn"===t?m=await v(e,"Qtn",{yLabel:g,xLabelPre:r,xLabelCht:"正規化錐尖阻抗 Q<sub>tn</sub>",xLabelEng:"Normalized cone resistance Q<sub>tn</sub>",xUnit:"",xLimMin:0,xLimMax:150}):"fs"===t?m=await v(e,"fs",{yLabel:g,xLabelPre:r,xLabelCht:"摩擦應力 f<sub>s</sub>",xLabelEng:"Sleeve friction",xUnit:"MPa",xLimMin:0,xSoftMax:1.2,xTickInterval:.2}):"Rf"===t?m=await v(e,"Rf",{yLabel:g,xLabelPre:r,xLabelCht:"摩擦比 R<sub>f</sub>",xLabelEng:"Friction ratio",xUnit:"%",xLimMin:0,xSoftMax:8,xTickInterval:2}):"Fr"===t?m=await v(e,"Fr",{yLabel:g,xLabelPre:r,xLabelCht:"正規化摩擦比 F<sub>r</sub>",xLabelEng:"Normalized friction ratio",xUnit:"%",xLimMin:0,xSoftMax:8,xTickInterval:2}):"u2"===t?m=await v(e,"u2",{yLabel:g,xLabelPre:r,xLabelCht:"孔隙水壓 u<sub>2</sub>",xLabelEng:"Pore pressure",xUnit:"MPa",addStaticPP:!0}):"Bq"===t?m=await v(e,"Bq",{yLabel:g,xLabelPre:r,xLabelCht:"超額孔隙水壓比 B<sub>q</sub>",xLabelEng:"Pore pressure ratio",xUnit:"",xLimMin:-1,xLimMax:3}):"rsat"===t?m=await v(e,"rsat",{yLabel:g,xLabelPre:r,xLabelCht:"飽和單位重 γ<sub>sat</sub>",xLabelEng:"Saturated unit weight",xUnit:"kN/m³",xLimMin:16,xLimMax:22,xTickInterval:2}):"Ic"===t?m=await v(e,"Ic",{yLabel:g,xLabelPre:r,xLabelCht:"土壤行為分類指數 I<sub>c</sub>",xLabelEng:"Soil behaviour type index",xUnit:"",xLimMin:1,xLimMax:5,xTickInterval:1,addIcRanges:!0}):"Icn"===t?m=await v(e,"Icn",{yLabel:g,xLabelPre:r,xLabelCht:"土壤行為分類指數 I<sub>cn</sub>",xLabelEng:"Soil behaviour type index",xUnit:"",xLimMin:1,xLimMax:5,xTickInterval:1,addIcRanges:!0}):"Rob:Bq-qt"===t?m=await v(e,"iRobBqqt",{yLabel:g,xLabelPre:r,xLabelCht:"Robertson B<sub>q</sub>-q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:14,displayDataMode:"dot point"}):"Rob:Rf-qt"===t?m=await v(e,"iRobRfqt",{yLabel:g,xLabelPre:r,xLabelCht:"Robertson R<sub>f</sub>-q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:14,displayDataMode:"dot point"}):"Rob:Bq-Qt"===t?m=await v(e,"iRobBqQt",{yLabel:g,xLabelPre:r,xLabelCht:"Robertson B<sub>q</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"}):"Rob:Bq-Qtn"===t?m=await v(e,"iRobBqQtn",{yLabel:g,xLabelPre:r,xLabelCht:"Robertson B<sub>q</sub>-Q<sub>tn</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"}):"Rob:Fr-Qt"===t?m=await v(e,"iRobFrQt",{yLabel:g,xLabelPre:r,xLabelCht:"Robertson F<sub>r</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"}):"Rob:Fr-Qtn"===t?m=await v(e,"iRobFrQtn",{yLabel:g,xLabelPre:r,xLabelCht:"Robertson F<sub>r</sub>-Q<sub>tn</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"}):"Ram:Bq-Qt"===t?m=await v(e,"iRamBqQt",{yLabel:g,xLabelPre:r,xLabelCht:"Ramsey B<sub>q</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"}):"Ram:Fr-Qt"===t&&(m=await v(e,"iRamFrQt",{yLabel:g,xLabelPre:r,xLabelCht:"Ramsey F<sub>r</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"})),null===m){let n=[{name:"HBF",title:"HBF",year:2017},{name:"HBF",title:"HBF",year:2021},{name:"NCEER",title:"NCEER",year:1997},{name:"Robertson",title:"Robertson",year:2009},{name:"Juang",title:"Juang",year:2002},{name:"KuAndJuang",title:"Ku & Juang",year:2012},{name:"Olsen",title:"Olsen",year:1997},{name:"Shibata",title:"Shibata",year:1988}];await Nh(n,(async n=>{t===`cpt${n.name}${n.year}-CRR`?m=await v(e,`cpt${n.name}${n.year}-CRR`,{yLabel:g,xLabelPre:r,xLabelCht:`${n.title}(${n.year}) CRR`,xLabelEng:"CRR",xUnit:"",xLimMin:0,xLimMax:2}):t===`cpt${n.name}${n.year}-CSR`?m=await v(e,`cpt${n.name}${n.year}-CSR`,{yLabel:g,xLabelPre:r,xLabelCht:`${n.title}(${n.year}) CSR`,xLabelEng:"CSR",xUnit:""}):t===`cpt${n.name}${n.year}-FS`&&(m=await v(e,`cpt${n.name}${n.year}-FS`,{yLabel:g,xLabelPre:r,xLabelCht:`${n.title}(${n.year}) FS`,xLabelEng:"FS",xUnit:"",xLimMin:0,xLimMax:2,addFS1:!0}))}))}if(null===m)throw new Error(`invalid retKind[${t}]`);return m},e.getDepthMaxMin=Is,e.groupByDepthStartEnd=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];if(!Da(e))throw new Error("無有效資料");if(!Da(t)&&!Gl(t))throw new Error("無有效起訖深度資料");let i=ve(n,"keyDepth");dt(i)||(i="depth");let o=ve(n,"keyDepthStart");dt(o)||(o="depthStart");let l=ve(n,"keyDepthEnd");if(dt(l)||(l="depthEnd"),fi(e=wl(e),((e,t)=>{let n=ve(e,i,null);vt(n)||r.push(`第 ${t} 樣本中點深度${i}[${n}]非有效數字`)})),ut(r)>0)throw new Error(ft(r,"; "));let a=Ch(e=ha(e,(e=>Lt(e[i]))),{keyDepth:i});if(ut(a)>0)throw new Error(ft(a,", "));if(Gl(t)&&(t=[t]),fi(t,((e,t)=>{let n=ve(e,o,null),i=ve(e,l,null);vt(n)||r.push(`群組用起訖深度陣列中，第 ${t} 元素之起始深度${o}[${n}]非有效數字`),vt(i)||r.push(`群組用起訖深度陣列中，第 ${t} 元素之結束深度${l}[${i}]非有效數字`)})),ut(r)>0)throw new Error(ft(r,"; "));if(fi(t,((e,n)=>{let i=ve(e,o,null),a=ve(e,l,null);if(i=Lt(i),a=Lt(a),gr(i,">",a)&&r.push(`群組用起訖深度陣列中，第 ${n} 元素之起始深度${o}[${i}]大於結束深度${l}[${a}]`),0===n)return!0;let u=ve(t,n-1),s=ve(u,l,null);s=Lt(s),gr(s,">",i)&&r.push(`第 ${n} 樣本結束深度${l}[${s}]大於第 ${n+1} 個樣本起始深度${o}[${i}]`)})),ut(r)>0)throw new Error(ft(r,"; "));let u=wl(e),s=wl(t);return s=co(s,((e,t)=>{let n=ve(e,o,null),r=ve(e,l,null);n=Lt(n),r=Lt(r);let a=[],s=[];return fi(u,((e,t)=>{let o=e[i];if(gr(o,">=",n)&&gr(o,"<=",r)&&(a.push(t),s.push(e)),gr(o,">",r))return!1})),e.rows=wl(s),Es(u,a),e})),s},e.intrpDefParam=ba,e.judge=gr,e.mergeByDepthStartEnd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Da(e))throw new Error("無有效數據");let n=ve(t,"keyDepthStart");dt(n)||(n="depthStart");let r=ve(t,"keyDepthEnd");dt(r)||(r="depthEnd");let i=ve(t,"keyValue");dt(i)||(i="value");let o=ve(t,"saveFromInds");Ul(o)||(o=!1);let l=ve(t,"keyInd");dt(l)||(l="ind");let a=ve(t,"keyFromInds");dt(a)||(a="fromInds");let u=ve(t,"typeDetect");"sequence"!==u&&"iterate"!==u&&(u="sequence");let s=ve(t,"funMerge"),f=Il(s),c=ve(t,"typeMerge");"up"!==c&&"down"!==c&&(c="down");let h=eu(e=wl(e),{keyDepthStart:n,keyDepthEnd:r});if(ut(h)>0)throw new Error(ft(h,", "));if(e=ha(e,(e=>Lt(e[n]))),o&&(e=co(e,((e,t)=>(vt(e[l])||(e[l]=t),e)))),"iterate"===u){let t=e=>{let t=!1;for(let u=1;u<ut(e);u++){let h=e[u-1],p=e[u],d=ve(h,n,null),g=ve(h,r,null),v=ve(h,i,null),m=ve(p,n,null),y=ve(p,r,null),b=ve(p,i,null);if(null===v)throw console.log("v0",h,"keyValue",i),new Error("invalid vl0");if(null===b)throw console.log("v1",p,"keyValue",i),new Error("invalid vl1");if(!(vt(d)&&vt(g)&&vt(m)&&vt(y)))return!0;if(d=Lt(d),g=Lt(g),m=Lt(m),y=Lt(y),v===b&&gr(g,"===",m)){o&&(Pa(h[a])||(h[a]=[h[l]]),Pa(p[a])||(p[a]=[p[l]]),p[a]=[...h[a],...p[a]]);let i=null;if(f){if(i=s(h,p),!Gl(i))throw new Error(`funMerge回傳[${i}]非有效物件`)}else"up"===c?i=fd(fd({},p),h):"down"===c&&(i=fd(fd({},h),p));i[n]=d,i[r]=y,(e=wl(e))[u-1]=i,Es(e,u),t=!0;break}}return{merge:t,rows:e}},u=t(e);for(;u.merge;)u=t(e),e=u.rows}else"sequence"===u&&(fi(e,((t,u)=>{if(0===u)return!0;if(!Gl(t))throw new Error(`rows[${u}] is not an object`);let h=ve(e,u-1),p=t,d=ve(h,n,null),g=ve(h,r,null),v=ve(h,i,null),m=ve(p,n,null),y=ve(p,r,null),b=ve(p,i,null);if(null===v)throw console.log("v0",h,"keyValue",i),new Error("invalid vl0");if(null===b)throw console.log("v1",p,"keyValue",i),new Error("invalid vl1");if(!(vt(d)&&vt(g)&&vt(m)&&vt(y)))return!0;if(d=Lt(d),g=Lt(g),m=Lt(m),y=Lt(y),v===b&&gr(g,"===",m)){o&&(Pa(h[a])||(h[a]=[h[l]]),Pa(p[a])||(p[a]=[p[l]]),p[a]=[...h[a],...p[a]]);let t=null;if(f){if(t=s(h,p),!Gl(t))throw new Error(`funMerge回傳[${t}]非有效物件`)}else"up"===c?t=fd(fd({},p),h):"down"===c&&(t=fd(fd({},h),p));t[n]=d,t[r]=y,e[u]=t,e[u-1]=null}})),e=ja(e,Gl));return e},e.relaPlasticityParams=function(e,t,n){let r={};function i(){let i,o,l,a=!1;return ht(e)&&ht(n)&&e<=n&&(r.ck_LL_PL=`液限[${e}]<=塑限[${n}]`),ht(e)&&ht(t)&&(i=e-t),ht(i)&&(ht(n)?i<=0?r.ck_PL=`反算出塑限[${i}]<=0`:i>=100?r.ck_PL=`反算出塑限[${i}]>=100`:Math.abs(n-i)>i/100*5&&(r.ck_PL=`輸入塑限[${n}]與反算出塑限[${i}]差距過大`):(n=i,a=!0)),ht(e)&&ht(n)&&(o=e-n),ht(o)&&(ht(t)?o<=0?r.ck_PI=`反算出塑性指數[${o}]<=0`:o>=100?r.ck_PI=`反算出塑性指數[${o}]>=100`:Math.abs(t-o)>o/100*5&&(r.ck_PI=`輸入塑性指數[${t}]與反算出塑性指數[${o}]差距過大`):(t=o,a=!0)),ht(n)&&ht(t)&&(l=n+t),ht(l)&&(ht(e)?l<=0?r.ck_LL=`反算出液限[${l}]<=0`:l>=100?r.ck_LL=`反算出液限[${l}]>=100`:Math.abs(e-l)>l/100*5&&(r.ck_LL=`輸入液限[${e}]與反算出液限[${l}]差距過大`):(e=l,a=!0)),a}vt(e)?(e=Lt(e))<=0&&(r.LL=`液限[${e}]為數字但<=0，自動清除`):e=null,vt(n)?(n=Lt(n))<=0&&(r.PL=`塑限[${n}]為數字但<=0，自動清除`):n=null,vt(t)?(t=Lt(t))<=0&&(r.PI=`塑性指數[${t}]為數字但<=0，自動清除`):t=null;let o=0;if(o+=vt(e)?1:0,o+=vt(n)?1:0,o+=vt(t)?1:0,o>=2){let e=i();for(;e;)e=i()}let l={LL:e,PL:n,PI:t};if(Gl(r)){let e=ft(bf(r),", ");l.err=e}return l},e.relaPorousParams=Ff,e.sepDepthStartEndByDepth=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Da(e))throw new Error("無有效數據");if(!Da(t))return e;let r=ve(n,"keyDepthStart");dt(r)||(r="depthStart");let i=ve(n,"keyDepthEnd");dt(i)||(i="depthEnd");let o=ve(n,"keyDepth");dt(o)||(o="depth");let l=eu(e=wl(e),{keyDepthStart:r,keyDepthEnd:i});if(ut(l)>0)throw new Error(ft(l,", "));e=ha(e,(e=>Lt(e[r])));let a=Ch(t,{keyDepth:o});if(ut(a)>0)throw new Error(ft(a,", "));let u=co(t,(e=>e[o]));u=tc(u);let s=(e,t)=>(fi(e=wl(e),((n,o)=>{let l=ve(n,r,null),a=ve(n,i,null);if(l=Lt(l),a=Lt(a),gr(t,">",l)&&gr(t,"<",a)){let l=wl(n),a=wl(n);return l[i]=t,a[r]=t,Es(e,o),e=function(e,t,n){if(!Pa(e))return[];if(Pa(n)||(n=[n]),!Ca(t))return e;if((t=Kl(t))>ut(e))return e;let r=e;try{r=[...e.slice(0,t),...n,...e.slice(t)]}catch(e){}return r}(e,o,[l,a]),!1}})),e);return fi(u,(t=>{e=s(e,t)})),e},e.smoothDepthByKey=Ja}));
//# sourceMappingURL=w-geo.umd.js.map
