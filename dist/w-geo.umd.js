/*!
 * w-geo v1.0.6
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r="undefined"!=typeof globalThis?globalThis:r||self)["w-geo"]=t()}(this,(function(){"use strict";var r={eps:1e-6,rw:9.81};var t=function(r,t){for(var e=-1,n=null==r?0:r.length;++e<n&&!1!==t(r[e],e,r););return r};var e=function(r){return function(t,e,n){for(var o=-1,a=Object(t),u=n(t),c=u.length;c--;){var i=u[r?c:++o];if(!1===e(a[i],i,a))break}return t}}();var n=function(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n};function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(r){var t={exports:{}};return r(t,t.exports),t.exports}var c="object"==o(a)&&a&&a.Object===Object&&a,i="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,f=c||i||Function("return this")(),s=f.Symbol,v=Object.prototype,l=v.hasOwnProperty,p=v.toString,b=s?s.toStringTag:void 0;var h=function(r){var t=l.call(r,b),e=r[b];try{r[b]=void 0;var n=!0}catch(r){}var o=p.call(r);return n&&(t?r[b]=e:delete r[b]),o},y=Object.prototype.toString;var d=function(r){return y.call(r)},_=s?s.toStringTag:void 0;var j=function(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":_&&_ in Object(r)?h(r):d(r)};var g=function(r){return null!=r&&"object"==o(r)};var w=function(r){return g(r)&&"[object Arguments]"==j(r)},O=Object.prototype,m=O.hasOwnProperty,S=O.propertyIsEnumerable,A=w(function(){return arguments}())?w:function(r){return g(r)&&m.call(r,"callee")&&!S.call(r,"callee")},E=Array.isArray;var x=function(){return!1},z=u((function(r,t){var e=t&&!t.nodeType&&t,n=e&&r&&!r.nodeType&&r,o=n&&n.exports===e?f.Buffer:void 0,a=(o?o.isBuffer:void 0)||x;r.exports=a})),P=/^(?:0|[1-9]\d*)$/;var U=function(r,t){var e=o(r);return!!(t=null==t?9007199254740991:t)&&("number"==e||"symbol"!=e&&P.test(r))&&r>-1&&r%1==0&&r<t};var I=function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991},M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M["[object Arguments]"]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object Boolean]"]=M["[object DataView]"]=M["[object Date]"]=M["[object Error]"]=M["[object Function]"]=M["[object Map]"]=M["[object Number]"]=M["[object Object]"]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object WeakMap]"]=!1;var F=function(r){return g(r)&&I(r.length)&&!!M[j(r)]};var N=function(r){return function(t){return r(t)}},T=u((function(r,t){var e=t&&!t.nodeType&&t,n=e&&r&&!r.nodeType&&r,o=n&&n.exports===e&&c.process,a=function(){try{var r=n&&n.require&&n.require("util").types;return r||o&&o.binding&&o.binding("util")}catch(r){}}();r.exports=a})),k=T&&T.isTypedArray,D=k?N(k):F,$=Object.prototype.hasOwnProperty;var B=function(r,t){var e=E(r),o=!e&&A(r),a=!e&&!o&&z(r),u=!e&&!o&&!a&&D(r),c=e||o||a||u,i=c?n(r.length,String):[],f=i.length;for(var s in r)!t&&!$.call(r,s)||c&&("length"==s||a&&("offset"==s||"parent"==s)||u&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||U(s,f))||i.push(s);return i},G=Object.prototype;var L=function(r){var t=r&&r.constructor;return r===("function"==typeof t&&t.prototype||G)};var R=function(r,t){return function(e){return r(t(e))}},C=R(Object.keys,Object),V=Object.prototype.hasOwnProperty;var W=function(r){if(!L(r))return C(r);var t=[];for(var e in Object(r))V.call(r,e)&&"constructor"!=e&&t.push(e);return t};var q=function(r){var t=o(r);return null!=r&&("object"==t||"function"==t)};var H=function(r){if(!q(r))return!1;var t=j(r);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var J=function(r){return null!=r&&I(r.length)&&!H(r)};var K=function(r){return J(r)?B(r):W(r)};var Q=function(r,t){return function(e,n){if(null==e)return e;if(!J(e))return r(e,n);for(var o=e.length,a=t?o:-1,u=Object(e);(t?a--:++a<o)&&!1!==n(u[a],a,u););return e}}((function(r,t){return r&&e(r,t,K)}));var X=function(r){return r};var Y=function(r){return"function"==typeof r?r:X};var Z=function(r,e){return(E(r)?t:Q)(r,Y(e))};var rr=function(r){return"symbol"==o(r)||g(r)&&"[object Symbol]"==j(r)},tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,er=/^\w*$/;var nr,or=function(r,t){if(E(r))return!1;var e=o(r);return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=r&&!rr(r))||(er.test(r)||!tr.test(r)||null!=t&&r in Object(t))},ar=f["__core-js_shared__"],ur=(nr=/[^.]+$/.exec(ar&&ar.keys&&ar.keys.IE_PROTO||""))?"Symbol(src)_1."+nr:"";var cr=function(r){return!!ur&&ur in r},ir=Function.prototype.toString;var fr=function(r){if(null!=r){try{return ir.call(r)}catch(r){}try{return r+""}catch(r){}}return""},sr=/^\[object .+?Constructor\]$/,vr=Function.prototype,lr=Object.prototype,pr=vr.toString,br=lr.hasOwnProperty,hr=RegExp("^"+pr.call(br).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yr=function(r){return!(!q(r)||cr(r))&&(H(r)?hr:sr).test(fr(r))};var dr=function(r,t){return null==r?void 0:r[t]};var _r=function(r,t){var e=dr(r,t);return yr(e)?e:void 0},jr=_r(Object,"create");var gr=function(){this.__data__=jr?jr(null):{},this.size=0};var wr=function(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t},Or=Object.prototype.hasOwnProperty;var mr=function(r){var t=this.__data__;if(jr){var e=t[r];return"__lodash_hash_undefined__"===e?void 0:e}return Or.call(t,r)?t[r]:void 0},Sr=Object.prototype.hasOwnProperty;var Ar=function(r){var t=this.__data__;return jr?void 0!==t[r]:Sr.call(t,r)};var Er=function(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=jr&&void 0===t?"__lodash_hash_undefined__":t,this};function xr(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}xr.prototype.clear=gr,xr.prototype.delete=wr,xr.prototype.get=mr,xr.prototype.has=Ar,xr.prototype.set=Er;var zr=xr;var Pr=function(){this.__data__=[],this.size=0};var Ur=function(r,t){return r===t||r!=r&&t!=t};var Ir=function(r,t){for(var e=r.length;e--;)if(Ur(r[e][0],t))return e;return-1},Mr=Array.prototype.splice;var Fr=function(r){var t=this.__data__,e=Ir(t,r);return!(e<0)&&(e==t.length-1?t.pop():Mr.call(t,e,1),--this.size,!0)};var Nr=function(r){var t=this.__data__,e=Ir(t,r);return e<0?void 0:t[e][1]};var Tr=function(r){return Ir(this.__data__,r)>-1};var kr=function(r,t){var e=this.__data__,n=Ir(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this};function Dr(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Dr.prototype.clear=Pr,Dr.prototype.delete=Fr,Dr.prototype.get=Nr,Dr.prototype.has=Tr,Dr.prototype.set=kr;var $r=Dr,Br=_r(f,"Map");var Gr=function(){this.size=0,this.__data__={hash:new zr,map:new(Br||$r),string:new zr}};var Lr=function(r){var t=o(r);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==r:null===r};var Rr=function(r,t){var e=r.__data__;return Lr(t)?e["string"==typeof t?"string":"hash"]:e.map};var Cr=function(r){var t=Rr(this,r).delete(r);return this.size-=t?1:0,t};var Vr=function(r){return Rr(this,r).get(r)};var Wr=function(r){return Rr(this,r).has(r)};var qr=function(r,t){var e=Rr(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this};function Hr(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Hr.prototype.clear=Gr,Hr.prototype.delete=Cr,Hr.prototype.get=Vr,Hr.prototype.has=Wr,Hr.prototype.set=qr;var Jr=Hr;function Kr(r,t){if("function"!=typeof r||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var e=function e(){var n=arguments,o=t?t.apply(this,n):n[0],a=e.cache;if(a.has(o))return a.get(o);var u=r.apply(this,n);return e.cache=a.set(o,u)||a,u};return e.cache=new(Kr.Cache||Jr),e}Kr.Cache=Jr;var Qr=Kr;var Xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yr=/\\(\\)?/g,Zr=function(r){var t=Qr(r,(function(r){return 500===e.size&&e.clear(),r})),e=t.cache;return t}((function(r){var t=[];return 46===r.charCodeAt(0)&&t.push(""),r.replace(Xr,(function(r,e,n,o){t.push(n?o.replace(Yr,"$1"):e||r)})),t}));var rt=function(r,t){for(var e=-1,n=null==r?0:r.length,o=Array(n);++e<n;)o[e]=t(r[e],e,r);return o},tt=s?s.prototype:void 0,et=tt?tt.toString:void 0;var nt=function r(t){if("string"==typeof t)return t;if(E(t))return rt(t,r)+"";if(rr(t))return et?et.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var ot=function(r){return null==r?"":nt(r)};var at=function(r,t){return E(r)?r:or(r,t)?[r]:Zr(ot(r))};var ut=function(r){if("string"==typeof r||rr(r))return r;var t=r+"";return"0"==t&&1/r==-Infinity?"-0":t};var ct=function(r,t){for(var e=0,n=(t=at(t,r)).length;null!=r&&e<n;)r=r[ut(t[e++])];return e&&e==n?r:void 0};var it=function(r,t,e){var n=null==r?void 0:ct(r,t);return void 0===n?e:n},ft=/\s/;var st=function(r){for(var t=r.length;t--&&ft.test(r.charAt(t)););return t},vt=/^\s+/;var lt=function(r){return r?r.slice(0,st(r)+1).replace(vt,""):r},pt=/^[-+]0x[0-9a-f]+$/i,bt=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,yt=parseInt;var dt=function(r){if("number"==typeof r)return r;if(rr(r))return NaN;if(q(r)){var t="function"==typeof r.valueOf?r.valueOf():r;r=q(t)?t+"":t}if("string"!=typeof r)return 0===r?r:+r;r=lt(r);var e=bt.test(r);return e||ht.test(r)?yt(r.slice(2),e?2:8):pt.test(r)?NaN:+r},_t=1/0;var jt=function(r){return r?(r=dt(r))===_t||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0};function gt(r){return"[object String]"===Object.prototype.toString.call(r)}function wt(r){var t=!1;return!function(r){return!(!gt(r)||""===r)}(r)?function(r){return"[object Number]"===Object.prototype.toString.call(r)}(r)&&(t=!0):t=!isNaN(Number(r)),t}function Ot(r){return wt(r)?jt(r):0}function mt(r){var t=[];return Z(r,(function(r,e){var n=it(r,"depthStart",null),o=it(r,"depthEnd",null);wt(n)&&wt(o)?(n=Ot(n),o=Ot(o)):t.push("第 ".concat(e," 樣本起訖深度非有效數字: depthStart[").concat(n,"], depthEnd[").concat(o,"]"))})),Z(r,(function(e,n){if(0===n)return!0;var o=it(r,n-1),a=e,u=it(o,"depthEnd",null),c=it(a,"depthStart",null),i=u===c,f=Ot(u)===Ot(c);i||f||t.push("第 ".concat(n," 樣本起訖深度depthEnd[").concat(u,"]不等於第 ").concat(n+1," 個樣本起始深度depthStart[").concat(c,"]"))})),t}var St=function(r){return"number"==typeof r||g(r)&&"[object Number]"==j(r)};var At=function(r){return!0===r||!1===r||g(r)&&"[object Boolean]"==j(r)};function Et(r){return At(r)}var xt=r.rw;function zt(r,t){return r*xt/(1+t)}function Pt(r,t){return r-t*xt/(1+t)}function Ut(r,t){return(r-xt)*t/(t-1)}function It(r,t){return(r+t)*xt/(1+t)}function Mt(r,t){return r+t*xt/(1+t)}function Ft(r,t){return r*(t-1)/t+xt}function Nt(r,t){return(r*xt-t)/t}function Tt(r,t){return(r-t)/(t-xt-r)}function kt(r,t){return(r*xt-t)/(t-xt)}function Dt(r,t){return r*(1+t)/xt}function $t(r,t){return r/(r-(t-xt))}function Bt(r,t){return(r+r*t-t*xt)/xt}var Gt=function(){this.__data__=new $r,this.size=0};var Lt=function(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e};var Rt=function(r){return this.__data__.get(r)};var Ct=function(r){return this.__data__.has(r)};var Vt=function(r,t){var e=this.__data__;if(e instanceof $r){var n=e.__data__;if(!Br||n.length<199)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new Jr(n)}return e.set(r,t),this.size=e.size,this};function Wt(r){var t=this.__data__=new $r(r);this.size=t.size}Wt.prototype.clear=Gt,Wt.prototype.delete=Lt,Wt.prototype.get=Rt,Wt.prototype.has=Ct,Wt.prototype.set=Vt;var qt=Wt;var Ht=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this};var Jt=function(r){return this.__data__.has(r)};function Kt(r){var t=-1,e=null==r?0:r.length;for(this.__data__=new Jr;++t<e;)this.add(r[t])}Kt.prototype.add=Kt.prototype.push=Ht,Kt.prototype.has=Jt;var Qt=Kt;var Xt=function(r,t){for(var e=-1,n=null==r?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1};var Yt=function(r,t){return r.has(t)};var Zt=function(r,t,e,n,o,a){var u=1&e,c=r.length,i=t.length;if(c!=i&&!(u&&i>c))return!1;var f=a.get(r),s=a.get(t);if(f&&s)return f==t&&s==r;var v=-1,l=!0,p=2&e?new Qt:void 0;for(a.set(r,t),a.set(t,r);++v<c;){var b=r[v],h=t[v];if(n)var y=u?n(h,b,v,t,r,a):n(b,h,v,r,t,a);if(void 0!==y){if(y)continue;l=!1;break}if(p){if(!Xt(t,(function(r,t){if(!Yt(p,t)&&(b===r||o(b,r,e,n,a)))return p.push(t)}))){l=!1;break}}else if(b!==h&&!o(b,h,e,n,a)){l=!1;break}}return a.delete(r),a.delete(t),l},re=f.Uint8Array;var te=function(r){var t=-1,e=Array(r.size);return r.forEach((function(r,n){e[++t]=[n,r]})),e};var ee=function(r){var t=-1,e=Array(r.size);return r.forEach((function(r){e[++t]=r})),e},ne=s?s.prototype:void 0,oe=ne?ne.valueOf:void 0;var ae=function(r,t,e,n,o,a,u){switch(e){case"[object DataView]":if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=t.byteLength||!a(new re(r),new re(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ur(+r,+t);case"[object Error]":return r.name==t.name&&r.message==t.message;case"[object RegExp]":case"[object String]":return r==t+"";case"[object Map]":var c=te;case"[object Set]":var i=1&n;if(c||(c=ee),r.size!=t.size&&!i)return!1;var f=u.get(r);if(f)return f==t;n|=2,u.set(r,t);var s=Zt(c(r),c(t),n,o,a,u);return u.delete(r),s;case"[object Symbol]":if(oe)return oe.call(r)==oe.call(t)}return!1};var ue=function(r,t){for(var e=-1,n=t.length,o=r.length;++e<n;)r[o+e]=t[e];return r};var ce=function(r,t,e){var n=t(r);return E(r)?n:ue(n,e(r))};var ie=function(r,t){for(var e=-1,n=null==r?0:r.length,o=0,a=[];++e<n;){var u=r[e];t(u,e,r)&&(a[o++]=u)}return a};var fe=function(){return[]},se=Object.prototype.propertyIsEnumerable,ve=Object.getOwnPropertySymbols,le=ve?function(r){return null==r?[]:(r=Object(r),ie(ve(r),(function(t){return se.call(r,t)})))}:fe;var pe=function(r){return ce(r,K,le)},be=Object.prototype.hasOwnProperty;var he=function(r,t,e,n,o,a){var u=1&e,c=pe(r),i=c.length;if(i!=pe(t).length&&!u)return!1;for(var f=i;f--;){var s=c[f];if(!(u?s in t:be.call(t,s)))return!1}var v=a.get(r),l=a.get(t);if(v&&l)return v==t&&l==r;var p=!0;a.set(r,t),a.set(t,r);for(var b=u;++f<i;){var h=r[s=c[f]],y=t[s];if(n)var d=u?n(y,h,s,t,r,a):n(h,y,s,r,t,a);if(!(void 0===d?h===y||o(h,y,e,n,a):d)){p=!1;break}b||(b="constructor"==s)}if(p&&!b){var _=r.constructor,j=t.constructor;_==j||!("constructor"in r)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof j&&j instanceof j||(p=!1)}return a.delete(r),a.delete(t),p},ye=_r(f,"DataView"),de=_r(f,"Promise"),_e=_r(f,"Set"),je=_r(f,"WeakMap"),ge="[object Map]",we="[object Promise]",Oe="[object Set]",me="[object WeakMap]",Se="[object DataView]",Ae=fr(ye),Ee=fr(Br),xe=fr(de),ze=fr(_e),Pe=fr(je),Ue=j;(ye&&Ue(new ye(new ArrayBuffer(1)))!=Se||Br&&Ue(new Br)!=ge||de&&Ue(de.resolve())!=we||_e&&Ue(new _e)!=Oe||je&&Ue(new je)!=me)&&(Ue=function(r){var t=j(r),e="[object Object]"==t?r.constructor:void 0,n=e?fr(e):"";if(n)switch(n){case Ae:return Se;case Ee:return ge;case xe:return we;case ze:return Oe;case Pe:return me}return t});var Ie=Ue,Me="[object Arguments]",Fe="[object Array]",Ne="[object Object]",Te=Object.prototype.hasOwnProperty;var ke=function(r,t,e,n,o,a){var u=E(r),c=E(t),i=u?Fe:Ie(r),f=c?Fe:Ie(t),s=(i=i==Me?Ne:i)==Ne,v=(f=f==Me?Ne:f)==Ne,l=i==f;if(l&&z(r)){if(!z(t))return!1;u=!0,s=!1}if(l&&!s)return a||(a=new qt),u||D(r)?Zt(r,t,e,n,o,a):ae(r,t,i,e,n,o,a);if(!(1&e)){var p=s&&Te.call(r,"__wrapped__"),b=v&&Te.call(t,"__wrapped__");if(p||b){var h=p?r.value():r,y=b?t.value():t;return a||(a=new qt),o(h,y,e,n,a)}}return!!l&&(a||(a=new qt),he(r,t,e,n,o,a))};var De=function r(t,e,n,o,a){return t===e||(null==t||null==e||!g(t)&&!g(e)?t!=t&&e!=e:ke(t,e,n,o,r,a))};var $e=function(r,t,e,n){var o=e.length,a=o,u=!n;if(null==r)return!a;for(r=Object(r);o--;){var c=e[o];if(u&&c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++o<a;){var i=(c=e[o])[0],f=r[i],s=c[1];if(u&&c[2]){if(void 0===f&&!(i in r))return!1}else{var v=new qt;if(n)var l=n(f,s,i,r,t,v);if(!(void 0===l?De(s,f,3,n,v):l))return!1}}return!0};var Be=function(r){return r==r&&!q(r)};var Ge=function(r){for(var t=K(r),e=t.length;e--;){var n=t[e],o=r[n];t[e]=[n,o,Be(o)]}return t};var Le=function(r,t){return function(e){return null!=e&&(e[r]===t&&(void 0!==t||r in Object(e)))}};var Re=function(r){var t=Ge(r);return 1==t.length&&t[0][2]?Le(t[0][0],t[0][1]):function(e){return e===r||$e(e,r,t)}};var Ce=function(r,t){return null!=r&&t in Object(r)};var Ve=function(r,t,e){for(var n=-1,o=(t=at(t,r)).length,a=!1;++n<o;){var u=ut(t[n]);if(!(a=null!=r&&e(r,u)))break;r=r[u]}return a||++n!=o?a:!!(o=null==r?0:r.length)&&I(o)&&U(u,o)&&(E(r)||A(r))};var We=function(r,t){return null!=r&&Ve(r,t,Ce)};var qe=function(r,t){return or(r)&&Be(t)?Le(ut(r),t):function(e){var n=it(e,r);return void 0===n&&n===t?We(e,r):De(t,n,3)}};var He=function(r){return function(t){return null==t?void 0:t[r]}};var Je=function(r){return function(t){return ct(t,r)}};var Ke=function(r){return or(r)?He(ut(r)):Je(r)};var Qe=function(r){return"function"==typeof r?r:null==r?X:"object"==o(r)?E(r)?qe(r[0],r[1]):Re(r):Ke(r)};var Xe=function(r,t){var e=-1,n=J(r)?Array(r.length):[];return Q(r,(function(r,o,a){n[++e]=t(r,o,a)})),n};var Ye=function(r,t){return(E(r)?rt:Xe)(r,Qe(t))},Ze=function(){try{var r=_r(Object,"defineProperty");return r({},"",{}),r}catch(r){}}();var rn=function(r,t,e){"__proto__"==t&&Ze?Ze(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e},tn=Object.prototype.hasOwnProperty;var en=function(r,t,e){var n=r[t];tn.call(r,t)&&Ur(n,e)&&(void 0!==e||t in r)||rn(r,t,e)};var nn=function(r,t,e,n){var o=!e;e||(e={});for(var a=-1,u=t.length;++a<u;){var c=t[a],i=n?n(e[c],r[c],c,e,r):void 0;void 0===i&&(i=r[c]),o?rn(e,c,i):en(e,c,i)}return e};var on=function(r,t){return r&&nn(t,K(t),r)};var an=function(r){var t=[];if(null!=r)for(var e in Object(r))t.push(e);return t},un=Object.prototype.hasOwnProperty;var cn=function(r){if(!q(r))return an(r);var t=L(r),e=[];for(var n in r)("constructor"!=n||!t&&un.call(r,n))&&e.push(n);return e};var fn=function(r){return J(r)?B(r,!0):cn(r)};var sn=function(r,t){return r&&nn(t,fn(t),r)},vn=u((function(r,t){var e=t&&!t.nodeType&&t,n=e&&r&&!r.nodeType&&r,o=n&&n.exports===e?f.Buffer:void 0,a=o?o.allocUnsafe:void 0;r.exports=function(r,t){if(t)return r.slice();var e=r.length,n=a?a(e):new r.constructor(e);return r.copy(n),n}}));var ln=function(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t};var pn=function(r,t){return nn(r,le(r),t)},bn=R(Object.getPrototypeOf,Object),hn=Object.getOwnPropertySymbols?function(r){for(var t=[];r;)ue(t,le(r)),r=bn(r);return t}:fe;var yn=function(r,t){return nn(r,hn(r),t)};var dn=function(r){return ce(r,fn,hn)},_n=Object.prototype.hasOwnProperty;var jn=function(r){var t=r.length,e=new r.constructor(t);return t&&"string"==typeof r[0]&&_n.call(r,"index")&&(e.index=r.index,e.input=r.input),e};var gn=function(r){var t=new r.constructor(r.byteLength);return new re(t).set(new re(r)),t};var wn=function(r,t){var e=t?gn(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)},On=/\w*$/;var mn=function(r){var t=new r.constructor(r.source,On.exec(r));return t.lastIndex=r.lastIndex,t},Sn=s?s.prototype:void 0,An=Sn?Sn.valueOf:void 0;var En=function(r){return An?Object(An.call(r)):{}};var xn=function(r,t){var e=t?gn(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)};var zn=function(r,t,e){var n=r.constructor;switch(t){case"[object ArrayBuffer]":return gn(r);case"[object Boolean]":case"[object Date]":return new n(+r);case"[object DataView]":return wn(r,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return xn(r,e);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(r);case"[object RegExp]":return mn(r);case"[object Set]":return new n;case"[object Symbol]":return En(r)}},Pn=Object.create,Un=function(){function r(){}return function(t){if(!q(t))return{};if(Pn)return Pn(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();var In=function(r){return"function"!=typeof r.constructor||L(r)?{}:Un(bn(r))};var Mn=function(r){return g(r)&&"[object Map]"==Ie(r)},Fn=T&&T.isMap,Nn=Fn?N(Fn):Mn;var Tn=function(r){return g(r)&&"[object Set]"==Ie(r)},kn=T&&T.isSet,Dn=kn?N(kn):Tn,$n="[object Arguments]",Bn="[object Function]",Gn="[object Object]",Ln={};Ln[$n]=Ln["[object Array]"]=Ln["[object ArrayBuffer]"]=Ln["[object DataView]"]=Ln["[object Boolean]"]=Ln["[object Date]"]=Ln["[object Float32Array]"]=Ln["[object Float64Array]"]=Ln["[object Int8Array]"]=Ln["[object Int16Array]"]=Ln["[object Int32Array]"]=Ln["[object Map]"]=Ln["[object Number]"]=Ln[Gn]=Ln["[object RegExp]"]=Ln["[object Set]"]=Ln["[object String]"]=Ln["[object Symbol]"]=Ln["[object Uint8Array]"]=Ln["[object Uint8ClampedArray]"]=Ln["[object Uint16Array]"]=Ln["[object Uint32Array]"]=!0,Ln["[object Error]"]=Ln[Bn]=Ln["[object WeakMap]"]=!1;var Rn=function r(e,n,o,a,u,c){var i,f=1&n,s=2&n,v=4&n;if(o&&(i=u?o(e,a,u,c):o(e)),void 0!==i)return i;if(!q(e))return e;var l=E(e);if(l){if(i=jn(e),!f)return ln(e,i)}else{var p=Ie(e),b=p==Bn||"[object GeneratorFunction]"==p;if(z(e))return vn(e,f);if(p==Gn||p==$n||b&&!u){if(i=s||b?{}:In(e),!f)return s?yn(e,sn(i,e)):pn(e,on(i,e))}else{if(!Ln[p])return u?e:{};i=zn(e,p,f)}}c||(c=new qt);var h=c.get(e);if(h)return h;c.set(e,i),Dn(e)?e.forEach((function(t){i.add(r(t,n,o,t,e,c))})):Nn(e)&&e.forEach((function(t,a){i.set(a,r(t,n,o,a,e,c))}));var y=l?void 0:(v?s?dn:pe:s?fn:K)(e);return t(y||e,(function(t,a){y&&(t=e[a=t]),en(i,a,r(t,n,o,a,e,c))})),i};var Cn=function(r){return Rn(r,5)};var Vn=function(r){return"string"==typeof r||!E(r)&&g(r)&&"[object String]"==j(r)},Wn=He("length"),qn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Hn=function(r){return qn.test(r)},Jn="[\\ud800-\\udfff]",Kn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qn="\\ud83c[\\udffb-\\udfff]",Xn="[^\\ud800-\\udfff]",Yn="(?:\\ud83c[\\udde6-\\uddff]){2}",Zn="[\\ud800-\\udbff][\\udc00-\\udfff]",ro="(?:"+Kn+"|"+Qn+")"+"?",to="[\\ufe0e\\ufe0f]?",eo=to+ro+("(?:\\u200d(?:"+[Xn,Yn,Zn].join("|")+")"+to+ro+")*"),no="(?:"+[Xn+Kn+"?",Kn,Yn,Zn,Jn].join("|")+")",oo=RegExp(Qn+"(?="+Qn+")|"+no+eo,"g");var ao=function(r){for(var t=oo.lastIndex=0;oo.test(r);)++t;return t};var uo=function(r){return Hn(r)?ao(r):Wn(r)};var co=function(r){if(null==r)return 0;if(J(r))return Vn(r)?uo(r):r.length;var t=Ie(r);return"[object Map]"==t||"[object Set]"==t?r.size:W(r).length},io=Array.prototype.join;var fo=function(r,t){return null==r?"":io.call(r,t)};function so(r){return"[object Array]"===Object.prototype.toString.call(r)}function vo(r){if(function(r){return"[object Object]"===Object.prototype.toString.call(r)}(r)){for(var t in r)return!1;return!0}return!1}function lo(r){return!!function(r){return"[object Undefined]"===Object.prototype.toString.call(r)}(r)||(!!function(r){return"[object Null]"===Object.prototype.toString.call(r)}(r)||(!!vo(r)||(!!function(r){return!(!gt(r)||""!==r)}(r)||!!function(r){return!!so(r)&&0===r.length}(r))))}function po(r){return!!so(r)&&(0!==r.length&&(1!==r.length||!lo(r[0])))}var bo=r.rw;function ho(r,t){r=Cn(r);var e=0;return r=Ye(r,(function(r,n){var o=it(r,"depthStart",null),a=it(r,"depthEnd",null);if(!wt(o))throw new Error("第 ".concat(n," 樣本起始深度(depthStart)非數值: ").concat(o));if(!wt(a))throw new Error("第 ".concat(n," 樣本結束深度(depthEnd)非數值: ").concat(a));o=Ot(o),a=Ot(a);var u=null;if(o<t&&a>t){var c=it(r,"rsat",null);if(!wt(c))throw new Error("第 ".concat(n," 樣本飽和單位重(rsat)非數值: ").concat(c));var i=it(r,"rd",null);if(!wt(i))throw new Error("第 ".concat(n," 樣本乾單位重(rd)非數值: ").concat(i));i=Ot(i);var f=t-o,s=a-t;u=(f*i+s*c)/(f+s)}else if(a<=t){var v=it(r,"rd",null);if(!wt(v))throw new Error("第 ".concat(n," 樣本乾單位重(rd)非數值: ").concat(v));u=v}else{if(!(o>=t))throw new Error("非預期情形");var l=it(r,"rsat",null);if(!wt(l))throw new Error("第 ".concat(n," 樣本飽和單位重(rsat)非數值: ").concat(l));u=l}var p=u*(a-o),b=e+p/2;r.sv=b,e+=p;var h=Math.max((o+a)/2-t,0)*bo;return r.svp=b-h,r.zsv=(a+o)/2,r}))}return{cnst:r,checkDepthStartEnd:mt,relaPorousParams:function(r,t,e,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=it(o,"returnFuncs");if(Et(a)||(a=!1),wt(r)){if((r=Ot(r))<=0)throw new Error("乾單位重[".concat(r,"]<=0"));if(r<=xt)throw new Error("乾單位重[".concat(r,"]<=水單位重[").concat(xt,"]"))}else r=null;if(wt(t)){if((t=Ot(t))<=0)throw new Error("飽和單位重[".concat(t,"]<=0"));if(t<=xt)throw new Error("飽和單位重[".concat(t,"]<=水單位重[").concat(xt,"]"))}else t=null;if(wt(e)){if((e=Ot(e))<=0)throw new Error("比重[".concat(e,"]<=0"))}else e=null;if(wt(n)){if((n=Ot(n))<=0)throw new Error("孔隙比[".concat(n,"]<=0"))}else n=null;function u(){var o,a,u,c,i=!1;if(!St(o)&&St(e)&&St(n)&&(o=zt(e,n)),!St(o)&&St(t)&&St(n)&&(o=Pt(t,n)),!St(o)&&St(t)&&St(e)&&1!==e&&(o=Ut(t,e)),St(r)){if(Math.abs(r-o)>o/100)throw new Error("輸入乾單位重[".concat(r,"]與反算出乾單位重[").concat(o,"]差距過大"))}else r=o,i=!0;if(!St(a)&&St(e)&&St(n)&&(a=It(e,n)),!St(a)&&St(r)&&St(n)&&(a=Mt(r,n)),!St(a)&&St(r)&&St(e)&&(a=Ft(r,e)),St(t)){if(Math.abs(t-a)>a/100)throw new Error("輸入飽和單位重[".concat(t,"]與反算出飽和單位重[").concat(a,"]差距過大"))}else t=a,i=!0;if(!St(u)&&St(e)&&St(r)&&(u=Nt(e,r)),!St(u)&&St(t)&&St(r)&&t-xt-r!=0&&(u=Tt(r,t)),!St(u)&&St(t)&&St(e)&&t-xt!=0&&(u=kt(e,t)),St(n)){if(Math.abs(n-u)>u/100)throw new Error("輸入孔隙比[".concat(n,"]與反算出孔隙比[").concat(u,"]差距過大"))}else n=u,i=!0;if(!St(c)&&St(r)&&St(n)&&(c=Dt(r,n)),!St(c)&&St(r)&&St(t)&&r-(t-xt)!=0&&(c=$t(r,t)),!St(c)&&St(t)&&St(n)&&(c=Bt(t,n)),St(e)){if(Math.abs(e-c)>c/100)throw new Error("輸入比重[".concat(e,"]與反算出比重[").concat(c,"]差距過大"))}else e=c,i=!0;return i}var c=0;if(c+=wt(r)?1:0,c+=wt(t)?1:0,c+=wt(e)?1:0,(c+=wt(n)?1:0)>=2)for(var i=u();i;)i=u();var f={rd:r,rsat:t,GS:e,e:n};return a&&(f.coreFuncs={get_rd_from_GS_e:zt,get_rd_from_rsat_e:Pt,get_rd_from_rsat_GS:Ut,get_rsat_from_GS_e:It,get_rsat_from_rd_e:Mt,get_rsat_from_rd_GS:Ft,get_e_from_GS_rd:Nt,get_e_from_rd_rsat:Tt,get_e_from_GS_rsat:kt,get_GS_from_rd_e:Dt,get_GS_from_rd_rsat:$t,get_GS_from_rsat_e:Bt}),f},calcVerticalStress:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!po(r=Cn(r)))throw new Error("樣本數據(rows)非有效陣列");var e=mt(r);if(co(e)>0)throw new Error(fo(e,"; "));var n=it(t,"waterLevelUsual");wt(n)||(n=0),n=Ot(n);var o=it(t,"waterLevelDesign");wt(o)||(o=0),o=Ot(o);var a=ho(r,n),u=ho(r,o);return r=Ye(r,(function(r,t){r.waterLevelUsual=n,r.waterLevelDesign=o;var e=a[t],c=u[t];return r.sv=e.sv,r.svpUsual=e.svp,r.svpDesign=c.svp,r.zsv=e.zsv,r}))}}}));
//# sourceMappingURL=w-geo.umd.js.map
