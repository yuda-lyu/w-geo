/*!
 * w-geo v1.0.65
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["w-geo"]={})}(this,(function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}function n(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u={},a={get exports(){return u},set exports(e){u=e}};var l=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e};var s=function(e){return function(t,r,n){for(var i=-1,o=Object(t),u=n(t),a=u.length;a--;){var l=u[e?a:++i];if(!1===r(o[l],l,o))break}return t}},f=s();var c=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},p="object"==typeof i&&i&&i.Object===Object&&i,h=p,d="object"==typeof self&&self&&self.Object===Object&&self,v=h||d||Function("return this")(),g=v.Symbol,m=g,b=Object.prototype,y=b.hasOwnProperty,w=b.toString,x=m?m.toStringTag:void 0;var $=function(e){var t=y.call(e,x),r=e[x];try{e[x]=void 0;var n=!0}catch(e){}var i=w.call(e);return n&&(t?e[x]=r:delete e[x]),i},S=Object.prototype.toString;var E=$,M=function(e){return S.call(e)},k=g?g.toStringTag:void 0;var R=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":k&&k in Object(e)?E(e):M(e)};var L=function(e){return null!=e&&"object"==typeof e},j=R,O=L;var P=function(e){return O(e)&&"[object Arguments]"==j(e)},_=L,D=Object.prototype,C=D.hasOwnProperty,q=D.propertyIsEnumerable,N=P(function(){return arguments}())?P:function(e){return _(e)&&C.call(e,"callee")&&!q.call(e,"callee")},A=N,z=Array.isArray,F={};var T=function(){return!1};!function(e,t){var r=v,n=T,i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,u=o&&o.exports===i?r.Buffer:void 0,a=(u?u.isBuffer:void 0)||n;e.exports=a}({get exports(){return F},set exports(e){F=e}},F);var I=/^(?:0|[1-9]\d*)$/;var U=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&I.test(e))&&e>-1&&e%1==0&&e<t};var B=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Q=R,G=B,H=L,W={};W["[object Float32Array]"]=W["[object Float64Array]"]=W["[object Int8Array]"]=W["[object Int16Array]"]=W["[object Int32Array]"]=W["[object Uint8Array]"]=W["[object Uint8ClampedArray]"]=W["[object Uint16Array]"]=W["[object Uint32Array]"]=!0,W["[object Arguments]"]=W["[object Array]"]=W["[object ArrayBuffer]"]=W["[object Boolean]"]=W["[object DataView]"]=W["[object Date]"]=W["[object Error]"]=W["[object Function]"]=W["[object Map]"]=W["[object Number]"]=W["[object Object]"]=W["[object RegExp]"]=W["[object Set]"]=W["[object String]"]=W["[object WeakMap]"]=!1;var V=function(e){return H(e)&&G(e.length)&&!!W[Q(e)]};var Y=function(e){return function(t){return e(t)}},Z={};!function(e,t){var r=p,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n&&r.process,u=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=u}({get exports(){return Z},set exports(e){Z=e}},Z);var K=V,J=Y,X=Z&&Z.isTypedArray,ee=X?J(X):K,te=c,re=A,ne=z,ie=F,oe=U,ue=ee,ae=Object.prototype.hasOwnProperty;var le=function(e,t){var r=ne(e),n=!r&&re(e),i=!r&&!n&&ie(e),o=!r&&!n&&!i&&ue(e),u=r||n||i||o,a=u?te(e.length,String):[],l=a.length;for(var s in e)!t&&!ae.call(e,s)||u&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||oe(s,l))||a.push(s);return a},se=Object.prototype;var fe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||se)};var ce=function(e,t){return function(r){return e(t(r))}},pe=ce(Object.keys,Object),he=fe,de=pe,ve=Object.prototype.hasOwnProperty;var ge=function(e){if(!he(e))return de(e);var t=[];for(var r in Object(e))ve.call(e,r)&&"constructor"!=r&&t.push(r);return t};var me=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},be=R,ye=me;var we=function(e){if(!ye(e))return!1;var t=be(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},xe=we,$e=B;var Se=function(e){return null!=e&&$e(e.length)&&!xe(e)},Ee=le,Me=ge,ke=Se;var Re=function(e){return ke(e)?Ee(e):Me(e)},Le=f,je=Re;var Oe=Se;var Pe=function(e,t){return function(r,n){if(null==r)return r;if(!Oe(r))return e(r,n);for(var i=r.length,o=t?i:-1,u=Object(r);(t?o--:++o<i)&&!1!==n(u[o],o,u););return r}}((function(e,t){return e&&Le(e,t,je)}));var _e=function(e){return e},De=_e;var Ce=function(e){return"function"==typeof e?e:De},qe=l,Ne=Pe,Ae=Ce,ze=z;var Fe=function(e,t){return(ze(e)?qe:Ne)(e,Ae(t))};!function(e){e.exports=Fe}(a);var Te=o(u);var Ie=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};var Ue=function(){this.__data__=[],this.size=0};var Be=function(e,t){return e===t||e!=e&&t!=t},Qe=Be;var Ge=function(e,t){for(var r=e.length;r--;)if(Qe(e[r][0],t))return r;return-1},He=Ge,We=Array.prototype.splice;var Ve=function(e){var t=this.__data__,r=He(t,e);return!(r<0)&&(r==t.length-1?t.pop():We.call(t,r,1),--this.size,!0)},Ye=Ge;var Ze=function(e){var t=this.__data__,r=Ye(t,e);return r<0?void 0:t[r][1]},Ke=Ge;var Je=function(e){return Ke(this.__data__,e)>-1},Xe=Ge;var et=function(e,t){var r=this.__data__,n=Xe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},tt=Ue,rt=Ve,nt=Ze,it=Je,ot=et;function ut(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ut.prototype.clear=tt,ut.prototype.delete=rt,ut.prototype.get=nt,ut.prototype.has=it,ut.prototype.set=ot;var at=ut,lt=at;var st=function(){this.__data__=new lt,this.size=0};var ft=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var ct=function(e){return this.__data__.get(e)};var pt,ht=function(e){return this.__data__.has(e)},dt=v["__core-js_shared__"],vt=(pt=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||""))?"Symbol(src)_1."+pt:"";var gt=function(e){return!!vt&&vt in e},mt=Function.prototype.toString;var bt=function(e){if(null!=e){try{return mt.call(e)}catch(e){}try{return e+""}catch(e){}}return""},yt=we,wt=gt,xt=me,$t=bt,St=/^\[object .+?Constructor\]$/,Et=Function.prototype,Mt=Object.prototype,kt=Et.toString,Rt=Mt.hasOwnProperty,Lt=RegExp("^"+kt.call(Rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var jt=function(e,t){return null==e?void 0:e[t]},Ot=function(e){return!(!xt(e)||wt(e))&&(yt(e)?Lt:St).test($t(e))},Pt=jt;var _t=function(e,t){var r=Pt(e,t);return Ot(r)?r:void 0},Dt=_t(v,"Map"),Ct=_t(Object,"create"),qt=Ct;var Nt=function(){this.__data__=qt?qt(null):{},this.size=0};var At=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zt=Ct,Ft=Object.prototype.hasOwnProperty;var Tt=function(e){var t=this.__data__;if(zt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Ft.call(t,e)?t[e]:void 0},It=Ct,Ut=Object.prototype.hasOwnProperty;var Bt=function(e){var t=this.__data__;return It?void 0!==t[e]:Ut.call(t,e)},Qt=Ct;var Gt=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Qt&&void 0===t?"__lodash_hash_undefined__":t,this},Ht=Nt,Wt=At,Vt=Tt,Yt=Bt,Zt=Gt;function Kt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kt.prototype.clear=Ht,Kt.prototype.delete=Wt,Kt.prototype.get=Vt,Kt.prototype.has=Yt,Kt.prototype.set=Zt;var Jt=Kt,Xt=at,er=Dt;var tr=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var rr=function(e,t){var r=e.__data__;return tr(t)?r["string"==typeof t?"string":"hash"]:r.map},nr=rr;var ir=function(e){var t=nr(this,e).delete(e);return this.size-=t?1:0,t},or=rr;var ur=function(e){return or(this,e).get(e)},ar=rr;var lr=function(e){return ar(this,e).has(e)},sr=rr;var fr=function(e,t){var r=sr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},cr=function(){this.size=0,this.__data__={hash:new Jt,map:new(er||Xt),string:new Jt}},pr=ir,hr=ur,dr=lr,vr=fr;function gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gr.prototype.clear=cr,gr.prototype.delete=pr,gr.prototype.get=hr,gr.prototype.has=dr,gr.prototype.set=vr;var mr=gr,br=at,yr=Dt,wr=mr;var xr=function(e,t){var r=this.__data__;if(r instanceof br){var n=r.__data__;if(!yr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new wr(n)}return r.set(e,t),this.size=r.size,this},$r=at,Sr=st,Er=ft,Mr=ct,kr=ht,Rr=xr;function Lr(e){var t=this.__data__=new $r(e);this.size=t.size}Lr.prototype.clear=Sr,Lr.prototype.delete=Er,Lr.prototype.get=Mr,Lr.prototype.has=kr,Lr.prototype.set=Rr;var jr=Lr;var Or=mr,Pr=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},_r=function(e){return this.__data__.has(e)};function Dr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Or;++t<r;)this.add(e[t])}Dr.prototype.add=Dr.prototype.push=Pr,Dr.prototype.has=_r;var Cr=Dr;var qr=function(e,t){return e.has(t)},Nr=Cr,Ar=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},zr=qr;var Fr=function(e,t,r,n,i,o){var u=1&r,a=e.length,l=t.length;if(a!=l&&!(u&&l>a))return!1;var s=o.get(e),f=o.get(t);if(s&&f)return s==t&&f==e;var c=-1,p=!0,h=2&r?new Nr:void 0;for(o.set(e,t),o.set(t,e);++c<a;){var d=e[c],v=t[c];if(n)var g=u?n(v,d,c,t,e,o):n(d,v,c,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!Ar(t,(function(e,t){if(!zr(h,t)&&(d===e||i(d,e,r,n,o)))return h.push(t)}))){p=!1;break}}else if(d!==v&&!i(d,v,r,n,o)){p=!1;break}}return o.delete(e),o.delete(t),p},Tr=v.Uint8Array;var Ir=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var Ur=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},Br=Tr,Qr=Be,Gr=Fr,Hr=Ir,Wr=Ur,Vr=g?g.prototype:void 0,Yr=Vr?Vr.valueOf:void 0;var Zr=function(e,t,r,n,i,o,u){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Br(e),new Br(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Qr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Hr;case"[object Set]":var l=1&n;if(a||(a=Wr),e.size!=t.size&&!l)return!1;var s=u.get(e);if(s)return s==t;n|=2,u.set(e,t);var f=Gr(a(e),a(t),n,i,o,u);return u.delete(e),f;case"[object Symbol]":if(Yr)return Yr.call(e)==Yr.call(t)}return!1};var Kr=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},Jr=Kr,Xr=z;var en=function(e,t,r){var n=t(e);return Xr(e)?n:Jr(n,r(e))};var tn=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var u=e[r];t(u,r,e)&&(o[i++]=u)}return o};var rn=function(){return[]},nn=tn,on=rn,un=Object.prototype.propertyIsEnumerable,an=Object.getOwnPropertySymbols,ln=an?function(e){return null==e?[]:(e=Object(e),nn(an(e),(function(t){return un.call(e,t)})))}:on,sn=en,fn=ln,cn=Re;var pn=function(e){return sn(e,cn,fn)},hn=pn,dn=Object.prototype.hasOwnProperty;var vn=function(e,t,r,n,i,o){var u=1&r,a=hn(e),l=a.length;if(l!=hn(t).length&&!u)return!1;for(var s=l;s--;){var f=a[s];if(!(u?f in t:dn.call(t,f)))return!1}var c=o.get(e),p=o.get(t);if(c&&p)return c==t&&p==e;var h=!0;o.set(e,t),o.set(t,e);for(var d=u;++s<l;){var v=e[f=a[s]],g=t[f];if(n)var m=u?n(g,v,f,t,e,o):n(v,g,f,e,t,o);if(!(void 0===m?v===g||i(v,g,r,n,o):m)){h=!1;break}d||(d="constructor"==f)}if(h&&!d){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(h=!1)}return o.delete(e),o.delete(t),h},gn=_t(v,"DataView"),mn=_t(v,"Promise"),bn=_t(v,"Set"),yn=gn,wn=Dt,xn=mn,$n=bn,Sn=_t(v,"WeakMap"),En=R,Mn=bt,kn="[object Map]",Rn="[object Promise]",Ln="[object Set]",jn="[object WeakMap]",On="[object DataView]",Pn=Mn(yn),_n=Mn(wn),Dn=Mn(xn),Cn=Mn($n),qn=Mn(Sn),Nn=En;(yn&&Nn(new yn(new ArrayBuffer(1)))!=On||wn&&Nn(new wn)!=kn||xn&&Nn(xn.resolve())!=Rn||$n&&Nn(new $n)!=Ln||Sn&&Nn(new Sn)!=jn)&&(Nn=function(e){var t=En(e),r="[object Object]"==t?e.constructor:void 0,n=r?Mn(r):"";if(n)switch(n){case Pn:return On;case _n:return kn;case Dn:return Rn;case Cn:return Ln;case qn:return jn}return t});var An=Nn,zn=jr,Fn=Fr,Tn=Zr,In=vn,Un=An,Bn=z,Qn=F,Gn=ee,Hn="[object Arguments]",Wn="[object Array]",Vn="[object Object]",Yn=Object.prototype.hasOwnProperty;var Zn=function(e,t,r,n,i,o){var u=Bn(e),a=Bn(t),l=u?Wn:Un(e),s=a?Wn:Un(t),f=(l=l==Hn?Vn:l)==Vn,c=(s=s==Hn?Vn:s)==Vn,p=l==s;if(p&&Qn(e)){if(!Qn(t))return!1;u=!0,f=!1}if(p&&!f)return o||(o=new zn),u||Gn(e)?Fn(e,t,r,n,i,o):Tn(e,t,l,r,n,i,o);if(!(1&r)){var h=f&&Yn.call(e,"__wrapped__"),d=c&&Yn.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,g=d?t.value():t;return o||(o=new zn),i(v,g,r,n,o)}}return!!p&&(o||(o=new zn),In(e,t,r,n,i,o))},Kn=L;var Jn=function e(t,r,n,i,o){return t===r||(null==t||null==r||!Kn(t)&&!Kn(r)?t!=t&&r!=r:Zn(t,r,n,i,e,o))},Xn=jr,ei=Jn;var ti=function(e,t,r,n){var i=r.length,o=i,u=!n;if(null==e)return!o;for(e=Object(e);i--;){var a=r[i];if(u&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=r[i])[0],s=e[l],f=a[1];if(u&&a[2]){if(void 0===s&&!(l in e))return!1}else{var c=new Xn;if(n)var p=n(s,f,l,e,t,c);if(!(void 0===p?ei(f,s,3,n,c):p))return!1}}return!0},ri=me;var ni=function(e){return e==e&&!ri(e)},ii=ni,oi=Re;var ui=function(e){for(var t=oi(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ii(i)]}return t};var ai=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},li=ti,si=ui,fi=ai;var ci=function(e){var t=si(e);return 1==t.length&&t[0][2]?fi(t[0][0],t[0][1]):function(r){return r===e||li(r,e,t)}},pi=R,hi=L;var di=function(e){return"symbol"==typeof e||hi(e)&&"[object Symbol]"==pi(e)},vi=z,gi=di,mi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bi=/^\w*$/;var yi=function(e,t){if(vi(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!gi(e))||(bi.test(e)||!mi.test(e)||null!=t&&e in Object(t))},wi=mr;function xi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(xi.Cache||wi),r}xi.Cache=wi;var $i=xi;var Si=function(e){var t=$i(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t},Ei=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mi=/\\(\\)?/g,ki=Si((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ei,(function(e,r,n,i){t.push(n?i.replace(Mi,"$1"):r||e)})),t})),Ri=Ie,Li=z,ji=di,Oi=g?g.prototype:void 0,Pi=Oi?Oi.toString:void 0;var _i=function e(t){if("string"==typeof t)return t;if(Li(t))return Ri(t,e)+"";if(ji(t))return Pi?Pi.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r},Di=_i;var Ci=function(e){return null==e?"":Di(e)},qi=z,Ni=yi,Ai=ki,zi=Ci;var Fi=function(e,t){return qi(e)?e:Ni(e,t)?[e]:Ai(zi(e))},Ti=di;var Ii=function(e){if("string"==typeof e||Ti(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},Ui=Fi,Bi=Ii;var Qi=function(e,t){for(var r=0,n=(t=Ui(t,e)).length;null!=e&&r<n;)e=e[Bi(t[r++])];return r&&r==n?e:void 0},Gi=Qi;var Hi=function(e,t,r){var n=null==e?void 0:Gi(e,t);return void 0===n?r:n};var Wi=function(e,t){return null!=e&&t in Object(e)},Vi=Fi,Yi=A,Zi=z,Ki=U,Ji=B,Xi=Ii;var eo=function(e,t,r){for(var n=-1,i=(t=Vi(t,e)).length,o=!1;++n<i;){var u=Xi(t[n]);if(!(o=null!=e&&r(e,u)))break;e=e[u]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Ji(i)&&Ki(u,i)&&(Zi(e)||Yi(e))},to=Wi,ro=eo;var no=Jn,io=Hi,oo=function(e,t){return null!=e&&ro(e,t,to)},uo=yi,ao=ni,lo=ai,so=Ii;var fo=function(e){return function(t){return null==t?void 0:t[e]}},co=Qi;var po=fo,ho=function(e){return function(t){return co(t,e)}},vo=yi,go=Ii;var mo=ci,bo=function(e,t){return uo(e)&&ao(t)?lo(so(e),t):function(r){var n=io(r,e);return void 0===n&&n===t?oo(r,e):no(t,n,3)}},yo=_e,wo=z,xo=function(e){return vo(e)?po(go(e)):ho(e)};var $o=function(e){return"function"==typeof e?e:null==e?yo:"object"==typeof e?wo(e)?bo(e[0],e[1]):mo(e):xo(e)},So=Pe,Eo=Se;var Mo=function(e,t){var r=-1,n=Eo(e)?Array(e.length):[];return So(e,(function(e,i,o){n[++r]=t(e,i,o)})),n},ko=Ie,Ro=$o,Lo=Mo,jo=z;var Oo=function(e,t){return(jo(e)?ko:Lo)(e,Ro(t))},Po=_t,_o=function(){try{var e=Po(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Do=_o;var Co=function(e,t,r){"__proto__"==t&&Do?Do(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},qo=Co,No=Be,Ao=Object.prototype.hasOwnProperty;var zo=function(e,t,r){var n=e[t];Ao.call(e,t)&&No(n,r)&&(void 0!==r||t in e)||qo(e,t,r)},Fo=zo,To=Co;var Io=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,u=t.length;++o<u;){var a=t[o],l=n?n(r[a],e[a],a,r,e):void 0;void 0===l&&(l=e[a]),i?To(r,a,l):Fo(r,a,l)}return r},Uo=Io,Bo=Re;var Qo=function(e,t){return e&&Uo(t,Bo(t),e)};var Go=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Ho=me,Wo=fe,Vo=Go,Yo=Object.prototype.hasOwnProperty;var Zo=function(e){if(!Ho(e))return Vo(e);var t=Wo(e),r=[];for(var n in e)("constructor"!=n||!t&&Yo.call(e,n))&&r.push(n);return r},Ko=le,Jo=Zo,Xo=Se;var eu=function(e){return Xo(e)?Ko(e,!0):Jo(e)},tu=Io,ru=eu;var nu=function(e,t){return e&&tu(t,ru(t),e)},iu={};!function(e,t){var r=v,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n?r.Buffer:void 0,u=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=u?u(r):new e.constructor(r);return e.copy(n),n}}({get exports(){return iu},set exports(e){iu=e}},iu);var ou=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},uu=Io,au=ln;var lu=function(e,t){return uu(e,au(e),t)},su=ce(Object.getPrototypeOf,Object),fu=Kr,cu=su,pu=ln,hu=rn,du=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)fu(t,pu(e)),e=cu(e);return t}:hu,vu=Io,gu=du;var mu=function(e,t){return vu(e,gu(e),t)},bu=en,yu=du,wu=eu;var xu=function(e){return bu(e,wu,yu)},$u=Object.prototype.hasOwnProperty;var Su=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&$u.call(e,"index")&&(r.index=e.index,r.input=e.input),r},Eu=Tr;var Mu=function(e){var t=new e.constructor(e.byteLength);return new Eu(t).set(new Eu(e)),t},ku=Mu;var Ru=function(e,t){var r=t?ku(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Lu=/\w*$/;var ju=function(e){var t=new e.constructor(e.source,Lu.exec(e));return t.lastIndex=e.lastIndex,t},Ou=g?g.prototype:void 0,Pu=Ou?Ou.valueOf:void 0;var _u=Mu;var Du=Mu,Cu=Ru,qu=ju,Nu=function(e){return Pu?Object(Pu.call(e)):{}},Au=function(e,t){var r=t?_u(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var zu=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return Du(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Cu(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Au(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return qu(e);case"[object Symbol]":return Nu(e)}},Fu=me,Tu=Object.create,Iu=function(){function e(){}return function(t){if(!Fu(t))return{};if(Tu)return Tu(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Uu=su,Bu=fe;var Qu=function(e){return"function"!=typeof e.constructor||Bu(e)?{}:Iu(Uu(e))},Gu=An,Hu=L;var Wu=function(e){return Hu(e)&&"[object Map]"==Gu(e)},Vu=Y,Yu=Z&&Z.isMap,Zu=Yu?Vu(Yu):Wu,Ku=An,Ju=L;var Xu=function(e){return Ju(e)&&"[object Set]"==Ku(e)},ea=Y,ta=Z&&Z.isSet,ra=ta?ea(ta):Xu,na=jr,ia=l,oa=zo,ua=Qo,aa=nu,la=iu,sa=ou,fa=lu,ca=mu,pa=pn,ha=xu,da=An,va=Su,ga=zu,ma=Qu,ba=z,ya=F,wa=Zu,xa=me,$a=ra,Sa=Re,Ea=eu,Ma="[object Arguments]",ka="[object Function]",Ra="[object Object]",La={};La[Ma]=La["[object Array]"]=La["[object ArrayBuffer]"]=La["[object DataView]"]=La["[object Boolean]"]=La["[object Date]"]=La["[object Float32Array]"]=La["[object Float64Array]"]=La["[object Int8Array]"]=La["[object Int16Array]"]=La["[object Int32Array]"]=La["[object Map]"]=La["[object Number]"]=La[Ra]=La["[object RegExp]"]=La["[object Set]"]=La["[object String]"]=La["[object Symbol]"]=La["[object Uint8Array]"]=La["[object Uint8ClampedArray]"]=La["[object Uint16Array]"]=La["[object Uint32Array]"]=!0,La["[object Error]"]=La[ka]=La["[object WeakMap]"]=!1;var ja=function e(t,r,n,i,o,u){var a,l=1&r,s=2&r,f=4&r;if(n&&(a=o?n(t,i,o,u):n(t)),void 0!==a)return a;if(!xa(t))return t;var c=ba(t);if(c){if(a=va(t),!l)return sa(t,a)}else{var p=da(t),h=p==ka||"[object GeneratorFunction]"==p;if(ya(t))return la(t,l);if(p==Ra||p==Ma||h&&!o){if(a=s||h?{}:ma(t),!l)return s?ca(t,aa(a,t)):fa(t,ua(a,t))}else{if(!La[p])return o?t:{};a=ga(t,p,l)}}u||(u=new na);var d=u.get(t);if(d)return d;u.set(t,a),$a(t)?t.forEach((function(i){a.add(e(i,r,n,i,t,u))})):wa(t)&&t.forEach((function(i,o){a.set(o,e(i,r,n,o,t,u))}));var v=c?void 0:(f?s?ha:pa:s?Ea:Sa)(t);return ia(v||t,(function(i,o){v&&(i=t[o=i]),oa(a,o,e(i,r,n,o,t,u))})),a},Oa=ja;var Pa=function(e){return Oa(e,5)},_a=R,Da=L;var Ca=function(e){return"number"==typeof e||Da(e)&&"[object Number]"==_a(e)},qa=/\s/;var Na=function(e){for(var t=e.length;t--&&qa.test(e.charAt(t)););return t},Aa=/^\s+/;var za=function(e){return e?e.slice(0,Na(e)+1).replace(Aa,""):e};var Fa=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o},Ta=Fa;var Ia=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Ta(e,t,r)};var Ua=function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var Ba=Ua,Qa=function(e){return e!=e},Ga=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1};var Ha=function(e,t,r){return t==t?Ga(e,t,r):Ba(e,Qa,r)},Wa=Ha;var Va=function(e,t){for(var r=e.length;r--&&Wa(t,e[r],0)>-1;);return r},Ya=Ha;var Za=function(e,t){for(var r=-1,n=e.length;++r<n&&Ya(t,e[r],0)>-1;);return r};var Ka=function(e){return e.split("")},Ja=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Xa=function(e){return Ja.test(e)},el="\\ud800-\\udfff",tl="["+el+"]",rl="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nl="\\ud83c[\\udffb-\\udfff]",il="[^"+el+"]",ol="(?:\\ud83c[\\udde6-\\uddff]){2}",ul="[\\ud800-\\udbff][\\udc00-\\udfff]",al="(?:"+rl+"|"+nl+")"+"?",ll="[\\ufe0e\\ufe0f]?",sl=ll+al+("(?:\\u200d(?:"+[il,ol,ul].join("|")+")"+ll+al+")*"),fl="(?:"+[il+rl+"?",rl,ol,ul,tl].join("|")+")",cl=RegExp(nl+"(?="+nl+")|"+fl+sl,"g");var pl=Ka,hl=Xa,dl=function(e){return e.match(cl)||[]};var vl=function(e){return hl(e)?dl(e):pl(e)},gl=_i,ml=za,bl=Ia,yl=Va,wl=Za,xl=vl,$l=Ci;var Sl=function(e,t,r){if((e=$l(e))&&(r||void 0===t))return ml(e);if(!e||!(t=gl(t)))return e;var n=xl(e),i=xl(t),o=wl(n,i),u=yl(n,i)+1;return bl(n,o,u).join("")};function El(e){return"[object String]"===Object.prototype.toString.call(e)}function Ml(e){let t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function kl(e){return"[object Object]"===Object.prototype.toString.call(e)}function Rl(e){if(kl(e)){for(let t in e)return!0;return!1}return!1}var Ll=R,jl=L;var Ol=function(e){return!0===e||!1===e||jl(e)&&"[object Boolean]"==Ll(e)};function Pl(e){return Ol(e)}function _l(e){return!(!El(e)||""===e)}function Dl(e){let t=!1;return _l(e)?t=!isNaN(Number(e)):function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)&&(t=!0),t}var Cl=za,ql=me,Nl=di,Al=/^[-+]0x[0-9a-f]+$/i,zl=/^0b[01]+$/i,Fl=/^0o[0-7]+$/i,Tl=parseInt;var Il=function(e){if("number"==typeof e)return e;if(Nl(e))return NaN;if(ql(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ql(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Cl(e);var r=zl.test(e);return r||Fl.test(e)?Tl(e.slice(2),r?2:8):Al.test(e)?NaN:+e},Ul=Il,Bl=1/0;var Ql=function(e){return e?(e=Ul(e))===Bl||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};function Gl(e){if(!Dl(e))return 0;return Ql(e)}var Hl=A,Wl=z,Vl=g?g.isConcatSpreadable:void 0;var Yl=Kr,Zl=function(e){return Wl(e)||Hl(e)||!!(Vl&&e&&e[Vl])};var Kl=function e(t,r,n,i,o){var u=-1,a=t.length;for(n||(n=Zl),o||(o=[]);++u<a;){var l=t[u];r>0&&n(l)?r>1?e(l,r-1,n,i,o):Yl(o,l):i||(o[o.length]=l)}return o};var Jl=di;var Xl=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=Jl(e),u=void 0!==t,a=null===t,l=t==t,s=Jl(t);if(!a&&!s&&!o&&e>t||o&&u&&l&&!a&&!s||n&&u&&l||!r&&l||!i)return 1;if(!n&&!o&&!s&&e<t||s&&r&&i&&!n&&!o||a&&r&&i||!u&&i||!l)return-1}return 0},es=Xl;var ts=Ie,rs=Qi,ns=$o,is=Mo,os=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},us=Y,as=function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,u=i.length,a=r.length;++n<u;){var l=es(i[n],o[n]);if(l)return n>=a?l:l*("desc"==r[n]?-1:1)}return e.index-t.index},ls=_e,ss=z;var fs=function(e,t,r){t=t.length?ts(t,(function(e){return ss(e)?function(t){return rs(t,1===e.length?e[0]:e)}:e})):[ls];var n=-1;t=ts(t,us(ns));var i=is(e,(function(e,r,i){return{criteria:ts(t,(function(t){return t(e)})),index:++n,value:e}}));return os(i,(function(e,t){return as(e,t,r)}))};var cs=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},ps=Math.max;var hs=function(e,t,r){return t=ps(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=ps(n.length-t,0),u=Array(o);++i<o;)u[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(u),cs(e,this,a)}};var ds=function(e){return function(){return e}},vs=_o,gs=vs?function(e,t){return vs(e,"toString",{configurable:!0,enumerable:!1,value:ds(t),writable:!0})}:_e,ms=Date.now;var bs=function(e){var t=0,r=0;return function(){var n=ms(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},ys=bs(gs),ws=_e,xs=hs,$s=ys;var Ss=Be,Es=Se,Ms=U,ks=me;var Rs=function(e,t,r){if(!ks(r))return!1;var n=typeof t;return!!("number"==n?Es(r)&&Ms(t,r.length):"string"==n&&t in r)&&Ss(r[t],e)},Ls=Kl,js=fs,Os=Rs,Ps=function(e,t){return $s(xs(e,t,ws),e+"")}((function(e,t){if(null==e)return[];var r=t.length;return r>1&&Os(e,t[0],t[1])?t=[]:r>2&&Os(t[0],t[1],t[2])&&(t=[t[0]]),js(e,Ls(t,1),[])})),_s=R,Ds=z,Cs=L;var qs=function(e){return"string"==typeof e||!Ds(e)&&Cs(e)&&"[object String]"==_s(e)},Ns=fo("length"),As="\\ud800-\\udfff",zs="["+As+"]",Fs="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ts="\\ud83c[\\udffb-\\udfff]",Is="[^"+As+"]",Us="(?:\\ud83c[\\udde6-\\uddff]){2}",Bs="[\\ud800-\\udbff][\\udc00-\\udfff]",Qs="(?:"+Fs+"|"+Ts+")"+"?",Gs="[\\ufe0e\\ufe0f]?",Hs=Gs+Qs+("(?:\\u200d(?:"+[Is,Us,Bs].join("|")+")"+Gs+Qs+")*"),Ws="(?:"+[Is+Fs+"?",Fs,Us,Bs,zs].join("|")+")",Vs=RegExp(Ts+"(?="+Ts+")|"+Ws+Hs,"g");var Ys=Ns,Zs=Xa,Ks=function(e){for(var t=Vs.lastIndex=0;Vs.test(e);)++t;return t};var Js=ge,Xs=An,ef=Se,tf=qs,rf=function(e){return Zs(e)?Ks(e):Ys(e)};var nf=function(e){if(null==e)return 0;if(ef(e))return tf(e)?rf(e):e.length;var t=Xs(e);return"[object Map]"==t||"[object Set]"==t?e.size:Js(e).length};function of(e,t){let r=null;if(_l(t)){let n=Hi(e,t);Dl(n)&&(r=Gl(n))}else Ml(t)&&(r=t(e));return r}function uf(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];Te(e,(function(e){let i=of(e,"depth"),o=of(e,t);return null===i||(!r&&null===o||void n.push([i,o]))}));let i=0;return Te(n,(e=>{Ca(e[1])||(i+=1)})),i===nf(n)&&(n=[]),n}var af={pickData:of,extractLtdtDepthAndData:uf,extractLtdtDataXY:function(e,t,r){let n=[];return Te(e,(function(e){let i=of(e,t),o=of(e,r);if(null===i||null===o)return!0;n.push([i,o])})),n=Ps(n,0),n}};let lf={eps:1e-6,g:9.81,rw:9.81,Pa:.10139616,assesment_rd:18.03986577,assesment_rsat:21.26597315};function sf(e){if(!Dl(e))return null;let t=(e=Gl(e))*lf.rw;return t/=1e3,t}function ff(e){if(!Dl(e))return null;let t=(e=Gl(e))*lf.assesment_rsat;t/=1e3;let r=sf(e);r/=1e3;let n=t-r;n=Math.max(n,0);let i=e*lf.assesment_rd;return i/=1e3,{sv:t,svp:n,svdry:i}}var cf={intrpDefPp:sf,intrpDefSvSvp:ff},pf=Math.ceil,hf=Math.max;var df=function(e,t,r,n){for(var i=-1,o=hf(pf((t-e)/(r||1)),0),u=Array(o);o--;)u[n?o:++i]=e,e+=r;return u},vf=Rs,gf=Ql;var mf=function(e){return function(t,r,n){return n&&"number"!=typeof n&&vf(t,r,n)&&(r=n=void 0),t=gf(t),void 0===r?(r=t,t=0):r=gf(r),n=void 0===n?t<r?1:-1:gf(n),df(t,r,n,e)}}(),bf=Hi;var yf=function(e,t){for(var r=-1,n=t.length,i=Array(n),o=null==e;++r<n;)i[r]=o?void 0:bf(e,t[r]);return i},wf=Kl;var xf=function(e){return(null==e?0:e.length)?wf(e,1):[]},$f=hs,Sf=ys;var Ef=function(e){return Sf($f(e,void 0,xf),e+"")},Mf=Ef(yf);function kf(e){return"[object Array]"===Object.prototype.toString.call(e)}function Rf(e){return!!function(e){return"[object Undefined]"===Object.prototype.toString.call(e)}(e)||(!!function(e){return"[object Null]"===Object.prototype.toString.call(e)}(e)||(!!function(e){if(kl(e)){for(let t in e)return!1;return!0}return!1}(e)||(!!function(e){return!(!El(e)||""!==e)}(e)||!!function(e){return!!kf(e)&&0===e.length}(e))))}function Lf(e){return!!kf(e)&&(0!==e.length&&(1!==e.length||!Rf(e[0])))}var jf=Ql;var Of=function(e){var t=jf(e),r=t%1;return t==t?r?t-r:t:0},Pf=Of;var _f=function(e){return"number"==typeof e&&e==Pf(e)};function Df(e){return!!Dl(e)&&(e=Gl(e),_f(e))}var Cf=Of,qf=Il,Nf=Ci,Af=v.isFinite,zf=Math.min;var Ff=function(e){var t=Math[e];return function(e,r){if(e=qf(e),(r=null==r?0:zf(Cf(r),292))&&Af(e)){var n=(Nf(e)+"e").split("e"),i=t(n[0]+"e"+(+n[1]+r));return+((n=(Nf(i)+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}("round");function Tf(e){if(!Dl(e))return 0;e=Gl(e);let t=Ff(e);return"0"===String(t)?0:t}function If(e){if(!Df(e))return!1;return Tf(e)>=0}var Uf=function(e,t){for(var r,n=-1,i=e.length;++n<i;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r};var Bf=function(e,t){var r=null==e?0:e.length;return r?Uf(e,t)/r:NaN},Qf=_e;var Gf=function(e){return Bf(e,Qf)},Hf=Pe;var Wf=tn,Vf=function(e,t){var r=[];return Hf(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r},Yf=$o,Zf=z;var Kf=function(e,t){return(Zf(e)?Wf:Vf)(e,Yf(t))};function Jf(e){if(!kf(e))return null;if(0===nf(e))return null;let t=function(e){return Lf(e)?(e=Pa(e),e=Kf(e,Dl),e=Oo(e,Gl)):[]}(e);return 0===nf(t)?null:Gf(t)}var Xf={};!function(e,t){e.exports=function(){var e=function(e,t){var r=Array.prototype.concat,n=Array.prototype.slice,i=Object.prototype.toString;function o(t,r){var n=t>r?t:r;return e.pow(10,17-~~(e.log(n>0?n:-n)*e.LOG10E))}var u=Array.isArray||function(e){return"[object Array]"===i.call(e)};function a(e){return"[object Function]"===i.call(e)}function l(e){return"number"==typeof e&&e-e==0}function s(e){return r.apply([],e)}function f(){return new f._init(arguments)}function c(){return 0}function p(){return 1}function h(e,t){return e===t?1:0}f.fn=f.prototype,f._init=function(e){if(u(e[0]))if(u(e[0][0])){a(e[1])&&(e[0]=f.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=a(e[1])?f.map(e[0],e[1]):e[0],this.length=1;else if(l(e[0]))this[0]=f.seq.apply(null,e),this.length=1;else{if(e[0]instanceof f)return f(e[0].toArray());this[0]=[],this.length=1}return this},f._init.prototype=f.prototype,f._init.constructor=f,f.utils={calcRdx:o,isArray:u,isFunction:a,isNumber:l,toVector:s},f._random_fn=e.random,f.setRandom=function(e){if("function"!=typeof e)throw new TypeError("fn is not a function");f._random_fn=e},f.extend=function(e){var t,r;if(1===arguments.length){for(r in e)f[r]=e[r];return this}for(t=1;t<arguments.length;t++)for(r in arguments[t])e[r]=arguments[t][r];return e},f.rows=function(e){return e.length||1},f.cols=function(e){return e[0].length||1},f.dimensions=function(e){return{rows:f.rows(e),cols:f.cols(e)}},f.row=function(e,t){return u(t)?t.map((function(t){return f.row(e,t)})):e[t]},f.rowa=function(e,t){return f.row(e,t)},f.col=function(e,t){if(u(t)){var r=f.arange(e.length).map((function(){return new Array(t.length)}));return t.forEach((function(t,n){f.arange(e.length).forEach((function(i){r[i][n]=e[i][t]}))})),r}for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=[e[i][t]];return n},f.cola=function(e,t){return f.col(e,t).map((function(e){return e[0]}))},f.diag=function(e){for(var t=f.rows(e),r=new Array(t),n=0;n<t;n++)r[n]=[e[n][n]];return r},f.antidiag=function(e){for(var t=f.rows(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r},f.transpose=function(e){var t,r,n,i,o,a=[];for(u(e[0])||(e=[e]),r=e.length,n=e[0].length,o=0;o<n;o++){for(t=new Array(r),i=0;i<r;i++)t[i]=e[i][o];a.push(t)}return 1===a.length?a[0]:a},f.map=function(e,t,r){var n,i,o,a,l;for(u(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),l=0;l<o;l++)a[n][l]=t(e[n][l],n,l);return 1===a.length?a[0]:a},f.cumreduce=function(e,t,r){var n,i,o,a,l;for(u(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),l=1;l<o;l++)a[n][l]=t(a[n][l-1],e[n][l]);return 1===a.length?a[0]:a},f.alter=function(e,t){return f.map(e,t,!0)},f.create=function(e,t,r){var n,i,o=new Array(e);for(a(t)&&(r=t,t=e),n=0;n<e;n++)for(o[n]=new Array(t),i=0;i<t;i++)o[n][i]=r(n,i);return o},f.zeros=function(e,t){return l(t)||(t=e),f.create(e,t,c)},f.ones=function(e,t){return l(t)||(t=e),f.create(e,t,p)},f.rand=function(e,t){return l(t)||(t=e),f.create(e,t,f._random_fn)},f.identity=function(e,t){return l(t)||(t=e),f.create(e,t,h)},f.symmetric=function(e){var t,r,n=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<n;t++)for(r=0;r<n;r++)if(e[r][t]!==e[t][r])return!1;return!0},f.clear=function(e){return f.alter(e,c)},f.seq=function(e,t,r,n){a(n)||(n=!1);var i,u=[],l=o(e,t),s=(t*l-e*l)/((r-1)*l),f=e;for(i=0;f<=t&&i<r;f=(e*l+s*l*++i)/l)u.push(n?n(f,i):f);return u},f.arange=function(e,r,n){var i,o=[];if(n=n||1,r===t&&(r=e,e=0),e===r||0===n)return[];if(e<r&&n<0)return[];if(e>r&&n>0)return[];if(n>0)for(i=e;i<r;i+=n)o.push(i);else for(i=e;i>r;i+=n)o.push(i);return o},f.slice=function(){function e(e,r,n,i){var o,u=[],a=e.length;if(r===t&&n===t&&i===t)return f.copy(e);if(i=i||1,(r=(r=r||0)>=0?r:a+r)===(n=(n=n||e.length)>=0?n:a+n)||0===i)return[];if(r<n&&i<0)return[];if(r>n&&i>0)return[];if(i>0)for(o=r;o<n;o+=i)u.push(e[o]);else for(o=r;o>n;o+=i)u.push(e[o]);return u}function r(t,r){var n,i;return l((r=r||{}).row)?l(r.col)?t[r.row][r.col]:e(f.rowa(t,r.row),(n=r.col||{}).start,n.end,n.step):l(r.col)?e(f.cola(t,r.col),(i=r.row||{}).start,i.end,i.step):(i=r.row||{},n=r.col||{},e(t,i.start,i.end,i.step).map((function(t){return e(t,n.start,n.end,n.step)})))}return r}(),f.sliceAssign=function(r,n,i){var o,u;if(l(n.row)){if(l(n.col))return r[n.row][n.col]=i;n.col=n.col||{},n.col.start=n.col.start||0,n.col.end=n.col.end||r[0].length,n.col.step=n.col.step||1,o=f.arange(n.col.start,e.min(r.length,n.col.end),n.col.step);var a=n.row;return o.forEach((function(e,t){r[a][e]=i[t]})),r}if(l(n.col)){n.row=n.row||{},n.row.start=n.row.start||0,n.row.end=n.row.end||r.length,n.row.step=n.row.step||1,u=f.arange(n.row.start,e.min(r[0].length,n.row.end),n.row.step);var s=n.col;return u.forEach((function(e,t){r[e][s]=i[t]})),r}return i[0].length===t&&(i=[i]),n.row.start=n.row.start||0,n.row.end=n.row.end||r.length,n.row.step=n.row.step||1,n.col.start=n.col.start||0,n.col.end=n.col.end||r[0].length,n.col.step=n.col.step||1,u=f.arange(n.row.start,e.min(r.length,n.row.end),n.row.step),o=f.arange(n.col.start,e.min(r[0].length,n.col.end),n.col.step),u.forEach((function(e,t){o.forEach((function(n,o){r[e][n]=i[t][o]}))})),r},f.diagonal=function(e){var t=f.zeros(e.length,e.length);return e.forEach((function(e,r){t[r][r]=e})),t},f.copy=function(e){return e.map((function(e){return l(e)?e:e.map((function(e){return e}))}))};var d=f.prototype;return d.length=0,d.push=Array.prototype.push,d.sort=Array.prototype.sort,d.splice=Array.prototype.splice,d.slice=Array.prototype.slice,d.toArray=function(){return this.length>1?n.call(this):n.call(this)[0]},d.map=function(e,t){return f(f.map(this,e,t))},d.cumreduce=function(e,t){return f(f.cumreduce(this,e,t))},d.alter=function(e){return f.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){d[e]=function(t){var r,n=this;return t?(setTimeout((function(){t.call(n,d[e].call(n))})),this):(r=f[e](this),u(r)?f(r):r)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){d[e]=function(t,r){var n=this;return r?(setTimeout((function(){r.call(n,d[e].call(n,t))})),this):f(f[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){d[e]=function(){return f(f[e].apply(null,arguments))}}(e[t])}("create zeros ones rand identity".split(" ")),f}(Math);return function(e,t){var r=e.utils.isFunction;function n(e,t){return e-t}function i(e,r,n){return t.max(r,t.min(e,n))}e.sum=function(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t},e.sumsqrd=function(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t},e.sumsqerr=function(t){for(var r,n=e.mean(t),i=0,o=t.length;--o>=0;)i+=(r=t[o]-n)*r;return i},e.sumrow=function(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t},e.product=function(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t},e.min=function(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t},e.max=function(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t},e.unique=function(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(r){var n=r.map(t.log),i=e.mean(n);return t.exp(i)},e.median=function(e){var t=e.length,r=e.slice().sort(n);return 1&t?r[t/2|0]:(r[t/2-1]+r[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,(function(e,t){return e+t}))},e.cumprod=function(t){return e.cumreduce(t,(function(e,t){return e*t}))},e.diff=function(e){var t,r=[],n=e.length;for(t=1;t<n;t++)r.push(e[t]-e[t-1]);return r},e.rank=function(e){var t,r=[],i={};for(t=0;t<e.length;t++)i[l=e[t]]?i[l]++:(i[l]=1,r.push(l));var o=r.sort(n),u={},a=1;for(t=0;t<o.length;t++){var l,s=i[l=o[t]],f=(a+(a+s-1))/2;u[l]=f,a+=s}return e.map((function(e){return u[e]}))},e.mode=function(e){var t,r=e.length,i=e.slice().sort(n),o=1,u=0,a=0,l=[];for(t=0;t<r;t++)i[t]===i[t+1]?o++:(o>u?(l=[i[t]],u=o,a=0):o===u&&(l.push(i[t]),a++),o=1);return 0===a?l[0]:l},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,r){return e.sumsqerr(t)/(t.length-(r?1:0))},e.pooledvariance=function(t){return t.reduce((function(t,r){return t+e.sumsqerr(r)}),0)/(t.reduce((function(e,t){return e+t.length}),0)-t.length)},e.deviation=function(t){for(var r=e.mean(t),n=t.length,i=new Array(n),o=0;o<n;o++)i[o]=t[o]-r;return i},e.stdev=function(r,n){return t.sqrt(e.variance(r,n))},e.pooledstdev=function(r){return t.sqrt(e.pooledvariance(r))},e.meandev=function(r){for(var n=e.mean(r),i=[],o=r.length-1;o>=0;o--)i.push(t.abs(r[o]-n));return e.mean(i)},e.meddev=function(r){for(var n=e.median(r),i=[],o=r.length-1;o>=0;o--)i.push(t.abs(r[o]-n));return e.median(i)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var r=e.length,i=e.slice().sort(n);return[i[t.round(r/4)-1],i[t.round(r/2)-1],i[t.round(3*r/4)-1]]},e.quantiles=function(e,r,o,u){var a,l,s,f,c,p=e.slice().sort(n),h=[r.length],d=e.length;for(void 0===o&&(o=3/8),void 0===u&&(u=3/8),a=0;a<r.length;a++)s=d*(l=r[a])+(o+l*(1-o-u)),f=t.floor(i(s,1,d-1)),c=i(s-f,0,1),h[a]=(1-c)*p[f-1]+c*p[f];return h},e.percentile=function(e,t,r){var i=e.slice().sort(n),o=t*(i.length+(r?1:-1))+(r?0:1),u=parseInt(o),a=o-u;return u+1<i.length?i[u-1]+a*(i[u]-i[u-1]):i[u-1]},e.percentileOfScore=function(e,t,r){var n,i,o=0,u=e.length,a=!1;for("strict"===r&&(a=!0),i=0;i<u;i++)n=e[i],(a&&n<t||!a&&n<=t)&&o++;return o/u},e.histogram=function(r,n){n=n||4;var i,o=e.min(r),u=(e.max(r)-o)/n,a=r.length,l=[];for(i=0;i<n;i++)l[i]=0;for(i=0;i<a;i++)l[t.min(t.floor((r[i]-o)/u),n-1)]+=1;return l},e.covariance=function(t,r){var n,i=e.mean(t),o=e.mean(r),u=t.length,a=new Array(u);for(n=0;n<u;n++)a[n]=(t[n]-i)*(r[n]-o);return e.sum(a)/(u-1)},e.corrcoeff=function(t,r){return e.covariance(t,r)/e.stdev(t,1)/e.stdev(r,1)},e.spearmancoeff=function(t,r){return t=e.rank(t),r=e.rank(r),e.corrcoeff(t,r)},e.stanMoment=function(r,n){for(var i=e.mean(r),o=e.stdev(r),u=r.length,a=0,l=0;l<u;l++)a+=t.pow((r[l]-i)/o,n);return a/r.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var o=e.prototype;!function(t){for(var n=0;n<t.length;n++)!function(t){o[t]=function(n,i){var u=[],a=0,l=this;if(r(n)&&(i=n,n=!1),i)return setTimeout((function(){i.call(l,o[t].call(l,n))})),this;if(this.length>1){for(l=!0===n?this:this.transpose();a<l.length;a++)u[a]=e[t](l[a]);return u}return e[t](this[0],n)}}(t[n])}("cumsum cumprod".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){o[t]=function(n,i){var u=[],a=0,l=this;if(r(n)&&(i=n,n=!1),i)return setTimeout((function(){i.call(l,o[t].call(l,n))})),this;if(this.length>1){for("sumrow"!==t&&(l=!0===n?this:this.transpose());a<l.length;a++)u[a]=e[t](l[a]);return!0===n?e[t](e.utils.toVector(u)):u}return e[t](this[0],n)}}(t[n])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){o[t]=function(){var n,i=[],u=0,a=this,l=Array.prototype.slice.call(arguments);if(r(l[l.length-1])){n=l[l.length-1];var s=l.slice(0,l.length-1);return setTimeout((function(){n.call(a,o[t].apply(a,s))})),this}n=void 0;var f=function(r){return e[t].apply(a,[r].concat(l))};if(this.length>1){for(a=a.transpose();u<a.length;u++)i[u]=f(a[u]);return i}return f(this[0])}}(t[n])}("quantiles percentileOfScore".split(" "))}(e,Math),function(e,t){e.gammaln=function(e){var r,n,i,o=0,u=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=1.000000000190015;for(i=(n=r=e)+5.5,i-=(r+.5)*t.log(i);o<6;o++)a+=u[o]/++n;return t.log(2.5066282746310007*a/r)-i},e.loggam=function(e){var r,n,i,o,u,a,l,s=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(r=e,l=0,1==e||2==e)return 0;for(e<=7&&(r=e+(l=t.floor(7-e))),n=1/(r*r),i=2*t.PI,u=s[9],a=8;a>=0;a--)u*=n,u+=s[a];if(o=u/r+.5*t.log(i)+(r-.5)*t.log(r)-r,e<=7)for(a=1;a<=l;a++)o-=t.log(r-1),r-=1;return o},e.gammafn=function(e){var r,n,i,o,u=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],a=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,s=0,f=0,c=0,p=e;if(e>171.6243769536076)return 1/0;if(p<=0){if(!(o=p%1+36e-17))return 1/0;l=(1&p?-1:1)*t.PI/t.sin(t.PI*o),p=1-p}for(i=p,n=p<1?p++:(p-=s=(0|p)-1)-1,r=0;r<8;++r)c=(c+u[r])*n,f=f*n+a[r];if(o=c/f+1,i<p)o/=i;else if(i>p)for(r=0;r<s;++r)o*=p,p++;return l&&(o=l/o),o},e.gammap=function(t,r){return e.lowRegGamma(t,r)*e.gammafn(t)},e.lowRegGamma=function(r,n){var i,o=e.gammaln(r),u=r,a=1/r,l=a,s=n+1-r,f=1/1e-30,c=1/s,p=c,h=1,d=-~(8.5*t.log(r>=1?r:1/r)+.4*r+17);if(n<0||r<=0)return NaN;if(n<r+1){for(;h<=d;h++)a+=l*=n/++u;return a*t.exp(-n+r*t.log(n)-o)}for(;h<=d;h++)p*=(c=1/(c=(i=-h*(h-r))*c+(s+=2)))*(f=s+i/f);return 1-p*t.exp(-n+r*t.log(n)-o)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(r,n){return r>170||n>170?t.exp(e.combinationln(r,n)):e.factorial(r)/e.factorial(n)/e.factorial(r-n)},e.combinationln=function(t,r){return e.factorialln(t)-e.factorialln(r)-e.factorialln(t-r)},e.permutation=function(t,r){return e.factorial(t)/e.factorial(t-r)},e.betafn=function(r,n){if(!(r<=0||n<=0))return r+n>170?t.exp(e.betaln(r,n)):e.gammafn(r)*e.gammafn(n)/e.gammafn(r+n)},e.betaln=function(t,r){return e.gammaln(t)+e.gammaln(r)-e.gammaln(t+r)},e.betacf=function(e,r,n){var i,o,u,a,l=1e-30,s=1,f=r+n,c=r+1,p=r-1,h=1,d=1-f*e/c;for(t.abs(d)<l&&(d=l),a=d=1/d;s<=100&&(d=1+(o=s*(n-s)*e/((p+(i=2*s))*(r+i)))*d,t.abs(d)<l&&(d=l),h=1+o/h,t.abs(h)<l&&(h=l),a*=(d=1/d)*h,d=1+(o=-(r+s)*(f+s)*e/((r+i)*(c+i)))*d,t.abs(d)<l&&(d=l),h=1+o/h,t.abs(h)<l&&(h=l),a*=u=(d=1/d)*h,!(t.abs(u-1)<3e-7));s++);return a},e.gammapinv=function(r,n){var i,o,u,a,l,s,f=0,c=n-1,p=1e-8,h=e.gammaln(n);if(r>=1)return t.max(100,n+100*t.sqrt(n));if(r<=0)return 0;for(n>1?(l=t.log(c),s=t.exp(c*(l-1)-h),a=r<.5?r:1-r,i=(2.30753+.27061*(o=t.sqrt(-2*t.log(a))))/(1+o*(.99229+.04481*o))-o,r<.5&&(i=-i),i=t.max(.001,n*t.pow(1-1/(9*n)-i/(3*t.sqrt(n)),3))):i=r<(o=1-n*(.253+.12*n))?t.pow(r/o,1/n):1-t.log(1-(r-o)/(1-o));f<12;f++){if(i<=0)return 0;if((i-=o=(u=(e.lowRegGamma(n,i)-r)/(o=n>1?s*t.exp(-(i-c)+c*(t.log(i)-l)):t.exp(-i+c*t.log(i)-h)))/(1-.5*t.min(1,u*((n-1)/i-1))))<=0&&(i=.5*(i+o)),t.abs(o)<p*i)break}return i},e.erf=function(e){var r,n,i,o,u=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],a=u.length-1,l=!1,s=0,f=0;for(e<0&&(e=-e,l=!0),n=4*(r=2/(2+e))-2;a>0;a--)i=s,s=n*s-f+u[a],f=i;return o=r*t.exp(-e*e+.5*(u[0]+n*s)-f),l?o-1:1-o},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(r){var n,i,o,u,a=0;if(r>=2)return-100;if(r<=0)return 100;for(u=r<1?r:2-r,n=-.70711*((2.30753+.27061*(o=t.sqrt(-2*t.log(u/2))))/(1+o*(.99229+.04481*o))-o);a<2;a++)n+=(i=e.erfc(n)-u)/(1.1283791670955126*t.exp(-n*n)-n*i);return r<1?n:-n},e.ibetainv=function(r,n,i){var o,u,a,l,s,f,c,p,h,d,v=1e-8,g=n-1,m=i-1,b=0;if(r<=0)return 0;if(r>=1)return 1;for(n>=1&&i>=1?(a=r<.5?r:1-r,f=(2.30753+.27061*(l=t.sqrt(-2*t.log(a))))/(1+l*(.99229+.04481*l))-l,r<.5&&(f=-f),c=(f*f-3)/6,p=2/(1/(2*n-1)+1/(2*i-1)),h=f*t.sqrt(c+p)/p-(1/(2*i-1)-1/(2*n-1))*(c+5/6-2/(3*p)),f=n/(n+i*t.exp(2*h))):(o=t.log(n/(n+i)),u=t.log(i/(n+i)),f=r<(l=t.exp(n*o)/n)/(h=l+(s=t.exp(i*u)/i))?t.pow(n*h*r,1/n):1-t.pow(i*h*(1-r),1/i)),d=-e.gammaln(n)-e.gammaln(i)+e.gammaln(n+i);b<10;b++){if(0===f||1===f)return f;if((f-=l=(s=(e.ibeta(f,n,i)-r)/(l=t.exp(g*t.log(f)+m*t.log(1-f)+d)))/(1-.5*t.min(1,s*(g/f-m/(1-f)))))<=0&&(f=.5*(f+l)),f>=1&&(f=.5*(f+l+1)),t.abs(l)<v*f&&b>0)break}return f},e.ibeta=function(r,n,i){var o=0===r||1===r?0:t.exp(e.gammaln(n+i)-e.gammaln(n)-e.gammaln(i)+n*t.log(r)+i*t.log(1-r));return!(r<0||r>1)&&(r<(n+1)/(n+i+2)?o*e.betacf(r,n,i)/n:1-o*e.betacf(1-r,i,n)/i)},e.randn=function(r,n){var i,o,u,a,l;if(n||(n=r),r)return e.create(r,n,(function(){return e.randn()}));do{i=e._random_fn(),o=1.7156*(e._random_fn()-.5),l=(u=i-.449871)*u+(a=t.abs(o)+.386595)*(.196*a-.25472*u)}while(l>.27597&&(l>.27846||o*o>-4*t.log(i)*i*i));return o/i},e.randg=function(r,n,i){var o,u,a,l,s,f,c=r;if(i||(i=n),r||(r=1),n)return(f=e.zeros(n,i)).alter((function(){return e.randg(r)})),f;r<1&&(r+=1),o=r-1/3,u=1/t.sqrt(9*o);do{do{l=1+u*(s=e.randn())}while(l<=0);l*=l*l,a=e._random_fn()}while(a>1-.331*t.pow(s,4)&&t.log(a)>.5*s*s+o*(1-l+t.log(l)));if(r==c)return o*l;do{a=e._random_fn()}while(0===a);return t.pow(a,1/c)*o*l},function(t){for(var r=0;r<t.length;r++)!function(t){e.fn[t]=function(){return e(e.map(this,(function(r){return e[t](r)})))}}(t[r])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[r])}("randn".split(" "))}(e,Math),function(e,t){function r(e,r,n,i){for(var o,u=0,a=1,l=1,s=1,f=0,c=0;t.abs((l-c)/l)>i;)c=l,a=s+(o=-(r+f)*(r+n+f)*e/(r+2*f)/(r+2*f+1))*a,l=(u=l+o*u)+(o=(f+=1)*(n-f)*e/(r+2*f-1)/(r+2*f))*l,u/=s=a+o*s,a/=s,l/=s,s=1;return l/r}function n(e){return e/t.abs(e)}function i(r,n,i){var o=12,u=6,a=-30,l=-50,s=60,f=8,c=3,p=2,h=3,d=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],v=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],g=.5*r;if(g>=f)return 1;var m,b=2*e.normal.cdf(g,0,1,1,0)-1;b=b>=t.exp(l/i)?t.pow(b,i):0;for(var y=g,w=(f-g)/(m=r>c?p:h),x=y+w,$=0,S=i-1,E=1;E<=m;E++){for(var M=0,k=.5*(x+y),R=.5*(x-y),L=1;L<=o;L++){var j,O=k+R*(u<L?d[(j=o-L+1)-1]:-d[(j=L)-1]),P=O*O;if(P>s)break;var _=2*e.normal.cdf(O,0,1,1,0)*.5-2*e.normal.cdf(O,r,1,1,0)*.5;_>=t.exp(a/S)&&(M+=_=v[j-1]*t.exp(-.5*P)*t.pow(_,S))}$+=M*=2*R*i/t.sqrt(2*t.PI),y=x,x+=w}return(b+=$)<=t.exp(a/n)?0:(b=t.pow(b,n))>=1?1:b}function o(e,r,n){var i=.322232421088,o=.099348462606,u=-1,a=.588581570495,l=-.342242088547,s=.531103462366,f=-.204231210125,c=.10353775285,p=-453642210148e-16,h=.0038560700634,d=.8832,v=.2368,g=1.214,m=1.208,b=1.4142,y=120,w=.5-.5*e,x=t.sqrt(t.log(1/(w*w))),$=x+((((x*p+f)*x+l)*x+u)*x+i)/((((x*h+c)*x+s)*x+a)*x+o);n<y&&($+=($*$*$+$)/n/4);var S=d-v*$;return n<y&&(S+=-g/n+m*$/n),$*(S*t.log(r-1)+b)}!function(t){for(var r=0;r<t.length;r++)!function(t){e[t]=function e(t,r,n){return this instanceof e?(this._a=t,this._b=r,this._c=n,this):new e(t,r,n)},e.fn[t]=function(r,n,i){var o=e[t](r,n,i);return o.data=this,o},e[t].prototype.sample=function(r){var n=this._a,i=this._b,o=this._c;return r?e.alter(r,(function(){return e[t].sample(n,i,o)})):e[t].sample(n,i,o)},function(r){for(var n=0;n<r.length;n++)!function(r){e[t].prototype[r]=function(n){var i=this._a,o=this._b,u=this._c;return n||0===n||(n=this.data),"number"!=typeof n?e.fn.map.call(n,(function(n){return e[t][r](n,i,o,u)})):e[t][r](n,i,o,u)}}(r[n])}("pdf cdf inv".split(" ")),function(r){for(var n=0;n<r.length;n++)!function(r){e[t].prototype[r]=function(){return e[t][r](this._a,this._b,this._c)}}(r[n])}("mean median mode variance".split(" "))}(t[r])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(r,n,i){return r>1||r<0?0:1==n&&1==i?1:n<512&&i<512?t.pow(r,n-1)*t.pow(1-r,i-1)/e.betafn(n,i):t.exp((n-1)*t.log(r)+(i-1)*t.log(1-r)-e.betaln(n,i))},cdf:function(t,r,n){return t>1||t<0?1*(t>1):e.ibeta(t,r,n)},inv:function(t,r,n){return e.ibetainv(t,r,n)},mean:function(e,t){return e/(e+t)},median:function(t,r){return e.ibetainv(.5,t,r)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,r){var n=e.randg(t);return n/(n+e.randg(r))},variance:function(e,r){return e*r/(t.pow(e+r,2)*(e+r+1))}}),e.extend(e.centralF,{pdf:function(r,n,i){var o;return r<0?0:n<=2?0===r&&n<2?1/0:0===r&&2===n?1:1/e.betafn(n/2,i/2)*t.pow(n/i,n/2)*t.pow(r,n/2-1)*t.pow(1+n/i*r,-(n+i)/2):(o=n*r/(i+r*n),n*(i/(i+r*n))/2*e.binomial.pdf((n-2)/2,(n+i-2)/2,o))},cdf:function(t,r,n){return t<0?0:e.ibeta(r*t/(r*t+n),r/2,n/2)},inv:function(t,r,n){return n/(r*(1/e.ibetainv(t,r/2,n/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,r){return 2*e.randg(t/2)/t/(2*e.randg(r/2)/r)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,r,n){return n<0?0:n/(t.pow(e-r,2)+t.pow(n,2))/t.PI},cdf:function(e,r,n){return t.atan((e-r)/n)/t.PI+.5},inv:function(e,r,n){return r+n*t.tan(t.PI*(e-.5))},median:function(e){return e},mode:function(e){return e},sample:function(r,n){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*n+r}}),e.extend(e.chisquare,{pdf:function(r,n){return r<0?0:0===r&&2===n?.5:t.exp((n/2-1)*t.log(r)-r/2-n/2*t.log(2)-e.gammaln(n/2))},cdf:function(t,r){return t<0?0:e.lowRegGamma(r/2,t/2)},inv:function(t,r){return 2*e.gammapinv(t,.5*r)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,r){return e<0?0:r*t.exp(-r*e)},cdf:function(e,r){return e<0?0:1-t.exp(-r*e)},inv:function(e,r){return-t.log(1-e)/r},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(){return 0},sample:function(r){return-1/r*t.log(e._random_fn())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(r,n,i){return r<0?0:0===r&&1===n?1/i:t.exp((n-1)*t.log(r)-r/i-e.gammaln(n)-n*t.log(i))},cdf:function(t,r,n){return t<0?0:e.lowRegGamma(r,t/n)},inv:function(t,r,n){return e.gammapinv(t,r)*n},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,r){return e.randg(t)*r},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(r,n,i){return r<=0?0:t.exp(-(n+1)*t.log(r)-i/r-e.gammaln(n)+n*t.log(i))},cdf:function(t,r,n){return t<=0?0:1-e.lowRegGamma(r,n/t)},inv:function(t,r,n){return n/e.gammapinv(1-t,r)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,r){return r/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,r,n){return 0===e&&1===r?n:1===e&&1===n?r:t.exp(t.log(r)+t.log(n)+(r-1)*t.log(e)+(n-1)*t.log(1-t.pow(e,r)))},cdf:function(e,r,n){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,r),n)},inv:function(e,r,n){return t.pow(1-t.pow(1-e,1/n),1/r)},mean:function(t,r){return r*e.gammafn(1+1/t)*e.gammafn(r)/e.gammafn(1+1/t+r)},median:function(e,r){return t.pow(1-t.pow(2,-1/r),1/e)},mode:function(e,r){if(e>=1&&r>=1&&1!==e&&1!==r)return t.pow((e-1)/(e*r-1),1/e)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,r,n){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(n)-t.pow(t.log(e)-r,2)/(2*n*n))},cdf:function(r,n,i){return r<0?0:.5+.5*e.erf((t.log(r)-n)/t.sqrt(2*i*i))},inv:function(r,n,i){return t.exp(-1.4142135623730951*i*e.erfcinv(2*r)+n)},mean:function(e,r){return t.exp(e+r*r/2)},median:function(e){return t.exp(e)},mode:function(e,r){return t.exp(e-r*r)},sample:function(r,n){return t.exp(e.randn()*n+r)},variance:function(e,r){return(t.exp(r*r)-1)*t.exp(2*e+r*r)}}),e.extend(e.noncentralt,{pdf:function(r,n,i){var o=1e-14;return t.abs(i)<o?e.studentt.pdf(r,n):t.abs(r)<o?t.exp(e.gammaln((n+1)/2)-i*i/2-.5*t.log(t.PI*n)-e.gammaln(n/2)):n/r*(e.noncentralt.cdf(r*t.sqrt(1+2/n),n+2,i)-e.noncentralt.cdf(r,n,i))},cdf:function(r,n,i){var o=1e-14,u=200;if(t.abs(i)<o)return e.studentt.cdf(r,n);var a=!1;r<0&&(a=!0,i=-i);for(var l=e.normal.cdf(-i,0,1),s=o+1,f=s,c=r*r/(r*r+n),p=0,h=t.exp(-i*i/2),d=t.exp(-i*i/2-.5*t.log(2)-e.gammaln(1.5))*i;p<u||f>o||s>o;)f=s,p>0&&(h*=i*i/(2*p),d*=i*i/(2*(p+.5))),l+=.5*(s=h*e.beta.cdf(c,p+.5,n/2)+d*e.beta.cdf(c,p+1,n/2)),p++;return a?1-l:l}}),e.extend(e.normal,{pdf:function(e,r,n){return t.exp(-.5*t.log(2*t.PI)-t.log(n)-t.pow(e-r,2)/(2*n*n))},cdf:function(r,n,i){return.5*(1+e.erf((r-n)/t.sqrt(2*i*i)))},inv:function(t,r,n){return-1.4142135623730951*n*e.erfcinv(2*t)+r},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},sample:function(t,r){return e.randn()*r+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,r,n){return e<r?0:n*t.pow(r,n)/t.pow(e,n+1)},cdf:function(e,r,n){return e<r?0:1-t.pow(r/e,n)},inv:function(e,r,n){return r/t.pow(1-e,1/n)},mean:function(e,r){if(!(r<=1))return r*t.pow(e,r)/(r-1)},median:function(e,r){return e*(r*t.SQRT2)},mode:function(e){return e},variance:function(e,r){if(!(r<=2))return e*e*r/(t.pow(r-1,2)*(r-2))}}),e.extend(e.studentt,{pdf:function(r,n){return n=n>1e100?1e100:n,1/(t.sqrt(n)*e.betafn(.5,n/2))*t.pow(1+r*r/n,-(n+1)/2)},cdf:function(r,n){var i=n/2;return e.ibeta((r+t.sqrt(r*r+n))/(2*t.sqrt(r*r+n)),i,i)},inv:function(r,n){var i=e.ibetainv(2*t.min(r,1-r),.5*n,.5);return i=t.sqrt(n*(1-i)/i),r>.5?i:-i},mean:function(e){return e>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(r){return e.randn()*t.sqrt(r/(2*e.randg(r/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,r,n){return e<0||r<0||n<0?0:n/r*t.pow(e/r,n-1)*t.exp(-t.pow(e/r,n))},cdf:function(e,r,n){return e<0?0:1-t.exp(-t.pow(e/r,n))},inv:function(e,r,n){return r*t.pow(-t.log(1-e),1/n)},mean:function(t,r){return t*e.gammafn(1+1/r)},median:function(e,r){return e*t.pow(t.log(2),1/r)},mode:function(e,r){return r<=1?0:e*t.pow((r-1)/r,1/r)},sample:function(r,n){return r*t.pow(-t.log(e._random_fn()),1/n)},variance:function(r,n){return r*r*e.gammafn(1+2/n)-t.pow(e.weibull.mean(r,n),2)}}),e.extend(e.uniform,{pdf:function(e,t,r){return e<t||e>r?0:1/(r-t)},cdf:function(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1},inv:function(e,t,r){return t+e*(r-t)},mean:function(e,t){return.5*(e+t)},median:function(t,r){return e.mean(t,r)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,r){return t/2+r/2+(r/2-t/2)*(2*e._random_fn()-1)},variance:function(e,r){return t.pow(r-e,2)/12}}),e.extend(e.binomial,{pdf:function(r,n,i){return 0===i||1===i?n*i===r?1:0:e.combination(n,r)*t.pow(i,r)*t.pow(1-i,n-r)},cdf:function(n,i,o){var u,a=1e-10;if(n<0)return 0;if(n>=i)return 1;if(o<0||o>1||i<=0)return NaN;var l=o,s=(n=t.floor(n))+1,f=i-n,c=s+f,p=t.exp(e.gammaln(c)-e.gammaln(f)-e.gammaln(s)+s*t.log(l)+f*t.log(1-l));return u=l<(s+1)/(c+2)?p*r(l,s,f,a):1-p*r(1-l,f,s,a),t.round(1/a*(1-u))/(1/a)}}),e.extend(e.negbin,{pdf:function(r,n,i){return r===r>>>0&&(r<0?0:e.combination(r+n-1,n-1)*t.pow(1-i,r)*t.pow(i,n))},cdf:function(t,r,n){var i=0,o=0;if(t<0)return 0;for(;o<=t;o++)i+=e.negbin.pdf(o,r,n);return i}}),e.extend(e.hypgeom,{pdf:function(r,n,i,o){if(r!=r|0)return!1;if(r<0||r<i-(n-o))return 0;if(r>o||r>i)return 0;if(2*i>n)return 2*o>n?e.hypgeom.pdf(n-i-o+r,n,n-i,n-o):e.hypgeom.pdf(o-r,n,n-i,o);if(2*o>n)return e.hypgeom.pdf(i-r,n,i,n-o);if(i<o)return e.hypgeom.pdf(r,n,o,i);for(var u=1,a=0,l=0;l<r;l++){for(;u>1&&a<o;)u*=1-i/(n-a),a++;u*=(o-l)*(i-l)/((l+1)*(n-i-o+l+1))}for(;a<o;a++)u*=1-i/(n-a);return t.min(1,t.max(0,u))},cdf:function(r,n,i,o){if(r<0||r<i-(n-o))return 0;if(r>=o||r>=i)return 1;if(2*i>n)return 2*o>n?e.hypgeom.cdf(n-i-o+r,n,n-i,n-o):1-e.hypgeom.cdf(o-r-1,n,n-i,o);if(2*o>n)return 1-e.hypgeom.cdf(i-r-1,n,i,n-o);if(i<o)return e.hypgeom.cdf(r,n,o,i);for(var u=1,a=1,l=0,s=0;s<r;s++){for(;u>1&&l<o;){var f=1-i/(n-l);a*=f,u*=f,l++}u+=a*=(o-s)*(i-s)/((s+1)*(n-i-o+s+1))}for(;l<o;l++)u*=1-i/(n-l);return t.min(1,t.max(0,u))}}),e.extend(e.poisson,{pdf:function(r,n){return n<0||r%1!=0||r<0?0:t.pow(n,r)*t.exp(-n)/e.factorial(r)},cdf:function(t,r){var n=[],i=0;if(t<0)return 0;for(;i<=t;i++)n.push(e.poisson.pdf(i,r));return e.sum(n)},mean:function(e){return e},variance:function(e){return e},sampleSmall:function(r){var n=1,i=0,o=t.exp(-r);do{i++,n*=e._random_fn()}while(n>o);return i-1},sampleLarge:function(r){var n,i,o,u,a,l,s,f,c,p,h=r;for(u=t.sqrt(h),a=t.log(h),l=.02483*(s=.931+2.53*u)-.059,f=1.1239+1.1328/(s-3.4),c=.9277-3.6224/(s-2);;){if(i=t.random()-.5,o=t.random(),p=.5-t.abs(i),n=t.floor((2*l/p+s)*i+h+.43),p>=.07&&o<=c)return n;if(!(n<0||p<.013&&o>p)&&t.log(o)+t.log(f)-t.log(l/(p*p)+s)<=n*a-h-e.loggam(n+1))return n}},sample:function(e){return e<10?this.sampleSmall(e):this.sampleLarge(e)}}),e.extend(e.triangular,{pdf:function(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))},cdf:function(e,r,n,i){return n<=r||i<r||i>n?NaN:e<=r?0:e>=n?1:e<=i?t.pow(e-r,2)/((n-r)*(i-r)):1-t.pow(n-e,2)/((n-r)*(n-i))},inv:function(e,r,n,i){return n<=r||i<r||i>n?NaN:e<=(i-r)/(n-r)?r+(n-r)*t.sqrt(e*((i-r)/(n-r))):r+(n-r)*(1-t.sqrt((1-e)*(1-(i-r)/(n-r))))},mean:function(e,t,r){return(e+t+r)/3},median:function(e,r,n){return n<=(e+r)/2?r-t.sqrt((r-e)*(r-n))/t.sqrt(2):n>(e+r)/2?e+t.sqrt((r-e)*(n-e))/t.sqrt(2):void 0},mode:function(e,t,r){return r},sample:function(r,n,i){var o=e._random_fn();return o<(i-r)/(n-r)?r+t.sqrt(o*(n-r)*(i-r)):n-t.sqrt((1-o)*(n-r)*(n-i))},variance:function(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}}),e.extend(e.arcsine,{pdf:function(e,r,n){return n<=r?NaN:e<=r||e>=n?0:2/t.PI*t.pow(t.pow(n-r,2)-t.pow(2*e-r-n,2),-.5)},cdf:function(e,r,n){return e<r?0:e<n?2/t.PI*t.asin(t.sqrt((e-r)/(n-r))):1},inv:function(e,r,n){return r+(.5-.5*t.cos(t.PI*e))*(n-r)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(r,n){return(r+n)/2+(n-r)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,r){return r<=e?NaN:t.pow(r-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,r,n){return n<=0?0:t.exp(-t.abs(e-r)/n)/(2*n)},cdf:function(e,r,n){return n<=0?0:e<r?.5*t.exp((e-r)/n):1-.5*t.exp(-(e-r)/n)},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},variance:function(e,t){return 2*t*t},sample:function(r,i){var o=e._random_fn()-.5;return r-i*n(o)*t.log(1-2*t.abs(o))}}),e.extend(e.tukey,{cdf:function(r,n,o){var u=1,a=n,l=16,s=8,f=-30,c=1e-14,p=100,h=800,d=5e3,v=25e3,g=1,m=.5,b=.25,y=.125,w=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],x=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(r<=0)return 0;if(o<2||u<1||a<2)return NaN;if(!Number.isFinite(r))return 1;if(o>v)return i(r,u,a);var $,S=.5*o,E=S*t.log(o)-o*t.log(2)-e.gammaln(S),M=S-1,k=.25*o;$=o<=p?g:o<=h?m:o<=d?b:y,E+=t.log($);for(var R=0,L=1;L<=50;L++){for(var j=0,O=(2*L-1)*$,P=1;P<=l;P++){var _,D;s<P?(_=P-s-1,D=E+M*t.log(O+w[_]*$)-(w[_]*$+O)*k):(_=P-1,D=E+M*t.log(O-w[_]*$)+(w[_]*$-O)*k),D>=f&&(j+=i(s<P?r*t.sqrt(.5*(w[_]*$+O)):r*t.sqrt(.5*(-w[_]*$+O)),u,a)*x[_]*t.exp(D))}if(L*$>=1&&j<=c)break;R+=j}if(j>c)throw new Error("tukey.cdf failed to converge");return R>1&&(R=1),R},inv:function(r,n,i){var u=1e-4,a=50;if(i<2||n<2)return NaN;if(r<0||r>1)return NaN;if(0===r)return 0;if(1===r)return 1/0;var l,s=o(r,n,i),f=e.tukey.cdf(s,n,i)-r;l=f>0?t.max(0,s-1):s+1;for(var c,p=e.tukey.cdf(l,n,i)-r,h=1;h<a;h++)if(c=l-p*(l-s)/(p-f),f=p,s=l,c<0&&(c=0,p=-r),p=e.tukey.cdf(c,n,i)-r,l=c,t.abs(l-s)<u)return c;throw new Error("tukey.inv failed to converge")}})}(e,Math),function(e,t){var r=Array.prototype.push,n=e.utils.isArray;function i(t){return n(t)||t instanceof e}e.extend({add:function(t,r){return i(r)?(i(r[0])||(r=[r]),e.map(t,(function(e,t,n){return e+r[t][n]}))):e.map(t,(function(e){return e+r}))},subtract:function(t,r){return i(r)?(i(r[0])||(r=[r]),e.map(t,(function(e,t,n){return e-r[t][n]||0}))):e.map(t,(function(e){return e-r}))},divide:function(t,r){return i(r)?(i(r[0])||(r=[r]),e.multiply(t,e.inv(r))):e.map(t,(function(e){return e/r}))},multiply:function(t,r){var n,o,u,a,l,s,f,c;if(void 0===t.length&&void 0===r.length)return t*r;if(l=t.length,s=t[0].length,f=e.zeros(l,u=i(r)?r[0].length:s),c=0,i(r)){for(;c<u;c++)for(n=0;n<l;n++){for(a=0,o=0;o<s;o++)a+=t[n][o]*r[o][c];f[n][c]=a}return 1===l&&1===c?f[0][0]:f}return e.map(t,(function(e){return e*r}))},outer:function(t,r){return e.multiply(t.map((function(e){return[e]})),[r])},dot:function(t,r){i(t[0])||(t=[t]),i(r[0])||(r=[r]);for(var n,o,u=1===t[0].length&&1!==t.length?e.transpose(t):t,a=1===r[0].length&&1!==r.length?e.transpose(r):r,l=[],s=0,f=u.length,c=u[0].length;s<f;s++){for(l[s]=[],n=0,o=0;o<c;o++)n+=u[s][o]*a[s][o];l[s]=n}return 1===l.length?l[0]:l},pow:function(r,n){return e.map(r,(function(e){return t.pow(e,n)}))},exp:function(r){return e.map(r,(function(e){return t.exp(e)}))},log:function(r){return e.map(r,(function(e){return t.log(e)}))},abs:function(r){return e.map(r,(function(e){return t.abs(e)}))},norm:function(e,r){var n=0,o=0;for(isNaN(r)&&(r=2),i(e[0])&&(e=e[0]);o<e.length;o++)n+=t.pow(t.abs(e[o]),r);return t.pow(n,1/r)},angle:function(r,n){return t.acos(e.dot(r,n)/(e.norm(r)*e.norm(n)))},aug:function(e,t){var n,i=[];for(n=0;n<e.length;n++)i.push(e[n].slice());for(n=0;n<i.length;n++)r.apply(i[n],t[n]);return i},inv:function(t){for(var r,n=t.length,i=t[0].length,o=e.identity(n,i),u=e.gauss_jordan(t,o),a=[],l=0;l<n;l++)for(a[l]=[],r=i;r<u[0].length;r++)a[l][r-i]=u[l][r];return a},det:function e(t){if(2===t.length)return t[0][0]*t[1][1]-t[0][1]*t[1][0];for(var r=0,n=0;n<t.length;n++){for(var i=[],o=1;o<t.length;o++){i[o-1]=[];for(var u=0;u<t.length;u++)u<n?i[o-1][u]=t[o][u]:u>n&&(i[o-1][u-1]=t[o][u])}var a=n%2?-1:1;r+=e(i)*t[0][n]*a}return r},gauss_elimination:function(r,n){var i,o,u,a,l=0,s=0,f=r.length,c=r[0].length,p=1,h=0,d=[];for(i=(r=e.aug(r,n))[0].length,l=0;l<f;l++){for(o=r[l][l],s=l,a=l+1;a<c;a++)o<t.abs(r[a][l])&&(o=r[a][l],s=a);if(s!=l)for(a=0;a<i;a++)u=r[l][a],r[l][a]=r[s][a],r[s][a]=u;for(s=l+1;s<f;s++)for(p=r[s][l]/r[l][l],a=l;a<i;a++)r[s][a]=r[s][a]-p*r[l][a]}for(l=f-1;l>=0;l--){for(h=0,s=l+1;s<=f-1;s++)h+=d[s]*r[l][s];d[l]=(r[l][i-1]-h)/r[l][l]}return d},gauss_jordan:function(r,n){var i,o,u,a=e.aug(r,n),l=a.length,s=a[0].length,f=0;for(o=0;o<l;o++){var c=o;for(u=o+1;u<l;u++)t.abs(a[u][o])>t.abs(a[c][o])&&(c=u);var p=a[o];for(a[o]=a[c],a[c]=p,u=o+1;u<l;u++)for(f=a[u][o]/a[o][o],i=o;i<s;i++)a[u][i]-=a[o][i]*f}for(o=l-1;o>=0;o--){for(f=a[o][o],u=0;u<o;u++)for(i=s-1;i>o-1;i--)a[u][i]-=a[o][i]*a[u][o]/f;for(a[o][o]/=f,i=l;i<s;i++)a[o][i]/=f}return a},triaUpSolve:function(t,r){var n,i=t[0].length,o=e.zeros(1,i)[0],u=!1;return null!=r[0].length&&(r=r.map((function(e){return e[0]})),u=!0),e.arange(i-1,-1,-1).forEach((function(u){n=e.arange(u+1,i).map((function(e){return o[e]*t[u][e]})),o[u]=(r[u]-e.sum(n))/t[u][u]})),u?o.map((function(e){return[e]})):o},triaLowSolve:function(t,r){var n,i=t[0].length,o=e.zeros(1,i)[0],u=!1;return null!=r[0].length&&(r=r.map((function(e){return e[0]})),u=!0),e.arange(i).forEach((function(i){n=e.arange(i).map((function(e){return t[i][e]*o[e]})),o[i]=(r[i]-e.sum(n))/t[i][i]})),u?o.map((function(e){return[e]})):o},lu:function(t){var r,n=t.length,i=e.identity(n),o=e.zeros(t.length,t[0].length);return e.arange(n).forEach((function(e){o[0][e]=t[0][e]})),e.arange(1,n).forEach((function(u){e.arange(u).forEach((function(n){r=e.arange(n).map((function(e){return i[u][e]*o[e][n]})),i[u][n]=(t[u][n]-e.sum(r))/o[n][n]})),e.arange(u,n).forEach((function(n){r=e.arange(u).map((function(e){return i[u][e]*o[e][n]})),o[u][n]=t[r.length][n]-e.sum(r)}))})),[i,o]},cholesky:function(r){var n,i=r.length,o=e.zeros(r.length,r[0].length);return e.arange(i).forEach((function(u){n=e.arange(u).map((function(e){return t.pow(o[u][e],2)})),o[u][u]=t.sqrt(r[u][u]-e.sum(n)),e.arange(u+1,i).forEach((function(t){n=e.arange(u).map((function(e){return o[u][e]*o[t][e]})),o[t][u]=(r[u][t]-e.sum(n))/o[u][u]}))})),o},gauss_jacobi:function(r,n,i,o){for(var u,a,l,s,f=0,c=0,p=r.length,h=[],d=[],v=[];f<p;f++)for(h[f]=[],d[f]=[],v[f]=[],c=0;c<p;c++)f>c?(h[f][c]=r[f][c],d[f][c]=v[f][c]=0):f<c?(d[f][c]=r[f][c],h[f][c]=v[f][c]=0):(v[f][c]=r[f][c],h[f][c]=d[f][c]=0);for(l=e.multiply(e.multiply(e.inv(v),e.add(h,d)),-1),a=e.multiply(e.inv(v),n),u=i,s=e.add(e.multiply(l,i),a),f=2;t.abs(e.norm(e.subtract(s,u)))>o;)u=s,s=e.add(e.multiply(l,u),a),f++;return s},gauss_seidel:function(r,n,i,o){for(var u,a,l,s,f,c=0,p=r.length,h=[],d=[],v=[];c<p;c++)for(h[c]=[],d[c]=[],v[c]=[],u=0;u<p;u++)c>u?(h[c][u]=r[c][u],d[c][u]=v[c][u]=0):c<u?(d[c][u]=r[c][u],h[c][u]=v[c][u]=0):(v[c][u]=r[c][u],h[c][u]=d[c][u]=0);for(s=e.multiply(e.multiply(e.inv(e.add(v,h)),d),-1),l=e.multiply(e.inv(e.add(v,h)),n),a=i,f=e.add(e.multiply(s,i),l),c=2;t.abs(e.norm(e.subtract(f,a)))>o;)a=f,f=e.add(e.multiply(s,a),l),c+=1;return f},SOR:function(r,n,i,o,u){for(var a,l,s,f,c,p=0,h=r.length,d=[],v=[],g=[];p<h;p++)for(d[p]=[],v[p]=[],g[p]=[],a=0;a<h;a++)p>a?(d[p][a]=r[p][a],v[p][a]=g[p][a]=0):p<a?(v[p][a]=r[p][a],d[p][a]=g[p][a]=0):(g[p][a]=r[p][a],d[p][a]=v[p][a]=0);for(f=e.multiply(e.inv(e.add(g,e.multiply(d,u))),e.subtract(e.multiply(g,1-u),e.multiply(v,u))),s=e.multiply(e.multiply(e.inv(e.add(g,e.multiply(d,u))),n),u),l=i,c=e.add(e.multiply(f,i),s),p=2;t.abs(e.norm(e.subtract(c,l)))>o;)l=c,c=e.add(e.multiply(f,l),s),p++;return c},householder:function(r){for(var n,i,o,u,a=r.length,l=r[0].length,s=0,f=[],c=[];s<a-1;s++){for(n=0,u=s+1;u<l;u++)n+=r[u][s]*r[u][s];for(n=(r[s+1][s]>0?-1:1)*t.sqrt(n),i=t.sqrt((n*n-r[s+1][s]*n)/2),(f=e.zeros(a,1))[s+1][0]=(r[s+1][s]-n)/(2*i),o=s+2;o<a;o++)f[o][0]=r[o][s]/(2*i);c=e.subtract(e.identity(a,l),e.multiply(e.multiply(f,e.transpose(f)),2)),r=e.multiply(c,e.multiply(r,c))}return r},QR:function(){var r=e.sum,n=e.arange;function i(i){var o,u,a,l=i.length,s=i[0].length,f=e.zeros(s,s);for(i=e.copy(i),u=0;u<s;u++){for(f[u][u]=t.sqrt(r(n(l).map((function(e){return i[e][u]*i[e][u]})))),o=0;o<l;o++)i[o][u]=i[o][u]/f[u][u];for(a=u+1;a<s;a++)for(f[u][a]=r(n(l).map((function(e){return i[e][u]*i[e][a]}))),o=0;o<l;o++)i[o][a]=i[o][a]-i[o][u]*f[u][a]}return[i,f]}return i}(),lstsq:function(){function t(t){var r=(t=e.copy(t)).length,n=e.identity(r);return e.arange(r-1,-1,-1).forEach((function(r){e.sliceAssign(n,{row:r},e.divide(e.slice(n,{row:r}),t[r][r])),e.sliceAssign(t,{row:r},e.divide(e.slice(t,{row:r}),t[r][r])),e.arange(r).forEach((function(i){var o=e.multiply(t[i][r],-1),u=e.slice(t,{row:i}),a=e.multiply(e.slice(t,{row:r}),o);e.sliceAssign(t,{row:i},e.add(u,a));var l=e.slice(n,{row:i}),s=e.multiply(e.slice(n,{row:r}),o);e.sliceAssign(n,{row:i},e.add(l,s))}))})),n}function r(r,n){var i=!1;void 0===n[0].length&&(n=n.map((function(e){return[e]})),i=!0);var o=e.QR(r),u=o[0],a=o[1],l=r[0].length,s=e.slice(u,{col:{end:l}}),f=t(e.slice(a,{row:{end:l}})),c=e.transpose(s);void 0===c[0].length&&(c=[c]);var p=e.multiply(e.multiply(f,c),n);return void 0===p.length&&(p=[[p]]),i?p.map((function(e){return e[0]})):p}return r}(),jacobi:function(r){for(var n,i,o,u,a,l,s,f=1,c=r.length,p=e.identity(c,c),h=[];1===f;){for(a=r[0][1],o=0,u=1,n=0;n<c;n++)for(i=0;i<c;i++)n!=i&&a<t.abs(r[n][i])&&(a=t.abs(r[n][i]),o=n,u=i);for(l=r[o][o]===r[u][u]?r[o][u]>0?t.PI/4:-t.PI/4:t.atan(2*r[o][u]/(r[o][o]-r[u][u]))/2,(s=e.identity(c,c))[o][o]=t.cos(l),s[o][u]=-t.sin(l),s[u][o]=t.sin(l),s[u][u]=t.cos(l),p=e.multiply(p,s),r=e.multiply(e.multiply(e.inv(s),r),s),f=0,n=1;n<c;n++)for(i=1;i<c;i++)n!=i&&t.abs(r[n][i])>.001&&(f=1)}for(n=0;n<c;n++)h.push(r[n][n]);return[p,h]},rungekutta:function(e,t,r,n,i,o){var u,a,l;if(2===o)for(;n<=r;)i+=((u=t*e(n,i))+(a=t*e(n+t,i+u)))/2,n+=t;if(4===o)for(;n<=r;)i+=((u=t*e(n,i))+2*(a=t*e(n+t/2,i+u/2))+2*(l=t*e(n+t/2,i+a/2))+t*e(n+t,i+l))/6,n+=t;return i},romberg:function(e,r,n,i){for(var o,u,a,l,s,f=0,c=(n-r)/2,p=[],h=[],d=[];f<i/2;){for(s=e(r),a=r,l=0;a<=n;a+=c,l++)p[l]=a;for(o=p.length,a=1;a<o-1;a++)s+=(a%2!=0?4:2)*e(p[a]);s=c/3*(s+e(n)),d[f]=s,c/=2,f++}for(u=d.length,o=1;1!==u;){for(a=0;a<u-1;a++)h[a]=(t.pow(4,o)*d[a+1]-d[a])/(t.pow(4,o)-1);u=h.length,d=h,h=[],o++}return d},richardson:function(e,r,n,i){function o(e,t){for(var r,n=0,i=e.length;n<i;n++)e[n]===t&&(r=n);return r}for(var u,a,l,s,f,c=t.abs(n-e[o(e,n)+1]),p=0,h=[],d=[];i>=c;)u=o(e,n+i),a=o(e,n),h[p]=(r[u]-2*r[a]+r[2*a-u])/(i*i),i/=2,p++;for(s=h.length,l=1;1!=s;){for(f=0;f<s-1;f++)d[f]=(t.pow(4,l)*h[f+1]-h[f])/(t.pow(4,l)-1);s=d.length,h=d,d=[],l++}return h},simpson:function(e,t,r,n){for(var i,o=(r-t)/n,u=e(t),a=[],l=t,s=0,f=1;l<=r;l+=o,s++)a[s]=l;for(i=a.length;f<i-1;f++)u+=(f%2!=0?4:2)*e(a[f]);return o/3*(u+e(r))},hermite:function(e,t,r,n){for(var i,o=e.length,u=0,a=0,l=[],s=[],f=[],c=[];a<o;a++){for(l[a]=1,i=0;i<o;i++)a!=i&&(l[a]*=(n-e[i])/(e[a]-e[i]));for(s[a]=0,i=0;i<o;i++)a!=i&&(s[a]+=1/(e[a]-e[i]));f[a]=(1-2*(n-e[a])*s[a])*(l[a]*l[a]),c[a]=(n-e[a])*(l[a]*l[a]),u+=f[a]*t[a]+c[a]*r[a]}return u},lagrange:function(e,t,r){for(var n,i,o=0,u=0,a=e.length;u<a;u++){for(i=t[u],n=0;n<a;n++)u!=n&&(i*=(r-e[n])/(e[u]-e[n]));o+=i}return o},cubic_spline:function(t,r,n){for(var i,o=t.length,u=0,a=[],l=[],s=[],f=[],c=[],p=[],h=[];u<o-1;u++)c[u]=t[u+1]-t[u];for(s[0]=0,u=1;u<o-1;u++)s[u]=3/c[u]*(r[u+1]-r[u])-3/c[u-1]*(r[u]-r[u-1]);for(u=1;u<o-1;u++)a[u]=[],l[u]=[],a[u][u-1]=c[u-1],a[u][u]=2*(c[u-1]+c[u]),a[u][u+1]=c[u],l[u][0]=s[u];for(f=e.multiply(e.inv(a),l),i=0;i<o-1;i++)p[i]=(r[i+1]-r[i])/c[i]-c[i]*(f[i+1][0]+2*f[i][0])/3,h[i]=(f[i+1][0]-f[i][0])/(3*c[i]);for(i=0;i<o&&!(t[i]>n);i++);return r[i-=1]+(n-t[i])*p[i]+e.sq(n-t[i])*f[i]+(n-t[i])*e.sq(n-t[i])*h[i]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){var r,n,i=t.length,o=t[0].length,u=0,a=[],l=[],s=[],f=[],c=[],p=[],h=[],d=[],v=[],g=[];for(u=0;u<i;u++)a[u]=e.sum(t[u])/o;for(u=0;u<o;u++)for(h[u]=[],r=0;r<i;r++)h[u][r]=t[r][u]-a[r];for(h=e.transpose(h),u=0;u<i;u++)for(d[u]=[],r=0;r<i;r++)d[u][r]=e.dot([h[u]],[h[r]])/(o-1);for(v=(s=e.jacobi(d))[0],l=s[1],g=e.transpose(v),u=0;u<l.length;u++)for(r=u;r<l.length;r++)l[u]<l[r]&&(n=l[u],l[u]=l[r],l[r]=n,f=g[u],g[u]=g[r],g[r]=f);for(p=e.transpose(h),u=0;u<i;u++)for(c[u]=[],r=0;r<p.length;r++)c[u][r]=e.dot([g[u]],[p[r]]);return[t,l,g,c]}}),function(t){for(var r=0;r<t.length;r++)!function(t){e.fn[t]=function(r,n){var i=this;return n?(setTimeout((function(){n.call(i,e.fn[t].call(i,r))}),15),this):"number"==typeof e[t](this,r)?e[t](this,r):e(e[t](this,r))}}(t[r])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(e,Math),function(e,t){var r=[].slice,n=e.utils.isNumber,i=e.utils.isArray;function o(e,r,n,i){if(e>1||n>1||e<=0||n<=0)throw new Error("Proportions should be greater than 0 and less than 1");var o=(e*r+n*i)/(r+i);return(e-n)/t.sqrt(o*(1-o)*(1/r+1/i))}e.extend({zscore:function(){var t=r.call(arguments);return n(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var n,o=r.call(arguments);return i(o[1])?(n=e.zscore(o[0],o[1],o[3]),1===o[2]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1)):o.length>2?(n=e.zscore(o[0],o[1],o[2]),1===o[3]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1)):(n=o[0],1===o[1]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(r,n,i){var o=t.abs(this.zscore(r,i));return 1===n?e.normal.cdf(-o,0,1):2*e.normal.cdf(-o,0,1)}}),e.extend({tscore:function(){var n=r.call(arguments);return 4===n.length?(n[0]-n[1])/(n[2]/t.sqrt(n[3])):(n[0]-e.mean(n[1]))/(e.stdev(n[1],!0)/t.sqrt(n[1].length))},ttest:function(){var i,o=r.call(arguments);return 5===o.length?(i=t.abs(e.tscore(o[0],o[1],o[2],o[3])),1===o[4]?e.studentt.cdf(-i,o[3]-1):2*e.studentt.cdf(-i,o[3]-1)):n(o[1])?(i=t.abs(o[0]),1==o[2]?e.studentt.cdf(-i,o[1]-1):2*e.studentt.cdf(-i,o[1]-1)):(i=t.abs(e.tscore(o[0],o[1])),1==o[2]?e.studentt.cdf(-i,o[1].length-1):2*e.studentt.cdf(-i,o[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(r,n){return 1===n?1-e.studentt.cdf(t.abs(this.tscore(r)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(r)),this.cols()-1)}}),e.extend({anovafscore:function(){var n,i,o,u,a,l,s,f,c=r.call(arguments);if(1===c.length){for(a=new Array(c[0].length),s=0;s<c[0].length;s++)a[s]=c[0][s];c=a}for(i=new Array,s=0;s<c.length;s++)i=i.concat(c[s]);for(o=e.mean(i),n=0,s=0;s<c.length;s++)n+=c[s].length*t.pow(e.mean(c[s])-o,2);for(n/=c.length-1,l=0,s=0;s<c.length;s++)for(u=e.mean(c[s]),f=0;f<c[s].length;f++)l+=t.pow(c[s][f]-u,2);return n/(l/=i.length-c.length)},anovaftest:function(){var t,i,o,u,a=r.call(arguments);if(n(a[0]))return 1-e.centralF.cdf(a[0],a[1],a[2]);var l=e.anovafscore(a);for(t=a.length-1,o=0,u=0;u<a.length;u++)o+=a[u].length;return i=o-t-1,1-e.centralF.cdf(l,t,i)},ftest:function(t,r,n){return 1-e.centralF.cdf(t,r,n)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var t,r=0;for(t=0;t<this.length;t++)r+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,r-this.length)}}),e.extend({qscore:function(){var i,o,u,a,l,s=r.call(arguments);return n(s[0])?(i=s[0],o=s[1],u=s[2],a=s[3],l=s[4]):(i=e.mean(s[0]),o=e.mean(s[1]),u=s[0].length,a=s[1].length,l=s[2]),t.abs(i-o)/(l*t.sqrt((1/u+1/a)/2))},qtest:function(){var t,n=r.call(arguments);3===n.length?(t=n[0],n=n.slice(1)):7===n.length?(t=e.qscore(n[0],n[1],n[2],n[3],n[4]),n=n.slice(5)):(t=e.qscore(n[0],n[1],n[2]),n=n.slice(3));var i=n[0],o=n[1];return 1-e.tukey.cdf(t,o,i-o)},tukeyhsd:function(t){for(var r=e.pooledstdev(t),n=t.map((function(t){return e.mean(t)})),i=t.reduce((function(e,t){return e+t.length}),0),o=[],u=0;u<t.length;++u)for(var a=u+1;a<t.length;++a){var l=e.qtest(n[u],n[a],t[u].length,t[a].length,r,i,t.length);o.push([[u,a],l])}return o}}),e.extend({normalci:function(){var n,i=r.call(arguments),o=new Array(2);return n=4===i.length?t.abs(e.normal.inv(i[1]/2,0,1)*i[2]/t.sqrt(i[3])):t.abs(e.normal.inv(i[1]/2,0,1)*e.stdev(i[2])/t.sqrt(i[2].length)),o[0]=i[0]-n,o[1]=i[0]+n,o},tci:function(){var n,i=r.call(arguments),o=new Array(2);return n=4===i.length?t.abs(e.studentt.inv(i[1]/2,i[3]-1)*i[2]/t.sqrt(i[3])):t.abs(e.studentt.inv(i[1]/2,i[2].length-1)*e.stdev(i[2],!0)/t.sqrt(i[2].length)),o[0]=i[0]-n,o[1]=i[0]+n,o},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,r){return e.normalci(t,r,this.toArray())},tci:function(t,r){return e.tci(t,r,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,r,n,i){var u=o(t,r,n,i);return e.ztest(u,1)},twoSidedDifferenceOfProportions:function(t,r,n,i){var u=o(t,r,n,i);return e.ztest(u,2)}})}(e,Math),e.models=function(){function t(t){var n=t[0].length;return e.arange(n).map((function(i){var o=e.arange(n).filter((function(e){return e!==i}));return r(e.col(t,i).map((function(e){return e[0]})),e.col(t,o))}))}function r(t,r){var n=t.length,i=r[0].length-1,o=n-i-1,u=e.lstsq(r,t),a=e.multiply(r,u.map((function(e){return[e]}))).map((function(e){return e[0]})),l=e.subtract(t,a),s=e.mean(t),f=e.sum(a.map((function(e){return Math.pow(e-s,2)}))),c=e.sum(t.map((function(e,t){return Math.pow(e-a[t],2)}))),p=f+c;return{exog:r,endog:t,nobs:n,df_model:i,df_resid:o,coef:u,predict:a,resid:l,ybar:s,SST:p,SSE:f,SSR:c,R2:f/p}}function n(r){var n=t(r.exog),i=Math.sqrt(r.SSR/r.df_resid),o=n.map((function(e){var t=e.SST,r=e.R2;return i/Math.sqrt(t*(1-r))})),u=r.coef.map((function(e,t){return(e-0)/o[t]})),a=u.map((function(t){var n=e.studentt.cdf(t,r.df_resid);return 2*(n>.5?1-n:n)})),l=e.studentt.inv(.975,r.df_resid),s=r.coef.map((function(e,t){var r=l*o[t];return[e-r,e+r]}));return{se:o,t:u,p:a,sigmaHat:i,interval95:s}}function i(t){var r,n,i,o=t.R2/t.df_model/((1-t.R2)/t.df_resid);return{F_statistic:o,pvalue:1-(r=o,n=t.df_model,i=t.df_resid,e.beta.cdf(r/(i/n+r),n/2,i/2))}}function o(e,t){var o=r(e,t),u=n(o),a=i(o),l=1-(1-o.R2)*((o.nobs-1)/o.df_resid);return o.t=u,o.f=a,o.adjust_R2=l,o}return{ols:o}}(),e.extend({buildxmatrix:function(){for(var t=new Array(arguments.length),r=0;r<arguments.length;r++){var n=[1];t[r]=n.concat(arguments[r])}return e(t)},builddxmatrix:function(){for(var t=new Array(arguments[0].length),r=0;r<arguments[0].length;r++){var n=[1];t[r]=n.concat(arguments[0][r])}return e(t)},buildjxmatrix:function(t){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n];return e.builddxmatrix(r)},buildymatrix:function(t){return e(t).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(t,r){var n,i,o,u,a;if(t.cols()==r.rows()){if(r.rows()>1){for(u=[],n=0;n<t.rows();n++)for(u[n]=[],i=0;i<r.cols();i++){for(a=0,o=0;o<t.cols();o++)a+=t.toArray()[n][o]*r.toArray()[o][i];u[n][i]=a}return e(u)}for(u=[],n=0;n<t.rows();n++)for(u[n]=[],i=0;i<r.cols();i++){for(a=0,o=0;o<t.cols();o++)a+=t.toArray()[n][o]*r.toArray()[i];u[n][i]=a}return e(u)}},regress:function(t,r){var n=e.xtranspxinv(t),i=t.transpose(),o=e.matrixmult(e(n),i);return e.matrixmult(o,r)},regresst:function(t,r,n){var i=e.regress(t,r),o={anova:{}},u=e.jMatYBar(t,i);o.yBar=u;var a=r.mean();o.anova.residuals=e.residuals(r,u),o.anova.ssr=e.ssr(u,a),o.anova.msr=o.anova.ssr/(t[0].length-1),o.anova.sse=e.sse(r,u),o.anova.mse=o.anova.sse/(r.length-(t[0].length-1)-1),o.anova.sst=e.sst(r,a),o.anova.mst=o.anova.sst/(r.length-1),o.anova.r2=1-o.anova.sse/o.anova.sst,o.anova.r2<0&&(o.anova.r2=0),o.anova.fratio=o.anova.msr/o.anova.mse,o.anova.pvalue=e.anovaftest(o.anova.fratio,t[0].length-1,r.length-(t[0].length-1)-1),o.anova.rmse=Math.sqrt(o.anova.mse),o.anova.r2adj=1-o.anova.mse/o.anova.mst,o.anova.r2adj<0&&(o.anova.r2adj=0),o.stats=new Array(t[0].length);for(var l,s,f,c=e.xtranspxinv(t),p=0;p<i.length;p++)l=Math.sqrt(o.anova.mse*Math.abs(c[p][p])),s=Math.abs(i[p]/l),f=e.ttest(s,r.length-t[0].length-1,n),o.stats[p]=[i[p],l,s,f];return o.regress=i,o},xtranspx:function(t){return e.matrixmult(t.transpose(),t)},xtranspxinv:function(t){var r=e.matrixmult(t.transpose(),t);return e.inv(r)},jMatYBar:function(t,r){var n=e.matrixmult(t,r);return new e(n)},residuals:function(t,r){return e.matrixsubtract(t,r)},ssr:function(e,t){for(var r=0,n=0;n<e.length;n++)r+=Math.pow(e[n]-t,2);return r},sse:function(e,t){for(var r=0,n=0;n<e.length;n++)r+=Math.pow(e[n]-t[n],2);return r},sst:function(e,t){for(var r=0,n=0;n<e.length;n++)r+=Math.pow(e[n]-t,2);return r},matrixsubtract:function(t,r){for(var n=new Array(t.length),i=0;i<t.length;i++){n[i]=new Array(t[i].length);for(var o=0;o<t[i].length;o++)n[i][o]=t[i][o]-r[i][o]}return e(n)}}),e.jStat=e,e}()}({get exports(){return Xf},set exports(e){Xf=e}});let ec=Xf.jStat,tc={beta:{pdf:ec.beta.pdf,cdf:ec.beta.cdf,inv:ec.beta.inv,sample:ec.beta.sample},centralF:{pdf:ec.centralF.pdf,cdf:ec.centralF.cdf,inv:ec.centralF.inv,sample:ec.centralF.sample},cauchy:{pdf:ec.cauchy.pdf,cdf:ec.cauchy.cdf,inv:ec.cauchy.inv,sample:ec.cauchy.sample},chisquare:{pdf:ec.chisquare.pdf,cdf:ec.chisquare.cdf,inv:ec.chisquare.inv,sample:ec.chisquare.sample},exponential:{pdf:ec.exponential.pdf,cdf:ec.exponential.cdf,inv:ec.exponential.inv,sample:ec.exponential.sample},gamma:{pdf:ec.gamma.pdf,cdf:ec.gamma.cdf,inv:ec.gamma.inv,sample:ec.gamma.sample},invgamma:{pdf:ec.invgamma.pdf,cdf:ec.invgamma.cdf,inv:ec.invgamma.inv,sample:ec.invgamma.sample},kumaraswamy:{pdf:ec.kumaraswamy.pdf,cdf:ec.kumaraswamy.cdf,inv:ec.kumaraswamy.inv,sample:ec.kumaraswamy.sample},lognormal:{pdf:ec.lognormal.pdf,cdf:ec.lognormal.cdf,inv:ec.lognormal.inv,sample:ec.lognormal.sample},normal:{pdf:ec.normal.pdf,cdf:ec.normal.cdf,inv:ec.normal.inv,sample:ec.normal.sample},pareto:{pdf:ec.pareto.pdf,cdf:ec.pareto.cdf,inv:ec.pareto.inv,sample:(e,t)=>{throw new Error("invalid pareto.sample")}},studentt:{pdf:ec.studentt.pdf,cdf:ec.studentt.cdf,inv:ec.studentt.inv,sample:ec.studentt.sample},tukey:{pdf:(e,t,r)=>{throw new Error("invalid tukey.pdf")},cdf:ec.tukey.cdf,inv:ec.tukey.inv,sample:(e,t)=>{throw new Error("invalid tukey.sample")}},weibull:{pdf:ec.weibull.pdf,cdf:ec.weibull.cdf,inv:ec.weibull.inv,sample:ec.weibull.sample},uniform:{pdf:ec.uniform.pdf,cdf:ec.uniform.cdf,inv:ec.uniform.inv,sample:ec.uniform.sample},binomial:{pdf:ec.binomial.pdf,cdf:ec.binomial.cdf,inv:(e,t,r)=>{throw new Error("invalid binomial.inv")},sample:(e,t)=>{throw new Error("invalid binomial.sample")}},negbin:{pdf:ec.negbin.pdf,cdf:ec.negbin.cdf,inv:(e,t,r)=>{throw new Error("invalid negbin.inv")},sample:(e,t)=>{throw new Error("invalid negbin.sample")}},hypgeom:{pdf:ec.hypgeom.pdf,cdf:ec.hypgeom.cdf,inv:(e,t,r,n)=>{throw new Error("invalid hypgeom.inv")},sample:(e,t,r)=>{throw new Error("invalid hypgeom.sample")}},poisson:{pdf:ec.poisson.pdf,cdf:ec.poisson.cdf,inv:(e,t)=>{throw new Error("invalid poisson.inv")},sample:ec.poisson.sample},triangular:{pdf:ec.triangular.pdf,cdf:ec.triangular.cdf,inv:(e,t,r,n)=>{throw new Error("invalid triangular.inv")},sample:ec.triangular.sample},arcsine:{pdf:ec.arcsine.pdf,cdf:ec.arcsine.cdf,inv:ec.arcsine.inv,sample:ec.arcsine.sample},std:e=>ec.stdev(e,!1),sampleStd:e=>ec.stdev(e,!0),emquantile:(e,t)=>ec.quantiles(e,[t],.4,.4)[0],emquantiles:ec.quantiles,percentile:ec.percentile};var rc=Pe;var nc=function(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var u=e[i];t(n,u,r(u),e)}return n},ic=function(e,t,r,n){return rc(e,(function(e,i,o){t(n,e,r(e),o)})),n},oc=$o,uc=z;var ac=Co,lc=function(e,t){return function(r,n){var i=uc(r)?nc:ic,o=t?t():{};return i(r,e,oc(n),o)}},sc=Object.prototype.hasOwnProperty,fc=lc((function(e,t,r){sc.call(e,r)?e[r].push(t):ac(e,r,[t])})),cc=fc,pc=Array.prototype.reverse;var hc=function(e){return null==e?e:pc.call(e)};function dc(e){if(!_l(e)&&!Dl(e)&&!di(e))return"";let t="";try{t=String(e)}catch(e){}try{t=e.toString()}catch(e){}return t}function vc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vc(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===nf(e))return[];if(!_l(t))return[];let n=Hi(r,"ranger.countHalf");If(n)||(n=5),n=Tf(n);let i=Hi(r,"ranger.depthHalf");Dl(i)||(i=.25),i=Gl(i);let o=Hi(r,"keyDepth");_l(o)||(o="depth");let u=Hi(r,"methodSmooth");"average"!==u&&"averageIn95"!==u&&"maxCount"!==u&&(u="average");let a=[];if(Te(e,(e=>{let r=Hi(e,o),n=Hi(e,t);Dl(r)&&(_l(n)||Dl(n))&&(e[o]=Gl(r),e[t]=n,a.push(e))})),0===nf(a))return[];a=Ps(a,o);let l=nf(a)-1,s=[];return Te(a,((e,r)=>{let f=r,c=r;if(null!==n)f=Math.max(r-n,0),c=Math.min(r+n,l);else if(null!==i){for(let t=r;t>=0;t--){if(!(Math.abs(a[t][o]-e[o])<i))break;f=t}for(let t=r;t<=l;t++){if(!(Math.abs(a[t][o]-e[o])<i))break;c=t}}let p=function(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Lf(e))return[];if(!If(t))return[];if(t=Tf(t),Rf(n)){if(t>=e.length)return[];r=Mf(e,t)}else{if(!If(n))return[];if(n=Tf(n),t>=e.length||n>=e.length)return[];let i=mf(t,n+1);r=Mf(e,i)}return r}(a,f,c),h=null;if("average"===u){let e=Jf(Oo(p,t));h={[t]:e}}else if("averageIn95"===u){let e=Oo(p,t),r=Jf(e),n=function(e){return kf(e)?0===nf(e)?null:(e=Kf(e,(e=>Dl(e))),e=Oo(e,Gl),nf(e)<=1?null:tc.sampleStd(e)):null}(e),i=[];Te(p,(e=>{let o=Hi(e,t);Dl(o)&&(o=Gl(o),o>=r-2*n&&o<=r+2*n&&i.push(o))}));let o=Jf(i);h={[t]:o}}else if("maxCount"===u){let e=function(e){if(!kf(e))return[];if(0===nf(e))return[];let t=[];if(Te(e,(e=>{(Dl(e)||_l(e))&&t.push(dc(e))})),0===nf(t))return[];t=Oo(t,(e=>({v:e})));let r=cc(t,"v");return r=Oo(r,((e,t)=>({key:t,count:nf(e)}))),r=Ps(r,"count"),r=hc(r),r}(Oo(p,t)),r=Hi(e,"0.key",""),n=Hi(e,"0.count","");h={[t]:r,count:n}}let d=gc(gc({},e),h);s.push(d)})),s}function bc(e,t){return!!kl(e)&&(!(!_l(t)&&!Dl(t))&&t in e)}let yc=null;function wc(){return null!==yc||(yc=[{nameCht:"礫質砂土",nameEng:"Gravelly sand",color:"rgb(173, 215, 255)",colorPrimary:"#467dec",min:0,max:1.31},{nameCht:"砂土-純砂至粉質砂土",nameEng:"Sands-clean sand to silty sand",color:"rgb(193, 233, 247)",colorPrimary:"linear-gradient(90deg, #dad74d 0%, #467dec 100%)",min:1.31,max:2.05},{nameCht:"混和砂土-粉質砂土至砂質粉土",nameEng:"Sand mixtures-silty sand to sandy silt",color:"rgb(223, 223, 247)",colorPrimary:"linear-gradient(90deg, #467dec 0%, #dad74d 100%)",min:2.05,max:2.6},{nameCht:"粉土混合物-黏質粉土至粉質黏土",nameEng:"Silt mixtures-clayey silt to silty clay",color:"rgb(253, 223, 225)",colorPrimary:"linear-gradient(90deg, #ea4e2d 0%, #dad74d 100%)",min:2.6,max:2.95},{nameCht:"黏土",nameEng:"Clays",color:"rgb(253, 203, 207)",colorPrimary:"#ea4e2d",min:2.95,max:3.6},{nameCht:"有機土",nameEng:"Organic soils",color:"rgb(255, 193, 227)",colorPrimary:"#ea4e2d",min:3.6,max:99}]),yc}var xc={getIcInfor:wc};function $c(e,t){if(!Lf(e))return null;if(!Lf(t))return null;let r=e[0],n=e[1],i=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let u=t[e][0],a=t[e][1],l=t[o][0],s=t[o][1];a>n!=s>n&&r<(l-u)*(n-a)/(s-a)+u&&(i=!i)}return i}let Sc={zone1:[[.8042788645514245,-1],[1.4,-1],[1.4,-.04961518419811251],[1.3360639947293758,.00515510285998122],[.8042788645514245,-1]],zone2:[[.22901013093819989,-1],[.7989205421525307,-1],[.535671,-.732631],[.267238,-.973016],[.22901013093819989,-1]],zone3:[[-.0827455,-.507509],[.19919261999759594,-1],[.22901013093819989,-1],[.267238,-.973016],[.535671,-.732631],[.7989205421525307,-1],[.8042788645514245,-1],[1.3360639947293758,.00515510285998122],[.7507188345305402,.5065865313087334],[.00899762,-.488431],[-.0798201488308562,-.39581841738701223],[-.0827455,-.507509]],zone4:[[-.0798201488308562,-.39581841738701223],[.00899762,-.488431],[.75071883453054,.5065865313087332],[.46563663689560464,.750800002787402],[.00559973,-.282387],[-.0748262901884575,-.20092818800278278],[-.0776487,-.312912],[-.0798201488308562,-.39581841738701223]],zone5:[[-.0748262901884575,-.20092818800278278],[.00559973,-.282387],[.4656366368956047,.7508000027874022],[.28177542293386015,.9083032972911816],[.00559973,-.0610806],[-.06726062655330566,.04677010378206706],[-.0725518,-.110684],[-.0748262901884575,-.20092818800278278]],zone6:[[-.06726062655330566,.04677010378206706],[.00559973,-.0610806],[.28177542293386015,.9083032972911816],[.219667,.961508],[.19999604525814957,1.0454031412933176],[.00220183,.247985],[-.06071692978405572,.34104143783205454],[-.0623581,.274695],[-.065756,.0915446],[-.06726062655330566,.04677010378206706]],zone7:[[-.06071692978405572,.34104143783205454],[.00220183,.247985],[.19999604525814962,1.0454031412933178],[.1466205435691607,1.2730456382928406],[.00390078,.522711],[-.053725768119182775,.6023554362478534],[-.0555624,.54942],[-.06071692978405572,.34104143783205454]],zone8:[[-.053725768119182775,.6023554362478534],[.00390078,.522711],[.1466205435691607,1.2730456382928403],[.09752669166574157,1.4824272212471161],[.00390078,.866117],[-.042929930936118785,.9237944636517381],[-.0453687,.843223],[-.053725768119182775,.6023554362478534]],zone9:[[0,.8709212639576908],[.00390078,.866117],[.09752669166574157,1.4824272212471163],[.055798348065744074,1.6603954657070483],[.00390078,1.36215],[0,1.3672038510406228],[0,.8709212639576908]],zone10:[[0,1.3672038510406228],[.00390078,1.36215],[.055798348065744074,1.6603954657070483],[.0514713,1.67885],[.05300885596731013,2],[0,2],[0,1.3672038510406228]],"zone9,10,11,12":[[-.042929930936118785,.9237944636517381],[0,.8709212639576908],[0,2],[-.029975073717927975,2],[-.0283792,1.41938],[-.035175,1.18],[-.042929930936118785,.9237944636517381]]},Ec={zone1:[[0,-1],[2.599004449,-.910151233],[2.59819,-.9033989],[2.47734,-.785331],[2.38066,-.683363],[2.22356,-.592129],[2.06647,-.479428],[1.90937,-.382826],[1.75227,-.307692],[1.51057,-.216458],[1.26888,-.152057],[.954683,-.103757],[.628399,-.0554559999999999],[.302115,-.0232560000000001],[0,.00770169199999993],[0,-1]],zone2:[[0,-1],[8,-1],[8,-.312420334],[7.98792,-.313059],[4.03625,-.860465],[0,-1]],zone3:[[1.91607919296796,-.386951534430881],[2.06647,-.479428],[2.22356,-.592129],[2.38066,-.683363],[2.47734,-.785331],[2.59819,-.9033989],[2.59900444877071,-.910151233011032],[4.03625,-.860465],[7.98792,-.313059],[8,-.312420334410403],[8,.73886157340706],[5.21686256331027,.74843976095338],[5.20846,.74419],[5.0997,.67442],[5.00302,.60465],[4.84592,.50805],[4.65257,.41682],[4.4713,.33095],[4.27795,.25045],[4.07251,.17531],[3.86707,.0948100000000001],[3.67372,.0357799999999999],[3.49245,-.012522],[3.29909,-.08229],[3.08157,-.13059],[2.87613,-.184258],[2.67069,-.243292],[2.429,-.291592],[2.1994,-.334526],[1.91607919296796,-.386951534430881]],zone4:[[1.51477387839753,-.218044829299632],[1.75227,-.307692],[1.90937,-.382826],[1.91607919296796,-.386951534430881],[2.1994,-.334526],[2.429,-.291592],[2.67069,-.243292],[2.87613,-.184258],[3.08157,-.13059],[3.29909,-.08229],[3.49245,-.012522],[3.67372,.0357799999999999],[3.86707,.0948100000000001],[4.07251,.17531],[4.27795,.25045],[4.4713,.33095],[4.65257,.41682],[4.84592,.50805],[5.00302,.60465],[5.0997,.67442],[5.20846,.74419],[5.21686256331027,.74843976095338],[4.89426,.74955],[4.59943743716958,.84244763970655],[4.59215,.84079],[4.41088,.72272],[4.29003,.63148],[4.14502,.56172],[4.01208,.48122],[3.87915,.41682],[3.72205,.35242],[3.56495,.28801],[3.40785,.23435],[3.19033,.16995],[2.97281,.11091],[2.7432,.04114],[2.50151,-.012522],[2.22356,-.08229],[1.98187,-.135957],[1.7281,-.189624],[1.51477387839753,-.218044829299632]],zone5:[[.60423,-.0500890000000001],[.604258597461038,-.053073655288784],[.628399,-.0554559999999999],[.954683,-.103757],[1.26888,-.152057],[1.51057,-.216458],[1.51477387839753,-.218044829299632],[1.7281,-.189624],[1.98187,-.135957],[2.22356,-.08229],[2.50151,-.012522],[2.7432,.04114],[2.97281,.11091],[3.19033,.16995],[3.40785,.23435],[3.56495,.28801],[3.72205,.35242],[3.87915,.41682],[4.01208,.48122],[4.14502,.56172],[4.29003,.63148],[4.41088,.72272],[4.59215,.84079],[4.59943743716958,.84244763970655],[3.89979234877181,1.06290355298692],[3.80665,.98569],[3.66163,.89982],[3.48036,.78712],[3.29909,.68515],[3.08157,.59392],[2.88822,.50805],[2.67069,.42218],[2.34441,.32021],[2.09063,.25581],[1.81269,.18068],[1.4864,.10555],[1.22054,.0518799999999999],[.89426,-.012522],[.60423,-.0500890000000001]],zone6:[[0,.00770169230769002],[.302115,-.0232560000000001],[.604258597461038,-.053073655288784],[.60423,-.0500890000000001],[.89426,-.012522],[1.22054,.0518799999999999],[1.4864,.10555],[1.81269,.18068],[2.09063,.25581],[2.34441,.32021],[2.67069,.42218],[2.88822,.50805],[3.08157,.59392],[3.29909,.68515],[3.48036,.78712],[3.66163,.89982],[3.80665,.98569],[3.89979234877181,1.06290355298692],[3.22606294765238,1.27519351669947],[3.04532,1.17352],[2.83988,1.05546],[2.62236,.95349],[2.429,.85152],[2.18731,.76029],[1.9577,.66905],[1.71601,.58318],[1.42598,.48122],[1.12387,.38998],[.809668,.32021],[.422961,.23435],[.0120846,.17531],[0,.17356],[0,.00770169230769002]],zone7:[[0,.17356],[.0120846,.17531],[.422961,.23435],[.809668,.32021],[1.12387,.38998],[1.42598,.48122],[1.71601,.58318],[1.9577,.66905],[2.18731,.76029],[2.429,.85152],[2.62236,.95349],[2.83988,1.05546],[3.04532,1.17352],[3.22606294765237,1.27519351669947],[2.42760757719909,1.52678423151461],[2.22356,1.38819],[2.07855,1.27549],[1.89728,1.16279],[1.69184,1.05009],[1.43807,.92129],[1.20846,.81932],[.930514,.72809],[.640483,.63685],[.314199,.54025],[0,.48856778143308],[0,.17356]],zone8:[[0,.48856778143308],[.314199,.54025],[.640483,.63685],[.930514,.72809],[1.20846,.81932],[1.43807,.92129],[1.69184,1.05009],[1.89728,1.16279],[2.07855,1.27549],[2.22356,1.38819],[2.42760757719909,1.52678423151461],[2.3565,1.54919],[2.18731,1.60823],[2.06647,1.6458],[1.98187,1.7102],[1.92145,1.78533],[1.84894,1.87657],[1.83686,2],[1.78852,1.86047],[1.71601,1.72093],[1.60725,1.5653],[1.4864,1.44723],[1.34139,1.33989],[1.22054,1.24866],[1.06344,1.14669],[.89426,1.07692],[.712991,.99642],[.386707,.91592],[0,.85689],[0,.48856778143308]],zone9:[[0,.85689],[.386707,.91592],[.712991,.99642],[.89426,1.07692],[1.06344,1.14669],[1.22054,1.24866],[1.34139,1.33989],[1.4864,1.44723],[1.60725,1.5653],[1.71601,1.72093],[1.78852,1.86047],[1.83686,2],[1.22054,2],[1.22054,1.99463],[1.11178,1.8229],[.990937,1.68873],[.845921,1.54919],[.652568,1.44723],[.386707,1.35063],[0,1.25175000154968],[0,.85689]],zone10:[[0,1.25175000154968],[.386707,1.35063],[.652568,1.44723],[.845921,1.54919],[.990937,1.68873],[1.11178,1.8229],[1.22054,1.99463],[1.22054,2],[0,2],[0,1.25175000154968]],zone11:[[3.89979234877181,1.06290355298692],[4.89426,.74955],[8,.73886157340706],[8,2],[4.70091,2],[4.59215,1.65116],[4.41088,1.50626],[4.25378,1.38283],[4.13293,1.26476],[3.98792,1.13596],[3.89979234877181,1.06290355298692]],zone12:[[1.83686,2],[1.84894,1.87657],[1.92145,1.78533],[1.98187,1.7102],[2.06647,1.6458],[2.18731,1.60823],[2.3565,1.54919],[3.89979234877181,1.06290355298692],[3.98792,1.13596],[4.13293,1.26476],[4.25378,1.38283],[4.41088,1.50626],[4.59215,1.65116],[4.70091,2],[1.83686,2]]},Mc={zone1:[[.814956350795433,0],[1.4,0],[1.4,1.0444774529587604],[.814956350795433,0]],zone2:[[.15755797913451555,0],[.8081353465726996,0],[.803677,.00955108],[.542358,.411052],[.163577,.00955108],[.15755797913451555,0]],zone3:[[-.557635,1.27767],[.135961,.0225141],[.14709816115300722,0],[.15755797913451555,0],[.163577,.00955108],[.542358,.411052],[.803677,.00955108],[.8081353465726996,0],[.8159217107198008,0],[.824794,.015206],[1.38835,1.02178],[1.3952840233278456,1.0277257015798282],[.6051580468079697,1.6769417299522127],[.0144398,.684374],[-.389417,1.78897],[-.3965860167997673,1.8080830326156345],[-.557635,1.27767]],zone4:[[-.3965860167997673,1.8080830326156345],[-.389417,1.78897],[.0144398,.684374],[.6051580468079698,1.6769417299522127],[.4233286829382924,1.8263439024676476],[.01312,1.05006],[-.3126662899731374,2.0844717183302555],[-.3965860167997673,1.8080830326156345]],zone5:[[-.3126662899731374,2.0844717183302555],[.01312,1.05006],[.4233286829382924,1.8263439024676478],[.23050362977173397,1.9847808086162937],[.01312,1.46853],[-.24501712858513175,2.307273477973186],[-.3126662899731374,2.0844717183302555]],zone6:[[-.24501712858513178,2.307273477973186],[.01312,1.46853],[.23050362977173397,1.9847808086162937],[.182054,2.02459],[.14155632003411384,2.4608700593991886],[.0157596,2.2376],[-.15640870819128455,2.5991043237348594],[-.24501712858513178,2.307273477973186]],zone7:[[-.15640870819128455,2.5991043237348594],[.0157596,2.2376],[.14155632003411384,2.4608700593991886],[.091511603746722,3],[-.0346850003225585,3],[-.15640870819128455,2.5991043237348594]]},kc={zone1:[[-1,0],[.214255,0],[.214255,.0100411],[.20255,.0539655],[.183822,.106126],[.165093,.155541],[.139342,.213191],[.113591,.276333],[.0808163,.328493],[.0574059,.386144],[.0269725,.438304],[-.00814305,.484973],[-.0385765,.520662],[-.0690099,.567332],[-.104125,.605766],[-.143923,.644199],[-.183721,.677143],[-.223518,.712831],[-.260975,.74852],[-.300772,.770482],[-.338229,.797935],[-.375685,.819897],[-.420165,.84735],[-.459963,.869312],[-.509124,.894019],[-.555945,.915981],[-.609789,.932453],[-.651928,.943434],[-.70343,.959906],[-.754933,.973632],[-.8158,.984613],[-.871985,.990104],[-.935193,.998],[-.982013,.995594],[-1,.9964730699272073],[-1,0]],zone2:[[.2064750618712659,.039236240054828495],[.214255,.0100411],[.214255,0],[1,0],[1,.8318045794934391],[.99382,.819897],[.965727,.762246],[.930612,.704595],[.897837,.638709],[.860381,.592039],[.827606,.55086],[.797173,.50419],[.748011,.441049],[.715237,.391634],[.682462,.344965],[.645006,.306531],[.60989,.279078],[.56541,.243389],[.516249,.213191],[.471769,.174758],[.417925,.14456],[.366422,.114362],[.310238,.0814182],[.261076,.059456],[.2064750618712659,.039236240054828495]],zone3:[[-.1691945840894161,.6651183192180945],[-.143923,.644199],[-.104125,.605766],[-.0690099,.567332],[-.0385765,.520662],[-.00814305,.484973],[.0269725,.438304],[.0574059,.386144],[.0808163,.328493],[.113591,.276333],[.139342,.213191],[.165093,.155541],[.183822,.106126],[.20255,.0539655],[.2064750618712659,.039236240054828495],[.261076,.059456],[.310238,.0814182],[.366422,.114362],[.417925,.14456],[.471769,.174758],[.516249,.213191],[.56541,.243389],[.60989,.279078],[.645006,.306531],[.682462,.344965],[.715237,.391634],[.748011,.441049],[.797173,.50419],[.827606,.55086],[.860381,.592039],[.897837,.638709],[.930612,.704595],[.965727,.762246],[.99382,.819897],[1,.8318045794934391],[1,1.743385534886701],[.965727,1.73133],[.911883,1.73682],[.839311,1.76153],[.7838498913648442,1.785615676370634],[.778445,1.75604],[.762057,1.69015],[.743329,1.62426],[.717578,1.56387],[.689485,1.49523],[.652029,1.43209],[.619254,1.36895],[.577116,1.30032],[.530295,1.23992],[.495179,1.18227],[.453041,1.13286],[.40622,1.07521],[.366422,1.03677],[.29385,.965396],[.237666,.918727],[.174458,.866567],[.106568,.819897],[.0410187,.773227],[-.0268713,.732048],[-.0994434,.690869],[-.1691945840894161,.6651183192180945]],zone4:[[-.5572591210207868,.9163830169648318],[-.555945,.915981],[-.509124,.894019],[-.459963,.869312],[-.420165,.84735],[-.375685,.819897],[-.338229,.797935],[-.300772,.770482],[-.260975,.74852],[-.223518,.712831],[-.183721,.677143],[-.1691945840894161,.6651183192180945],[-.0994434,.690869],[-.0268713,.732048],[.0410187,.773227],[.106568,.819897],[.174458,.866567],[.237666,.918727],[.29385,.965396],[.366422,1.03677],[.40622,1.07521],[.453041,1.13286],[.495179,1.18227],[.530295,1.23992],[.577116,1.30032],[.619254,1.36895],[.652029,1.43209],[.689485,1.49523],[.717578,1.56387],[.743329,1.62426],[.762057,1.69015],[.778445,1.75604],[.7838498913648442,1.785615676370634],[.776103,1.78898],[.733965,1.81918],[.689485,1.8631],[.652029,1.90428],[.614572,1.9482],[.5812671176412162,1.992142954030625],[.556046,1.91252],[.525613,1.83016],[.492838,1.74505],[.453041,1.6627],[.422607,1.6023],[.373446,1.54739],[.324284,1.48425],[.277463,1.44582],[.22596,1.3964],[.146365,1.33052],[.0714521,1.27012],[.00590315,1.20973],[-.0690099,1.15757],[-.134559,1.12188],[-.209472,1.07521],[-.293749,1.03128],[-.36398,1.00108],[-.445916,.965396],[-.523171,.929708],[-.5572591210207868,.9163830169648318]],zone5:[[-1,.9964730699272073],[-.982013,.995594],[-.935193,.998],[-.871985,.990104],[-.8158,.984613],[-.754933,.973632],[-.70343,.959906],[-.651928,.943434],[-.609789,.932453],[-.5572591210207868,.9163830169648318],[-.523171,.929708],[-.445916,.965396],[-.36398,1.00108],[-.293749,1.03128],[-.209472,1.07521],[-.134559,1.12188],[-.0690099,1.15757],[.00590315,1.20973],[.0714521,1.27012],[.146365,1.33052],[.22596,1.3964],[.277463,1.44582],[.324284,1.48425],[.373446,1.54739],[.422607,1.6023],[.453041,1.6627],[.492838,1.74505],[.525613,1.83016],[.556046,1.91252],[.5812671176412162,1.992142954030625],[.577116,1.99762],[.544341,2.0388],[.516249,2.10194],[.478792,2.14861],[.453041,2.20901],[.420266,2.2694],[.392174,2.3298],[.3884063655271938,2.33783211915801],[.375787,2.31607],[.343012,2.25018],[.305556,2.17332],[.263417,2.11018],[.223619,2.04429],[.165093,1.97291],[.113591,1.91526],[.062088,1.8631],[.00356212,1.8082],[-.0502817,1.76976],[-.111149,1.72584],[-.179039,1.67917],[-.230541,1.64348],[-.312478,1.59681],[-.40846,1.56387],[-.488055,1.53092],[-.58872,1.49798],[-.672997,1.47876],[-.773661,1.45955],[-.864962,1.44856],[-.944557,1.44307],[-1,1.4377631547427059],[-1,.9964730699272073]],zone6:[[-1,1.4377631547427059],[-.944557,1.44307],[-.864962,1.44856],[-.773661,1.45955],[-.672997,1.47876],[-.58872,1.49798],[-.488055,1.53092],[-.40846,1.56387],[-.312478,1.59681],[-.230541,1.64348],[-.179039,1.67917],[-.111149,1.72584],[-.0502817,1.76976],[.00356212,1.8082],[.062088,1.8631],[.113591,1.91526],[.165093,1.97291],[.223619,2.04429],[.263417,2.11018],[.305556,2.17332],[.343012,2.25018],[.375787,2.31607],[.3884063655271938,2.33783211915801],[.366422,2.3847],[.347694,2.42314],[.328966,2.47255],[.303215,2.51922],[.289168,2.56864],[.263417,2.62354],[.24703,2.66747],[.232983,2.71688],[.216596,2.75531],[.200209,2.81022],[.186163,2.85689],[.169776,2.9118],[.148706,2.95847],[.1412503458588957,3],[-.001459668032786902,3],[-.00346099,2.98592],[-.0385765,2.90356],[-.073692,2.83218],[-.118172,2.75531],[-.16031,2.68394],[-.200108,2.62354],[-.244588,2.57687],[-.29609,2.53295],[-.352275,2.48902],[-.403778,2.44784],[-.471668,2.40941],[-.527853,2.36823],[-.586379,2.33529],[-.649586,2.30509],[-.726841,2.27215],[-.804095,2.24744],[-.881349,2.21999],[-.956262,2.20077],[-1,2.1949642579667628],[-1,1.4377631547427059]],zone7:[[-1,2.1949642579667628],[-.956262,2.20077],[-.881349,2.21999],[-.804095,2.24744],[-.726841,2.27215],[-.649586,2.30509],[-.586379,2.33529],[-.527853,2.36823],[-.471668,2.40941],[-.403778,2.44784],[-.352275,2.48902],[-.29609,2.53295],[-.244588,2.57687],[-.200108,2.62354],[-.16031,2.68394],[-.118172,2.75531],[-.073692,2.83218],[-.0385765,2.90356],[-.00346099,2.98592],[-.001459668032786902,3],[-1,3],[-1,2.1949642579667628]],zone8:[[.1412503458588957,3],[.148706,2.95847],[.169776,2.9118],[.186163,2.85689],[.200209,2.81022],[.216596,2.75531],[.232983,2.71688],[.24703,2.66747],[.263417,2.62354],[.289168,2.56864],[.303215,2.51922],[.328966,2.47255],[.347694,2.42314],[.366422,2.3847],[.392174,2.3298],[.420266,2.2694],[.453041,2.20901],[.478792,2.14861],[.516249,2.10194],[.544341,2.0388],[.577116,1.99762],[.5812671176412162,1.992142954030625],[.58648,2.0086],[.607549,2.08821],[.628618,2.17881],[.647347,2.26666],[.661393,2.36549],[.670757,2.45883],[.67778,2.54393],[.682462,2.63727],[.689485,2.74159],[.689485,2.84591],[.687144,2.93925],[.6855251525327263,3],[.1412503458588957,3]],zone9:[[.5812671176412162,1.992142954030625],[.614572,1.9482],[.652029,1.90428],[.689485,1.8631],[.733965,1.81918],[.776103,1.78898],[.839311,1.76153],[.911883,1.73682],[.965727,1.73133],[1,1.743385534886701],[1,3],[.6855251525327263,3],[.687144,2.93925],[.689485,2.84591],[.689485,2.74159],[.682462,2.63727],[.67778,2.54393],[.670757,2.45883],[.661393,2.36549],[.647347,2.26666],[.628618,2.17881],[.607549,2.08821],[.58648,2.0086],[.5812671176412162,1.992142954030625]]},Rc={zone1:[[1.40104,0],[1.40104,1],[.801704,0],[1.40104,0]],zone2:[[.801704,0],[.539905,.442651],[.141125,0],[.801704,0]],zone3:[[1.40104,1],[.8,1.60253],[.0303888,1.20246],[.0310289,1],[-.0304203,1],[-.0291401,1.20408],[-.6,1.39605],[.141125,0],[.539905,.442651],[.801704,0],[1.40104,1]],zone4a:[[-.1,3.78518],[-.6,1.39605],[-.0291401,1.20408],[-.1,3.78518]],zone4b:[[.0617535,3.78356],[.0303888,1.20246],[.8,1.60253],[.4,2],[.0617535,3.78356]],zone5a:[[-.0304203,3.78518],[-.1,3.78518],[-.0291401,1.20408],[-.0297802,1.31539],[-.0297802,1.70094],[-.0291401,2.2591],[-.0304203,3.78518]],zone5b:[[.0617535,3.78356],[.0297487,3.78679],[.0297487,2.28169],[.0297487,1.72352],[.031669,1.32184],[.0303888,1.20246],[.0617535,3.78356]],zone6:[[0,1.59285],[-.0297802,1.31539],[-.0291401,1.20408],[-.0304203,1],[.0310289,1],[.0303888,1.20246],[.031669,1.32184],[0,1.59285]],zone7:[[0,1.94937],[-.0297802,1.70094],[-.0297802,1.31539],[0,1.59285],[.031669,1.32184],[.0297487,1.72352],[0,1.94937]],zone8:[[0,2.48656],[-.0291401,2.2591],[-.0297802,1.70094],[0,1.94937],[.0297487,1.72352],[.0297487,2.28169],[0,2.48656]],zone9:[[.0297487,3.78679],[-.0304203,3.78518],[-.0291401,2.2591],[0,2.48656],[.0297487,2.28169],[.0297487,3.78679]]},Lc={zone1:[[.170602,0],[0,.477345],[-.220456,.755759],[-.382872,.855193],[-1,1],[-1,0],[.170602,0]],zone2:[[1,0],[1,.413708],[.170602,0],[1,0]],zone3:[[1,1.53134],[.285712,1.19327],[.148527,1.17338],[-1,1],[-.382872,.855193],[-.220456,.755759],[0,.477345],[.170602,0],[1,.413708],[1,1.53134]],zone4:[[1,3.77456],[.143796,3.77456],[.285712,1.19327],[1,1.53134],[1,3.77456]],zone5:[[.143796,3.77456],[-.0265037,3.77456],[.0570693,2.49386],[.09176,1.98078],[.11699,1.60293],[.148527,1.17338],[.285712,1.19327],[.143796,3.77456]],zone6:[[.11699,1.60293],[-1,1.30066],[-1,1],[.148527,1.17338],[.11699,1.60293]],zone7:[[.09176,1.98078],[-1,1.69839],[-1,1.30066],[.11699,1.60293],[.09176,1.98078]],zone8:[[.0570693,2.49386],[-1,2.17567],[-1,1.69839],[.09176,1.98078],[.0570693,2.49386]],zone9:[[-.0265037,3.77456],[-1,3.77456],[-1,2.17567],[.0570693,2.49386],[-.0265037,3.77456]]},jc={1:"Sensitive fine grained",2:"Organic material",3:"Clay",4:"Silty clay to clay",5:"Clayey silt to silty clay",6:"Sandy silt to clayey silt",7:"Silty sand to sandy silt",8:"Sand to silty sand",9:"Sand",10:"Gravelly sand to sand",11:"Very stiff find grained(overconsolidated or cemented)",12:"Sand to clayer sand(overconsolidated or cemented)",13:"9,10,11,12"},Oc={1:"Sensitive fine grained",2:"Organic soils - peats",3:"Clays - clay to silty clay",4:"Silt mixtures - clayey silt to silty clay",5:"Sand mixtures - silty sand to sandy silt",6:"Sands - clean sand to silty sand",7:"Gravelly sand to sand",8:"Very stiff sand to clayey sand(heavily overconsolidated or cemented)",9:"Very stiff fine grained(heavily overconsolidated or cemented)"},Pc={1:"Extra sensitibe clay",2:"Organic clay and peat",3:"Clay(su/p0'<=1)",4:"Clay(su/p0'>1)",5:"Clayey sand",6:"Sandy very clayey silt",7:"Sandy silt",8:"Silty sand",9:"Clean to slightly silty sand"};function _c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"numOfType");3!==r&&4!==r&&5!==r&&6!==r&&(console.log(`invalid numOfType[${r}]`),r=3);let n=Hi(t,"funAdjust");if(!Dl(e))return"";let i="",o=Tf(e);if(3===r){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"silt",6:"silt",7:"silt",8:"sand",9:"sand",10:"sand",11:"sand",12:"sand",13:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}else if(4===r){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"clayey-silt",6:"clayey-silt",7:"sandy-silt",8:"sandy-silt",9:"sand",10:"sand",11:"sand",12:"sand",13:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}else if(5===r){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"clayey-silt",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand",10:"sand",11:"silty-sand",12:"sand",13:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}else if(6===r){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"clayey-silt",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand",10:"sand",11:"clayey-sand",12:"sand",13:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}return i}function Dc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"returnZone");Pl(n)||(n=!1),e=Dl(e)?Tf(e):null,t=Dl(t)?Tf(t):null;let i=_c(e,r),o=_c(t,r);if(null===e&&null===t)return"";if(null!==e&&null===t)return n?e:i;if(null===e&&null!==t)return n?t:o;if(i!==o){let r=e>=6,u=t>=6;return r&&u?n?t:o:r||u?"":n?e:i}return n?e:i}function Cc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"numOfType");3!==r&&4!==r&&5!==r&&6!==r&&(console.log(`invalid numOfType[${r}]`),r=3);let n=Hi(t,"funAdjust");if(!Dl(e))return"";let i="",o=Tf(e);if(3===r){let e={1:"clay",2:"clay",3:"clay",4:"silt",5:"silt",6:"sand",7:"sand",8:"sand",9:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}else if(4===r){let e={1:"clay",2:"clay",3:"clay",4:"clayey-silt",5:"sandy-silt",6:"sand",7:"sand",8:"sand",9:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}else if(5===r){let e={1:"clay",2:"clay",3:"clay",4:"clayey-silt",5:"sandy-silt",6:"silty-sand",7:"sand",8:"silty-sand",9:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}else if(6===r){let e={1:"clay",2:"clay",3:"clay",4:"clayey-silt",5:"sandy-silt",6:"silty-sand",7:"sand",8:"clayey-sand",9:"sand"};bc(e,o)&&(Ml(n)&&(o=n(o,e,t)),i=e[o])}return i}function qc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"returnZone");Pl(n)||(n=!1),e=Dl(e)?Tf(e):null,t=Dl(t)?Tf(t):null;let i=Cc(e,r),o=Cc(t,r);if(null===e&&null===t)return"";if(null!==e&&null===t)return n?e:i;if(null===e&&null!==t)return n?t:o;if(i!==o){let r=e>=6,u=t>=6;return r&&u?n?t:o:r||u?"":n?e:i}return n?e:i}function Nc(e,t){return qc(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function Ac(e){let t=Hi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"numOfType");if(3!==t&&4!==t&&5!==t&&6!==t&&(console.log(`invalid numOfType[${t}]`),t=3),!Dl(e))return"";let r=Tf(e);if(3===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",6:"silt",7:"silt",5:"sand",8:"sand",9:"sand"};if(bc(e,r))return e[r]}else if(4===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",5:"sand",6:"clayey-silt",7:"sandy-silt",8:"sand",9:"sand"};if(bc(e,r))return e[r]}else if(5===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",5:"silty-sand",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand"};if(bc(e,r))return e[r]}else if(6===t){let e={1:"clay",2:"clay",3:"clay",4:"clay",5:"clayey-sand",6:"clayey-silt",7:"sandy-silt",8:"silty-sand",9:"sand"};if(bc(e,r))return e[r]}return""}function zc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"returnZone");Pl(n)||(n=!1),e=Dl(e)?Tf(e):null,t=Dl(t)?Tf(t):null;let i=Ac(e,r),o=Ac(t,r);if(null===e&&null===t)return"";if(null!==e&&null===t)return n?e:i;if(null===e&&null!==t)return n?e:o;if(i!==o){let r=5===e||8===e||9===e,u=5===t||8===t||9===t;return r&&u?n?e:o:r||u?"":n?e:i}return n?e:i}let Fc={csfIc:function(e){let t=null,r="",n=null,i=null;if(!Ca(e))return{error:"invalid Ic"};let o=wc();return Te(o,((o,u)=>{if(e>=o.min&&e<o.max)return t=u+1,r=`${o.min}~${o.max}`,n=o.nameCht,i=o.nameEng,!1})),null===n||null===i?{error:"invalid Ic"}:{success:{int:t,rang:r,cht:n,eng:i}}},csfRobRfqt:function(e,t){if(!Ca(e))return{error:"invalid Rf"};if(!Ca(t))return{error:"invalid qt"};if(e<0||e>8)return{error:"Rf < 0 or Rf > 8"};if(t<.1||t>100)return{error:"qt < 0.1 or qt > 100"};let r=[e,Math.log10(t)],n="";if(Te(Ec,((e,t)=>{if($c(r,e))return n=t,!1})),""===n)return{error:"no zone"};let i=n.replace("zone",""),o=null;return Df(i)&&(o=Tf(i),i=`${o}: ${jc[o]}`),{success:{int:o,msg:i}}},csfRobBqqt:function(e,t){if(!Ca(e))return{error:"invalid Bq"};if(!Ca(t))return{error:"invalid qt"};if(e<-.2||e>1.4)return{error:"Bq < -0.2 or Bq > 1.4"};if(t<.1||t>100)return{error:"qt < 0.1 or qt > 100"};let r=[e,Math.log10(t)],n="";if(Te(Sc,((e,t)=>{if($c(r,e))return n=t,!1})),""===n)return{error:"no zone"};let i=n.replace("zone",""),o=null;return"9,10,11,12"===i&&(i="13"),Df(i)&&(o=Tf(i),i=`${o}: ${jc[o]}`),{success:{int:o,msg:i}}},csfRobBqQt:function(e,t){if(!Ca(e))return{error:"invalid Bq"};if(!Ca(t))return{error:"invalid Qt"};if(e<-.6||e>1.4)return{error:"Bq < -0.6 or Bq > 1.4"};if(t<1||t>1e3)return{error:"Qt < 1 or Qt > 1000"};let r=[e,Math.log10(t)],n="";if(Te(Mc,((e,t)=>{if($c(r,e))return n=t,!1})),""===n)return{error:"no zone"};let i=n.replace("zone",""),o=null;return Df(i)&&(o=Tf(i),i=`${o}: ${Oc[o]}`),{success:{int:o,msg:i}}},csfRobFrQt:function(e,t){if(!Ca(e))return{error:"invalid Fr"};if(!Ca(t))return{error:"invalid Qt"};if(e<.1||e>10)return{error:"Fr < 0.1 or Fr > 10"};if(t<1||t>1e3)return{error:"Qt < 1 or Qt > 1000"};let r=[Math.log10(e),Math.log10(t)],n="";if(Te(kc,((e,t)=>{if($c(r,e))return n=t,!1})),""===n)return{error:"no zone"};let i=n.replace("zone",""),o=null;return Df(i)&&(o=Tf(i),i=`${o}: ${Oc[o]}`),{success:{int:o,msg:i}}},csfRamBqQt:function(e,t){if(!Ca(e))return{error:"invalid Bq"};if(!Ca(t))return{error:"invalid Qt"};if(e<-.6||e>1.4)return{error:"Bq < -0.6 or Bq > 1.4"};if(t<1||t>6097.895815)return{error:"Qt < 1 or Qt > 6097.895815"};let r=[e,Math.log10(t)],n="";if(Te(Rc,((e,t)=>{if($c(r,e))return n=t,!1})),""===n)return{error:"no zone"};let i=n.replace("zone","");i=i.replace("a",""),i=i.replace("b","");let o=null;return Df(i)&&(o=Tf(i),i=`${o}: ${Pc[o]}`),{success:{int:o,msg:i}}},csfRamFrQt:function(e,t){if(!Ca(e))return{error:"invalid Fr"};if(!Ca(t))return{error:"invalid Qt"};if(e<.1||e>10)return{error:"Fr < 0.1 or Fr > 10"};if(t<1||t>5950.589615)return{error:"Qt < 1 or Qt > 5950.589615"};let r=[Math.log10(e),Math.log10(t)],n="";if(Te(Lc,((e,t)=>{if($c(r,e))return n=t,!1})),""===n)return{error:"no zone"};let i=n.replace("zone",""),o=null;return Df(i)&&(o=Tf(i),i=`${o}: ${Pc[o]}`),{success:{int:o,msg:i}}}};var Tc={kpCPTClassForRobBqRfqt:jc,kpCPTClassForRobBqFrQt:Oc,kpCPTClassForRamQt:Pc,cptClassifyBond:{inforRobBqqt:{zones:Sc,markers:{zone1:{p:[1.19678,-.727798566],text:"1"},zone2:{p:[.535691,-.855211033],text:"2"},zone3:{p:[.633441,-.444014891],text:"3"},zone4:{p:[.368489,.303088011],text:"4"},zone5:{p:[.255305,.511582591],text:"5"},zone6:{p:[.18328,.760617721],text:"6"},zone7:{p:[.136977,1.015443588],text:"7"},zone8:{p:[.0983923,1.229730464],text:"8"},zone9:{p:[.0495177,1.403475708],text:"9"},zone10:{p:[.0186495,1.75096559],text:"10"},"zone9,10,11,12":{p:[[-.014791,1.60617707],[-.0122186,1.189189825]],text:"9,<br>10,<br>11,<br>12"}}},inforRobRfqt:{zones:Ec,markers:{zone1:{p:[.866142,-.534722],text:"1"},zone2:{p:[6.61417,-.833333],text:"2"},zone3:{p:[5.03937,-.083333],text:"3"},zone4:{p:[3.66929,.17361],text:"4"},zone5:{p:[2.97638,.3125],text:"5"},zone6:{p:[2.31496,.54861],text:"6"},zone7:{p:[1.65354,.8125],text:"7"},zone8:{p:[1.24409,1.05556],text:"8"},zone9:{p:[.866142,1.32639],text:"9"},zone10:{p:[.393701,1.76389],text:"10"},zone11:{p:[6.48819,1.48611],text:"11"},zone12:{p:[3.51181,1.72917],text:"12"}}},inforRobBqQt:{zones:Mc,markers:{zone1:{p:[1.21905,.455696],text:"1"},zone2:{p:[.491429,.211573],text:"2"},zone3:{p:[.529524,.922242],text:"3"},zone4:{p:[.346667,1.48101],text:"4"},zone5:{p:[.198095,1.67631],text:"5"},zone6:{p:[.0761905,2.03436],text:"6"},zone7:{p:[.0609524,2.60398],text:"7"}}},inforRobFrQt:{zones:kc,znoeNC:[[-.642563,2.38745],[.577116,.24888],[.607549,.218682],[.626277,.207701],[.649688,.204956],[.673098,.207701],[.682462,.229663],[.680121,.259861],[.666075,.292804],[.656711,.309276],[-.345252,2.64001],[-.642563,2.38745]],markers:{zone1:{p:[-.716937,.259459],text:"1"},zone2:{p:[.763341,.232432],text:"2"},zone3:{p:[.206497,.427027],text:"3"},zone4:{p:[-.141531,.951351],text:"4"},zone5:{p:[-.443155,1.2973],text:"5"},zone6:{p:[-.712297,1.85405],text:"6"},zone7:{p:[-.62877,2.77297],text:"7"},zone8:{p:[.419954,2.77297],text:"8"},zone9:{p:[.726218,2.18919],text:"9"},zoneNC:{p:[-.0719,1.679],text:"正常壓密(Normally consolidated)"}}},inforRamBqQt:{zones:Rc,markers:{zone1:{p:[1.3078,.298266],text:"1"},zone2:{p:[.504128,.17341],text:"2"},zone3:{p:[.795872,.991908],text:"3"},zone4a:{p:[-.302294,2.00462],text:"4"},zone4b:{p:[.201376,1.99769],text:"4"},zone5a:{p:[-.0573394,3.60694],text:"5"},zone5b:{p:[.0472477,3.60694],text:"5"},zone6:{p:[.0059633,1.17225],text:"6"},zone7:{p:[.0059633,1.66474],text:"7"},zone8:{p:[458716e-9,2.15723],text:"8"},zone9:{p:[.0059633,3.00347],text:"9"}}},inforRamFrQt:{zones:Lc,markers:{zone1:{p:[-.520058,.477345],text:"1"},zone2:{p:[.903837,.179044],text:"2"},zone3:{p:[.298327,.696099],text:"3"},zone4:{p:[.694116,2.00862],text:"4"},zone5:{p:[.129604,2.62113],text:"5"},zone6:{p:[-.521634,1.28475],text:"6"},zone7:{p:[-.521634,1.65862],text:"7"},zone8:{p:[-.521634,2.14385],text:"8"},zone9:{p:[-.524788,2.99898],text:"9"}}}},cptClassify:Fc,simplifyRobertson1986:Dc,simplifyRobertson1990:qc,simplifyRobertson2009:Nc,simplifyRamsey:zc};function Ic(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ic(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bc(e){let t=[];return Te(e,(e=>{let r={};Te(e,((e,t)=>{El(e)&&(e=Sl(e)),r[t]=e}));let n=of(e=r,"depth"),i=of(e,"qc"),o=of(e,"fs"),u=of(e,"u2");t.push(Uc(Uc({},e),{},{depth:n,qc:i,fs:o,u2:u}))})),t}function Qc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"ranger");Rl(r)||(r={depthHalf:.25});let n=Hi(t,"methodSmooth");return"none"!==n&&"average"!==n&&"averageIn95"!==n&&(n="none"),"none"!==n&&(e=mc(e,"qc",{ranger:r,methodSmooth:n}),e=mc(e,"fs",{ranger:r,methodSmooth:n}),e=mc(e,"u2",{ranger:r,methodSmooth:n})),e}function Gc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"intrpSv");Ml(r)||(r=ff);let n=Hi(t,"intrpU0");Ml(n)||(n=sf);let i=[];return Te(e,((t,o)=>{let u=of(t,"depth"),a=r(u,o,t,e).sv;Dl(a)&&(a=Gl(a));let l=n(u,o,t,e);Dl(l)&&(l=Gl(l));let s=of(t,"u2");if(null!==s&&s>10)return!0;let f=null;Ca(a)&&Ca(l)&&(f=a-l,f=Math.max(f,0)),i.push(Uc(Uc({},t),{},{sv:a,svp:f,u0:l}))})),i}function Hc(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=null,o=lf.Pa,u=Hi(n,"useCnLeq");if(Pl(u)||(u=!1),r<=0)return{Qtn:null,Icn:null,err:"svp <= 0"};let a=n=>{let i=(o/r)**n;u&&(i=Math.min(i,1.7));let a=i*e/o,l=Math.sqrt((3.47-Math.log10(a))**2+(Math.log10(t)+1.22)**2);return{n:n,Cn:i,Qtn:a,Icn:l,nn:.381*l+r/o*.05-.15}},l=e=>{let t=a(e);return Math.abs(t.n-t.nn)},s=null,f=null;try{let e=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!Ml(e))throw new Error("invalid fun");if(!Dl(t))throw new Error("xMin is not a number");if(t=Gl(t),!Dl(r))throw new Error("xMax is not a number");r=Gl(r);let i=Hi(n,"delta");Dl(i)||(i=.1),i=Gl(i);let o=Hi(n,"maxIterations");Dl(o)||(o=100),o=Gl(o);let u=e(t),a=e(r),l=(t+r)/2,s=e(l),f=0,c=null;for(;;){if(f++,f>o)return null;if(u<=a&&u<=s){c={y:u,x:t};break}if(a<=u&&a<=s){c={y:a,x:r};break}a>=u?(a=s,a=e(r=l)):(u=s,u=e(t=l)),l=(t+r)/2,s=e(l)}return c}(l,0,1),t=e.x,r=a(t);if(r.nn>1)throw new Error("無法收斂");s=Hi(r,"Qtn",null),f=Hi(r,"Icn",null)}catch(e){i=e.toString()}return{Qtn:s,Icn:f,err:i}}function Wc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(e,t)=>Hi(e,`success.${t}`,null),i=Hi(e,"sv");i=Dl(i)?Gl(i):null;let o=Hi(e,"svp");o=Dl(o)?Gl(o):null;let u=Hi(e,"qc");u=Dl(u)?Gl(u):null;let a=Hi(e,"fs");a=Dl(a)?Gl(a):null;let l=Hi(e,"u0");l=Dl(l)?Gl(l):null;let s=Hi(e,"u2");if(s=Dl(s)?Gl(s):null,!Dl(t))throw new Error(`coe_a[${t}] is not a number`);t=Gl(t);let f=Hi(r,"useCnLeq");Pl(f)||(f=!1);let c=null;Ca(u)&&Ca(l)&&Ca(s)&&(c=u+s*(1-t),c=Math.max(c,0));let p=null;Ca(c)&&Ca(i)&&(p=c-i,p=Math.max(p,0));let h=null;Ca(p)&&Ca(s)&&p>0&&(h=(s-l)/p);let d=null;Ca(c)&&Ca(a)&&c>0&&(d=a/c*100,d=Math.max(d,0));let v=null;Ca(p)&&Ca(o)&&o>0&&(v=p/o,v=Math.max(v,0));let g=null;Ca(p)&&Ca(a)&&p>0&&(g=a/p*100,g=Math.max(g,0));let m=null;Ca(v)&&Ca(g)&&v>0&&g>0&&(m=Math.sqrt((3.47-Math.log10(v))**2+(Math.log10(g)+1.22)**2));let b=Hc(p,g,o,{useCnLeq:f}),y=Hi(b,"Icn",null),w=Hi(b,"Qtn",null),x=Fc.csfIc(m),$=Fc.csfIc(y),S=Fc.csfRobBqqt(h,c),E=Fc.csfRobRfqt(d,c),M=Fc.csfRobBqQt(h,v),k=Fc.csfRobFrQt(g,v),R=Fc.csfRobBqQt(h,w),L=Fc.csfRobFrQt(g,w),j=Fc.csfRamBqQt(h,v),O=Fc.csfRamFrQt(g,v),P=n(x,"int"),_=n($,"int"),D=n(S,"int"),C=n(E,"int"),q=n(M,"int"),N=n(k,"int"),A=n(R,"int"),z=n(L,"int"),F=n(j,"int"),T=n(O,"int");return Uc(Uc({},e),{},{sv:i,svp:o,qc:u,fs:a,u0:l,u2:s,qt:c,qnet:p,Bq:h,Qt:v,Qtn:w,Rf:d,Fr:g,Ic:m,Icn:y,iIc:P,iIcn:_,iRobBqqt:D,iRobRfqt:C,iRobBqQt:q,iRobFrQt:N,iRobBqQtn:A,iRobFrQtn:z,iRamBqQt:F,iRamFrQt:T})}var Vc={basic:Bc,smooth:Qc,stress:Gc,calcCpt:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"coe_a");return Dl(r)||(r=.8),r=Gl(r),e=Gc(e=Qc(e=Bc(e=Pa(e)),t),t),e=Oo(e,(e=>Wc(e,r)))},calcCptCore:Wc};function Yc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Dl(e)&&If(t)?(e=Gl(e),Ff(e,t).toFixed(t)):""}var Zc=Array.prototype.join;var Kc,Jc,Xc=function(e,t){return null==e?"":Zc.call(e,t)},ep=9e15,tp=1e9,rp="0123456789abcdef",np="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ip="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",op={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ep,maxE:ep,crypto:!1},up=!0,ap="[DecimalError] ",lp=ap+"Invalid argument: ",sp=ap+"Precision limit exceeded",fp=ap+"crypto unavailable",cp="[object Decimal]",pp=Math.floor,hp=Math.pow,dp=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,vp=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,gp=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,mp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,bp=1e7,yp=7,wp=np.length-1,xp=ip.length-1,$p={toStringTag:cp};
/*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   */function Sp(e){var t,r,n,i=e.length-1,o="",u=e[0];if(i>0){for(o+=u,t=1;t<i;t++)n=e[t]+"",(r=yp-n.length)&&(o+=Cp(r)),o+=n;u=e[t],(r=yp-(n=u+"").length)&&(o+=Cp(r))}else if(0===u)return"0";for(;u%10==0;)u/=10;return o+u}function Ep(e,t,r){if(e!==~~e||e<t||e>r)throw Error(lp+e)}function Mp(e,t,r,n){var i,o,u,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=yp,i=0):(i=Math.ceil((t+1)/yp),t%=yp),o=hp(10,yp-t),a=e[i]%o|0,null==n?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),u=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):u=(r<4&&a+1==o||r>3&&a+1==o/2)&&(e[i+1]/o/100|0)==hp(10,t-2)-1||(a==o/2||0==a)&&0==(e[i+1]/o/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),u=(n||r<4)&&9999==a||!n&&r>3&&4999==a):u=((n||r<4)&&a+1==o||!n&&r>3&&a+1==o/2)&&(e[i+1]/o/1e3|0)==hp(10,t-3)-1,u}function kp(e,t,r){for(var n,i,o=[0],u=0,a=e.length;u<a;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=rp.indexOf(e.charAt(u++)),n=0;n<o.length;n++)o[n]>r-1&&(void 0===o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}$p.absoluteValue=$p.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Lp(e)},$p.ceil=function(){return Lp(new this.constructor(this),this.e+1,2)},$p.clampedTo=$p.clamp=function(e,t){var r=this,n=r.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(lp+t);return r.cmp(e)<0?e:r.cmp(t)>0?t:new n(r)},$p.comparedTo=$p.cmp=function(e){var t,r,n,i,o=this,u=o.d,a=(e=new o.constructor(e)).d,l=o.s,s=e.s;if(!u||!a)return l&&s?l!==s?l:u===a?0:!u^l<0?1:-1:NaN;if(!u[0]||!a[0])return u[0]?l:a[0]?-s:0;if(l!==s)return l;if(o.e!==e.e)return o.e>e.e^l<0?1:-1;for(t=0,r=(n=u.length)<(i=a.length)?n:i;t<r;++t)if(u[t]!==a[t])return u[t]>a[t]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1},$p.cosine=$p.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+yp,n.rounding=1,r=function(e,t){var r,n,i;if(t.isZero())return t;n=t.d.length,n<32?i=(1/Qp(4,r=Math.ceil(n/3))).toString():(r=16,i="2.3283064365386962890625e-10");e.precision+=r,t=Bp(e,1,t.times(i),new e(1));for(var o=r;o--;){var u=t.times(t);t=u.times(u).minus(u).times(8).plus(1)}return e.precision-=r,t}(n,Gp(n,r)),n.precision=e,n.rounding=t,Lp(2==Jc||3==Jc?r.neg():r,e,t,!0)):new n(1):new n(NaN)},$p.cubeRoot=$p.cbrt=function(){var e,t,r,n,i,o,u,a,l,s,f=this,c=f.constructor;if(!f.isFinite()||f.isZero())return new c(f);for(up=!1,(o=f.s*hp(f.s*f,1/3))&&Math.abs(o)!=1/0?n=new c(o.toString()):(r=Sp(f.d),(o=((e=f.e)-r.length+1)%3)&&(r+=1==o||-2==o?"0":"00"),o=hp(r,1/3),e=pp((e+1)/3)-(e%3==(e<0?-1:2)),(n=new c(r=o==1/0?"5e"+e:(r=o.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=f.s),u=(e=c.precision)+3;;)if(s=(l=(a=n).times(a).times(a)).plus(f),n=Rp(s.plus(f).times(a),s.plus(l),u+2,1),Sp(a.d).slice(0,u)===(r=Sp(n.d)).slice(0,u)){if("9999"!=(r=r.slice(u-3,u+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(Lp(n,e+1,1),t=!n.times(n).times(n).eq(f));break}if(!i&&(Lp(a,e+1,0),a.times(a).times(a).eq(f))){n=a;break}u+=4,i=1}return up=!0,Lp(n,e,c.rounding,t)},$p.decimalPlaces=$p.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=((e=t.length-1)-pp(this.e/yp))*yp,e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},$p.dividedBy=$p.div=function(e){return Rp(this,new this.constructor(e))},$p.dividedToIntegerBy=$p.divToInt=function(e){var t=this.constructor;return Lp(Rp(this,new t(e),0,1,1),t.precision,t.rounding)},$p.equals=$p.eq=function(e){return 0===this.cmp(e)},$p.floor=function(){return Lp(new this.constructor(this),this.e+1,3)},$p.greaterThan=$p.gt=function(e){return this.cmp(e)>0},$p.greaterThanOrEqualTo=$p.gte=function(e){var t=this.cmp(e);return 1==t||0===t},$p.hyperbolicCosine=$p.cosh=function(){var e,t,r,n,i,o=this,u=o.constructor,a=new u(1);if(!o.isFinite())return new u(o.s?1/0:NaN);if(o.isZero())return a;r=u.precision,n=u.rounding,u.precision=r+Math.max(o.e,o.sd())+4,u.rounding=1,(i=o.d.length)<32?t=(1/Qp(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=Bp(u,1,o.times(t),new u(1),!0);for(var l,s=e,f=new u(8);s--;)l=o.times(o),o=a.minus(l.times(f.minus(l.times(f))));return Lp(o,u.precision=r,u.rounding=n,!0)},$p.hyperbolicSine=$p.sinh=function(){var e,t,r,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,r=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(n=i.d.length)<3)i=Bp(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(n))>16?16:0|e,i=Bp(o,2,i=i.times(1/Qp(5,e)),i,!0);for(var u,a=new o(5),l=new o(16),s=new o(20);e--;)u=i.times(i),i=i.times(a.plus(u.times(l.times(u).plus(s))))}return o.precision=t,o.rounding=r,Lp(i,t,r,!0)},$p.hyperbolicTangent=$p.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,Rp(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)},$p.inverseCosine=$p.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),i=r.precision,o=r.rounding;return-1!==n?0===n?t.isNeg()?_p(r,i,o):new r(0):new r(NaN):t.isZero()?_p(r,i+4,o).times(.5):(r.precision=i+6,r.rounding=1,t=t.asin(),e=_p(r,i+4,o).times(.5),r.precision=i,r.rounding=o,e.minus(t))},$p.inverseHyperbolicCosine=$p.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,up=!1,r=r.times(r).minus(1).sqrt().plus(r),up=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},$p.inverseHyperbolicSine=$p.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,up=!1,r=r.times(r).plus(1).sqrt().plus(r),up=!0,n.precision=e,n.rounding=t,r.ln())},$p.inverseHyperbolicTangent=$p.atanh=function(){var e,t,r,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?Lp(new o(i),e,t,!0):(o.precision=r=n-i.e,i=Rp(i.plus(1),new o(1).minus(i),r+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},$p.inverseSine=$p.asin=function(){var e,t,r,n,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),r=o.precision,n=o.rounding,-1!==t?0===t?((e=_p(o,r+4,n).times(.5)).s=i.s,e):new o(NaN):(o.precision=r+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=n,i.times(2)))},$p.inverseTangent=$p.atan=function(){var e,t,r,n,i,o,u,a,l,s=this,f=s.constructor,c=f.precision,p=f.rounding;if(s.isFinite()){if(s.isZero())return new f(s);if(s.abs().eq(1)&&c+4<=xp)return(u=_p(f,c+4,p).times(.25)).s=s.s,u}else{if(!s.s)return new f(NaN);if(c+4<=xp)return(u=_p(f,c+4,p).times(.5)).s=s.s,u}for(f.precision=a=c+10,f.rounding=1,e=r=Math.min(28,a/yp+2|0);e;--e)s=s.div(s.times(s).plus(1).sqrt().plus(1));for(up=!1,t=Math.ceil(a/yp),n=1,l=s.times(s),u=new f(s),i=s;-1!==e;)if(i=i.times(l),o=u.minus(i.div(n+=2)),i=i.times(l),void 0!==(u=o.plus(i.div(n+=2))).d[t])for(e=t;u.d[e]===o.d[e]&&e--;);return r&&(u=u.times(2<<r-1)),up=!0,Lp(u,f.precision=c,f.rounding=p,!0)},$p.isFinite=function(){return!!this.d},$p.isInteger=$p.isInt=function(){return!!this.d&&pp(this.e/yp)>this.d.length-2},$p.isNaN=function(){return!this.s},$p.isNegative=$p.isNeg=function(){return this.s<0},$p.isPositive=$p.isPos=function(){return this.s>0},$p.isZero=function(){return!!this.d&&0===this.d[0]},$p.lessThan=$p.lt=function(e){return this.cmp(e)<0},$p.lessThanOrEqualTo=$p.lte=function(e){return this.cmp(e)<1},$p.logarithm=$p.log=function(e){var t,r,n,i,o,u,a,l,s=this,f=s.constructor,c=f.precision,p=f.rounding;if(null==e)e=new f(10),t=!0;else{if(r=(e=new f(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(r=s.d,s.s<0||!r||!r[0]||s.eq(1))return new f(r&&!r[0]?-1/0:1!=s.s?NaN:r?0:1/0);if(t)if(r.length>1)o=!0;else{for(i=r[0];i%10==0;)i/=10;o=1!==i}if(up=!1,u=Fp(s,a=c+5),n=t?Pp(f,a+10):Fp(e,a),Mp((l=Rp(u,n,a,1)).d,i=c,p))do{if(u=Fp(s,a+=10),n=t?Pp(f,a+10):Fp(e,a),l=Rp(u,n,a,1),!o){+Sp(l.d).slice(i+1,i+15)+1==1e14&&(l=Lp(l,c+1,0));break}}while(Mp(l.d,i+=10,p));return up=!0,Lp(l,c,p)},$p.minus=$p.sub=function(e){var t,r,n,i,o,u,a,l,s,f,c,p,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new d(e.d||h.s!==e.s?h:NaN):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(s=h.d,p=e.d,a=d.precision,l=d.rounding,!s[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!s[0])return new d(3===l?-0:0);e=new d(h)}return up?Lp(e,a,l):e}if(r=pp(e.e/yp),f=pp(h.e/yp),s=s.slice(),o=f-r){for((c=o<0)?(t=s,o=-o,u=p.length):(t=p,r=f,u=s.length),o>(n=Math.max(Math.ceil(a/yp),u)+2)&&(o=n,t.length=1),t.reverse(),n=o;n--;)t.push(0);t.reverse()}else{for((c=(n=s.length)<(u=p.length))&&(u=n),n=0;n<u;n++)if(s[n]!=p[n]){c=s[n]<p[n];break}o=0}for(c&&(t=s,s=p,p=t,e.s=-e.s),u=s.length,n=p.length-u;n>0;--n)s[u++]=0;for(n=p.length;n>o;){if(s[--n]<p[n]){for(i=n;i&&0===s[--i];)s[i]=bp-1;--s[i],s[n]+=bp}s[n]-=p[n]}for(;0===s[--u];)s.pop();for(;0===s[0];s.shift())--r;return s[0]?(e.d=s,e.e=Op(s,r),up?Lp(e,a,l):e):new d(3===l?-0:0)},$p.modulo=$p.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?Lp(new n(r),n.precision,n.rounding):(up=!1,9==n.modulo?(t=Rp(r,e.abs(),0,3,1)).s*=e.s:t=Rp(r,e,0,n.modulo,1),t=t.times(e),up=!0,r.minus(t))},$p.naturalExponential=$p.exp=function(){return zp(this)},$p.naturalLogarithm=$p.ln=function(){return Fp(this)},$p.negated=$p.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Lp(e)},$p.plus=$p.add=function(e){var t,r,n,i,o,u,a,l,s,f,c=this,p=c.constructor;if(e=new p(e),!c.d||!e.d)return c.s&&e.s?c.d||(e=new p(e.d||c.s===e.s?c:NaN)):e=new p(NaN),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(s=c.d,f=e.d,a=p.precision,l=p.rounding,!s[0]||!f[0])return f[0]||(e=new p(c)),up?Lp(e,a,l):e;if(o=pp(c.e/yp),n=pp(e.e/yp),s=s.slice(),i=o-n){for(i<0?(r=s,i=-i,u=f.length):(r=f,n=o,u=s.length),i>(u=(o=Math.ceil(a/yp))>u?o+1:u+1)&&(i=u,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((u=s.length)-(i=f.length)<0&&(i=u,r=f,f=s,s=r),t=0;i;)t=(s[--i]=s[i]+f[i]+t)/bp|0,s[i]%=bp;for(t&&(s.unshift(t),++n),u=s.length;0==s[--u];)s.pop();return e.d=s,e.e=Op(s,n),up?Lp(e,a,l):e},$p.precision=$p.sd=function(e){var t,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(lp+e);return r.d?(t=Dp(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t},$p.round=function(){var e=this,t=e.constructor;return Lp(new t(e),e.e+1,t.rounding)},$p.sine=$p.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+yp,n.rounding=1,r=function(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:Bp(e,2,t,t);r=(r=1.4*Math.sqrt(n))>16?16:0|r,t=t.times(1/Qp(5,r)),t=Bp(e,2,t,t);for(var i,o=new e(5),u=new e(16),a=new e(20);r--;)i=t.times(t),t=t.times(o.plus(i.times(u.times(i).minus(a))));return t}(n,Gp(n,r)),n.precision=e,n.rounding=t,Lp(Jc>2?r.neg():r,e,t,!0)):new n(NaN)},$p.squareRoot=$p.sqrt=function(){var e,t,r,n,i,o,u=this,a=u.d,l=u.e,s=u.s,f=u.constructor;if(1!==s||!a||!a[0])return new f(!s||s<0&&(!a||a[0])?NaN:a?u:1/0);for(up=!1,0==(s=Math.sqrt(+u))||s==1/0?(((t=Sp(a)).length+l)%2==0&&(t+="0"),s=Math.sqrt(t),l=pp((l+1)/2)-(l<0||l%2),n=new f(t=s==1/0?"5e"+l:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new f(s.toString()),r=(l=f.precision)+3;;)if(n=(o=n).plus(Rp(u,o,r+2,1)).times(.5),Sp(o.d).slice(0,r)===(t=Sp(n.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Lp(n,l+1,1),e=!n.times(n).eq(u));break}if(!i&&(Lp(o,l+1,0),o.times(o).eq(u))){n=o;break}r+=4,i=1}return up=!0,Lp(n,l,f.rounding,e)},$p.tangent=$p.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(r=r.sin()).s=1,r=Rp(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,Lp(2==Jc||4==Jc?r.neg():r,e,t,!0)):new n(NaN)},$p.times=$p.mul=function(e){var t,r,n,i,o,u,a,l,s,f=this,c=f.constructor,p=f.d,h=(e=new c(e)).d;if(e.s*=f.s,!(p&&p[0]&&h&&h[0]))return new c(!e.s||p&&!p[0]&&!h||h&&!h[0]&&!p?NaN:p&&h?0*e.s:e.s/0);for(r=pp(f.e/yp)+pp(e.e/yp),(l=p.length)<(s=h.length)&&(o=p,p=h,h=o,u=l,l=s,s=u),o=[],n=u=l+s;n--;)o.push(0);for(n=s;--n>=0;){for(t=0,i=l+n;i>n;)a=o[i]+h[n]*p[i-n-1]+t,o[i--]=a%bp|0,t=a/bp|0;o[i]=(o[i]+t)%bp|0}for(;!o[--u];)o.pop();return t?++r:o.shift(),e.d=o,e.e=Op(o,r),up?Lp(e,c.precision,c.rounding):e},$p.toBinary=function(e,t){return Hp(this,2,e,t)},$p.toDecimalPlaces=$p.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(Ep(e,0,tp),void 0===t?t=n.rounding:Ep(t,0,8),Lp(r,e+r.e+1,t))},$p.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=jp(n,!0):(Ep(e,0,tp),void 0===t?t=i.rounding:Ep(t,0,8),r=jp(n=Lp(new i(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},$p.toFixed=function(e,t){var r,n,i=this,o=i.constructor;return void 0===e?r=jp(i):(Ep(e,0,tp),void 0===t?t=o.rounding:Ep(t,0,8),r=jp(n=Lp(new o(i),e+i.e+1,t),!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},$p.toFraction=function(e){var t,r,n,i,o,u,a,l,s,f,c,p,h=this,d=h.d,v=h.constructor;if(!d)return new v(h);if(s=r=new v(1),n=l=new v(0),u=(o=(t=new v(n)).e=Dp(d)-h.e-1)%yp,t.d[0]=hp(10,u<0?yp+u:u),null==e)e=o>0?t:s;else{if(!(a=new v(e)).isInt()||a.lt(s))throw Error(lp+a);e=a.gt(t)?o>0?t:s:a}for(up=!1,a=new v(Sp(d)),f=v.precision,v.precision=o=d.length*yp*2;c=Rp(a,t,0,1,1),1!=(i=r.plus(c.times(n))).cmp(e);)r=n,n=i,i=s,s=l.plus(c.times(i)),l=i,i=t,t=a.minus(c.times(i)),a=i;return i=Rp(e.minus(r),n,0,1,1),l=l.plus(i.times(s)),r=r.plus(i.times(n)),l.s=s.s=h.s,p=Rp(s,n,o,1).minus(h).abs().cmp(Rp(l,r,o,1).minus(h).abs())<1?[s,n]:[l,r],v.precision=f,up=!0,p},$p.toHexadecimal=$p.toHex=function(e,t){return Hp(this,16,e,t)},$p.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:Ep(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(up=!1,r=Rp(r,e,0,t,1).times(e),up=!0,Lp(r)):(e.s=r.s,r=e),r},$p.toNumber=function(){return+this},$p.toOctal=function(e,t){return Hp(this,8,e,t)},$p.toPower=$p.pow=function(e){var t,r,n,i,o,u,a=this,l=a.constructor,s=+(e=new l(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new l(hp(+a,s));if((a=new l(a)).eq(1))return a;if(n=l.precision,o=l.rounding,e.eq(1))return Lp(a,n,o);if((t=pp(e.e/yp))>=e.d.length-1&&(r=s<0?-s:s)<=9007199254740991)return i=qp(l,a,r,n),e.s<0?new l(1).div(i):Lp(i,n,o);if((u=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(u=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=u,a}return(t=0!=(r=hp(+a,s))&&isFinite(r)?new l(r+"").e:pp(s*(Math.log("0."+Sp(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?u/0:0):(up=!1,l.rounding=a.s=1,r=Math.min(12,(t+"").length),(i=zp(e.times(Fp(a,n+r)),n)).d&&Mp((i=Lp(i,n+5,1)).d,n,o)&&(t=n+10,+Sp((i=Lp(zp(e.times(Fp(a,t+r)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=Lp(i,n+1,0))),i.s=u,up=!0,l.rounding=o,Lp(i,n,o))},$p.toPrecision=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=jp(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Ep(e,1,tp),void 0===t?t=i.rounding:Ep(t,0,8),r=jp(n=Lp(new i(n),e,t),e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r},$p.toSignificantDigits=$p.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(Ep(e,1,tp),void 0===t?t=r.rounding:Ep(t,0,8)),Lp(new r(this),e,t)},$p.toString=function(){var e=this,t=e.constructor,r=jp(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r},$p.truncated=$p.trunc=function(){return Lp(new this.constructor(this),this.e+1,1)},$p.valueOf=$p.toJSON=function(){var e=this,t=e.constructor,r=jp(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};var Rp=function(){function e(e,t,r){var n,i=0,o=e.length;for(e=e.slice();o--;)n=e[o]*t+i,e[o]=n%r|0,i=n/r|0;return i&&e.unshift(i),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,o,u,a,l){var s,f,c,p,h,d,v,g,m,b,y,w,x,$,S,E,M,k,R,L,j=n.constructor,O=n.s==i.s?1:-1,P=n.d,_=i.d;if(!(P&&P[0]&&_&&_[0]))return new j(n.s&&i.s&&(P?!_||P[0]!=_[0]:_)?P&&0==P[0]||!_?0*O:O/0:NaN);for(l?(h=1,f=n.e-i.e):(l=bp,h=yp,f=pp(n.e/h)-pp(i.e/h)),R=_.length,M=P.length,b=(m=new j(O)).d=[],c=0;_[c]==(P[c]||0);c++);if(_[c]>(P[c]||0)&&f--,null==o?($=o=j.precision,u=j.rounding):$=a?o+(n.e-i.e)+1:o,$<0)b.push(1),d=!0;else{if($=$/h+2|0,c=0,1==R){for(p=0,_=_[0],$++;(c<M||p)&&$--;c++)S=p*l+(P[c]||0),b[c]=S/_|0,p=S%_|0;d=p||c<M}else{for((p=l/(_[0]+1)|0)>1&&(_=e(_,p,l),P=e(P,p,l),R=_.length,M=P.length),E=R,w=(y=P.slice(0,R)).length;w<R;)y[w++]=0;(L=_.slice()).unshift(0),k=_[0],_[1]>=l/2&&++k;do{p=0,(s=t(_,y,R,w))<0?(x=y[0],R!=w&&(x=x*l+(y[1]||0)),(p=x/k|0)>1?(p>=l&&(p=l-1),1==(s=t(v=e(_,p,l),y,g=v.length,w=y.length))&&(p--,r(v,R<g?L:_,g,l))):(0==p&&(s=p=1),v=_.slice()),(g=v.length)<w&&v.unshift(0),r(y,v,w,l),-1==s&&(s=t(_,y,R,w=y.length))<1&&(p++,r(y,R<w?L:_,w,l)),w=y.length):0===s&&(p++,y=[0]),b[c++]=p,s&&y[0]?y[w++]=P[E]||0:(y=[P[E]],w=1)}while((E++<M||void 0!==y[0])&&$--);d=void 0!==y[0]}b[0]||b.shift()}if(1==h)m.e=f,Kc=d;else{for(c=1,p=b[0];p>=10;p/=10)c++;m.e=c+f*h-1,Lp(m,a?o+m.e+1:o,u,d)}return m}}();function Lp(e,t,r,n){var i,o,u,a,l,s,f,c,p,h=e.constructor;e:if(null!=t){if(!(c=e.d))return e;for(i=1,a=c[0];a>=10;a/=10)i++;if((o=t-i)<0)o+=yp,u=t,l=(f=c[p=0])/hp(10,i-u-1)%10|0;else if((p=Math.ceil((o+1)/yp))>=(a=c.length)){if(!n)break e;for(;a++<=p;)c.push(0);f=l=0,i=1,u=(o%=yp)-yp+1}else{for(f=a=c[p],i=1;a>=10;a/=10)i++;l=(u=(o%=yp)-yp+i)<0?0:f/hp(10,i-u-1)%10|0}if(n=n||t<0||void 0!==c[p+1]||(u<0?f:f%hp(10,i-u-1)),s=r<4?(l||n)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||n||6==r&&(o>0?u>0?f/hp(10,i-u):0:c[p-1])%10&1||r==(e.s<0?8:7)),t<1||!c[0])return c.length=0,s?(t-=e.e+1,c[0]=hp(10,(yp-t%yp)%yp),e.e=-t||0):c[0]=e.e=0,e;if(0==o?(c.length=p,a=1,p--):(c.length=p+1,a=hp(10,yp-o),c[p]=u>0?(f/hp(10,i-u)%hp(10,u)|0)*a:0),s)for(;;){if(0==p){for(o=1,u=c[0];u>=10;u/=10)o++;for(u=c[0]+=a,a=1;u>=10;u/=10)a++;o!=a&&(e.e++,c[0]==bp&&(c[0]=1));break}if(c[p]+=a,c[p]!=bp)break;c[p--]=0,a=1}for(o=c.length;0===c[--o];)c.pop()}return up&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function jp(e,t,r){if(!e.isFinite())return Tp(e);var n,i=e.e,o=Sp(e.d),u=o.length;return t?(r&&(n=r-u)>0?o=o.charAt(0)+"."+o.slice(1)+Cp(n):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+Cp(-i-1)+o,r&&(n=r-u)>0&&(o+=Cp(n))):i>=u?(o+=Cp(i+1-u),r&&(n=r-i-1)>0&&(o=o+"."+Cp(n))):((n=i+1)<u&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-u)>0&&(i+1===u&&(o+="."),o+=Cp(n))),o}function Op(e,t){var r=e[0];for(t*=yp;r>=10;r/=10)t++;return t}function Pp(e,t,r){if(t>wp)throw up=!0,r&&(e.precision=r),Error(sp);return Lp(new e(np),t,1,!0)}function _p(e,t,r){if(t>xp)throw Error(sp);return Lp(new e(ip),t,r,!0)}function Dp(e){var t=e.length-1,r=t*yp+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Cp(e){for(var t="";e--;)t+="0";return t}function qp(e,t,r,n){var i,o=new e(1),u=Math.ceil(n/yp+4);for(up=!1;;){if(r%2&&Wp((o=o.times(t)).d,u)&&(i=!0),0===(r=pp(r/2))){r=o.d.length-1,i&&0===o.d[r]&&++o.d[r];break}Wp((t=t.times(t)).d,u)}return up=!0,o}function Np(e){return 1&e.d[e.d.length-1]}function Ap(e,t,r){for(var n,i=new e(t[0]),o=0;++o<t.length;){if(!(n=new e(t[o])).s){i=n;break}i[r](n)&&(i=n)}return i}function zp(e,t){var r,n,i,o,u,a,l,s=0,f=0,c=0,p=e.constructor,h=p.rounding,d=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(up=!1,l=d):l=t,a=new p(.03125);e.e>-2;)e=e.times(a),c+=5;for(l+=n=Math.log(hp(2,c))/Math.LN10*2+5|0,r=o=u=new p(1),p.precision=l;;){if(o=Lp(o.times(e),l,1),r=r.times(++f),Sp((a=u.plus(Rp(o,r,l,1))).d).slice(0,l)===Sp(u.d).slice(0,l)){for(i=c;i--;)u=Lp(u.times(u),l,1);if(null!=t)return p.precision=d,u;if(!(s<3&&Mp(u.d,l-n,h,s)))return Lp(u,p.precision=d,h,up=!0);p.precision=l+=10,r=o=a=new p(1),f=0,s++}u=a}}function Fp(e,t){var r,n,i,o,u,a,l,s,f,c,p,h=1,d=e,v=d.d,g=d.constructor,m=g.rounding,b=g.precision;if(d.s<0||!v||!v[0]||!d.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=d.s?NaN:v?0:d);if(null==t?(up=!1,f=b):f=t,g.precision=f+=10,n=(r=Sp(v)).charAt(0),!(Math.abs(o=d.e)<15e14))return s=Pp(g,f+2,b).times(o+""),d=Fp(new g(n+"."+r.slice(1)),f-10).plus(s),g.precision=b,null==t?Lp(d,b,m,up=!0):d;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=Sp((d=d.times(e)).d)).charAt(0),h++;for(o=d.e,n>1?(d=new g("0."+r),o++):d=new g(n+"."+r.slice(1)),c=d,l=u=d=Rp(d.minus(1),d.plus(1),f,1),p=Lp(d.times(d),f,1),i=3;;){if(u=Lp(u.times(p),f,1),Sp((s=l.plus(Rp(u,new g(i),f,1))).d).slice(0,f)===Sp(l.d).slice(0,f)){if(l=l.times(2),0!==o&&(l=l.plus(Pp(g,f+2,b).times(o+""))),l=Rp(l,new g(h),f,1),null!=t)return g.precision=b,l;if(!Mp(l.d,f-10,m,a))return Lp(l,g.precision=b,m,up=!0);g.precision=f+=10,s=u=d=Rp(c.minus(1),c.plus(1),f,1),p=Lp(d.times(d),f,1),i=a=1}l=s,i+=2}}function Tp(e){return String(e.s*e.s/0)}function Ip(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);n++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(n,i)){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%yp,r<0&&(n+=yp),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=yp;n<i;)e.d.push(+t.slice(n,n+=yp));t=t.slice(n),n=yp-t.length}else n-=i;for(;n--;)t+="0";e.d.push(+t),up&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Up(e,t){var r,n,i,o,u,a,l,s,f;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),mp.test(t))return Ip(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(vp.test(t))r=16,t=t.toLowerCase();else if(dp.test(t))r=2;else{if(!gp.test(t))throw Error(lp+t);r=8}for((o=t.search(/p/i))>0?(l=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),u=(o=t.indexOf("."))>=0,n=e.constructor,u&&(o=(a=(t=t.replace(".","")).length)-o,i=qp(n,new n(r),o,2*o)),o=f=(s=kp(t,r,bp)).length-1;0===s[o];--o)s.pop();return o<0?new n(0*e.s):(e.e=Op(s,f),e.d=s,up=!1,u&&(e=Rp(e,i,4*a)),l&&(e=e.times(Math.abs(l)<54?hp(2,l):Ch.pow(2,l))),up=!0,e)}function Bp(e,t,r,n,i){var o,u,a,l,s=e.precision,f=Math.ceil(s/yp);for(up=!1,l=r.times(r),a=new e(n);;){if(u=Rp(a.times(l),new e(t++*t++),s,1),a=i?n.plus(u):n.minus(u),n=Rp(u.times(l),new e(t++*t++),s,1),void 0!==(u=a.plus(n)).d[f]){for(o=f;u.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=n,n=u,u=o}return up=!0,u.d.length=f+1,u}function Qp(e,t){for(var r=e;--t;)r*=e;return r}function Gp(e,t){var r,n=t.s<0,i=_p(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return Jc=n?4:1,t;if((r=t.divToInt(i)).isZero())Jc=n?3:2;else{if((t=t.minus(r.times(i))).lte(o))return Jc=Np(r)?n?2:3:n?4:1,t;Jc=Np(r)?n?1:4:n?3:2}return t.minus(i).abs()}function Hp(e,t,r,n){var i,o,u,a,l,s,f,c,p,h=e.constructor,d=void 0!==r;if(d?(Ep(r,1,tp),void 0===n?n=h.rounding:Ep(n,0,8)):(r=h.precision,n=h.rounding),e.isFinite()){for(d?(i=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):i=t,(u=(f=jp(e)).indexOf("."))>=0&&(f=f.replace(".",""),(p=new h(1)).e=f.length-u,p.d=kp(jp(p),10,i),p.e=p.d.length),o=l=(c=kp(f,10,i)).length;0==c[--l];)c.pop();if(c[0]){if(u<0?o--:((e=new h(e)).d=c,e.e=o,c=(e=Rp(e,p,r,n,0,i)).d,o=e.e,s=Kc),u=c[r],a=i/2,s=s||void 0!==c[r+1],s=n<4?(void 0!==u||s)&&(0===n||n===(e.s<0?3:2)):u>a||u===a&&(4===n||s||6===n&&1&c[r-1]||n===(e.s<0?8:7)),c.length=r,s)for(;++c[--r]>i-1;)c[r]=0,r||(++o,c.unshift(1));for(l=c.length;!c[l-1];--l);for(u=0,f="";u<l;u++)f+=rp.charAt(c[u]);if(d){if(l>1)if(16==t||8==t){for(u=16==t?4:3,--l;l%u;l++)f+="0";for(l=(c=kp(f,i,t)).length;!c[l-1];--l);for(u=1,f="1.";u<l;u++)f+=rp.charAt(c[u])}else f=f.charAt(0)+"."+f.slice(1);f=f+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)f="0"+f;f="0."+f}else if(++o>l)for(o-=l;o--;)f+="0";else o<l&&(f=f.slice(0,o)+"."+f.slice(o))}else f=d?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=Tp(e);return e.s<0?"-"+f:f}function Wp(e,t){if(e.length>t)return e.length=t,!0}function Vp(e){return new this(e).abs()}function Yp(e){return new this(e).acos()}function Zp(e){return new this(e).acosh()}function Kp(e,t){return new this(e).plus(t)}function Jp(e){return new this(e).asin()}function Xp(e){return new this(e).asinh()}function eh(e){return new this(e).atan()}function th(e){return new this(e).atanh()}function rh(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,o=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?_p(this,n,i):new this(0)).s=e.s:!e.d||t.isZero()?(r=_p(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,r=this.atan(Rp(e,t,o,1)),t=_p(this,o,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Rp(e,t,o,1)):(r=_p(this,o,1).times(t.s>0?.25:.75)).s=e.s:r=new this(NaN),r}function nh(e){return new this(e).cbrt()}function ih(e){return Lp(e=new this(e),e.e+1,2)}function oh(e,t,r){return new this(e).clamp(t,r)}function uh(e){if(!e||"object"!=typeof e)throw Error(ap+"Object expected");var t,r,n,i=!0===e.defaults,o=["precision",1,tp,"rounding",0,8,"toExpNeg",-ep,0,"toExpPos",0,ep,"maxE",0,ep,"minE",-ep,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(r=o[t],i&&(this[r]=op[r]),void 0!==(n=e[r])){if(!(pp(n)===n&&n>=o[t+1]&&n<=o[t+2]))throw Error(lp+r+": "+n);this[r]=n}if(r="crypto",i&&(this[r]=op[r]),void 0!==(n=e[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(lp+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(fp);this[r]=!0}else this[r]=!1}return this}function ah(e){return new this(e).cos()}function lh(e){return new this(e).cosh()}function sh(e,t){return new this(e).div(t)}function fh(e){return new this(e).exp()}function ch(e){return Lp(e=new this(e),e.e+1,3)}function ph(){var e,t,r=new this(0);for(up=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return up=!0,new this(1/0);r=t}return up=!0,r.sqrt()}function hh(e){return e instanceof Ch||e&&e.toStringTag===cp||!1}function dh(e){return new this(e).ln()}function vh(e,t){return new this(e).log(t)}function gh(e){return new this(e).log(2)}function mh(e){return new this(e).log(10)}function bh(){return Ap(this,arguments,"lt")}function yh(){return Ap(this,arguments,"gt")}function wh(e,t){return new this(e).mod(t)}function xh(e,t){return new this(e).mul(t)}function $h(e,t){return new this(e).pow(t)}function Sh(e){var t,r,n,i,o=0,u=new this(1),a=[];if(void 0===e?e=this.precision:Ep(e,1,tp),n=Math.ceil(e/yp),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));o<n;)(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(fp);for(t=crypto.randomBytes(n*=4);o<n;)(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=n/4}else for(;o<n;)a[o++]=1e7*Math.random()|0;for(n=a[--o],e%=yp,n&&e&&(i=hp(10,yp-e),a[o]=(n/i|0)*i);0===a[o];o--)a.pop();if(o<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=yp)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<yp&&(r-=yp-n)}return u.e=r,u.d=a,u}function Eh(e){return Lp(e=new this(e),e.e+1,this.rounding)}function Mh(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function kh(e){return new this(e).sin()}function Rh(e){return new this(e).sinh()}function Lh(e){return new this(e).sqrt()}function jh(e,t){return new this(e).sub(t)}function Oh(){var e=0,t=arguments,r=new this(t[e]);for(up=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return up=!0,Lp(r,this.precision,this.rounding)}function Ph(e){return new this(e).tan()}function _h(e){return new this(e).tanh()}function Dh(e){return Lp(e=new this(e),e.e+1,1)}$p[Symbol.for("nodejs.util.inspect.custom")]=$p.toString,$p[Symbol.toStringTag]="Decimal";var Ch=$p.constructor=function e(t){var r,n,i;function o(e){var t,r,n,i=this;if(!(i instanceof o))return new o(e);if(i.constructor=o,hh(e))return i.s=e.s,void(up?!e.d||e.e>o.maxE?(i.e=NaN,i.d=null):e.e<o.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(n=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10)t++;return void(up?t>o.maxE?(i.e=NaN,i.d=null):t<o.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):Ip(i,e.toString())}if("string"!==n)throw Error(lp+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===r&&(e=e.slice(1)),i.s=1),mp.test(e)?Ip(i,e):Up(i,e)}if(o.prototype=$p,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=uh,o.clone=e,o.isDecimal=hh,o.abs=Vp,o.acos=Yp,o.acosh=Zp,o.add=Kp,o.asin=Jp,o.asinh=Xp,o.atan=eh,o.atanh=th,o.atan2=rh,o.cbrt=nh,o.ceil=ih,o.clamp=oh,o.cos=ah,o.cosh=lh,o.div=sh,o.exp=fh,o.floor=ch,o.hypot=ph,o.ln=dh,o.log=vh,o.log10=mh,o.log2=gh,o.max=bh,o.min=yh,o.mod=wh,o.mul=xh,o.pow=$h,o.random=Sh,o.round=Eh,o.sign=Mh,o.sin=kh,o.sinh=Rh,o.sqrt=Lh,o.sub=jh,o.sum=Oh,o.tan=Ph,o.tanh=_h,o.trunc=Dh,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return o.config(t),o}(op);function qh(e,t){return new Ch(e).eq(t)}function Nh(e,t,r){if("==="===t)return qh(e,r);if("!=="===t)return function(e,t){return!qh(e,t)}(e,r);if(">="===t)return function(e,t){return new Ch(e).gte(t)}(e,r);if(">"===t)return function(e,t){return new Ch(e).gt(t)}(e,r);if("<="===t)return function(e,t){return new Ch(e).lte(t)}(e,r);if("<"===t)return function(e,t){return new Ch(e).lt(t)}(e,r);throw console.log(t),new Error("invalid op")}function Ah(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];if(!Lf(e))return r;let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(t,"stateConn");return"conn"!==o&&"overlap"!==o&&(o="conn"),Te(e,((e,t)=>{let o=Hi(e,n,null),u=Hi(e,i,null);Dl(o)||r.push(`第 ${t} 樣本起始深度${n}[${o}]非有效數字`),Dl(u)||r.push(`第 ${t} 樣本結束深度${i}[${u}]非有效數字`)})),e=Ps(e,(e=>Gl(e[n]))),Te(e,((t,u)=>{let a=Hi(t,n,null),l=Hi(t,i,null);if(a=Gl(a),l=Gl(l),Nh(a,">",l)&&r.push(`第 ${u} 個樣本起始深度${n}[${a}]大於結束深度${i}[${l}]`),0===u)return!0;let s=Hi(e,u-1),f=Hi(s,i,null);f=Gl(f),"conn"===o?Nh(f,"!==",a)&&r.push(`第 ${u} 樣本結束深度${i}[${f}]不等於第 ${u+1} 個樣本起始深度${n}[${a}]`):"overlap"===o&&Nh(f,">",a)&&r.push(`第 ${u} 樣本結束深度${i}[${f}]大於第 ${u+1} 個樣本起始深度${n}[${a}]`)})),r}np=new Ch(np),ip=new Ch(ip);let zh=lf.rw;function Fh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"keyDepth");_l(n)||(n="depth");let i=Hi(r,"keyDepthStart");_l(i)||(i="depthStart");let o=Hi(r,"keyDepthEnd");_l(o)||(o="depthEnd"),e=Pa(e);let u=0;return e=Oo(e,((e,r)=>{let a=Hi(e,"err",""),l=Hi(e,i,null),s=Hi(e,o,null);try{if(!Dl(l))throw new Error(`第 ${r} 樣本起始深度(${i})非數值: ${l}`);if(!Dl(s))throw new Error(`第 ${r} 樣本結束深度(${o})非數值: ${s}`);l=Gl(l),s=Gl(s),e[n]=(s+l)/2;let a=null;if(l<t&&s>t){let n=Hi(e,"rsat",null);if(!Dl(n))throw new Error(`第 ${r} 樣本飽和單位重(rsat)非數值: ${n}`);let i=Hi(e,"rd",null);if(!Dl(i))throw new Error(`第 ${r} 樣本乾單位重(rd)非數值: ${i}`);i=Gl(i);let o=t-l,u=s-t;a=(o*i+u*n)/(o+u)}else if(s<=t){let t=Hi(e,"rd",null);if(!Dl(t))throw new Error(`第 ${r} 樣本乾單位重(rd)非數值: ${t}`);a=t}else{if(!(l>=t))throw new Error("非預期情形");{let t=Hi(e,"rsat",null);if(!Dl(t))throw new Error(`第 ${r} 樣本飽和單位重(rsat)非數值: ${t}`);a=t}}0===u&&l>0&&(u=l*a);let f=(s-l)*a,c=u+f/2;e.sv=c,u+=f;let p=Math.max((l+s)/2-t,0)*zh;e.svp=Math.max(c-p,0)}catch(t){let r=t.toString();""===a?a=r:a.indexOf(r)<0&&(a+=`, ${r}`),e.sv="",e.svp="",e.err=a}return e})),e}function Th(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Lf(e))throw new Error("無有效數據");let r=Hi(t,"keyDepth");_l(r)||(r="depth");let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Ah(e=Pa(e),t);if(nf(o)>0)throw new Error(Xc(o,"; "));e=Ps(e,(e=>Gl(e[n])));let u=Hi(t,"waterLevelUsual");Dl(u)||(u=0),u=Gl(u);let a=Hi(t,"waterLevelDesign");Dl(a)||(a=0),a=Gl(a);let l=Fh(e,u,{keyDepth:r,keyDepthStart:n,keyDepthEnd:i}),s=Fh(e,a,{keyDepth:r,keyDepthStart:n,keyDepthEnd:i});return e=Oo(e,((e,t)=>{e.waterLevelUsual=u,e.waterLevelDesign=a;let n=l[t],i=s[t];return e.sv=n.sv,e.svpUsual=n.svp,e.svpDesign=i.svp,e[r]=n[r],e}))}function Ih(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];if(!Lf(e))throw new Error("無有效資料");let n=Hi(t,"keyDepth");_l(n)||(n="depth");let i=Hi(t,"keyDepthStart");_l(i)||(i="depthStart");let o=Hi(t,"keyDepthEnd");_l(o)||(o="depthEnd");let u=Hi(t,"depthEndMax");if(u=Dl(u)?Gl(u):null,e=Pa(e),Te(e,((e,t)=>{let i=Hi(e,n,null);Dl(i)||r.push(`第 ${t} 樣本中點深度${n}[${i}]非有效數字`)})),nf(r)>0)throw new Error(Xc(r,"; "));if(e=Ps(e,(e=>Gl(e[n]))),Te(e,((t,i)=>{if(0===i)return!0;let o=Hi(e,`${i-1}.${n}`,null),u=Hi(t,n,null);o=Gl(o),u=Gl(u),Nh(o,">=",u)&&r.push(`第 ${i-1} 樣本之中點深度${n}[${o}]大於等於第 ${i} 樣本之中點深度${n}[${u}]`)})),nf(r)>0)throw new Error(Xc(r,"; "));let a=nf(e)-1;if(e=Oo(e,((t,r)=>{let u=Hi(e,r-1),l=t,s=Hi(e,r+1),f=Hi(u,n,null),c=Hi(l,n,null),p=Hi(s,n,null),h=null;if(0===r){if(h=0,!Dl(c))throw new Error("dc1 is not a number");c=Gl(c),h=Math.min(h,c)}else{if(!Dl(f)||!Dl(c))throw new Error("unexpected error: invalid ds");f=Gl(f),c=Gl(c),h=(f+c)/2}let d=null;if(r===a){if(!Dl(c))throw new Error("dc1 is not a number");d=Gl(c)}else{if(!Dl(c)||!Dl(p))throw new Error("unexpected error: invalid de");c=Gl(c),p=Gl(p),d=(c+p)/2}return t[i]=h,t[o]=d,t})),Ca(u)){Nh(e[a][o],"<",u)&&(e[a][o]=u)}return e}function Uh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uh(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let Qh=19.5,Gh={1:17.5,2:12.5,3:17.5,4:18,5:18,6:18,7:18.5,8:19,9:19.5,10:20,11:20.5,12:19,13:79/4};function Hh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"rdiff");Dl(n)||(n=3),n=Gl(n);let i=Hi(r,"ratio");if(Dl(i)||(i=.8),i=Gl(i),i<=0)throw new Error(`ratio[${i}]<=0`);if(i>1)throw new Error(`ratio[${i}]>1`);let o=e=>{let t=Yc(e,2);return{vi:t,vd:Gl(t)}},u=1-i,a=i;e=Oo(e,(e=>Wc(e,t)));let l=!1;return e=Oo(e,((e,t)=>{if(!Dl(e.rsat))throw console.log("estUnitWeight",t,e),new Error("estUnitWeight: 樣本無飽和單位重rsat");let r=null;Df(e.iRobFrQt)&&Df(e.iRobBqQt)&&(r=Dc(e.iRobFrQt,e.iRobBqQt,{numOfType:3,returnZone:!0})),Df(r)||(Df(e.iRobBqQt)?r=e.iRobBqQt:Df(e.iRobFrQt)&&(r=e.iRobFrQt));let i=null;if(Df(r)&&(r=Tf(r),i=Hi(Gh,r,null),!Dl(i)))throw new Error(`於kpCPTClassForRobBqRfqt找不到izone[${r}]`);Dl(i)||(i=Qh);let s=Gl(e.rsat),f=i,c=o(s),p=o(f),h=c.vi,d=p.vi;if(s=c.vd,f=p.vd,h!==d){l=!0;let t=s*u+f*a;e.rsat=o(t).vd;let r=t-n;e.rd=o(r).vd}return e})),{bUpdate:l,ltdt:e}}var Wh=Qi,Vh=Fa;var Yh=Fi,Zh=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Kh=function(e,t){return t.length<2?e:Wh(e,Vh(t,0,-1))},Jh=Ii;var Xh=function(e,t){return t=Yh(t,e),null==(e=Kh(e,t))||delete e[Jh(Zh(t))]},ed=U,td=Array.prototype.splice;var rd=Ie,nd=yf,id=function(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;ed(i)?td.call(e,i,1):Xh(e,i)}}return e},od=Xl,ud=U,ad=Ef((function(e,t){var r=null==e?0:e.length,n=nd(e,t);return id(e,rd(t,(function(e){return ud(e,r)?+e:e})).sort(od)),n}));var ld=$o,sd=Se,fd=Re;var cd=function(e){return function(t,r,n){var i=Object(t);if(!sd(t)){var o=ld(r);t=fd(t),r=function(e){return o(i[e],e,i)}}var u=e(t,r,n);return u>-1?i[o?t[u]:u]:void 0}},pd=Ua,hd=$o,dd=Of,vd=Math.max;var gd=cd((function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:dd(r);return i<0&&(i=vd(n+i,0)),pd(e,hd(t),i)}));function md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?md(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):md(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let yd=null;function wd(){return null!==yd||(yd=[{key:"sand",nameCht:"砂土",nameEng:"Sand",nameEngineeringEng:"SAND",group:"粗粒料土壤",colorPrimary:"#467dec",colorSecondary:"#467dec"},{key:"silty-sand",nameCht:"粉質砂土",nameEng:"Silty-sand",nameEngineeringEng:"SILTY-SAND",group:"粗粒料土壤",colorPrimary:"linear-gradient(90deg, #dad74d 0%, #467dec 100%)",colorSecondary:"#00D9A3"},{key:"sand/silt",nameCht:"砂粉混合土",nameEng:"Sand/Silt",nameEngineeringEng:"SAND/SILT",group:"混合土壤",colorPrimary:"repeating-linear-gradient(90deg, #dad74d 5px, #467dec 10px, #dad74d 15px)",colorSecondary:"#87A7A3"},{key:"clayey-sand",nameCht:"黏質砂土",nameEng:"Clayey-sand",nameEngineeringEng:"CLAYEY-SAND",group:"粗粒料土壤",colorPrimary:"linear-gradient(90deg, #ea4e2d 0%, #467dec 100%)",colorSecondary:"#B973FF"},{key:"sand/clay",nameCht:"砂黏混合土",nameEng:"Sand/Clay",nameEngineeringEng:"SAND/CLAY",group:"混合土壤",colorPrimary:"repeating-linear-gradient(90deg, #ea4e2d 5px, #467dec 10px, #ea4e2d 15px)",colorSecondary:"#859C78"},{key:"sandy-silt",nameCht:"砂質粉土",nameEng:"Sandy-silt",nameEngineeringEng:"SANDY-SILT",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #467dec 0%, #dad74d 100%)",colorSecondary:"#00D9D9"},{key:"silt",nameCht:"粉土",nameEng:"Silt",nameEngineeringEng:"SILT",group:"細粒料土壤",colorPrimary:"#dad74d",colorSecondary:"#D9D900"},{key:"clayey-silt",nameCht:"黏質粉土",nameEng:"Clayey-silt",nameEngineeringEng:"CLAYEY-SILT",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #ea4e2d 0%, #dad74d 100%)",colorSecondary:"#FFBF00"},{key:"sandy-clay",nameCht:"砂質黏土",nameEng:"Sandy-clay",nameEngineeringEng:"SANDY-CLAY",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #467dec 0%, #ea4e2d 100%)",colorSecondary:"#2DB200"},{key:"silty-clay",nameCht:"粉質黏土",nameEng:"Silty-clay",nameEngineeringEng:"SILTY-CLAY",group:"細粒料土壤",colorPrimary:"linear-gradient(90deg, #dad74d 0%, #ea4e2d 100%)",colorSecondary:"#FFDC73"},{key:"silt/clay",nameCht:"粉黏混合土",nameEng:"Silt/Clay",nameEngineeringEng:"SILT/CLAY",group:"細粒料土壤",colorPrimary:"repeating-linear-gradient(90deg, #dad74d 5px, #ea4e2d 10px, #dad74d 15px",colorSecondary:"#C6BEAC"},{key:"clay",nameCht:"黏土",nameEng:"Clay",nameEngineeringEng:"CLAY",group:"細粒料土壤",colorPrimary:"#ea4e2d",colorSecondary:"#ea4e2d"}]),yd}function xd(e,t,r){let n=wd(),i=gd(n,{[e]:t});return Rl(i)||(i=null),_l(r)&&(i=Hi(i,r,null)),i}function $d(){let e=["sand","sandy-silt","clayey-silt","clay"];return e=Oo(e,(e=>xd("key",e,"nameEngineeringEng"))),e}function Sd(){let e=["sand","silty-sand","clayey-sand","sandy-silt","clayey-silt","clay"];return e=Oo(e,(e=>xd("key",e,"nameEng"))),e}function Ed(){let e=["sand","silty-sand","clayey-sand","sandy-silt","silt","clayey-silt","sandy-clay","silty-clay","clay"];return e=Oo(e,(e=>xd("key",e,"nameEng"))),e}var Md={getSoilGroups:wd,getSoilGroupByKV:xd,sortSoilGroupsByKey:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key",r=wd(),n={};if(Te(r,((e,r)=>{n[e[t]]=r})),Lf(e))e=Ps(e,(e=>n[e]));else{if(!Rl(e))return e;{let t=Re(e);t=Ps(t,(e=>n[e]));let r={};Te(t,(t=>{r[t]=e[t]})),e=r}}return e},getSoilGroupsT4:$d,getSoilGroupsT6:Sd,getSoilGroupsT9:Ed,getKpSoilGroups:function(){let e={},t=wd(),r=wc();return Te(["nameEng","nameEngineeringEng"],(r=>{Te(t,(t=>{let n=t[r];e[n]=bd({key:n},t)}))})),Te(r,(t=>{Te(["Ic","Icn"],(r=>{let n=`${r}(${Yc(t.min,2)}-${Yc(t.max,2)})`;e[n]=bd({key:n},t)}))})),e}};function kd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kd(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let Ld=$d(),jd=Sd(),Od=Ed();function Pd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===nf(e))return[];let r=Hi(t,"keyDepth");_l(r)||(r="depth");let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(t,"depthStartMin");Dl(o)&&(o=Gl(o));let u=Hi(t,"depthEndMax");Dl(u)&&(u=Gl(u));let a=Hi(t,"keyType");_l(a)||(a="type");let l=Hi(t,"getType",null),s=Hi(t,"keyInd");_l(s)||(s="ind"),e=Ih(e,t);let f=[];return Te(e,((e,t)=>{let c=Hi(e,n,null);if(!Dl(c))throw new Error(`depthStart[${c}] is not a number`);c=Gl(c);let p=Hi(e,i,null);if(!Dl(p))throw new Error(`depthEnd[${p}] is not a number`);p=Gl(p),Ca(o)&&(c=Math.max(c,o)),Ca(u)&&(p=Math.min(p,u));let h=(c+p)/2,d=Hi(e,a,null);Ml(l)&&(d=l(e,t)),_l(d)&&f.push({[r]:h,[n]:c,[i]:p,[a]:d,[s]:t})})),f}function _d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"keyDepth");_l(r)||(r="depth");let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(t,"keyType");_l(o)||(o="type");let u=Hi(t,"saveFromInds");Pl(u)||(u=!0);let a=Hi(t,"keyInd");_l(a)||(a="ind");let l=Hi(t,"keyFromInds");_l(l)||(l="fromInds");let s=Pa(e);return u&&(s=Oo(s,((e,t)=>(Dl(e[a])||(e[a]=t),e)))),Te(s,((e,t)=>{if(0===t)return!0;if(!Rl(e))throw new Error(`ltdt[${t}] is not an object`);let r=Hi(s,t-1),f=e,c=Hi(r,o,""),p=Hi(r,i,""),h=Hi(f,o,""),d=Hi(f,n,"");if(!Dl(p)||!Dl(d))return!0;p=Gl(p),d=Gl(d),_l(c)&&c===h&&Nh(p,"===",d)&&(u&&(kf(s[t-1][l])||(s[t-1][l]=[s[t-1][a]]),kf(s[t][l])||(s[t][l]=[s[t][a]]),s[t][l]=[...s[t-1][l],...s[t][l]]),s[t][n]=s[t-1][n],s[t-1]=null)})),s=Kf(s,Rl),s}function Dd(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t=>{let n=wc();if("Ic"!==t||"Icn"!==t)throw new Error(`key[${t}] must be Ic or Icn`);let i=Rd(Rd({},r),{},{getType:(e,r)=>{let i=Hi(e,t,""),o="";return Te(n,(e=>{if(i<e.max)return o=`Ic(${Yc(e.min,2)}-${Yc(e.max,2)})`,!1})),o}});return Pd(e,i)},i=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let n=Tf(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=Rd(Rd({},r),{},{getType:(e,t)=>{let r=Hi(e,"iRobFrQt",""),o=Hi(e,"iRobBqQt",""),u="";try{u=xd("key",Dc(r,o,{numOfType:n}),i)}catch(e){console.log(e)}return u}});return Pd(e,o)},o=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let n=Tf(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=Rd(Rd({},r),{},{getType:(e,t)=>{let r=Hi(e,"iRobFrQt",""),o=Hi(e,"iRobBqQt",""),u="";try{u=xd("key",qc(r,o,{numOfType:n}),i)}catch(e){console.log(e)}return u}});return Pd(e,o)},u=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let n=Tf(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=Rd(Rd({},r),{},{getType:(e,t)=>{let r=Hi(e,"iRobFrQtn",""),o=Hi(e,"iRobBqQtn",""),u="";try{u=xd("key",Nc(r,o,{numOfType:n}),i)}catch(e){console.log(e)}return u}});return Pd(e,o)},a=t=>{if("T4"!==t&&"T6"!==t)throw new Error(`T[${t}] must be T4 or T6`);let n=Tf(t.replace("T","")),i="";i="T4"===t?"nameEngineeringEng":"nameEng";let o=Rd(Rd({},r),{},{getType:(e,t)=>{let r=Hi(e,"iRamFrQt",""),o=Hi(e,"iRamBqQt",""),u="";try{u=xd("key",zc(r,o,{numOfType:n}),i)}catch(e){console.log(e)}return u}});return Pd(e,o)},l={Ic:()=>n("Ic"),Icn:()=>n("Icn"),Robertson1986T6:()=>i("T6"),Robertson1986T4:()=>i("T4"),Robertson1990T6:()=>o("T6"),Robertson1990T4:()=>o("T4"),Robertson2009T6:()=>u("T6"),Robertson2009T4:()=>u("T4"),RamseyT6:()=>a("T6"),RamseyT4:()=>a("T4")};if(!bc(l,t))throw console.log(`invalid method[${t}]`,l),new Error(`invalid method[${t}]`);let s=(0,l[t])();return s=_d(s,r),s}var Cd={getKpSoilGroupsTn:function(){return{soilGroupsT4:Ld,soilGroupsT6:jd,soilGroupsT9:Od}},genLayer:Pd,mergeLayers:_d,calcLayer:Dd,calcLayers:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Lf(t))throw new Error(`methods[${t}] is not an effective array`);return Oo(t,(t=>({method:t,ltdt:Dd(e,t,r)})))}},qd=di;var Nd=function(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],u=t(o);if(null!=u&&(void 0===a?u==u&&!qd(u):r(u,a)))var a=u,l=o}return l};var Ad=Nd,zd=function(e,t){return e<t},Fd=_e;var Td=function(e){return e&&e.length?Ad(e,Fd,zd):void 0};var Id=Nd,Ud=function(e,t){return e>t},Bd=_e;var Qd=function(e){return e&&e.length?Id(e,Bd,Ud):void 0},Gd=Ci;var Hd=function(e){return Gd(e).toLowerCase()},Wd=R,Vd=L;var Yd=function(e){return Vd(e)&&"[object RegExp]"==Wd(e)},Zd=Y,Kd=Z&&Z.isRegExp,Jd=Kd?Zd(Kd):Yd,Xd=_i,ev=Ia,tv=Xa,rv=Rs,nv=Jd,iv=vl,ov=Ci;var uv=function(e,t,r){return r&&"number"!=typeof r&&rv(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=ov(e))&&("string"==typeof t||null!=t&&!nv(t))&&!(t=Xd(t))&&tv(e)?ev(iv(e),0,r):e.split(t,r):[]};function av(e,t){return _l(e)&&If(t)?0===(t=Tf(t))?"":e.substring(0,t):""}function lv(e,t){if(!_l(e))return"";if(!If(t))return"";if(0===(t=Tf(t)))return"";let r=e.length-t;return r<0&&(r=0),e.substr(r,t)}let sv="in x-range",fv="out of x-range",cv="order list",pv="reverse order list";function hv(e,t){let r=null,n=null;return r=e[0].x,n=e[nf(e)-1].x,t<r?{err:fv,msg:`x[${t}] less than lower limit[${r}]`,data:{ps:e,x:t,xmin:r,xmax:n}}:t>n?{err:fv,msg:`x[${t}] greater than upper limit[${n}]`,data:{ps:e,x:t,xmin:r,xmax:n}}:sv}function dv(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!kf(e))return{err:"ps is not an array"};if(!Ca(t))return{err:"x is not a number"};let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(nf(e)<=0)return[];let r=Hi(t,"keyX");_l(r)||(r="x");let n=Hi(t,"keyY");_l(n)||(n="y");let i=[];return Te(e,(e=>{let t=null,o=null;kf(e)&&nf(e)>=2?(t=Hi(e,0),o=Hi(e,1)):(t=Hi(e,r,null),o=Hi(e,n,null)),Dl(t)&&Dl(o)&&(t=Il(t),o=Il(o),i.push({x:t,y:o}))})),i}(e,r);if(Hi(n,"err"))return Hi(n,"err");if(0===nf(n))return{err:"ps(length=0) is not an effective array",ps:e,psEff:n};if(1===nf(n))return{err:"ps(length=1) is one point only",ps:e,psEff:n};let i=function(e){let t=!0,r=!0;for(let n=1;n<nf(e);n++){let i=e[n-1],o=e[n];if(t&&i.x>o.x&&(t=!1),r&&i.x<o.x&&(r=!1),i.x===o.x)return{err:`x can not be equal: i=${n}, x=${i.x}`}}return t?cv:r?pv:"no"}(n);if("no"===i)return{err:"psEff is not increasing or decreasing"};i===pv&&(i=cv,n=hc(n));let o=Hi(r,"mode");"linear"!==o&&"stairs"!==o&&"blocks"!==o&&(o="linear");try{if("linear"===o)return function(e,t){let r=hv(e,t);if(r!==sv)return r;let n=null;for(let r=1;r<nf(e);r++){let i=e[r-1],o=e[r];if(i.x<=t&&t<=o.x){n=((t-i.x)*o.y+(o.x-t)*i.y)/(o.x-i.x);break}}return null===n?{err:fv}:n}(n,t);if("blocks"===o)return function(e,t){let r=hv(e,t);if(r!==sv)return r;let n=null;for(let r=1;r<nf(e);r++){let i=e[r-1],o=e[r],u=i.x,a=o.x;if(u<=t&&t<=a){n=o.y;break}}return null===n?{err:fv}:n}(n,t);if("stairs"===o)return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"xMin");if(Ca(n)){if(n>e[0].x)return{err:`xMin=${n} > ps[0].x=${e[0].x}`};n===e[0].x||(e=[{x:n,y:e[0].y},...e])}let i=Hi(r,"xMax");if(Ca(i)){if(i<e[nf(e)-1].x)return{err:`xMax=${i} < ps[size(ps)-1].x=${e[nf(e)-1].x}`};if(i===e[nf(e)-1].x);else{let t={x:i,y:e[nf(e)-1].y};e=[...e,t]}}let o=hv(e,t);if(o!==sv)return o;let u=null;for(let r=0;r<nf(e);r++){let n=Hi(e,r-1,null),i=Hi(e,r,null),o=Hi(e,r+1,null),a=i.x;n&&(a=(n.x+i.x)/2);let l=i.x;if(o&&(l=(o.x+i.x)/2),a<=t&&t<=l){u=i.y;break}}return null===u?{err:fv}:u}(n,t,r)}catch(e){return{err:e.toString()}}}var vv=Ie;var gv=function(e,t){return vv(t,(function(t){return e[t]}))},mv=gv,bv=Re;var yv=function(e){return null==e?[]:mv(e,bv(e))};let wv=lf.rw;function xv(e,t){return e*wv/(1+t)}function $v(e,t){return e-t*wv/(1+t)}function Sv(e,t){return(e-wv)*t/(t-1)}function Ev(e,t){return(e+t)*wv/(1+t)}function Mv(e,t){return e+t*wv/(1+t)}function kv(e,t){return e*(t-1)/t+wv}function Rv(e,t){return(e*wv-t)/t}function Lv(e,t){return(e-t)/(t-wv-e)}function jv(e,t){return(e*wv-t)/(t-wv)}function Ov(e,t){return e*(1+t)/wv}function Pv(e,t){return e/(e-(t-wv))}function _v(e,t){return(e+e*t-t*wv)/wv}function Dv(e,t,r,n){let i={},o=Hi(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},"returnFuncs");function u(){let o,u,a,l,s=!1;return!Ca(o)&&Ca(r)&&Ca(n)&&(o=xv(r,n)),!Ca(o)&&Ca(t)&&Ca(n)&&(o=$v(t,n)),!Ca(o)&&Ca(t)&&Ca(r)&&1!==r&&(o=Sv(t,r)),Ca(e)?Math.abs(e-o)>o/100*5&&(i.ck_rd=`輸入乾單位重[${e}]與反算出乾單位重[${o}]差距過大`):(e=o,s=!0),!Ca(u)&&Ca(r)&&Ca(n)&&(u=Ev(r,n)),!Ca(u)&&Ca(e)&&Ca(n)&&(u=Mv(e,n)),!Ca(u)&&Ca(e)&&Ca(r)&&(u=kv(e,r)),Ca(t)?Math.abs(t-u)>u/100*5&&(i.ck_rsat=`輸入飽和單位重[${t}]與反算出飽和單位重[${u}]差距過大`):(t=u,s=!0),!Ca(a)&&Ca(r)&&Ca(e)&&(a=Rv(r,e)),!Ca(a)&&Ca(t)&&Ca(e)&&t-wv-e!=0&&(a=Lv(e,t)),!Ca(a)&&Ca(t)&&Ca(r)&&t-wv!=0&&(a=jv(r,t)),Ca(n)?Math.abs(n-a)>a/100*5&&(i.ck_e=`輸入孔隙比[${n}]與反算出孔隙比[${a}]差距過大`):(n=a,s=!0),!Ca(l)&&Ca(e)&&Ca(n)&&(l=Ov(e,n)),!Ca(l)&&Ca(e)&&Ca(t)&&e-(t-wv)!=0&&(l=Pv(e,t)),!Ca(l)&&Ca(t)&&Ca(n)&&(l=_v(t,n)),Ca(r)?Math.abs(r-l)>l/100*5&&(i.ck_GS=`輸入比重[${r}]與反算出比重[${l}]差距過大`):(r=l,s=!0),s}Pl(o)||(o=!1),Dl(e)?((e=Gl(e))<=0&&(i.rd=`乾單位重[${e}]為數字但<=0，自動清除`),e<=wv&&(i.rd=`乾單位重[${e}]<=水單位重[${wv}]`)):e=null,Dl(t)?((t=Gl(t))<=0&&(i.rsat=`飽和單位重[${t}]為數字但<=0，自動清除`),t<=wv&&(i.rsat=`飽和單位重[${t}]<=水單位重[${wv}]`)):t=null,Dl(r)?(r=Gl(r))<=0&&(i.GS=`比重[${r}]為數字但<=0，自動清除`):r=null,Dl(n)?(n=Gl(n))<=0&&(i.e=`孔隙比[${n}]為數字但<=0，自動清除`):n=null;let a=0;if(a+=Dl(e)?1:0,a+=Dl(t)?1:0,a+=Dl(r)?1:0,a+=Dl(n)?1:0,a>=2){let e=u();for(;e;)e=u()}let l={rd:e,rsat:t,GS:r,e:n};if(Rl(i)){let e=Xc(yv(i),", ");l.err=e}return o&&(l.coreFuncs={get_rd_from_GS_e:xv,get_rd_from_rsat_e:$v,get_rd_from_rsat_GS:Sv,get_rsat_from_GS_e:Ev,get_rsat_from_rd_e:Mv,get_rsat_from_rd_GS:kv,get_e_from_GS_rd:Rv,get_e_from_rd_rsat:Lv,get_e_from_GS_rsat:jv,get_GS_from_rd_e:Ov,get_GS_from_rd_rsat:Pv,get_GS_from_rsat_e:_v}),l}function Cv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cv(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let Nv=1/lf.g*1e3/1e4;function Av(e){let t=Sl(dc(e));return""!==t?`[${t}]`:""}function zv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new",r=av(e,1),n=av(e,2);if("new"===t)return"C"===r||"O"===r||"P"===r||"M"===r&&"ML"!==n&&"MH"!==n;if("classic"===t)return"S"!==r&&"G"!==r;throw new Error(`invalid mode[${t}]`)}function Fv(e,t,r){if(nf(e)<=0)return{err:"invalid vx"};if(nf(t)<=0)return{err:"invalid vy"};if(nf(e)!==nf(t))return{err:"size of vx is not equal to size of vy"};let n=dv(Oo(e,((r,n)=>({x:e[n],y:t[n]}))),r);return n.err&&"ps is not effective array"===n.err&&(n.err="無有效數據"),n}function Tv(e,t,r){return((r-e.x)*t.y+(t.x-r)*e.y)/(t.x-e.x)}function Iv(e,t){let r=[],n=[{volumetricStrain:10,data:[[1.15304,.6],[1.10234,.0413661],[1.10234,.0348459],[1.04383,.0253621],[.956072,.0161746],[.722041,.0093581],[0,0]]},{volumetricStrain:5,data:[[3.00384,.6],[2.97459,.0591482],[2.94533,.0523317],[2.82832,.0431443],[2.56503,.0348459],[2.12623,.0253621],[1.21936,.0126182],[0,0]]},{volumetricStrain:4,data:[[5.11012,.6],[5.11012,.111606],[5.05161,.103604],[5.02236,.0947126],[4.87609,.0849324],[4.72982,.0754486],[4.52504,.0656684],[4.20325,.0579628],[3.82295,.0499608],[3.32563,.0407733],[2.53578,.0286221],[1.5704,.0161746],[0,0]]},{volumetricStrain:3,data:[[7.68446,.6],[7.53819,.234896],[7.53819,.212964],[7.50893,.191033],[7.39192,.165249],[7.33341,.142428],[7.24565,.125831],[7.07012,.111013],[6.8946,.09738],[6.66057,.0887852],[6.45579,.0804869],[6.07549,.0730776],[5.66594,.0665575],[5.28564,.0606301],[4.75907,.0523317],[4.08623,.043737],[0,0]]},{volumetricStrain:2,data:[[14.1203,.6],[14.091,.248529],[13.974,.231043],[13.7985,.216521],[13.6815,.201702],[13.3597,.184513],[13.2134,.173843],[13.0087,.16347],[12.7161,.152208],[12.131,.139168],[11.546,.12761],[10.8439,.116644],[0,0]]},{volumetricStrain:1,data:[[27.5771,.6],[27.5771,.541935],[27.6063,.507852],[27.5478,.485625],[27.5186,.465471],[27.5186,.445022],[27.4893,.424869],[27.3723,.41005],[27.1675,.392268],[26.9335,.376264],[26.5532,.357889],[26.2021,.339514],[25.7048,.324399],[25.1783,.311655],[24.6224,.298022],[23.9496,.282908],[23.2182,.269571],[22.4576,.256531],[21.7556,.244676],[20.8779,.232525],[19.9126,.218892],[0,0]]},{volumetricStrain:.5,data:[[33.0183,.6],[33.0183,.570979],[32.9598,.554086],[32.9013,.536007],[32.6965,.516743],[32.5502,.500147],[32.3747,.482068],[32.0529,.464582],[31.6726,.445022],[31.3216,.425461],[30.9998,.410939],[30.5025,.394935],[29.9466,.376264],[29.3908,.356704],[28.3962,.335958],[27.1383,.313137],[25.5586,.287057],[23.7156,.261865],[21.8141,.238452],[19.7078,.212964],[0,0]]},{volumetricStrain:.2,data:[[35.4,.6],[35.3,.574535],[35.1,.555864],[34.9,.539267],[34.6,.515558],[34.3,.497183],[34,.477919],[33.4544,.455691],[33,.434353],[32.6087,.415385],[31.8774,.397306],[30.8242,.369151],[30.0051,.348998],[29.069,.327067],[28.1329,.308099],[27.1383,.291799],[25.8218,.271349],[24.3884,.252974],[23.2768,.237859],[21.8726,.220373],[19.9711,.200517],[18.5961,.186291],[17.1627,.170583],[15.583,.154876],[14.3543,.14065],[12.8331,.124942],[10.7269,.103307],[8.59132,.081376],[6.39729,.0612228],[4.17399,.0389951],[2.15548,.0188419],[0,0]]},{volumetricStrain:.1,data:[[36.7,.6],[36.5,.571572],[36.2,.544602],[35.8,.520596],[35.4,.490366],[35,.466657],[34.6,.446207],[34.2,.424869],[33.5,.404419],[32.7,.379228],[32,.358482],[30.9998,.331809],[29.5956,.305432],[28.0159,.278758],[26.9335,.262162],[25.266,.238156],[23.2768,.214446],[21.2875,.192515],[19.0642,.170583],[16.8117,.149541],[14.5006,.129684],[12.2481,.108938],[10.0248,.0881925],[7.77222,.0671502],[5.63669,.0472934],[4.70056,.038106],[3.23787,.0259548],[2.38951,.0194347],[.926818,.00669077],[0,0]]}];n=Oo(n,(e=>{let t=Oo(e.data,(e=>e[1])),r=Oo(e.data,(e=>e[0]));return e.vx=t,e.vy=r,e}));let i=Oo(n,"volumetricStrain"),o=Oo(n,(e=>{let r=Fv(e.vx,e.vy,t);return Hi(r,"err")?r.err:r})),u=o[0],a=[o[0]],l=[i[0]];Te(o,((e,t)=>{t>0&&o[t]>=u&&(u=o[t],a.push(o[t]),l.push(i[t]))})),o=a,i=l;let s=Fv(o,i,e);if(Hi(s,"err"))if("out of x-range"===s.err){let n=s.data.ps,i=Qd(o),u=Td(o);if(e>i){let o=n[nf(n)-1].y;r.push(`出現外插情形 N160=${e} > N160Max=${i}，依照CSR=${t}並給予最小體積應變vstr=${o}%`),s=o}else if(e<u){let i=Tv(n[0],n[1],e);r.push(`出現外插情形 N160=${e} < N160Min=${u}，依照CSR=${t}並依據最近2點外插體積應變vstr=${i}%`),s=i}else r.push("非預期外插情形，請洽開發者修復問題"),s=""}else r.push(s.err),s="";return{err:r,vstr:s}}function Uv(e,t){let r=[],n=[{N172:3,data:[[0,5.48516],[.791714,5.48516],[.889946,5.48274],[.957602,5.47549],[.972564,5.43681],[.981021,5.37154],[.982973,4.71396],[.984274,4.17243],[.985575,3.45201],[.988177,2.61312],[.992081,2.25532],[.996634,1.94104],[1.00379,1.68961],[1.01095,1.54214],[1.02981,1.32698],[1.04347,1.16501],[1.06624,1.00303],[1.09096,.879735],[1.11503,.773363],[1.1391,.703254],[1.17944,.616222],[1.23018,.529191],[1.28873,.444576],[1.35378,.384138],[1.41558,.333369],[1.48064,.275348],[1.5548,.231832],[2,0]]},{N172:6,data:[[0,4.51524],[.789554,4.51524],[.890726,4.51176],[.938502,4.49784],[.957238,4.45954],[.960985,4.31681],[.962858,3.76677],[.964732,3.36294],[.966605,2.92778],[.971289,2.57618],[.97691,2.27679],[.980657,2.07487],[.990962,1.85903],[1.00314,1.57705],[1.01813,1.35773],[1.03686,1.18367],[1.05935,1.02005],[1.08089,.88428],[1.09401,.818136],[1.13148,.696291],[1.17082,.60926],[1.22367,.517103],[1.28287,.437324],[1.34597,.376885],[1.40778,.323699],[1.47673,.268096],[1.55154,.222162],[2,0]]},{N172:10,data:[[0,3.50567],[.738969,3.50567],[.841077,3.50219],[.896347,3.49523],[.912272,3.43953],[.919767,3.34206],[.928198,3.02874],[.938502,2.64928],[.94787,2.29419],[.961922,1.9774],[.972226,1.74763],[.989088,1.50743],[1.00876,1.28811],[1.03031,1.11404],[1.05466,.953905],[1.08745,.807692],[1.12398,.682366],[1.16333,.584891],[1.21673,.50134],[1.27762,.421271],[1.33757,.358608],[1.39752,.306389],[1.46966,.25417],[1.54366,.205433],[2,0]]},{N172:14,data:[[0,2.77461],[.693066,2.77461],[.763325,2.77113],[.797049,2.73283],[.815784,2.68061],[.831709,2.57966],[.867307,2.26634],[.88979,2.01221],[.915083,1.74763],[.936629,1.54224],[.960985,1.34729],[.991898,1.12797],[1.01532,.978274],[1.04248,.852949],[1.0734,.731104],[1.10712,.623185],[1.14834,.539634],[1.18206,.480453],[1.22797,.414309],[1.28417,.36209],[1.34975,.299427],[1.4275,.240245],[1.51368,.184545],[2,0]]},{N172:20,data:[[0,2.17235],[.511332,2.17235],[.605009,2.16539],[.660279,2.13406],[.69213,2.1062],[.722107,2.0505],[.751147,1.95999],[.794238,1.75808],[.825152,1.6049],[.865433,1.40299],[.901968,1.24285],[.939439,1.06182],[.994709,.859911],[1.04717,.689329],[1.09869,.550078],[1.15021,.459565],[1.20267,.386459],[1.25888,.327277],[1.31228,.271577],[1.38441,.22632],[1.46403,.177583],[2,0]]},{N172:25,data:[[0,1.73371],[.396108,1.73371],[.49447,1.71978],[.544119,1.69542],[.579716,1.65712],[.619998,1.58053],[.660279,1.48306],[.703371,1.37862],[.734285,1.28463],[.775503,1.17671],[.816721,1.06182],[.865433,.93998],[.910399,.82858],[.956301,.724142],[1.00595,.602297],[1.0556,.508303],[1.11743,.403865],[1.16989,.337721],[1.22703,.285502],[1.27855,.247208],[1.33663,.208914],[1.4172,.167139],[1.49963,.132326],[2,0]]},{N172:30,data:[[0,1.30203],[.264959,1.30203],[.388614,1.29159],[.476671,1.26026],[.527257,1.20108],[.588147,1.11056],[.647164,1.01657],[.694003,.919093],[.759578,.804211],[.821405,.689329],[.884169,.591853],[.964732,.47349],[1.02469,.386459],[1.09963,.309871],[1.16895,.25417],[1.24764,.19847],[1.32726,.156695],[1.40876,.125364],[1.48558,.100995],[1.55303,.0870696],[1.63453,.0627007],[2,0]]}];n=Oo(n,(e=>{let t=Oo(e.data,(e=>e[0])),r=Oo(e.data,(e=>e[1]));return e.vx=t,e.vy=r,e}));let i=Oo(n,"N172"),o=Oo(n,(e=>{let r=Fv(e.vx,e.vy,t);return Hi(r,"err")?r.err:r})),u=o[0],a=[o[0]],l=[i[0]];Te(o,((e,t)=>{t>0&&o[t]<=u&&(u=o[t],a.push(o[t]),l.push(i[t]))})),o=a,i=l;let s=Fv(i,o,e);if(Hi(s,"err"))if("out of x-range"===s.err){let n=s.data.ps,o=Qd(i),u=Td(i);if(e>o){let i=n[nf(n)-1].y;r.push(`出現外插情形 N172=${e} > N172Max=${o}，依照FS=${t}並給予最小體積應變vstr=${i}%`),s=i}else if(e<u){let i=Tv(n[0],n[1],e);r.push(`出現外插情形 N172=${e} < N172Min=${u}，依照FS=${t}並依據最近2點外插體積應變vstr=${i}%`),s=i}else r.push("非預期外插情形，請洽開發者修復問題"),s=""}else r.push(s.err),s="";return{err:r,vstr:s}}function Bv(e,t,r,n){let i=[],o=0;!function(){if(r<0)return i.push(`Volumetric Strain(Tokimatsu And Seed): CSR${Av(r)}<0`),void(o="");r>.6&&(i.push("Volumetric Strain(Tokimatsu And Seed): CSR大於0.6超過原研究範疇，強制改為0.6"),r=.6),o=Iv(e,r),nf(o.err)>0&&Te(o.err,(e=>{i.push(`Volumetric Strain(Tokimatsu And Seed): ${e}`)})),o=o.vstr}();let u=0;return function(){if(n<0)return i.push(`Volumetric Strain(Ishihara And Yoshimine): FS${Av(n)}<0`),void(u="");n>=2&&(n=2),u=Uv(t,n),nf(u.err)>0&&Te(u.err,(e=>{i.push(`Volumetric Strain(Ishihara And Yoshimine): ${e}`)})),u=u.vstr}(),{err:i,vstrTS:o,vstrIY:u}}function Qv(e){let{ver:t="2012",noLiqueMode:r="new",waterLevelDesign:n,soilClassification:i,depth:o,N60:u,FC:a,PI:l,sv:s,svpUsual:f,svpDesign:c,PGA:p,Mw:h}=e,d=[],v="",g="",m="",b="",y="",w="",x="",$="",S="",E="",M="",k="",R="";function L(){let e={rrd:g,ks:m,CN:b,N160:y,N160cs:w,N172:x,CRR75:$,CRR:S,CSR:E,FS:M,vstrTS:k,vstrIY:R,err:Xc(d,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let j=!1,O=!1;for(;;){if("2012"!==t&&"2017"!==t)return d.push(`ver${Av(t)}非2012或2017`),L();if(!Dl(o))return d.push(`depth${Av(o)}非數字`),L();if(o=Gl(o),o<0)return d.push(`depth${Av(o)}<0`),L();if("new"!==r&&"classic"!==r&&(d.push(`noLiqueMode${Av(r)}非'new'或'classic'，強制預設為'new'`),r="new"),Dl(n)?(n=Gl(n),n<0&&(d.push(`waterLevelDesign${Av(n)}<0，強制預設為0(m)`),n=0)):(d.push(`waterLevelDesign${Av(n)}非數字，強制預設為0(m)`),n=0),_l(i)||(d.push(`soilClassification${Av(i)}非有效字串，強制預設為SW`),i="SW"),(o<n||zv(i,r))&&(j=!0),o>20&&(j=!0),"NP"===Sl(dc(l))&&(l=0),Dl(l)?Gl(l)>7&&(j=!0):d.push(`PI${Av(l)}非數字與非NP，強制略過部份非液化條件檢核`),Dl(u)?(u=Gl(u),u<0&&(d.push(`N60${Av(u)}<0`),O=!0),u>=50&&(j=!0)):(d.push(`N60${Av(u)}非數字`),O=!0),Dl(a)?(a=Gl(a),a<0&&(d.push(`FC${Av(a)}<0`),O=!0)):(d.push(`FC${Av(a)}非數字`),O=!0),!Dl(f))return d.push(`svpUsual${Av(f)}非數字`),L();if(f=Gl(f),f<0)return d.push(`svpUsual${Av(f)}<0`),L();if(!Dl(c))return d.push(`svpDesign${Av(c)}非數字`),L();if(c=Gl(c),c<0)return d.push(`svpDesign${Av(c)}<0`),L();if(!Dl(s))return d.push(`sv${Av(s)}非數字`),L();if(s=Gl(s),s<0)return d.push(`sv${Av(s)}<0`),L();if(!Dl(p))return d.push(`PGA${Av(p)}非數字`),L();if(p=Gl(p),p<0)return d.push(`PGA${Av(p)}<0`),L();if(!Dl(h))return d.push(`Mw${Av(h)}非數字`),L();if(h=Gl(h),h<0)return d.push(`Mw${Av(h)}<0`),L();break}if(!0===j)return d=[],S="-",E="-",M=10,L();if(!0===O)return L();let P=null;"2012"===t?P=-3.3:"2017"===t&&(P=-1.8),v=(h/7.5)**P,g=o<=10?1-.01*o:1.2-.03*o,m=a<=10?1:1+.07*Math.sqrt(a-10);let _=1e3*lf.Pa;if(b=Math.min(Math.sqrt(_/f),1.7),y=b*u,w=m*y,w>=39)return S="-",E="-",M=10,L();$=.08+.0035*w/(1-w/39),S=$*v,E=null,E=c>0?s/c*.65*p*g:1e20,Ca(E)&&E>0&&(M=S/E),Ca(M)&&M>10&&(M=10),S<0&&d.push(`CRR${Av(S)}<0`),E<=0&&d.push(`CSR${Av(E)}<=0`),M<0&&(d.push(`FS${Av(M)}<0，強制改為0`),M=0),x=y/1.2;let D=Bv(y,x,E,M);return d=[...d,...D.err],k=D.vstrTS,R=D.vstrIY,L()}function Gv(e){let{ver:t="1996",noLiqueMode:r="new",waterLevelDesign:n,soilClassification:i,vibrationType:o,depth:u,N60:a,FC:l,PI:s,D50:f,D10:c,sv:p,svpUsual:h,svpDesign:d,PGA:v}=e,g=[],m="",b="",y="",w="",x="",$="",S="",E="",M="",k="",R="",L="",j="",O="",P="",_="";function D(){let e={rrd:m,N160:R,N172:y,c1:w,c2:x,cFC:$,Na:S,RL:E,cw:M,CN:k,CRR75:"",CRR:L,CSR:j,FS:O,vstrTS:P,vstrIY:_,err:Xc(g,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let C=!1,q=!1;for(;;){if("1996"!==t&&"2017"!==t)return g.push(`ver${Av(t)} 非1996或2017`),D();if(!Dl(u))return g.push(`depth${Av(u)}非數字`),D();if(u=Gl(u),u<0)return g.push(`depth${Av(u)}<0`),D();if("new"!==r&&"classic"!==r&&(g.push(`noLiqueMode${Av(r)}非'new'或'classic'，強制預設為'new'`),r="new"),Dl(n)?(n=Gl(n),n<0&&(g.push(`waterLevelDesign${Av(n)}<0，強制預設為0(m)`),n=0)):(g.push(`waterLevelDesign${Av(n)}非數字，強制預設為0(m)`),n=0),_l(i)||(g.push(`soilClassification${Av(i)}非有效字串，強制預設為SW`),i="SW"),zv(i,r)&&(C=!0),u>20&&(C=!0),Dl(a)?(a=Gl(a),a<0&&(g.push(`N60${Av(a)}<0`),q=!0),a>=50&&(C=!0)):(g.push(`N60${Av(a)}非數字`),q=!0),(u<n||n>10)&&(C=!0),Dl(l)?(l=Gl(l),l<0?(g.push(`FC${Av(l)}<0`),q=!0):l<=35||("NP"===Sl(dc(s))&&(s=0),Dl(s)?(s=Gl(s),s<15||(C=!0)):g.push(`PI${Av(s)}非數字與非NP，強制略過部份非液化條件檢核`))):(g.push(`FC${Av(l)}非數字`),q=!0),Dl(f)||g.push(`D50${Av(f)}非數字，強制略過部份非液化條件檢核`),Dl(c)||g.push(`D10${Av(c)}非數字，強制略過部份非液化條件檢核`),Dl(f)&&Dl(c)&&(f=Gl(f),c=Gl(c),f>10&&(C=!0),c>1&&(C=!0)),Dl(o)?(o=Tf(o),1!==o&&2!==o&&(g.push(`vibrationType${Av(o)}不等於1或2，更改為預設值1`),o=1)):(g.push(`vibrationType${Av(o)}非數字，更改為預設值1`),o=1),!Dl(h))return g.push(`svpUsual${Av(h)}非數字`),D();if(h=Gl(h),h<0)return g.push(`svpUsual${Av(h)}<0`),D();if(!Dl(d))return g.push(`svpDesign${Av(d)}非數字`),D();if(d=Gl(d),d<0)return g.push(`svpDesign${Av(d)}<0`),D();if(!Dl(p))return g.push(`sv${Av(p)}非數字`),D();if(p=Gl(p),p<0)return g.push(`sv${Av(p)}<0`),D();if(!Dl(v))return g.push(`PGA${Av(v)}非數字`),D();if(v=Gl(v),v<0)return g.push(`PGA${Av(v)}<0`),D();break}if(!0===C)return g=[],L="-",j="-",O=10,D();if(!0===q)return D();m=1-.015*u,b=a/1.2,k=170/(h+70),y=k*b;S=(()=>{let e=0,r="";return Dl(f)?r=Gl(f)<2?"sand":"gravel":!function(e){let t=av(e,1),r=av(e,2);return"S"===t||"ML"===r||"MH"===r}(i)?function(e){return"G"===av(e,1)}(i)&&(r="gravel"):r="sand","sand"!==r&&"gravel"!==r&&(g.push(`無法由D50${Av(f)}或土壤分類${Av(i)}區分砂或礫石，強制視為砂土`),r="sand"),"sand"===r?"1996"===t?e=(()=>{let e=0;return w=l<10?1:l<60?(l+40)/50:l/20-1,x=l<10?0:(l-10)/18,e=w*y+x,e})():"2017"===t&&(e=(()=>{let e=0;return $=l<10?1:l<40?(l+20)/30:(l-16)/12,e=$*(y+2.47)-2.47,e})()):"gravel"===r&&(Dl(f)||(g.push(`因D50${Av(f)}未給予或非數字，故改使用土壤分類來區分砂或礫質土，卻又被分為礫質土仍需要用D50，故強制設定D50為10(mm)`),f=10),f=Gl(f),e=(1-.361*Math.log10(f/2))*y),e})(),S<14?"1996"===t?E=.0882*Math.sqrt(S/1.7):"2017"===t&&(E=.0882*Math.sqrt((.85*S+2.1)/1.7)):E=.0882*Math.sqrt(S/1.7)+16e-7*(S-14)**4.5,M=2===o?E<=.1?1:E<=.4?3.3*E+.67:2:1,L=M*E,j=null,j=d>0?m*v*p/d:1e20,Ca(j)&&j>0&&(O=L/j),Ca(O)&&O>10&&(O=10),L<0&&g.push(`CRR${Av(L)}<0`),j<=0&&g.push(`CSR${Av(j)}<=0`),O<0&&(g.push(`FS${Av(O)}<0，強制改為0`),O=0),R=y/(60/72);let N=Bv(R,y,j,O);return g=[...g,...N.err],P=N.vstrTS,_=N.vstrIY,D()}function Hv(e){let{ver:t="2012",waterLevelDesign:r,depth:n,coe_a:i,qc:o,fs:u,u2:a,svp:l,svpUsual:s,svpDesign:f,sv:c,PGA:p,Mw:h}=e,d=[],v="",g="",m="",b="",y="",w="",x="",$="",S="",E="",M="",k="";function R(){Dl(y)&&(y/=Nv),Dl($)&&($/=Nv);let e={rrd:g,Ic:m,Icn:b,qc1N:y,Rf:w,Kc:x,qc1Ncs:$,CRR75:S,CRR:E,CSR:M,FS:k,err:Xc(d,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let L=!1,j=!1;for(;;){if("2012"!==t&&"2017"!==t&&"2021"!==t)return d.push(`ver${Av(t)}非2012或2017或2021`),R();if(!Dl(n))return d.push(`depth${Av(n)}非數字`),R();if(n=Gl(n),n<0)return d.push(`depth${Av(n)}<0`),R();if("2021"===t&&(Dl(i)?(i=Gl(i),i<0&&(d.push(`coe_a${Av(i)}<0，強制預設為0.8`),i=.8)):(d.push(`coe_a${Av(i)}非數字，強制預設為0.8`),i=.8)),Dl(r)?(r=Gl(r),r<0&&(d.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(d.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),n<r&&(L=!0),n>20&&(L=!0),Dl(o)?(o=Gl(o),o<0&&(d.push(`qc${Av(o)}<0`),j=!0)):(d.push(`qc${Av(o)}非數字`),j=!0),Dl(u)?(u=Gl(u),u<0&&(d.push(`fs${Av(u)}<0`),j=!0)):(d.push(`fs${Av(u)}非數字`),j=!0),Dl(a)?a=Gl(a):(d.push(`u2${Av(a)}非數字`),j=!0),Dl(l)&&(l=Gl(l),s=l,f=l),!Dl(s))return d.push(`svpUsual${Av(s)}非數字`),R();if(s=Gl(s),s<0)return d.push(`svpUsual${Av(s)}<0`),R();if(!Dl(f))return d.push(`svpDesign${Av(f)}非數字`),R();if(f=Gl(f),f<0)return d.push(`svpDesign${Av(f)}<0`),R();if(!Dl(c))return d.push(`sv${Av(c)}非數字`),R();if(c=Gl(c),c<0)return d.push(`sv${Av(c)}<0`),R();if(!Dl(p))return d.push(`PGA${Av(p)}非數字`),R();if(p=Gl(p),p<0)return d.push(`PGA${Av(p)}<0`),R();if(!Dl(h))return d.push(`Mw${Av(h)}非數字`),R();if(h=Gl(h),h<0)return d.push(`Mw${Av(h)}<0`),R();break}if(!0===L)return d=[],E="-",M="-",k=10,R();if(!0===j)return R();let O=sf(n);if("2021"===t){let e=Wc({sv:c/1e3,svp:s/1e3,qc:o,fs:u,u0:O,u2:a},i,{useCnLeq:!0});m=Hi(e,"Ic",null),b=Hi(e,"Icn",null);let t=null;if(null===t&&Ca(b)&&(t=b),null===t&&Ca(m)&&(d.push("無法計算Icn，強制降轉使用Ic"),t=m),t>2.6)return E="-",M="-",k=10,R()}c*=Nv,s*=Nv,f*=Nv,o=1e3*o*Nv,u=1e3*u*Nv,a=1e3*a*Nv,O=1e3*O*Nv;let P=null;return"2012"===t?P=-3.3:"2017"!==t&&"2021"!==t||(P=-1.8),v=(h/7.5)**P,g=n<=10?1-.01*n:1.2-.03*n,y=1.7/(s+.7)*o,w=null,w=o>0?u/o*100:1e20,x=w<=.1?1:.4*w**2-.08*w+1.004,$=x*y,$>=180?(E="-",M="-",k=10,R()):(S=.09+28e-5*$/(1-$/180),E=S*v,M=null,M=f>0?.65*p*(c/f)*g:1e20,Ca(M)&&M>0&&(k=E/M),Ca(k)&&k>10&&(k=10),E<0&&d.push(`CRR${Av(E)}<0`),M<=0&&d.push(`CSR${Av(M)}<=0`),k<0&&(d.push(`FS${Av(k)}<0，強制改為0`),k=0),R())}let Wv={SPT:{sptSeed:function(e){let{noLiqueMode:t="new",waterLevelDesign:r,soilClassification:n,depth:i,N60:o,FC:u,sv:a,svpUsual:l,svpDesign:s,PGA:f,Mw:c}=e,p=[],h="",d="",v="",g="",m="",b="",y="",w="",x="",$="",S="";function E(){let e={rrd:d,CN:v,N160:g,N172:m,CRR75:b,CRR:y,CSR:w,FS:x,vstrTS:$,vstrIY:S,err:Xc(p,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let M=!1,k=!1;for(;;){if(!Dl(i))return p.push(`depth${Av(i)}非數字`),E();if(i=Gl(i),i<0)return p.push(`depth${Av(i)}<0`),E();if("new"!==t&&"classic"!==t&&(p.push(`noLiqueMode${Av(t)}非'new'或'classic'，強制預設為'new'`),t="new"),Dl(r)?(r=Gl(r),r<0&&(p.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(p.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),_l(n)||(p.push(`soilClassification${Av(n)}非有效字串，強制預設為SW`),n="SW"),(i<r||zv(n,t))&&(M=!0),i>20&&(M=!0),Dl(o)?(o=Gl(o),o<0&&(p.push(`N60${Av(o)}<0`),k=!0),o>=50&&(M=!0)):(p.push(`N60${Av(o)}非數字`),k=!0),Dl(u)?(u=Gl(u),u<0&&(p.push(`FC${Av(u)}<0`),k=!0)):(p.push(`FC${Av(u)}非數字`),k=!0),!Dl(l))return p.push(`svpUsual${Av(l)}非數字`),E();if(l=Gl(l),l<0)return p.push(`svpUsual${Av(l)}<0`),E();if(!Dl(s))return p.push(`svpDesign${Av(s)}非數字`),E();if(s=Gl(s),s<0)return p.push(`svpDesign${Av(s)}<0`),E();if(!Dl(a))return p.push(`sv${Av(a)}非數字`),E();if(a=Gl(a),a<0)return p.push(`sv${Av(a)}<0`),E();if(!Dl(f))return p.push(`PGA${Av(f)}非數字`),E();if(f=Gl(f),f<0)return p.push(`PGA${Av(f)}<0`),E();if(!Dl(c))return p.push(`Mw${Av(c)}非數字`),E();if(c=Gl(c),c<0)return p.push(`Mw${Av(c)}<0`),E();break}if(!0===M)return p=[],y="-",w="-",x=10,E();if(!0===k)return E();h=(c/7.5)**-1.11,d=(1-.4113*i**.5+.04052*i+.001753*i**1.5)/(1-.4177*i**.5+.05729*i-.006205*i**1.5+.00121*i**2);let R=1e3*lf.Pa;v=Math.min(Math.sqrt(R/l),1.7),g=v*o;let L=[{FC:5,data:[[0,.0496622],[2.65306,.0547297],[4.38776,.0628378],[6.02041,.0719595],[7.55102,.0831081],[8.97959,.100338],[10.5102,.114527],[12.2449,.131757],[13.5714,.146959],[14.7959,.161149],[16.1224,.177365],[17.7551,.193581],[19.1837,.211824],[20.7143,.232095],[22.0408,.248311],[23.2653,.265541],[24.5918,.285811],[25.6122,.307095],[26.4286,.327365],[27.2449,.347635],[27.9592,.372973],[28.3673,.398311],[28.7755,.423649],[28.9796,.444932],[29.2857,.473311],[29.3,.6],[100,100]]},{FC:15,data:[[0,.065],[1.63265,.068],[2.85714,.074],[3.87755,.082],[5.10204,.0932432],[6.22449,.110473],[7.44898,.123649],[8.57143,.136824],[9.69388,.151014],[10.9184,.164189],[11.9388,.178378],[13.0612,.192568],[13.8776,.203716],[14.6939,.214865],[16.1224,.232095],[17.551,.251351],[18.5714,.270608],[19.898,.288851],[20.7143,.308108],[21.4286,.327365],[22.0408,.347635],[22.449,.370946],[22.8571,.393243],[23.2653,.417568],[23.6735,.439865],[23.9796,.460135],[24.05,.483446],[24.0816,.515878],[24.1,.6],[100,101]]},{FC:35,data:[[0,.075],[1.32653,.082],[2.44898,.09],[3.26531,.0962838],[4.79592,.116554],[6.22449,.134797],[7.34694,.152027],[8.87755,.171284],[10.102,.185473],[11.4286,.20777],[13.2653,.228041],[14.5918,.247297],[15.7143,.267568],[16.7347,.287838],[17.7551,.313176],[18.6735,.343581],[19.1837,.364865],[19.6939,.382095],[20.102,.410473],[20.4082,.433784],[20.5102,.464189],[20.7143,.490541],[20.9184,.519932],[20.92,.6],[100,102]]}],j=Oo(L,"FC");L=Oo(L,(e=>{let t=Oo(e.data,(e=>e[0])),r=Oo(e.data,(e=>e[1]));return e.vx=t,e.vy=r,e}));let O=Oo(L,(e=>{let t=Fv(e.vx,e.vy,g);return Hi(t,"err")?t.err:t}));if(b=Fv(j,O,u),Hi(b,"err")){if("out of x-range"!==b.err)return p.push(b.err),b="",E();{let e=b.data.ps,t=Qd(j),r=Td(j);if(u>t)b=Tv(e[nf(e)-2],e[nf(e)-1],u),p.push(`出現外插情形 FC=${u} > FCMax=${t}，依據最近2點外插CRR75=${b}`);else{if(!(u<r))return p.push("非預期外插情形，請洽開發者修復問題"),b="",E();b=Tv(e[0],e[1],u),b=Math.max(b,0),p.push(`出現外插情形 FC=${u} < FCMin=${r}，依據最近2點外插CRR75=${b}`)}}}if(!Ca(b))return p.push(`CRR75${Av(b)}非數字`),E();b>.6&&(p.push(`CRR75${Av(b)}大於0.6超過原研究範疇，強制改為0.6`),b=.6),y=b*h,w=null,w=s>0?a/s*.65*f*d:1e20,Ca(w)&&w>0&&(x=y/w),Ca(x)&&x>10&&(x=10),y<0&&p.push(`CRR${Av(y)}<0`),w<=0&&p.push(`CSR${Av(w)}<=0`),x<0&&(p.push(`FS${Av(x)}<0，強制改為0`),x=0),m=g/1.2;let P=Bv(g,m,w,x);return p=[...p,...P.err],$=P.vstrTS,S=P.vstrIY,E()},sptHBF2012:e=>Qv(e=qv(qv({},e),{},{ver:"2012"})),sptHBF2017:e=>Qv(e=qv(qv({},e),{},{ver:"2017"})),sptNCEER:function(e){let{noLiqueMode:t="new",waterLevelDesign:r,soilClassification:n,depth:i,N60:o,FC:u,sv:a,svpUsual:l,svpDesign:s,PGA:f,Mw:c}=e,p=[],h="",d="",v="",g="",m="",b="",y="",w="",x="",$="",S="",E="",M="",k="";function R(){let e={rrd:d,alpha:v,beta:g,CN:m,N160:b,N160cs:y,N172:w,CRR75:x,CRR:$,CSR:S,FS:E,vstrTS:M,vstrIY:k,err:Xc(p,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let L=!1,j=!1;for(;;){if(!Dl(i))return p.push(`depth${Av(i)}非數字`),R();if(i=Gl(i),i<0)return p.push(`depth${Av(i)}<0`),R();if("new"!==t&&"classic"!==t&&(p.push(`noLiqueMode${Av(t)}非'new'或'classic'，強制預設為'new'`),t="new"),Dl(r)?(r=Gl(r),r<0&&(p.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(p.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),_l(n)||(p.push(`soilClassification${Av(n)}非有效字串，強制預設為SW`),n="SW"),(i<r||zv(n,t))&&(L=!0),i>20&&(L=!0),Dl(o)?(o=Gl(o),o<0&&(p.push(`N60${Av(o)}<0`),j=!0),o>=50&&(L=!0)):(p.push(`N60${Av(o)}非數字`),j=!0),Dl(u)?(u=Gl(u),u<0&&(p.push(`FC${Av(u)}<0`),j=!0)):(p.push(`FC${Av(u)}非數字`),j=!0),!Dl(l))return p.push(`svpUsual${Av(l)}非數字`),R();if(l=Gl(l),l<0)return p.push(`svpUsual${Av(l)}<0`),R();if(!Dl(s))return p.push(`svpDesign${Av(s)}非數字`),R();if(s=Gl(s),s<0)return p.push(`svpDesign${Av(s)}<0`),R();if(!Dl(a))return p.push(`sv${Av(a)}非數字`),R();if(a=Gl(a),a<0)return p.push(`sv${Av(a)}<0`),R();if(!Dl(f))return p.push(`PGA${Av(f)}非數字`),R();if(f=Gl(f),f<0)return p.push(`PGA${Av(f)}<0`),R();if(!Dl(c))return p.push(`Mw${Av(c)}非數字`),R();if(c=Gl(c),c<0)return p.push(`Mw${Av(c)}<0`),R();break}if(!0===L)return p=[],$="-",S="-",E=10,R();if(!0===j)return R();h=(c/7.5)**-2.56,d=(1-.4113*i**.5+.04052*i+.001753*i**1.5)/(1-.4177*i**.5+.05729*i-.006205*i**1.5+.00121*i**2),v=u<=5?0:u<=35?Math.exp(1.76-190/u**2):5,g=u<=5?1:u<=35?.99+u**1.5/1e3:1.2;let O=1e3*lf.Pa;if(m=Math.min(Math.sqrt(O/l),1.7),b=m*o,y=v+g*b,y>=30)return $="-",S="-",E=10,R();x=(.04844+-.004721*y+6136e-7*y**2+-1673e-8*y**3)/(1+-.1248*y+.009578*y**2+-3285e-7*y**3+3714e-9*y**4),$=x*h,S=null,S=s>0?a/s*.65*f*d:1e20,Ca(S)&&S>0&&(E=$/S),Ca(E)&&E>10&&(E=10),$<0&&p.push(`CRR${Av($)}<0`),S<=0&&p.push(`CSR${Av(S)}<=0`),E<0&&(p.push(`FS${Av(E)}<0，強制改為0`),E=0),w=b/1.2;let P=Bv(b,w,S,E);return p=[...p,...P.err],M=P.vstrTS,k=P.vstrIY,R()},sptNJRA1996:e=>Gv(e=qv(qv({},e),{},{ver:"1996"})),sptNJRA2017:e=>Gv(e=qv(qv({},e),{},{ver:"2017"})),sptTY:function(e){let{noLiqueMode:t="new",waterLevelDesign:r,soilClassification:n,depth:i,a:o,n:u,Cr:a,Cs:l,N60:s,FC:f,sv:c,svpUsual:p,svpDesign:h,PGA:d,Mw:v}=e,g=[],m="",b="",y="",w="",x="",$="",S="",E="",M="",k="",R="",L="";function j(){let e={rrd:m,N160:S,N172:y,dNf:w,Na:x,CN:$,CRR75:"",CRR:E,CSR:M,FS:k,vstrTS:R,vstrIY:L,err:Xc(g,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let O=!1,P=!1;for(;;){if(!Dl(i))return g.push(`depth${Av(i)}非數字`),j();if(i=Gl(i),i<0)return g.push(`depth${Av(i)}<0`),j();if("new"!==t&&"classic"!==t&&(g.push(`noLiqueMode${Av(t)}非'new'或'classic'，強制預設為'new'`),t="new"),Dl(r)?(r=Gl(r),r<0&&(g.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(g.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),_l(n)||(g.push(`soilClassification${Av(n)}非有效字串，強制預設為SW`),n="SW"),(i<r||zv(n,t))&&(O=!0),i>20&&(O=!0),Dl(s)?(s=Gl(s),s<0&&(g.push(`N60${Av(s)}<0`),P=!0),s>=50&&(O=!0)):(g.push(`N60${Av(s)}非數字`),P=!0),Dl(f)?(f=Gl(f),f<0&&(g.push(`FC${Av(f)}<0`),P=!0)):(g.push(`FC${Av(f)}非數字`),P=!0),!Dl(p))return g.push(`svpUsual${Av(p)}非數字`),j();if(p=Gl(p),p<0)return g.push(`svpUsual${Av(p)}<0`),j();if(!Dl(h))return g.push(`svpDesign${Av(h)}非數字`),j();if(h=Gl(h),h<0)return g.push(`svpDesign${Av(h)}<0`),j();if(!Dl(c))return g.push(`sv${Av(c)}非數字`),j();if(c=Gl(c),c<0)return g.push(`sv${Av(c)}<0`),j();if(!Dl(d))return g.push(`PGA${Av(d)}非數字`),j();if(d=Gl(d),d<0)return g.push(`PGA${Av(d)}<0`),j();if(!Dl(v))return g.push(`Mw${Av(v)}非數字`),j();if(v=Gl(v),v<0)return g.push(`Mw${Av(v)}<0`),j();break}if(!0===O)return g=[],E="-",M="-",k=10,j();if(!0===P)return j();Dl(o)||(o=.45),o=Gl(o),Dl(u)||(u=14),u=Gl(u),Dl(a)||(a=.57),a=Gl(a),Dl(l)||(l=85),l=Gl(l),m=1-.015*i,b=s/1.2,$=170/(p+70),y=$*b,w=f<=5?0:f<=10?f-5:.1*f+4,x=y+w,E=o*a*(16*Math.sqrt(x)/100+(16*Math.sqrt(x)/l)**u),M=null,M=h>0?.1*(v-1)*d*(c/h)*m:1e20,Ca(M)&&M>0&&(k=E/M),Ca(k)&&k>10&&(k=10),E<0&&g.push(`CRR${Av(E)}<0`),M<=0&&g.push(`CSR${Av(M)}<=0`),k<0&&(g.push(`FS${Av(k)}<0，強制改為0`),k=0),S=y/(60/72);let _=Bv(S,y,M,k);return g=[...g,..._.err],R=_.vstrTS,L=_.vstrIY,j()}},CPT:{cptHBF2012:e=>Hv(e=qv(qv({},e),{},{ver:"2012"})),cptHBF2017:e=>Hv(e=qv(qv({},e),{},{ver:"2017"})),cptHBF2021:e=>Hv(e=qv(qv({},e),{},{ver:"2021"})),cptNCEER1997:e=>function(e){let{ver:t="1997",waterLevelDesign:r,depth:n,qc:i,fs:o,u2:u,svp:a,svpUsual:l,svpDesign:s,sv:f,PGA:c,Mw:p}=e,h=[],d="",v="",g="",m="",b="",y="",w="",x="",$="",S="";function E(){Dl(g)&&(g/=Nv),Dl(y)&&(y/=Nv);let e={rrd:v,Qt1n:g,Ic:m,Kc:b,Qt1ncs:y,CRR75:w,CRR:x,CSR:$,FS:S,err:Xc(h,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let M=!1,k=!1;for(;;){if("1997"!==t)return h.push(`ver${Av(t)}非1997`),E();if(!Dl(n))return h.push(`depth${Av(n)}非數字`),E();if(n=Gl(n),n<0)return h.push(`depth${Av(n)}<0`),E();if(Dl(r)?(r=Gl(r),r<0&&(h.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(h.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),n<r&&(M=!0),n>20&&(M=!0),Dl(i)?(i=Gl(i),i<0&&(h.push(`qc${Av(i)}<0`),k=!0)):(h.push(`qc${Av(i)}非數字`),k=!0),Dl(o)?(o=Gl(o),o<0&&(h.push(`fs${Av(o)}<0`),k=!0)):(h.push(`fs${Av(o)}非數字`),k=!0),Dl(u)?u=Gl(u):(h.push(`u2${Av(u)}非數字`),k=!0),Dl(a)&&(a=Gl(a),l=a,s=a),!Dl(l))return h.push(`svpUsual${Av(l)}非數字`),E();if(l=Gl(l),l<0)return h.push(`svpUsual${Av(l)}<0`),E();if(!Dl(s))return h.push(`svpDesign${Av(s)}非數字`),E();if(s=Gl(s),s<0)return h.push(`svpDesign${Av(s)}<0`),E();if(!Dl(f))return h.push(`sv${Av(f)}非數字`),E();if(f=Gl(f),f<0)return h.push(`sv${Av(f)}<0`),E();if(!Dl(c))return h.push(`PGA${Av(c)}非數字`),E();if(c=Gl(c),c<0)return h.push(`PGA${Av(c)}<0`),E();if(!Dl(p))return h.push(`Mw${Av(p)}非數字`),E();if(p=Gl(p),p<0)return h.push(`Mw${Av(p)}<0`),E();break}if(!0===M)return h=[],x="-",$="-",S=10,E();if(!0===k)return E();f*=Nv,l*=Nv,s*=Nv,i=1e3*i*Nv,o=1e3*o*Nv,u=1e3*u*Nv,d=(p/7.5)**-2.56,v=(1-.4113*n**.5+.04052*n+.001753*n**1.5)/(1-.4177*n**.5+.05729*n-.006205*n**1.5+.00121*n**2);let R=null;R=l>0?(i-f)/l:1e20;let L=o/(i-f)*100,j=Math.sqrt((3.47-Math.log10(R))**2+(Math.log10(L)+1.22)**2);if(j<=2.6){let e=1e3*lf.Pa;e*=Nv,g=l>0?i/e*(e/l)**.5:1e20;let t=Math.sqrt((3.47-Math.log10(g))**2+(Math.log10(L)+1.22)**2);t<=2.6?m=t:(g=l>0?i/e*(e/l)**.75:1e20,m=Math.sqrt((3.47-Math.log10(g))**2+(Math.log10(L)+1.22)**2))}else g=R,m=j;return m>=2.6?(x="-",$="-",S=10,E()):(m<=1.64?b=1:(b=-.403*m**4+5.581*m**3-21.63*m**2+33.75*m-17.88,m<2.36&&L<.5&&(b=1)),y=b*g,y>=160?(x="-",$="-",S=10,E()):(w=null,w=y<50?y/1e3*.833+.05:93*(y/1e3)**3+.08,x=w*d,$=null,$=s>0?.65*c*(f/s)*v:1e20,Ca($)&&$>0&&(S=x/$),Ca(S)&&S>10&&(S=10),x<0&&h.push(`CRR${Av(x)}<0`),$<=0&&h.push(`CSR${Av($)}<=0`),S<0&&(h.push(`FS${Av(S)}<0，強制改為0`),S=0),E()))}(e=qv(qv({},e),{},{ver:"1997"})),cptRobertson2009:e=>function(e){let{ver:t="2009",waterLevelDesign:r,depth:n,coe_a:i,qc:o,fs:u,u2:a,svp:l,svpUsual:s,svpDesign:f,sv:c,tou_s:p,su:h,PGA:d,Mw:v}=e,g=[],m="",b="",y="",w="",x="",$="",S="",E="",M="",k="",R="",L="",j="",O="";function P(){let e={rrd:b,Kc:y,Kalpha:w,Fr:x,Ic:$,Icn:S,Qt:E,Qtn:M,Qtncs:k,CRR75:R,CRR:L,CSR:j,FS:O,err:Xc(g,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let _=!1,D=!1;for(;;){if("2009"!==t)return g.push(`ver${Av(t)}非2009`),P();if(!Dl(n))return g.push(`depth${Av(n)}非數字`),P();if(n=Gl(n),n<0)return g.push(`depth${Av(n)}<0`),P();if(Dl(i)?(i=Gl(i),i<0&&(g.push(`coe_a${Av(i)}<0，強制預設為0.8`),i=.8)):(g.push(`coe_a${Av(i)}非數字，強制預設為0.8`),i=.8),Dl(r)?(r=Gl(r),r<0&&(g.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(g.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),n<r&&(_=!0),n>20&&(_=!0),Dl(o)?(o=Gl(o),o<0&&(g.push(`qc${Av(o)}<0`),D=!0)):(g.push(`qc${Av(o)}非數字`),D=!0),Dl(u)?(u=Gl(u),u<0&&(g.push(`fs${Av(u)}<0`),D=!0)):(g.push(`fs${Av(u)}非數字`),D=!0),Dl(a)?a=Gl(a):(g.push(`u2${Av(a)}非數字`),D=!0),Dl(l)&&(l=Gl(l),s=l,f=l),!Dl(s))return g.push(`svpUsual${Av(s)}非數字`),P();if(s=Gl(s),s<0)return g.push(`svpUsual${Av(s)}<0`),P();if(!Dl(f))return g.push(`svpDesign${Av(f)}非數字`),P();if(f=Gl(f),f<0)return g.push(`svpDesign${Av(f)}<0`),P();if(!Dl(c))return g.push(`sv${Av(c)}非數字`),P();if(c=Gl(c),c<0)return g.push(`sv${Av(c)}<0`),P();if(!Dl(p))return g.push(`tou_s${Av(p)}非數字`),P();if(p=Gl(p),p<0)return g.push(`tou_s${Av(p)}<0`),P();if(!Dl(h))return g.push(`su${Av(h)}非數字`),P();if(h=Gl(h),h<0)return g.push(`su${Av(h)}<0`),P();if(!Dl(d))return g.push(`PGA${Av(d)}非數字`),P();if(d=Gl(d),d<0)return g.push(`PGA${Av(d)}<0`),P();if(!Dl(v))return g.push(`Mw${Av(v)}非數字`),P();if(v=Gl(v),v<0)return g.push(`Mw${Av(v)}<0`),P();break}if(!0===_)return g=[],L="-",j="-",O=10,P();if(!0===D)return P();let C=Wc({sv:c/1e3,svp:s/1e3,qc:o,fs:u,u0:sf(n),u2:a},i,{useCnLeq:!1});x=Hi(C,"Fr",null),$=Hi(C,"Ic",null),S=Hi(C,"Icn",null),E=Hi(C,"Qt",null),M=Hi(C,"Qtn",null);let q=null;null===q&&Ca(S)&&(q=S),null===q&&Ca($)&&(g.push("無法計算Icn，強制降轉使用Ic"),q=$);let N=null;return null===N&&Ca(M)&&(N=M),null===N&&Ca(E)&&(g.push("無法計算Qtn，強制降轉使用Qt"),N=E),c*=Nv,s*=Nv,f*=Nv,o=1e3*o*Nv,u=1e3*u*Nv,a=1e3*a*Nv,m=(v/7.5)**-2.56,b=(1-.4113*n**.5+.04052*n+.001753*n**1.5)/(1-.4177*n**.5+.05729*n-.006205*n**1.5+.00121*n**2),k=null,R=null,q<=2.5?(q<=1.64?y=1:(y=-.403*q**4+5.581*q**3-21.63*q**2+33.75*q-17.88,q<2.36&&x<.5&&(y=1)),k=y*N,R=k<50?k/1e3*.833+.05:93*(k/1e3)**3+.08):q<2.7?(y=6e-7*q**16.76,k=y*N,R=k<50?k/1e3*.833+.05:93*(k/1e3)**3+.08):(w=1.344-.344/(1-p/h)**.638,k=w*N,R=.053*k),L=R*m,j=null,j=f>0?.65*d*(c/f)*b:1e20,Ca(j)&&j>0&&(O=L/j),Ca(O)&&O>10&&(O=10),L<0&&g.push(`CRR${Av(L)}<0`),j<=0&&g.push(`CSR${Av(j)}<=0`),O<0&&(g.push(`FS${Av(O)}<0，強制改為0`),O=0),P()}(e=qv(qv({},e),{},{ver:"2009"})),cptJuang2002:e=>function(e){let{ver:t="2002",waterLevelDesign:r,depth:n,qc:i,fs:o,u2:u,svp:a,svpUsual:l,svpDesign:s,sv:f,PGA:c,Mw:p}=e,h=[],d="",v="",g="",m="",b="",y="",w="",x="",$="";function S(){Dl(g)&&(g/=Nv),Dl(b)&&(b/=Nv);let e={rrd:v,qc1N:g,Ic:m,qc1Ncs:b,CRR75:y,CRR:w,CSR:x,FS:$,err:Xc(h,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let E=!1,M=!1;for(;;){if("2002"!==t)return h.push(`ver${Av(t)}非2002`),S();if(!Dl(n))return h.push(`depth${Av(n)}非數字`),S();if(n=Gl(n),n<0)return h.push(`depth${Av(n)}<0`),S();if(Dl(r)?(r=Gl(r),r<0&&(h.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(h.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),n<r&&(E=!0),n>20&&(E=!0),Dl(i)?(i=Gl(i),i<0&&(h.push(`qc${Av(i)}<0`),M=!0)):(h.push(`qc${Av(i)}非數字`),M=!0),Dl(o)?(o=Gl(o),o<0&&(h.push(`fs${Av(o)}<0`),M=!0)):(h.push(`fs${Av(o)}非數字`),M=!0),Dl(u)?u=Gl(u):(h.push(`u2${Av(u)}非數字`),M=!0),Dl(a)&&(a=Gl(a),l=a,s=a),!Dl(l))return h.push(`svpUsual${Av(l)}非數字`),S();if(l=Gl(l),l<0)return h.push(`svpUsual${Av(l)}<0`),S();if(!Dl(s))return h.push(`svpDesign${Av(s)}非數字`),S();if(s=Gl(s),s<0)return h.push(`svpDesign${Av(s)}<0`),S();if(!Dl(f))return h.push(`sv${Av(f)}非數字`),S();if(f=Gl(f),f<0)return h.push(`sv${Av(f)}<0`),S();if(!Dl(c))return h.push(`PGA${Av(c)}非數字`),S();if(c=Gl(c),c<0)return h.push(`PGA${Av(c)}<0`),S();if(!Dl(p))return h.push(`Mw${Av(p)}非數字`),S();if(p=Gl(p),p<0)return h.push(`Mw${Av(p)}<0`),S();break}if(!0===E)return h=[],w="-",x="-",$=10,S();if(!0===M)return S();f*=Nv,l*=Nv,s*=Nv,i=1e3*i*Nv,o=1e3*o*Nv,u=1e3*u*Nv,d=(p/7.5)**-2.56,v=(1-.4113*n**.5+.04052*n+.001753*n**1.5)/(1-.4177*n**.5+.05729*n-.006205*n**1.5+.00121*n**2);let k=null;i-f>0&&(k=o/(i-f)*100),g=null,l>0&&(g=i/Math.sqrt(l)),m=null,Ca(g)&&Ca(k)&&(m=Math.sqrt((3.47-Math.log10(g))**2+(Math.log10(k)+1.22)**2)),b=null,Ca(g)&&Ca(m)&&(b=g*(2.429*m**4-16.943*m**3+44.551*m**2-51.497*m+22.802));let R=-.016*(l/100)**3+.178*(l/100)**2-l/100*.063+.903;return y=null,Ca(R)&&Ca(b)&&(y=R*Math.exp(1.264*(b/100)**1.25-2.957)),w=null,Ca(y)&&Ca(d)&&(w=y*d),x=null,x=s>0?.65*c*(f/s)*v:1e20,Ca(x)&&x>0&&($=w/x),Ca($)&&$>10&&($=10),w<0&&h.push(`CRR${Av(w)}<0`),x<=0&&h.push(`CSR${Av(x)}<=0`),$<0&&(h.push(`FS${Av($)}<0，強制改為0`),$=0),S()}(e=qv(qv({},e),{},{ver:"2002"})),cptKuAndJuang2012:e=>function(e){let{ver:t="2012",waterLevelDesign:r,depth:n,coe_a:i,qc:o,fs:u,u2:a,svp:l,svpUsual:s,svpDesign:f,sv:c,PGA:p,Mw:h}=e,d=[],v="",g="",m="",b="",y="",w="",x="",$="",S="",E="",M="",k="",R="",L="",j="";function O(){let e={rrd:g,Fr:m,Bq:b,Ic:y,Icn:w,Qt:x,Qtn:$,Icbj:S,Csigma:E,Ksigma:M,CRR75:k,CRR:R,CSR:L,FS:j,err:Xc(d,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let P=!1,_=!1;for(;;){if("2012"!==t)return d.push(`ver${Av(t)}非2012`),O();if(!Dl(n))return d.push(`depth${Av(n)}非數字`),O();if(n=Gl(n),n<0)return d.push(`depth${Av(n)}<0`),O();if(Dl(i)?(i=Gl(i),i<0&&(d.push(`coe_a${Av(i)}<0，強制預設為0.8`),i=.8)):(d.push(`coe_a${Av(i)}非數字，強制預設為0.8`),i=.8),Dl(r)?(r=Gl(r),r<0&&(d.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(d.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),n<r&&(P=!0),n>20&&(P=!0),Dl(o)?(o=Gl(o),o<0&&(d.push(`qc${Av(o)}<0`),_=!0)):(d.push(`qc${Av(o)}非數字`),_=!0),Dl(u)?(u=Gl(u),u<0&&(d.push(`fs${Av(u)}<0`),_=!0)):(d.push(`fs${Av(u)}非數字`),_=!0),Dl(a)?a=Gl(a):(d.push(`u2${Av(a)}非數字`),_=!0),Dl(l)&&(l=Gl(l),s=l,f=l),!Dl(s))return d.push(`svpUsual${Av(s)}非數字`),O();if(s=Gl(s),s<0)return d.push(`svpUsual${Av(s)}<0`),O();if(!Dl(f))return d.push(`svpDesign${Av(f)}非數字`),O();if(f=Gl(f),f<0)return d.push(`svpDesign${Av(f)}<0`),O();if(!Dl(c))return d.push(`sv${Av(c)}非數字`),O();if(c=Gl(c),c<0)return d.push(`sv${Av(c)}<0`),O();if(!Dl(p))return d.push(`PGA${Av(p)}非數字`),O();if(p=Gl(p),p<0)return d.push(`PGA${Av(p)}<0`),O();if(!Dl(h))return d.push(`Mw${Av(h)}非數字`),O();if(h=Gl(h),h<0)return d.push(`Mw${Av(h)}<0`),O();break}if(!0===P)return d=[],R="-",L="-",j=10,O();if(!0===_)return O();let D=Wc({sv:c/1e3,svp:s/1e3,qc:o,fs:u,u0:sf(n),u2:a},i,{useCnLeq:!0});m=Hi(D,"Fr",null),b=Hi(D,"Bq",null),y=Hi(D,"Ic",null),w=Hi(D,"Icn",null),x=Hi(D,"Qt",null),$=Hi(D,"Qtn",null);let C=null;null===C&&Ca(w)&&(C=w),null===C&&Ca(y)&&(d.push("無法計算Icn，強制降轉使用Ic"),C=y);let q=null;null===q&&Ca($)&&(q=$),null===q&&Ca(x)&&(d.push("無法計算Qtn，強制降轉使用Qt"),q=x),c*=Nv,s*=Nv,f*=Nv,o=1e3*o*Nv,u=1e3*u*Nv,a=1e3*a*Nv,v=6.9*Math.exp(-h/4)-.058,v=Math.min(v,1.8);let N=-1.012-1.126*Math.sin(n/11.73+5.133),A=.106+.118*Math.sin(n/11.28+5.142);if(g=Math.exp(N+A*h),g=Math.min(g,1),S=null,!(Ca(x)&&Ca(b)&&Ca(m)))return d.push("無法計算Ic(BJ)"),O();S=Math.sqrt((3-Math.log10(x*(1-b)+1))**2+(Math.log10(m)+1.22)**2);let z=S*(q/100)-14.7,F=.909*S**3-7.47*S+19.28,T=.059+.015*S**2;k=.05+Math.exp(z+F*(q/100)**T),E=null,E=$<=37?.063:$<211?1/(37.3-8.27*$**.264):.3,E=Math.min(E,.3);let I=1e3*lf.Pa;return I*=Nv,M=1-E*Math.log(s/I),M=Math.min(M,1),R=k*v*M,L=null,L=f>0?.65*p*(c/f)*g:1e20,Ca(L)&&L>0&&(j=R/L),Ca(j)&&j>10&&(j=10),R<0&&d.push(`CRR${Av(R)}<0`),L<=0&&d.push(`CSR${Av(L)}<=0`),j<0&&(d.push(`FS${Av(j)}<0，強制改為0`),j=0),O()}(e=qv(qv({},e),{},{ver:"2012"})),cptOlsen1997:e=>function(e){let{ver:t="1997",waterLevelDesign:r,depth:n,qc:i,fs:o,u2:u,svp:a,svpUsual:l,svpDesign:s,sv:f,PGA:c,Mw:p}=e,h=[],d="",v="",g="",m="",b="",y="",w="",x="";function $(){Dl(g)&&(g/=Nv);let e={rrd:v,qc1:g,Rf:m,CRR75:b,CRR:y,CSR:w,FS:x,err:Xc(h,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let S=!1,E=!1;for(;;){if("1997"!==t)return h.push(`ver${Av(t)}非1997`),$();if(!Dl(n))return h.push(`depth${Av(n)}非數字`),$();if(n=Gl(n),n<0)return h.push(`depth${Av(n)}<0`),$();if(Dl(r)?(r=Gl(r),r<0&&(h.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(h.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),n<r&&(S=!0),n>20&&(S=!0),Dl(i)?(i=Gl(i),i<0&&(h.push(`qc${Av(i)}<0`),E=!0)):(h.push(`qc${Av(i)}非數字`),E=!0),Dl(o)?(o=Gl(o),o<0&&(h.push(`fs${Av(o)}<0`),E=!0)):(h.push(`fs${Av(o)}非數字`),E=!0),Dl(u)?u=Gl(u):(h.push(`u2${Av(u)}非數字`),E=!0),Dl(a)&&(a=Gl(a),l=a,s=a),!Dl(l))return h.push(`svpUsual${Av(l)}非數字`),$();if(l=Gl(l),l<0)return h.push(`svpUsual${Av(l)}<0`),$();if(!Dl(s))return h.push(`svpDesign${Av(s)}非數字`),$();if(s=Gl(s),s<0)return h.push(`svpDesign${Av(s)}<0`),$();if(!Dl(f))return h.push(`sv${Av(f)}非數字`),$();if(f=Gl(f),f<0)return h.push(`sv${Av(f)}<0`),$();if(!Dl(c))return h.push(`PGA${Av(c)}非數字`),$();if(c=Gl(c),c<0)return h.push(`PGA${Av(c)}<0`),$();if(!Dl(p))return h.push(`Mw${Av(p)}非數字`),$();if(p=Gl(p),p<0)return h.push(`Mw${Av(p)}<0`),$();break}return!0===S?(h=[],y="-",w="-",x=10,$()):(!0===E||(f*=Nv,l*=Nv,s*=Nv,i=1e3*i*Nv,o=1e3*o*Nv,u=1e3*u*Nv,d=(p/7.5)**-2.56,v=(1-.4113*n**.5+.04052*n+.001753*n**1.5)/(1-.4177*n**.5+.05729*n-.006205*n**1.5+.00121*n**2),g=l>0?i/l**.7:1e20,m=null,m=i>0?o/i*100:1e20,b=.00128*g-.025+.17*m-.028*m**2+.0016*m**3,y=b*d,w=null,w=s>0?.65*c*(f/s)*v:1e20,Ca(w)&&w>0&&(x=y/w),Ca(x)&&x>10&&(x=10),y<0&&h.push(`CRR${Av(y)}<0`),w<=0&&h.push(`CSR${Av(w)}<=0`),x<0&&(h.push(`FS${Av(x)}<0，強制改為0`),x=0)),$())}(e=qv(qv({},e),{},{ver:"1997"})),cptShibata1988:e=>function(e){let{ver:t="1988",waterLevelDesign:r,depth:n,qc:i,fs:o,u2:u,svp:a,svpUsual:l,svpDesign:s,sv:f,PGA:c,Mw:p,D50:h}=e,d=[],v="",g="",m="",b="",y="",w="",x="";function $(){Dl(m)&&(m/=Nv),Dl(b)&&(b/=Nv);let e={rrd:g,qc1:m,qc1cr:b,CRR75:"",CRR:y,CSR:w,FS:x,err:Xc(d,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}let S,E=!1,M=!1;for(;;){if("1988"!==t)return d.push(`ver${Av(t)}非1988`),$();if(!Dl(n))return d.push(`depth${Av(n)}非數字`),$();if(n=Gl(n),n<0)return d.push(`depth${Av(n)}<0`),$();if(Dl(r)?(r=Gl(r),r<0&&(d.push(`waterLevelDesign${Av(r)}<0，強制預設為0(m)`),r=0)):(d.push(`waterLevelDesign${Av(r)}非數字，強制預設為0(m)`),r=0),n<r&&(E=!0),n>20&&(E=!0),Dl(i)?(i=Gl(i),i<0&&(d.push(`qc${Av(i)}<0`),M=!0)):(d.push(`qc${Av(i)}非數字`),M=!0),Dl(o)?(o=Gl(o),o<0&&(d.push(`fs${Av(o)}<0`),M=!0)):(d.push(`fs${Av(o)}非數字`),M=!0),Dl(u)?u=Gl(u):(d.push(`u2${Av(u)}非數字`),M=!0),Dl(h)?(h=Gl(h),h<0&&(d.push(`D50${Av(h)}<0`),M=!0)):(d.push(`D50${Av(h)}非數字`),M=!0),Dl(a)&&(a=Gl(a),l=a,s=a),!Dl(l))return d.push(`svpUsual${Av(l)}非數字`),$();if(l=Gl(l),l<0)return d.push(`svpUsual${Av(l)}<0`),$();if(!Dl(s))return d.push(`svpDesign${Av(s)}非數字`),$();if(s=Gl(s),s<0)return d.push(`svpDesign${Av(s)}<0`),$();if(!Dl(f))return d.push(`sv${Av(f)}非數字`),$();if(f=Gl(f),f<0)return d.push(`sv${Av(f)}<0`),$();if(!Dl(c))return d.push(`PGA${Av(c)}非數字`),$();if(c=Gl(c),c<0)return d.push(`PGA${Av(c)}<0`),$();if(!Dl(p))return d.push(`Mw${Av(p)}非數字`),$();if(p=Gl(p),p<0)return d.push(`Mw${Av(p)}<0`),$();break}if(!0===E)return d=[],y="-",w="-",x=10,$();if(!0===M)return $();f*=Nv,l*=Nv,s*=Nv,i=1e3*i*Nv,o=1e3*o*Nv,u=1e3*u*Nv,v=(p/7.5)**-2.56,g=1-.015*n,m=1.7/(l+.7)*i,S=h>=.25?1:h/.25;let k=null;k=s>0?.1*(v-1)*c*(f/s)*g:1e20;let R=null;return R=-.1!==k?(k-.1)/(k+.1):1e20,b=S*(50+200*R),b=Qd(b),y=m,w=b,Ca(w)&&w>0&&(x=y/w),Ca(x)&&x>10&&(x=10),y<0&&d.push(`CRR${Av(y)}<0`),w<=0&&d.push(`CSR${Av(w)}<=0`),x<0&&(d.push(`FS${Av(x)}<0，強制改為0`),x=0),$()}(e=qv(qv({},e),{},{ver:"1988"}))},VS:{vsHBF:function(e){let{waterLevelDesign:t,depth:r,Vs:n,FC:i,svpDesign:o,sv:u,PGA:a,Mw:l}=e,s=[],f="",c="",p="",h="",d="";function v(){let e={CRR75:c,CRR:p,CSR:h,FS:d,err:Xc(s,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}if(Dl(t)||(s.push(`waterLevelDesign${Av(t)}非數字，強制預設為0(m)`),t=0),t=Gl(t),t<0&&(s.push(`waterLevelDesign${Av(t)}<0，強制預設為0(m)`),t=0),!Dl(r))return s.push(`depth${Av(r)}非數字`),v();if(r=Gl(r),r<0)return s.push(`depth${Av(r)}<0`),v();if(!Dl(n))return s.push(`Vs${Av(n)}非數字`),v();if(n=Gl(n),n<0)return s.push(`Vs${Av(n)}<0`),v();if(!Dl(i))return s.push(`FC${Av(i)}非數字`),v();if(i=Gl(i),i<0)return s.push(`FC${Av(i)}<0`),v();if(!Dl(o))return s.push(`svpDesign${Av(o)}非數字`),v();if(o=Gl(o),o<0)return s.push(`svpDesign${Av(o)}<0`),v();if(!Dl(u))return s.push(`sv${Av(u)}非數字`),v();if(u=Gl(u),u<0)return s.push(`sv${Av(u)}<0`),v();if(!Dl(a))return s.push(`PGA${Av(a)}非數字`),v();if(a=Gl(a),a<0)return s.push(`PGA${Av(a)}<0`),v();if(!Dl(l))return s.push(`Mw${Av(l)}非數字`),v();if(l=Gl(l),l<0)return s.push(`Mw${Av(l)}<0`),v();f=(l/7.5)**-3.3;let g,m=(1-.4113*r**.5+.04052*r+.001753*r**1.5)/(1-.4177*r**.5+.05729*r-.006205*r**1.5+.00121*r**2),b=1/Math.sqrt(o)*n;console.log("待確認此處svpDesign,Vs的單位"),g=i<=10?1:29e-5*i**2-.00355*i+1.00651;let y=g*(b-100);return y=Math.min(y,134.5),c=null,c=b<=100?.09:.09+22e-5*y/(1-y/135),p=c*f,h=null,h=o>0?.65*a*(u/o)*m:1e20,Ca(h)&&h>0&&(d=p/h),Ca(d)&&d>10&&(d=10),r>20?(p="-",h="-",d=10,v()):(p<0&&s.push(`CRR${Av(p)}<0`),h<=0&&s.push(`CSR${Av(h)}<=0`),d<0&&(s.push(`FS${Av(d)}<0，強制改為0`),d=0),v())},vsAndrus:function(e){let{waterLevelDesign:t,depth:r,Vs:n,FC:i,svpDesign:o,sv:u,PGA:a,Mw:l}=e,s=[],f="",c="",p="",h="";function d(){let e={CRR75:f,CRR:c,CSR:p,FS:h,err:Xc(s,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}if(Dl(t)||(s.push(`waterLevelDesign${Av(t)}非數字，強制預設為0(m)`),t=0),t=Gl(t),t<0&&(s.push(`waterLevelDesign${Av(t)}<0，強制預設為0(m)`),t=0),!Dl(r))return s.push(`depth${Av(r)}非數字`),d();if(r=Gl(r),r<0)return s.push(`depth${Av(r)}<0`),d();if(!Dl(n))return s.push(`Vs${Av(n)}非數字`),d();if(n=Gl(n),n<0)return s.push(`Vs${Av(n)}<0`),d();if(!Dl(i))return s.push(`FC${Av(i)}非數字`),d();if(i=Gl(i),i<0)return s.push(`FC${Av(i)}<0`),d();if(!Dl(o))return s.push(`svpDesign${Av(o)}非數字`),d();if(o=Gl(o),o<0)return s.push(`svpDesign${Av(o)}<0`),d();if(!Dl(u))return s.push(`sv${Av(u)}非數字`),d();if(u=Gl(u),u<0)return s.push(`sv${Av(u)}<0`),d();if(!Dl(a))return s.push(`PGA${Av(a)}非數字`),d();if(a=Gl(a),a<0)return s.push(`PGA${Av(a)}<0`),d();if(!Dl(l))return s.push(`Mw${Av(l)}非數字`),d();if(l=Gl(l),l<0)return s.push(`Mw${Av(l)}<0`),d();let v,g=(l/7.5)**-3.3,m=(1-.4113*r**.5+.04052*r+.001753*r**1.5)/(1-.4177*r**.5+.05729*r-.006205*r**1.5+.00121*r**2),b=1/Math.sqrt(o)*n;return console.log("待確認此處svpDesign,Vs的單位"),v=i<=5?215:i<=35?215-.5*(i-5):200,f=.022*(b/100)**2+2.8*(1/(v-b)-1/v),f=Qd(f),c=f*g,p=null,p=o>0?.65*a*(u/o)*m:1e20,Ca(p)&&p>0&&(h=c/p),Ca(h)&&h>10&&(h=10),r>20?(c="-",p="-",h=10,d()):(c<0&&s.push(`CRR${Av(c)}<0`),p<=0&&s.push(`CSR${Av(p)}<=0`),h<0&&(s.push(`FS${Av(h)}<0，強制改為0`),h=0),d())},vsNCEER:function(e){let{waterLevelDesign:t,depth:r,Vs:n,FC:i,svpDesign:o,sv:u,PGA:a,Mw:l}=e,s=[],f="",c="",p="",h="";function d(){let e={CRR75:f,CRR:c,CSR:p,FS:h,err:Xc(s,"; ")};return Te(e,((t,r)=>{_l(t)||Dl(t)||(e[r]="")})),e}if(Dl(t)||(s.push(`waterLevelDesign${Av(t)}非數字，強制預設為0(m)`),t=0),t=Gl(t),t<0&&(s.push(`waterLevelDesign${Av(t)}<0，強制預設為0(m)`),t=0),!Dl(r))return s.push(`depth${Av(r)}非數字`),d();if(r=Gl(r),r<0)return s.push(`depth${Av(r)}<0`),d();if(!Dl(n))return s.push(`Vs${Av(n)}非數字`),d();if(n=Gl(n),n<0)return s.push(`Vs${Av(n)}<0`),d();if(!Dl(i))return s.push(`FC${Av(i)}非數字`),d();if(i=Gl(i),i<0)return s.push(`FC${Av(i)}<0`),d();if(!Dl(o))return s.push(`svpDesign${Av(o)}非數字`),d();if(o=Gl(o),o<0)return s.push(`svpDesign${Av(o)}<0`),d();if(!Dl(u))return s.push(`sv${Av(u)}非數字`),d();if(u=Gl(u),u<0)return s.push(`sv${Av(u)}<0`),d();if(!Dl(a))return s.push(`PGA${Av(a)}非數字`),d();if(a=Gl(a),a<0)return s.push(`PGA${Av(a)}<0`),d();if(!Dl(l))return s.push(`Mw${Av(l)}非數字`),d();if(l=Gl(l),l<0)return s.push(`Mw${Av(l)}<0`),d();let v,g=(l/7.5)**-3.3,m=(1-.4113*r**.5+.04052*r+.001753*r**1.5)/(1-.4177*r**.5+.05729*r-.006205*r**1.5+.00121*r**2),b=1/Math.sqrt(o)*n;return console.log("待確認此處svpDesign的單位"),v=i<=5?220:i<=35?210:200,f=.03*(b/100)**2+.9*(1/(v-b)-1/v),f=Qd(f),c=f*g,p=null,p=o>0?.65*a*(u/o)*m:1e20,Ca(p)&&p>0&&(h=c/p),Ca(h)&&h>10&&(h=10),r>20?(c="-",p="-",h=10,d()):(c<0&&s.push(`CRR${Av(c)}<0`),p<=0&&s.push(`CSR${Av(p)}<=0`),h<0&&(s.push(`FS${Av(h)}<0，強制改為0`),h=0),d())}}};let Vv={mLiques:Wv,mSettls:{SPT:{sptVolumetricStrainTokimatsuAndSeed:Iv,sptVolumetricStrainIshiharaAndYoshimine:Uv}},calc:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1?arguments[1]:void 0;function r(e){let t=Hi(e,0,[]);return Re(t)}if(!Lf(t))throw new Error("無有效數據");if(!_l(e))throw new Error("kind(分析種類)非字串");if("SPT"!==e&&"CPT"!==e&&"VS"!==e)throw new Error(`kind(分析種類)${Av(e)}非有效值: SPT, CPT, VS`);t=Pa(t);let n=Ah(t);if(nf(n)>0)throw new Error(Xc(n,", "));t=Ps(t,(e=>Gl(e.depthStart)));let i=Hi(t,"0.waterLevelUsual",0),o=Hi(t,"0.waterLevelDesign",0),u=Hi(t,"0.Mw",""),a=Hi(t,"0.PGA",""),l=Hi(t,"0.vibrationType","");return t=function(e,t,r,n,i,o,u){u=Oo(u,((e,t)=>(e.Mw=n,e.PGA=i,e.vibrationType=o,e))),t=Gl(t),r=Gl(r),u=function(e,t,r,n){return r=Gl(r),n=Gl(n),Oo(e,((e,t)=>{let i=Hi(e,"err","");e.waterLevelUsual=r,e.waterLevelDesign=n;let o=Hi(e,"depthStart",null),u=Hi(e,"depthEnd",null);if(Dl(o)&&Dl(u)){o=Gl(o),u=Gl(u);let t=(o+u)/2;e.depth=t}else e.depth="";let a=Hi(e,"e",null),l=Hi(e,"GS",null),s=Dv(Hi(e,"rd",null),Hi(e,"rsat",null),l,a);return Hi(s,"err")&&(""===i?i=s.err:i.indexOf(s.err)<0&&(i+=`, ${s.err}`),e.err=i),Ca(s.rd)?e.rd=s.rd:e.rd="",Ca(s.rsat)?e.rsat=s.rsat:e.rsat="",Ca(s.GS)?e.GS=s.GS:e.GS="",Ca(s.e)?e.e=s.e:e.e="",e}))}(u,0,t,r);let a=!0;return Te(u,(e=>{let t=Dl(e.sv),r=Dl(e.svp),n=Dl(e.svpUsual)&&Dl(e.svpDesign);if(!(t&&(r||n)))return a=!1,!1})),u=a?Oo(u,((e,n)=>{e.waterLevelUsual=t,e.waterLevelDesign=r;let i=Hi(e,"depthStart",null),o=Hi(e,"depthEnd",null);if(!Dl(i))throw new Error(`第 ${n} 樣本起始深度(depthStart)非數值: ${i}`);if(!Dl(o))throw new Error(`第 ${n} 樣本結束深度(depthEnd)非數值: ${o}`);return i=Gl(i),o=Gl(o),e.depth=(o+i)/2,e})):Th(u,{waterLevelUsual:t,waterLevelDesign:r})}(0,i,o,u,a,l,t),t=Oo(t,((t,r)=>function(e,t){return t=Pa(t),Te(Wv[e],((e,r)=>{let n=e(t);Te(n,((e,n)=>{t[`${r}-${n}`]=e}))})),t}(e,t))),"SPT"===e&&(t=function(e){let t=r(e=Pa(e));return Te(t,(t=>{if(t.indexOf("-FS")>=0){let r=t.replace("-FS",""),n=0;e=Oo(e,((e,i)=>{if(Dl(e.depthStart)&&Dl(e.depthEnd)&&Dl(e.depth)&&Dl(e[t])){let r=Gl(e.depthStart),i=Gl(e.depthEnd),o=Gl(e.depth),u=Gl(e[t]),a=1-Math.min(Math.max(u,0),1);n+=a*(10-.5*o)*(i-r)}return e[`${r}-PL`]=n,e}))}})),e}(t)),"SPT"===e&&(t=function(e){let t=r(e=Pa(e));return Te(t,(t=>{if(t.indexOf("-vstr")>=0){let r=uv(t,"-vstr"),n=Hi(r,0,""),i=Hi(r,1,""),o=0;e=Oo(e,((e,r)=>{if(Dl(e.depthStart)&&Dl(e.depthEnd)&&Dl(e[t])){let r=Gl(e.depthStart),n=Gl(e.depthEnd),i=Gl(e[t])/100;o+=i*(n-r)}return e[`${n}-stl${i}`]=o,e}))}})),e}(t)),t=Oo(t,(t=>{let r={},n=Hd(e),i=nf(n);return Te(t,((e,t)=>{av(t,i)!==n&&(r[t]=e)})),Te(Wv[e],((e,n)=>{let i=nf(n),o="",u="";Te(t,((e,t)=>{av(t,i)===n&&("-err"===lv(t,4)?(o=t,u=e):r[t]=e)})),""!==o&&(r[o]=u)})),r})),Te(t,((e,r)=>{Te(e,((e,n)=>{_l(e)||Dl(e)||(t[r][n]="")}))})),t}};function Yv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];if(!Lf(e))return r;let n=Hi(t,"keyDepth");return _l(n)||(n="depth"),e=Pa(e),Te(e,((e,t)=>{let i=Hi(e,n,null);Dl(i)||r.push(`第 ${t} 樣本中點深度${n}[${i}]非有效數字`)})),nf(r)>0||(e=Ps(e,(e=>Gl(e[n]))),Te(e,((t,i)=>{if(0===i)return!0;let o=Hi(e,`${i-1}.${n}`,null),u=Hi(t,n,null);o=Gl(o),u=Gl(u),Nh(o,">=",u)&&r.push(`第 ${i-1} 樣本之中點深度${n}[${o}]大於等於第 ${i} 樣本之中點深度${n}[${u}]`)}))),r}var Zv=zo,Kv=Fi,Jv=U,Xv=me,eg=Ii;var tg=function(e,t,r,n){if(!Xv(e))return e;for(var i=-1,o=(t=Kv(t,e)).length,u=o-1,a=e;null!=a&&++i<o;){var l=eg(t[i]),s=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=u){var f=a[l];void 0===(s=n?n(f,l,a):void 0)&&(s=Xv(f)?f:Jv(t[i+1])?[]:{})}Zv(a,l,s),a=a[l]}return e},rg=tg;var ng=function(e,t,r){return null==e?e:rg(e,t,r)};function ig(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function og(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ig(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ug(e,t,r){let n=Hi(e,`${r}.${t}`);return n=Dl(n)?Gl(n):null,n}function ag(e,t,r,n,i,o){let u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=Hi(u,"dir");"before"!==a&&"after"!==a&&(a="after");let l=Hi(u,"searchMode");if("all"!==l&&"no"!==l&&"peak"!==l&&"half-closed-value"!==l&&"double-closed-value"!==l&&"closed-value"!==l&&(l="all"),0===nf(e))return null;if("no"===l)return{k:n,depth:Hi(e,`${n}.${t}`),value:Hi(e,`${n}.${r}`)};if(!Dl(o))return{k:n,depth:Hi(e,`${n}.${t}`),value:Hi(e,`${n}.${r}`)};let s=ug(e,t,n),f=[];if("after"===a)for(let o=n+1;o<nf(e)-1;o++){let n=ug(e,t,o),u=ug(e,r,o),a=Math.abs(n-s)>i;f.push({k:o,depth:n,value:u,outRange:a})}else for(let o=n-1;o>0;o--){let n=ug(e,t,o),u=ug(e,r,o),a=Math.abs(n-s)>i;f.push({k:o,depth:n,value:u,outRange:a})}let c=[];for(let e=0;e<f.length;e++){let t=f[e];if(Ca(t.depth)){if(t.outRange&&nf(c)>0)break;Ca(t.value)&&c.push(t)}}if(0===nf(c))return null;if("all"===l||"peak"===l)for(let e=1;e<c.length-1;e++){let t=c[e-1],r=c[e+0],n=c[e+1],i=1;if(0!==o&&(i=r.value/o),r.value>=t.value&&r.value>=n.value&&t.value!==n.value&&i>.5&&i<2)return{k:r.k,depth:r.depth,value:r.value}}if("all"===l||"closed-value"===l){let e=1e20,t=null;for(let r=0;r<c.length;r++){let n=c[r+0];if(n.outRange)break;let i=Math.abs(n.value-o);e>i&&(e=i,t={k:n.k,depth:n.depth,value:n.value})}if(null!==t)return t}let p=null;if("all"===l||"half-closed-value"===l){let e=1e20,t=null;for(let r=0;r<c.length;r++){let n=c[r+0],i=Math.abs(n.value-o/2);e>i&&(e=i,t={diff:e,k:n.k,depth:n.depth,value:n.value})}null!==t&&(p=t)}let h=null;if("all"===l||"double-closed-value"===l){let e=1e20,t=null;for(let r=0;r<c.length;r++){let n=c[r+0],i=Math.abs(n.value-1.5*o);e>i&&(e=i,t={diff:e,k:n.k,depth:n.depth,value:n.value})}null!==t&&(h=t)}if(null!==p&&null===h)return delete p.diff,p;if(null===p&&null!==h)return delete h.diff,h;if(null===p&&null===h){let e=null;return e=p.diff<=h.diff?p:h,delete e.diff,e}return null}var lg=Kl;var sg=function(e){return(null==e?0:e.length)?lg(e,Infinity):[]},fg=c,cg=Ce,pg=Of,hg=4294967295,dg=Math.min;var vg=function(e,t){if((e=pg(e))<1||e>9007199254740991)return[];var r=hg,n=dg(e,hg);t=cg(t),e-=hg;for(var i=fg(n,t);++r<e;)t(r);return i},gg=Ci;var mg=function(e){return gg(e).toUpperCase()};function bg(e,t,r){if(!_l(e))return"";if(!_l(t))return"";if(!El(r))return"";let n=new RegExp(t,"g");return String(e).replace(n,r)}function yg(e,t){if(!_l(e))return[];if(!_l(t))return[];let r=function(e,t){return _l(e)&&_l(t)?e.split(t):[]}(e,t);r=Oo(r,Sl);let n=[];return Te(r,(function(e){_l(e)&&n.push(e)})),n}function wg(e){if(!Df(e))return!1;return Tf(e)>0}function xg(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return _l(e)&&If(t)?(r=wg(r)?Tf(r):1,e.substring(t,t+r)):""}let $g={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function Sg(e){return Mg(e,1)}function Eg(e){return Mg(e,360)}function Mg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.indexOf("%")>=0){if(!Dl(e=bg(e,"%","")))throw new Error("invalid color: value is not a number");e=Gl(e)/100}else{if(!Dl(e))throw new Error("invalid color: value is not a number");e=Gl(e)/t}if(e>1)throw new Error("invalid color: value > 1");if(e<0)throw new Error("invalid color: value < 0");return e}function kg(e){if(!Dl(e))throw new Error("invalid color: value is not a number");if((e=Gl(e))>1)throw new Error("invalid color: value > 1");if(e<0)throw new Error("invalid color: value < 0");return e}function Rg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba";if(!kf(e))throw new Error("invalid colors array");let r=Hi(e,0,0),n=Hi(e,1,0),i=Hi(e,2,0),o=Hi(e,3,1);if(t=t.split(""),4!==nf(t))throw new Error("tar.length !== 4");return{[Hi(t,0)]:r,[Hi(t,1)]:n,[Hi(t,2)]:i,[Hi(t,3)]:o}}function Lg(e){e=function(e,t){return _l(e)&&If(t)?0===(t=Tf(t))?e:lv(e,e.length-t):""}(e,1);let t=nf(e);if(2===t)e=`${e}${e}${e}ff`;else if(3===t){let t=xg(e,0,1),r=xg(e,1,1),n=xg(e,2,1);e=`${t}${t}${r}${r}${n}${n}ff`}else if(6===t)e=`${e}ff`;else if(8!==t)throw new Error("invalid hex color");function r(e){if(2!==nf(e))throw new Error("hex.length of color is not equal to 2");if(!Dl(e=parseInt(e,16)))throw new Error("invalid hex of color");return(e=Gl(e))/255}return{r:r(xg(e,0,2)),g:r(xg(e,2,2)),b:r(xg(e,4,2)),a:r(xg(e,6,2))}}function jg(e){return e=Rg(e=Oo(e,((e,t)=>t<=2?Mg(e,255):3===t?kg(e):null)),"rgba")}function Og(e){return e=zg(e=Rg(e=Oo(e,((e,t)=>0===t?Eg(e):1===t||2===t?Sg(e):3===t?kg(e):null)),"hsla"))}function Pg(e){return e=Fg(e=Rg(e=Oo(e,((e,t)=>0===t?Eg(e):1===t||2===t?Sg(e):3===t?kg(e):null)),"hsva"))}function _g(e){if("transparent"===e)return{r:0,g:0,b:0,a:0};if(function(e){return bc($g,e)}(e))return e=function(e){return`#${$g[e]}`}(e),Lg(e);if(function(e){return"#"===av(e,1)&&(!!/[0-9A-Fa-f]{2}/g.test(e)||(!!/[0-9A-Fa-f]{3}/g.test(e)||(!!/[0-9A-Fa-f]{6}/g.test(e)||!!/[0-9A-Fa-f]{8}/g.test(e))))}(e))return Lg(e);if(function(e){return"rgb"===av(e,3)||"rgba"===av(e,4)}(e))return function(e){return e=bg(e,"rgba",""),e=bg(e,"rgb",""),jg(yg(e=bg(e=e.replace(/[()]/g,""),","," ")," "))}(e);if(function(e){return"hsl"===av(e,3)||"hsla"===av(e,4)}(e))return function(e){return e=bg(e,"hsla",""),e=bg(e,"hsl",""),Og(yg(e=bg(e=e.replace(/[()]/g,""),","," ")," "))}(e);if(function(e){return"hsv"===av(e,3)||"hsva"===av(e,4)}(e))return function(e){return e=bg(e,"hsva",""),e=bg(e,"hsv",""),Pg(yg(e=bg(e=e.replace(/[()]/g,""),","," ")," "))}(e);throw new Error("format of color string is not hex-color, name-color, rgba, hsla, hsva")}function Dg(e,t){return!!bc(e,t=Hd(t))||!!bc(e,t=mg(t))}function Cg(e,t,r){let n;return n=Hi(e,t,null),null!==n?n:(t=mg(t),n=Hi(e,t,null),null!==n?n:r)}function qg(e){if(function(e){let t=Dg(e,"r"),r=Dg(e,"g"),n=Dg(e,"b");return t&&r&&n}(e))return function(e){let t=[Cg(e,"r",null),Cg(e,"g",null),Cg(e,"b",null),Cg(e,"a",1)];return t=Oo(t,dc),jg(t)}(e);if(function(e){let t=Dg(e,"h"),r=Dg(e,"s"),n=Dg(e,"l");return t&&r&&n}(e))return function(e){let t=[Cg(e,"h",null),Cg(e,"s",null),Cg(e,"l",null),Cg(e,"a",1)];return t=Oo(t,dc),Og(t)}(e);if(function(e){let t=Dg(e,"h"),r=Dg(e,"s"),n=Dg(e,"v");return t&&r&&n}(e))return function(e){let t=[Cg(e,"h",null),Cg(e,"s",null),Cg(e,"v",null),Cg(e,"a",1)];return t=Oo(t,dc),Pg(t)}(e);throw new Error("color object is not rgba, hsla, hsva")}function Ng(e){let t,r,n=e.r,i=e.g,o=e.b,u=Math.max(n,i,o),a=Math.min(n,i,o),l=(u+a)/2;if(u===a)t=r=0;else{let e=u-a;switch(r=l>.5?e/(2-u-a):e/(u+a),u){case n:t=(i-o)/e+(i<o?6:0);break;case i:t=(o-n)/e+2;break;case o:t=(n-i)/e+4}t/=6}return{h:t,s:r,l:l,a:e.a}}function Ag(e){let t,r,n=e.r,i=e.g,o=e.b,u=Math.max(n,i,o),a=Math.min(n,i,o),l=u,s=u-a;if(r=0===u?0:s/u,u===a)t=0;else{switch(u){case n:t=(i-o)/s+(i<o?6:0);break;case i:t=(o-n)/s+2;break;case o:t=(n-i)/s+4}t/=6}return{h:t,s:r,v:l,a:e.a}}function zg(e){let t,r,n,i=e.h,o=e.s,u=e.l;function a(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0===o)t=r=n=u;else{let e=u<.5?u*(1+o):u+o-u*o,l=2*u-e;t=a(l,e,i+1/3),r=a(l,e,i),n=a(l,e,i-1/3)}return{r:t,g:r,b:n,a:e.a}}function Fg(e){let t,r,n,i=e.h,o=e.s,u=e.v,a=Math.floor(6*i),l=6*i-a,s=u*(1-o),f=u*(1-l*o),c=u*(1-(1-l)*o);switch(a%6){case 0:t=u,r=c,n=s;break;case 1:t=f,r=u,n=s;break;case 2:t=s,r=u,n=c;break;case 3:t=s,r=f,n=u;break;case 4:t=c,r=s,n=u;break;case 5:t=u,r=s,n=f}return{r:t,g:r,b:n,a:e.a}}function Tg(e){let t=Math.round(255*e).toString(16);if(1===nf(t))return`0${t}`;if(2===nf(t))return t;throw new Error("invalid value")}function Ig(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.r,n=e.g,i=e.b,o=e.a,u=`${Tg(r)}${Tg(n)}${Tg(i)}`;return t&&(u=`${u}${Tg(o)}`),u}function Ug(e){return Math.min(1,Math.max(0,e))}function Bg(e,t){if(!_l(t))throw new Error("fmtOutput is not string");if(!Sm[t])throw console.log(`fmtOutput must be [${Re(Sm)}]`),new Error("invalid fmtOutput");return e=Sm[t](e)}function Qg(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");let n=Ng(e);return n.h+=t,n.h=n.h%1,Bg(zg(n),r)}function Gg(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"toRgbString";if(t<0||t>1)throw new Error("w1 < 0 or > 1");if(n<0||n>1)throw new Error("w1 < 0 or > 1");return Bg({r:e.r*t+r.r*n,g:e.g*t+r.g*n,b:e.b*t+r.b*n,a:e.a*t+r.a*n},i)}function Hg(e){return`${Ff(100*e,1)}%`}function Wg(e){return Ff(e,0)}function Vg(e){return Ff(e,3)}function Yg(e){return{r:Wg(255*e.r),g:Wg(255*e.g),b:Wg(255*e.b)}}function Zg(e){return`rgb(${Wg(255*e.r)}, ${Wg(255*e.g)}, ${Wg(255*e.b)})`}function Kg(e){return{r:Wg(255*e.r),g:Wg(255*e.g),b:Wg(255*e.b),a:Vg(e.a)}}function Jg(e){return`rgba(${Wg(255*e.r)}, ${Wg(255*e.g)}, ${Wg(255*e.b)}, ${Vg(e.a)})`}function Xg(e){let t=Ng(e);return{h:Wg(360*t.h),s:Vg(t.s),l:Vg(t.l)}}function em(e){let t=Ng(e);return`hsl(${Wg(360*t.h)}, ${Vg(t.s)}, ${Vg(t.l)})`}function tm(e){let t=Ng(e);return{h:Wg(360*t.h),s:Vg(t.s),l:Vg(t.l),a:Vg(t.a)}}function rm(e){let t=Ng(e);return`hsla(${Wg(360*t.h)}, ${Vg(t.s)}, ${Vg(t.l)}, ${Vg(t.a)})`}function nm(e){let t=Ag(e);return{h:Wg(360*t.h),s:Vg(t.s),v:Vg(t.v)}}function im(e){let t=Ag(e);return`hsv(${Wg(360*t.h)}, ${Vg(t.s)}, ${Vg(t.v)})`}function om(e){let t=Ag(e);return{h:Wg(360*t.h),s:Vg(t.s),v:Vg(t.v),a:Vg(t.a)}}function um(e){let t=Ag(e);return`hsva(${Wg(360*t.h)}, ${Vg(t.s)}, ${Vg(t.v)}, ${Vg(t.a)})`}function am(e){return{r:Hg(e.r),g:Hg(e.g),b:Hg(e.b)}}function lm(e){return`rgb(${Hg(e.r)}, ${Hg(e.g)}, ${Hg(e.b)})`}function sm(e){return{r:Hg(e.r),g:Hg(e.g),b:Hg(e.b),a:Vg(e.a)}}function fm(e){return`rgba(${Hg(e.r)}, ${Hg(e.g)}, ${Hg(e.b)}, ${Vg(e.a)})`}function cm(e){let t=Ng(e);return{h:Wg(360*t.h),s:Hg(t.s),l:Hg(t.l)}}function pm(e){let t=Ng(e);return`hsl(${Wg(360*t.h)}, ${Hg(t.s)}, ${Hg(t.l)})`}function hm(e){let t=Ng(e);return{h:Wg(360*t.h),s:Hg(t.s),l:Hg(t.l),a:Vg(t.a)}}function dm(e){let t=Ng(e);return`hsla(${Wg(360*t.h)}, ${Hg(t.s)}, ${Hg(t.l)}, ${Vg(t.a)})`}function vm(e){let t=Ag(e);return{h:Wg(360*t.h),s:Hg(t.s),v:Hg(t.v)}}function gm(e){let t=Ag(e);return`hsv(${Wg(360*t.h)}, ${Hg(t.s)}, ${Hg(t.v)})`}function mm(e){let t=Ag(e);return{h:Wg(360*t.h),s:Hg(t.s),v:Hg(t.v),a:Vg(t.a)}}function bm(e){let t=Ag(e);return`hsva(${Wg(360*t.h)}, ${Hg(t.s)}, ${Hg(t.v)}, ${Vg(t.a)})`}function ym(e){let t=function(e){return Ig(e,!1)}(e);return`#${t}`}function wm(e){return`#${Ig(e)}`}function xm(e){let t=null,r=null,n=null;if(_l(e))t=Hd(Sl(e));else{if(!Rl(e))throw console.log("color=",e),new Error("color is not string or object");r=e}if(null!==t)try{n=_g(t)}catch(e){throw console.log(e),new Error(`can not parse color: ${t}`)}else if(null!==r)try{n=qg(r)}catch(e){throw console.log(e),new Error(`can not parse color: ${JSON.stringify(r)}`)}return n}function $m(e){if(!Rl(e))return console.log("gradient is not effective object"),e=>`rgb(${255*(e=Math.min(Math.max(e,0),1))},${255*e},${255*e})`;let t=[];return Te(e,((e,r)=>{t.push([Gl(r),Kg(xm(e)),e])})),t=Ps(t,0),function(e){let r=null;for(let n=1;n<t.length;n++){let i=t[n-1][0],o=t[n-1][1],u=t[n][0],a=t[n][1];if(i<=e&&u>=e){let t=(u-e)/(u-i),n=(e-i)/(u-i);r=Gg(xm(o),t,xm(a),n,"toRgbaString");break}}return r}}let Sm={toRgb:Yg,toRgbString:Zg,toRgba:Kg,toRgbaString:Jg,toHsl:Xg,toHslString:em,toHsla:tm,toHslaString:rm,toHsv:nm,toHsvString:im,toHsva:om,toHsvaString:um,toRgbP:am,toRgbPString:lm,toRgbaP:sm,toRgbaPString:fm,toHslP:cm,toHslPString:pm,toHslaP:hm,toHslaPString:dm,toHsvP:vm,toHsvPString:gm,toHsvaP:mm,toHsvaPString:bm,toHexString:ym,toHex8String:wm};var Em=function(){let e={toRgb:e=>Yg(xm(e)),toRgbString:e=>Zg(xm(e)),toRgba:e=>Kg(xm(e)),toRgbaString:e=>Jg(xm(e)),toHsl:e=>Xg(xm(e)),toHslString:e=>em(xm(e)),toHsla:e=>tm(xm(e)),toHslaString:e=>rm(xm(e)),toHsv:e=>nm(xm(e)),toHsvString:e=>im(xm(e)),toHsva:e=>om(xm(e)),toHsvaString:e=>um(xm(e)),toRgbP:e=>am(xm(e)),toRgbPString:e=>lm(xm(e)),toRgbaP:e=>sm(xm(e)),toRgbaPString:e=>fm(xm(e)),toHslP:e=>cm(xm(e)),toHslPString:e=>pm(xm(e)),toHslaP:e=>hm(xm(e)),toHslaPString:e=>dm(xm(e)),toHsvP:e=>vm(xm(e)),toHsvPString:e=>gm(xm(e)),toHsvaP:e=>mm(xm(e)),toHsvaPString:e=>bm(xm(e)),toHexString:e=>ym(xm(e)),toHex8String:e=>wm(xm(e)),modSaturate:(e,t,r)=>function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");let n=Ng(e);return n.s+=t,n.s=Ug(n.s),Bg(zg(n),r)}(xm(e),t,r),modGrey:(e,t)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"toRgbString",r=Ng(e);return r.s=0,Bg(zg(r),t)}(xm(e),t),modLighten:(e,t,r)=>function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");let n=Ng(e);return n.l+=t,n.l=Ug(n.l),Bg(zg(n),r)}(xm(e),t,r),modBrighten:(e,t,r)=>function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(t<0||t>1)throw new Error("amount < 0 or > 1");return e.r+=t,e.r=Ug(e.r),e.g+=t,e.g=Ug(e.g),e.b+=t,e.b=Ug(e.b),Bg(e,r)}(xm(e),t,r),modHue:(e,t,r)=>Qg(xm(e),t,r),modComplement:(e,t)=>function(e){return Qg(e,.5,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"toRgbString")}(xm(e),t),spreadHue:(e,t,r)=>function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(!Df(t))throw new Error("num is not integer");if((t=Tf(t))<=1)return[e];let n=Ng(e),i=1/t,o=[];for(let e=0;e<t;e++)o.push(Bg(zg(n),r)),n.h+=i,n.h=n.h%1;return o}(xm(e),t,r),spreadMonochromatic:(e,t,r)=>function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toRgbString";if(!Df(t))throw new Error("num is not integer");if((t=Tf(t))<=1)return[e];let n=Ag(e);n.s=1,n.l=1;let i=1/t,o=[];for(let e=0;e<t;e++)o.push(Bg(Fg(n),r)),n.h-=i,n.l-=i;return o}(xm(e),t,r),mix:(e,t,r,n,i)=>Gg(xm(e),t,xm(r),n,i),getBrightness:e=>function(e){if(1!==e.a)throw new Error("alpha of color can not be equal to 1");return(299*e.r+587*e.g+114*e.b)/1e3}(xm(e)),getLuminance:e=>function(e){if(1!==e.a)throw new Error("alpha of color can not be equal to 1");let t,r,n,i=e.r,o=e.g,u=e.b;return t=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),r=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),n=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4),.2126*t+.7152*r+.0722*n}(xm(e)),interp:$m};return e}();function Mm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"listL");Lf(r)||(r=[.35,.7]);let n=Hi(t,"listS");Lf(n)||(n=[.9,.5,.2]);let i=Hi(t,"opacity");Dl(i)||(i=1),i=Gl(i),i=Math.max(i,0),i=Math.min(i,1);let o=Hi(t,"hueSliceNum");wg(o)||(o=5),o=Tf(o);let u=[];Te(r,(function(e){Te(n,(function(t){vg(o,(function(r){let n=Em.toRgbaString({h:360*r/o,s:t,l:e,a:i});u.push(n)}))}))}));let a=e%u.length;return u[a]}function km(e){let t=function(){let e=Hi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"scale");Dl(e)||(e=1);let t=[];return t.push(["circle",5]),t.push(["square",5]),t.push(["diamond",6]),t.push(["cross",5]),t.push(["plus",5]),t.push(["eradiate",6]),t.push(["rdout",6]),t.push(["gateway",7]),t.push(["hloff",7]),t.push(["star",5]),t.push(["triangle",5]),t.push(["triangle-down",5]),t.push(["triangle-right",5]),t.push(["checkok",5]),t.push(["crescent",5]),t.push(["lightning",5]),t.push(["spades",5]),t.push(["waterdrop",5]),t.push(["bird",5]),t.push(["fire",5]),t.push(["music",5]),t.push(["apple",5]),t.push(["cloud",5]),t.push(["heart",5]),t}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=e%t.length;return{symbol:t[r][0],size:t[r][1]}}function Rm(e,t,r,n){let i;if("line"===e||"line(grey)"===e){let n="rgba(100, 140, 220, 1)";"line(grey)"===e&&(n="#999"),i={type:"line",name:t,data:r,lineWidth:1,color:n,marker:{enabled:!1}}}else if("marker"===e)i={type:"scatter",name:t,data:r,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:4,lineWidth:0,fillColor:"rgba(100,170,255,1)",lineColor:"rgba(20,100,200,1)"}};else if("markers"===e){let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Mm(e,t),n=Mm(e,{opacity:.2}),i=km(e,t);return{lineColor:r,lineStyle:"Solid",marker:i.symbol,markerEdgecolor:r,markerFacecolor:n,markerSize:i.size}}(n);i={type:"scatter",name:t,data:r,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:e.marker,radius:e.markerSize,lineWidth:1,fillColor:e.markerFacecolor,lineColor:e.markerEdgecolor}}}else if("dot point"===e)i={type:"scatter",name:t,data:r,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:2,lineWidth:0,fillColor:"rgba(255, 34, 102, 1)",lineColor:"transparent"}};else if("small point"===e)i={type:"scatter",name:t,data:r,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:1,lineWidth:0,fillColor:"rgba(100, 140, 220, 1)",lineColor:"transparent"}};else{if("marker point"!==e)throw console.log("displayDataMode",e),new Error(`invalid displayDataMode[${e}]`);i={type:"scatter",name:t,data:r,lineWidth:0,color:"transparent",dashStyle:null,marker:{enabled:!0,symbol:"circle",radius:4,lineWidth:1,fillColor:"transparent",lineColor:"#f26"}}}return i}function Lm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.plotLeft,n=e.plotTop,i=e.plotWidth,o=e.plotHeight,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"indXAxis");If(r)||(r=0),r=Tf(r);let n=Hi(t,"indYAxis");If(n)||(n=0),n=Tf(n);let i=e.xAxis[r].min;i||(i=0);let o=e.xAxis[r].max;o||(o=0);let u=e.yAxis[n].min;u||(u=0);let a=e.yAxis[n].max;return a||(a=0),{xLimMin:i,xLimMax:o,yLimMin:u,yLimMax:a}}(e,t),a=Hi(t,"cvLim");Ml(a)&&(u=a(u));let{xLimMin:l,xLimMax:s,yLimMin:f,yLimMax:c}=u,p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=(e[0]-l)/(s-l),a=(e[1]-f)/(c-f);if(t){let e=u;u=a,a=e}return[u*i+r,(1-a)*o+n]};return{lims:u,cvp:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e=>{let t=Hi(e,"0");if(Ca(t))return"point";let r=Hi(e,"0.0");if(Ca(r))return"points";throw console.log("p",e),new Error("invalid type of p")})(e);if("point"===r)return p(e,t);if("points"===r){return Oo(e,(e=>p(e,t)))}throw new Error("invalid type")}}}function jm(e){let t=Hi(e,"x")||Hi(e,"0");Dl(t)||(t=0),t=Gl(t);let r=Hi(e,"y")||Hi(e,"1");return Dl(r)||(r=0),r=Gl(r),[t,r]}function Om(e){let t=Hi(e,"w")||Hi(e,"0");Dl(t)||(t=0),t=Gl(t);let r=Hi(e,"h")||Hi(e,"1");return Dl(r)||(r=0),r=Gl(r),[t,r]}let Pm="__fontFamily__";function _m(){let e=function(){let e=null;try{e=window.Highcharts}catch(e){}return e}(),t=Hi(e,Pm);return _l(t)||(t="'Times New Roman', 'DFKai-SB', 'DFKaiShu-SB-Estd-BF', 'KaiU', '標楷體'"),t}function Dm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dm(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qm(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},[o,u]=jm(t),[a,l]=Om(r),s=t;!function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Hi(n,"edgeWidth");Dl(i)||(i=1),i=Gl(i),i=Math.max(i,0);let o=Hi(n,"edgeColor");_l(o)||(o="#000");let u=Hi(n,"faceColor");_l(u)||(u="transparent");let a=Hi(n,"radius");Dl(a)||(a=0),a=Gl(a),a=Math.max(a,0);let l=Hi(n,"zIndex");Ca(l)||(l=void 0);let[s,f]=jm(t),[c,p]=Om(r);e.renderer.rect(s,f,c,p).attr({name:"hcextra",fill:u,"stroke-width":i,stroke:o,r:a,zIndex:l}).add()}(e,{x:o-a/2,y:u-l/2},r,i),function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Hi(n,"fontSize");Dl(i)||(i=11),i=Gl(i),i=Math.max(i,6);let o=Hi(n,"textAlign");"left"!==o&&"center"!==o&&"rigth"!==o&&(o="center"),o={left:"start",center:"middle",rigth:"end"}[o];let u=Hi(n,"zIndex");Ca(u)||(u=void 0);let a=Hi(n,"style");Rl(a)||(a={});let l=Hi(n,"attr");Rl(l)||(l={});let[s,f]=jm(t),c=e.renderer,p=e.renderer.g().add();p.attr({transform:`translate(${s},${f})`,zIndex:u}),c.text(r,0,0).css(Cm({color:"#000",fontFamily:_m(),fontSize:`${i}pt`},a)).attr(Cm({name:"hcextra","text-anchor":o,"alignment-baseline":"central",zIndex:u},l)).add(p)}(e,s,n,i)}function Nm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11;return`<span style="font-family:${_m()}; font-size:${t}pt;">${dc(e)}</span>`}function Am(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11;return`<br><span style="font-family:${_m()}; font-size:${t}pt;">${dc(e)}</span>`}function zm(e){return _l(e)?` (${e})`:""}var Fm={genHtText:Nm,genHtTextSub:Am,genTextParentheses:zm,getFontfamily:_m};function Tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Im(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tm(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Um(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Hi(e,"dataPoints",[]),r=Hi(e,"dataPointsColor",void 0),n=Hi(e,"dataPointsMarkerSize",void 0),i=Hi(e,"dataPointsMultiSeries",void 0),o=Hi(e,"marginTop",70),u=Hi(e,"marginBottom",10),a=Hi(e,"marginLeft",90),l=Hi(e,"marginRight",1),s=Hi(e,"xLabel",""),f=Hi(e,"xLabelFontSize",12),c=Hi(e,"xTickLabelFontSize",9),p=Hi(e,"xDig",void 0),h=Hi(e,"xLimMin",void 0),d=Hi(e,"xLimMax",void 0),v=Hi(e,"xSoftMin",void 0),g=Hi(e,"xSoftMax",void 0),m=Hi(e,"xTickInterval",void 0),b=Hi(e,"yLabel",""),y=Hi(e,"yLabelFontSize",12),w=Hi(e,"yTickLabelFontSize",9),x=Hi(e,"yDig",void 0),$=Hi(e,"yLimMin",0),S=Hi(e,"yLimMax",void 0),E=Hi(e,"ySoftMax",void 0);c=12,w=12;let M=Hi(e,"condenseYLabel",!1),k=Hi(e,"displayDataMode","line"),R=Hi(e,"useLegend",!1),L=Hi(e,"useTooltip",!0),j=Hi(e,"addStaticPP",!1),O=Hi(e,"addIcRanges",!1),P={marginTop:o,marginBottom:u,marginLeft:M?1:a,marginRight:l},_=[],D=!0;if(Te(t,((e,t)=>{if(nf(e.data)>0)return D=!1,!1})),D&&(t=[[[0,0]]],L=!1,R=!1),Te(t,((e,t)=>{let o=Hi(e,"mode",""),u=null;if(""===o){let o=t;Df(Hi(e,"colorIndex"))&&(o=Tf(e.colorIndex)),u=Rm(k,e.name,e.data,o),_l(r)&&(u.marker.fillColor=r),Dl(n)&&(u.marker.radius=Gl(n)),i&&(u.marker.symbol=km(t).symbol,u.marker.fillColor=Mm(t)),Hi(e,"compare")&&(u.marker.radius-=1,u.marker.fillColor="transparent",u.marker.lineColor="rgba(0,0,0,0.5)")}else{if("custom"!==o)throw new Error(`invalid mode[${o}]`);u=e}Rl(u)&&_.push(u)})),!Ca(E)&&!Ca(S)){let e=Oo(_,(e=>Oo(e.data,0)));e=sg(e),E=1.5*Qd(e)}if(!Ca(g)&&!Ca(d)){let e=Oo(_,(e=>Oo(e.data,1)));e=sg(e),g=1.5*Qd(e)}if(j){let e;if(Ca(S))e=S;else if(Ca(E))e=E;else{let t=Oo(_,(e=>Oo(e.data,"0",null)));t=sg(t),e=Qd(t)}let t={name:"static pp",data:[[0,0],[e,1*e*.00981]],lineWidth:2,color:"#f26",marker:{enabled:!1}};_.push(t)}let C,q=!0;if(O){q=!1;let e=wc();C=Oo(e,(e=>({from:e.min,to:e.max,color:e.color,borderColor:"rgba(255,255,255,0.5)",borderWidth:1})))}let N={credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},boost:{enabled:!1},chart:Im(Im({animation:!1,inverted:!0},P),{},{backgroundColor:"transparent",plotBorderColor:"#222",plotBorderWidth:1,events:{render:function(){if(D){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"invXY");Pl(r)||(r=!1);let n=Lm(e,t),{xLimMin:i,xLimMax:o,yLimMin:u,yLimMax:a}=n.lims,l=[(i+o)/2,(u+a)/2];l=n.cvp(l,r),qm(e,l,{w:100,h:24},"無有效資料",{edgeColor:"#f26",faceColor:"#fff",zIndex:10})}(this,{invXY:!0})}}}}),plotOptions:{series:{animation:!1}},title:{text:""},xAxis:{crosshair:!0,title:{useHTML:!0,text:b,margin:5,style:{fontFamily:_m(),fontSize:y+"pt",color:"#000",textAlign:"center",lineHeight:"1.1rem"}},lineColor:"rgba(0,0,0,0.8)",lineWidth:1,gridLineColor:"rgba(0,0,0,0.2)",gridLineWidth:1,minorGridLineColor:"rgba(0,0,0,0.1)",minorGridLineWidth:0,tickPosition:"inside",tickColor:"#222",tickWidth:1,minorTickPosition:"inside",minorTickColor:"#666",minorTickLength:5,minorTickWidth:1,softMax:E,labels:{autoRotation:0,style:{fontSize:"12px",color:"#222"},formatter:function(){return Ca(x)?Yc(this.value,x):this.value}}},yAxis:{crosshair:!0,opposite:!0,title:{useHTML:!0,text:s,margin:0,y:15,style:{fontFamily:_m(),fontSize:f+"pt",color:"#000",textAlign:"center",lineHeight:"1.1rem"}},plotBands:C,plotLines:undefined,lineColor:"rgba(0,0,0,0.8)",lineWidth:1,tickInterval:m,gridLineColor:"rgba(0,0,0,0.2)",gridLineWidth:q?1:0,minorGridLineColor:"rgba(0,0,0,0.1)",minorGridLineWidth:0,tickPosition:"inside",tickColor:"#222",tickWidth:1,minorTickPosition:"inside",minorTickColor:"#666",minorTickLength:5,minorTickWidth:1,softMin:v,softMax:g,labels:{autoRotation:0,y:-10,style:{fontSize:"12px",color:"#222"},formatter:function(){return Ca(p)?Yc(this.value,p):this.value}}},tooltip:{enabled:!1},legend:{enabled:!1},series:_};return Ca($)&&(N.xAxis.min=$,N.xAxis.endOnTick=!1),Ca(S)&&(N.xAxis.max=S,N.xAxis.endOnTick=!1),Ca(h)&&(N.yAxis.min=h,N.yAxis.endOnTick=!1),Ca(d)&&(N.yAxis.max=d,N.yAxis.endOnTick=!1),R&&(N.legend={enabled:!0,shared:!0,useHTML:!0,floating:!0,layout:"vertical",align:"right",verticalAlign:"bottom",x:-10,y:-10,backgroundColor:"rgba(255,255,255,0.8)",borderColor:"#aaa",borderWidth:1,symbolWidth:25}),L&&(N.tooltip={enabled:!0,shared:!0,useHTML:!0}),N}function Bm(e,t){return Ca(t)||(t=.1),e=Math.ceil(e/t)*t}function Qm(e,t){return Ca(t)||(t=.1),e=Math.floor(e/t)*t}function Gm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"keyDepth");_l(r)||(r="depth");let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(t,"approximate");Pl(o)||(o=!1);let u=-1e20;return Te(e,(e=>{Dl(e[n])&&(u=Math.max(u,Gl(e[n]))),Dl(e[i])&&(u=Math.max(u,Gl(e[i]))),Dl(e[r])&&(u=Math.max(u,Gl(e[r])))})),o&&(u=Bm(u)),u}function Hm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"keyDepth");_l(r)||(r="depth");let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(t,"approximate");Pl(o)||(o=!1);let u=1e20;return Te(e,(e=>{Dl(e[n])&&(u=Math.min(u,Gl(e[n]))),Dl(e[i])&&(u=Math.min(u,Gl(e[i]))),Dl(e[r])&&(u=Math.min(u,Gl(e[r])))})),o&&(u=Qm(u)),u}var Wm={getDepthMaxCeil:Bm,getDepthMinFloor:Qm,getDepthMax:Gm,getDepthMin:Hm,getDepthMaxMin:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"keyDepth");_l(r)||(r="depth");let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(t,"approximate");return Pl(o)||(o=!1),{depthMax:Gm(e,t),depthMin:Hm(e,t)}}};function Vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ym(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zm=Ha;var Km=function(e,t){return!!(null==e?0:e.length)&&Zm(e,t,0)>-1};var Jm=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1};var Xm=bn,eb=function(){},tb=Xm&&1/Ur(new Xm([,-0]))[1]==1/0?function(e){return new Xm(e)}:eb,rb=Cr,nb=Km,ib=Jm,ob=qr,ub=tb,ab=Ur;var lb=function(e,t,r){var n=-1,i=nb,o=e.length,u=!0,a=[],l=a;if(r)u=!1,i=ib;else if(o>=200){var s=t?null:ub(e);if(s)return ab(s);u=!1,i=ob,l=new rb}else l=t?[]:a;e:for(;++n<o;){var f=e[n],c=t?t(f):f;if(f=r||0!==f?f:0,u&&c==c){for(var p=l.length;p--;)if(l[p]===c)continue e;t&&l.push(c),a.push(f)}else i(l,c,r)||(l!==a&&l.push(c),a.push(f))}return a},sb=lb;var fb=function(e){return e&&e.length?sb(e):[]};e._cpt=xc,e._hc=Fm,e._share=af,e._soilGroup=Md,e.calcCpt=Vc,e.calcCptClassify=Tc,e.calcCptUnitWeight=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"rsatIni");if(Dl(r)||(r=Qh),r=Gl(r),r<=0)throw new Error(`rsatIni[${r}]<=0`);let n=Hi(t,"coe_a");if(Dl(n)||(n=.8),n=Gl(n),n<=0)throw new Error(`coe_a[${n}]<=0`);let i=Hi(t,"keyDepth");_l(i)||(i="depth");let o=Hi(t,"keyDepthStart");_l(o)||(o="depthStart");let u=Hi(t,"keyDepthEnd");_l(u)||(u="depthEnd"),e=Bc(e=Pa(e));let a=Hi(e,`0.${i}`),l=Hi(e,`0.${o}`),s=Hi(e,`0.${u}`);return!Dl(a)||Dl(l)||Dl(s)?!Dl(a)&&Dl(l)&&Dl(s)&&(e=Oo(e,((e,t)=>{let r=Hi(e,o),n=Hi(e,u);if(!Dl(r)||!Dl(n))throw console.log(t,e),new Error(`第 ${t} 樣本無起始深度(${o})或結束深度(${u})數據`);{r=Gl(r),n=Gl(n);let t=(r+n)/2;e[i]=t}return e}))):e=Ih(e,t),e=Oo(e,(e=>(e.rsat=r,e))),e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hi(t,"waterLevel");Dl(r)||(r=0),r=Gl(r);let n=Hi(t,"rdiff");Dl(n)||(n=3),n=Gl(n);let i=r,o=r;return e=Pa(e),e=Oo(e,((e,t)=>{let r=Hi(e,"rsat");if(!Dl(r))throw console.log("stress",t,e),new Error("stress: 樣本無飽和單位重rsat");r=Gl(r);let i=r-n;return e.rsat=r,e.rd=i,e})),e=Th(e,Bh(Bh({},t),{},{waterLevelUsual:i,waterLevelDesign:o})),Oo(e,(e=>{let t=Hi(e,"svpUsual");return e.svp=t,e.sv/=1e3,e.svp/=1e3,delete e.svpUsual,delete e.svpDesign,delete e.waterLevelUsual,delete e.waterLevelDesign,e}))}(e=Oo(e,(e=>{let t=sf(e.depth);return e.u0=t,e})),t),e=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"countMax");Df(n)||(n=100),n=Tf(n);let i=-1,o=!0,u=e;for(;o;){i++;let e=Hh(u,t,r);if(o=e.bUpdate,u=e.ltdt,i>=n)break}return u}(e,n,t),e},e.calcDepthStartEndByConnect=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];if(!Lf(e))throw new Error("無有效資料");let n=Hi(t,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(t,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(t,"depthEndMax");if(o=Dl(o)?Gl(o):null,e=Pa(e),Te(e,((e,t)=>{let o=Hi(e,n,null),u=Hi(e,i,null);Dl(o)||r.push(`第 ${t} 樣本起始深度${n}[${o}]非有效數字`),Dl(u)||r.push(`第 ${t} 樣本結束深度${i}[${u}]非有效數字`)})),nf(r)>0)throw new Error(Xc(r,", "));if(e=Ps(e,(e=>Gl(e[n]))),Te(e,((t,o)=>{if(0===o)return!0;let u=Hi(e,`${o-1}.${i}`,null),a=Hi(t,n,null);u=Gl(u),a=Gl(a),Nh(u,">",a)&&r.push(`第 ${o-1} 樣本之結束深度${i}[${u}]大於第 ${o} 樣本之起點深度${n}[${a}]`)})),nf(r)>0)throw new Error(Xc(r,", "));if(Te(e,((t,r)=>{if(0===r)return!0;let o=Hi(e,`${r-1}.${i}`,null),u=Hi(t,n,null);if(o=Gl(o),u=Gl(u),Nh(o,"<",u)){let t=(o+u)/2;e[r-1][i]=t,e[r+0][n]=t}})),Ca(o)){let t=nf(e)-1;Nh(e[t][i],"<",o)&&(e[t][i]=o)}return e},e.calcDepthStartEndByGroup=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];if(!Lf(e))throw new Error("無有效資料");let n=Hi(t,"keyDepth");_l(n)||(n="depth");let i=Hi(t,"keyGroup");_l(i)||(i="group");let o=Hi(t,"keyDepthStart");_l(o)||(o="depthStart");let u=Hi(t,"keyDepthEnd");_l(u)||(u="depthEnd");let a=Hi(t,"depthEndMax");if(a=Dl(a)?Gl(a):null,e=Pa(e),Te(e,((e,t)=>{let o=Hi(e,n,null);Dl(o)||r.push(`第 ${t} 樣本中點深度${n}[${o}]非有效數字`);let u=Hi(e,i,"");_l(u)||Dl(u)||r.push(`第 ${t} 樣本群組代號${i}[${u}]非有效字串或數字`)})),nf(r)>0)throw new Error(Xc(r,"; "));if(e=Ps(e,(e=>Gl(e[n]))),Te(e,((t,i)=>{if(0===i)return!0;let o=Hi(e,`${i-1}.${n}`,null),u=Hi(t,n,null);o=Gl(o),u=Gl(u),Nh(o,">=",u)&&r.push(`第 ${i-1} 樣本之中點深度${n}[${o}]大於等於第 ${i} 樣本之中點深度${n}[${u}]`)})),nf(r)>0)throw new Error(Xc(r,"; "));let l={};Te(e,(e=>{let t=e[i];l[t]=!0}));let s=Re(l);if(0===nf(s))throw new Error("無有效群數");e=Ih(e,{keyDepth:n,keyDepthStart:o,keyDepthEnd:u,depthEndMax:a});let f=Pa(e),c=-1;for(;c++,!(c>=nf(e)-1);){let t=Hi(e,c),r=Hi(e,c+1);Hi(t,i,"g1")===Hi(r,i,"g2")&&(e[c][u]=e[c+1][u],ad(e,c+1),c--)}let p=Oo(e,(e=>({[i]:e[i],[o]:e[o],[u]:e[u]})));return p=Oo(p,(e=>{let t=e[o],r=e[u],i=[],a=[];return Te(f,((e,o)=>{let u=e[n];if(Nh(u,">=",t)&&Nh(u,"<=",r)&&(i.push(o),a.push(e)),Nh(u,">",r))return!1})),e.rows=Pa(a),ad(f,i),e})),p},e.calcDepthStartEndFromCenter=Ih,e.calcLayers=Cd,e.calcLiquefaction=Vv,e.calcVerticalStress=Th,e.checkDepth=Yv,e.checkDepthStartEnd=Ah,e.cnst=lf,e.complementDepthData=function(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!_l(t))throw new Error("invalid keyDepth");if(!_l(r))throw new Error("invalid keyValue");if(!Lf(n))throw new Error("invalid keysValueCmp");e=Pa(e);let o=Hi(i,"searchLen");Dl(o)||(o=.5);let u=Hi(i,"beforeSearchMode");"all"!==u&&"no"!==u&&"peak"!==u&&"half-closed-value"!==u&&"double-closed-value"!==u&&"closed-value"!==u&&(u="no");let a=Hi(i,"afterSearchMode");"all"!==a&&"no"!==a&&"peak"!==a&&"half-closed-value"!==a&&"double-closed-value"!==a&&"closed-value"!==a&&(a="all");let l=Hi(i,"cmpMode");"linear-fill"!==l&&"cut"!==l&&(l="linear-fill");let s=function(e,t,r){let n=[];return Te(e,((i,o)=>{if(0===o)return!0;let u=ug(e,t,o-1),a=ug(e,r,o-1),l=ug(e,r,o);Dl(a)&&!Dl(l)&&n.push({k:o-1,depth:u,value:a})})),n}(e,t,r);return Te(s,(i=>{let s=null;if(s=function(e,t,r,n,i,o){return ag(e,t,r,n,i,o,og({dir:"before"},arguments.length>6&&void 0!==arguments[6]?arguments[6]:{}))}(e,t,r,i.k,o,Hi(i,"value"),{searchMode:u}),null===s)return!0;let f=null;if(f=function(e,t,r,n,i,o){return ag(e,t,r,n,i,o,og({dir:"after"},arguments.length>6&&void 0!==arguments[6]?arguments[6]:{}))}(e,t,r,i.k,o,Hi(s,"value")||Hi(i,"value"),{searchMode:a}),null===f)return!0;"linear-fill"===l?e=function(e,t,r,n){if(r===n)return;if(r>n)throw new Error("k0 > k1");let i=Pa(e);return Te(t,(t=>{let o=ug(e,t,r),u=ug(e,t,n),a=n-r;for(let e=r;e<=n;e++)ng(i,`${e}.${t}`,(n-e)/a*o+(e-r)/a*u)})),i}(e,n,s.k,f.k):"cut"===l&&(e=function(e,t,r,n){if(r===n)return;if(r>n)throw new Error("k0 > k1");let i=Pa(e);return Te(t,(e=>{for(let t=r;t<=n;t++)ng(i,`${t}.${e}`,"")})),i}(e,n,s.k,f.k))})),e},e.getCptDepthHcOpt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Hi(r,"xLabelPre",""),i=Hi(r,"useXLabelChtAndEng",!0),o=Hi(r,"useXYLabelEng",!0),u=Hi(r,"useYLabel",!0),a=Hi(r,"yLabelCht","海床下深度"),l=Hi(r,"yLabelEng","Depth below seabed"),s=Hi(r,"yLabelTextSizeCht",12),f=Hi(r,"yLabelTextSizeEng",10),c=Hi(r,"yUnit","m"),p=Hi(r,"yDig",void 0),h=Hi(r,"yLimMin",void 0),d=Hi(r,"yLimMax",void 0),v="";async function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Hi(n,"xLabelPre",""),a=Hi(n,"xLabelCht",""),l=Hi(n,"xLabelEng",void 0),s=Hi(n,"xLabelTextSizePre",14),f=Hi(n,"xLabelTextSizeCht",12),v=Hi(n,"xLabelTextSizeEng",10),g=Hi(n,"xUnit",void 0);i||(a="",l="");let m="";_l(u)&&(m+=Nm(u,s)+"<br>"),_l(a)&&(_l(g)?m+=Nm(a+zm(g),f):m+=Nm(a,f)),o&&_l(l)&&(m+=Am(l+zm(g),v));let b=[{name:"",data:uf(e,t,!0)}];return Um(Im(Im(Im({},r),n),{},{dataPoints:b,xLabel:m,yUnit:c,yDig:p,yLimMin:h,yLimMax:d}))}u&&(_l(a)&&(_l(c)?v+=Nm(a+zm(c),s):v+=Nm(a,s)),o&&l&&(v+=Am(l+zm(c),f)));let m=null;if("qc"===t)m=await g(e,"qc",{yLabel:v,xLabelPre:n,xLabelCht:"錐尖阻抗 q<sub>c</sub>",xLabelEng:"Cone resistance",xUnit:"MPa",xLimMin:0,xSoftMax:30,xTickInterval:10});else if("qt"===t)m=await g(e,"qt",{yLabel:v,xLabelPre:n,xLabelCht:"校正錐尖阻抗 q<sub>t</sub>",xLabelEng:"Corrected cone resistance",xUnit:"MPa",xLimMin:0,xSoftMax:30});else if("qnet"===t)m=await g(e,"qnet",{yLabel:v,xLabelPre:n,xLabelCht:"淨校正錐尖阻抗 q<sub>net</sub>",xLabelEng:"Net corrected cone resistance",xUnit:"MPa",xLimMin:0,xSoftMax:30});else if("Qt"===t)m=await g(e,"Qt",{yLabel:v,xLabelPre:n,xLabelCht:"正規化錐尖阻抗 Q<sub>t</sub>",xLabelEng:"Normalized cone resistance Q<sub>t</sub>",xUnit:"",xLimMin:0,xLimMax:150});else if("Qtn"===t)m=await g(e,"Qtn",{yLabel:v,xLabelPre:n,xLabelCht:"正規化錐尖阻抗 Q<sub>tn</sub>",xLabelEng:"Normalized cone resistance Q<sub>tn</sub>",xUnit:"",xLimMin:0,xLimMax:150});else if("fs"===t)m=await g(e,"fs",{yLabel:v,xLabelPre:n,xLabelCht:"摩擦應力 f<sub>s</sub>",xLabelEng:"Sleeve friction",xUnit:"MPa",xLimMin:0,xSoftMax:1.2,xTickInterval:.2});else if("Rf"===t)m=await g(e,"Rf",{yLabel:v,xLabelPre:n,xLabelCht:"摩擦比 R<sub>f</sub>",xLabelEng:"Friction ratio",xUnit:"%",xLimMin:0,xSoftMax:8,xTickInterval:2});else if("Fr"===t)m=await g(e,"Fr",{yLabel:v,xLabelPre:n,xLabelCht:"正規化摩擦比 F<sub>r</sub>",xLabelEng:"Normalized friction ratio",xUnit:"%",xLimMin:0,xSoftMax:8,xTickInterval:2});else if("u2"===t)m=await g(e,"u2",{yLabel:v,xLabelPre:n,xLabelCht:"孔隙水壓 u<sub>2</sub>",xLabelEng:"Pore pressure",xUnit:"MPa",addStaticPP:!0});else if("Bq"===t)m=await g(e,"Bq",{yLabel:v,xLabelPre:n,xLabelCht:"超額孔隙水壓比 B<sub>q</sub>",xLabelEng:"Pore pressure ratio",xUnit:"",xLimMin:-1,xLimMax:3});else if("Ic"===t)m=await g(e,"Ic",{yLabel:v,xLabelPre:n,xLabelCht:"土壤行為分類指數 I<sub>c</sub>",xLabelEng:"Soil behaviour type index",xUnit:"",xLimMin:1,xLimMax:5,xTickInterval:1,addIcRanges:!0});else if("Icn"===t)m=await g(e,"Icn",{yLabel:v,xLabelPre:n,xLabelCht:"土壤行為分類指數 I<sub>cn</sub>",xLabelEng:"Soil behaviour type index",xUnit:"",xLimMin:1,xLimMax:5,xTickInterval:1,addIcRanges:!0});else if("Rob:Bq-qt"===t)m=await g(e,"iRobBqqt",{yLabel:v,xLabelPre:n,xLabelCht:"Robertson B<sub>q</sub>-q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:14,displayDataMode:"dot point"});else if("Rob:Rf-qt"===t)m=await g(e,"iRobRfqt",{yLabel:v,xLabelPre:n,xLabelCht:"Robertson R<sub>f</sub>-q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:14,displayDataMode:"dot point"});else if("Rob:Bq-Qt"===t)m=await g(e,"iRobBqQt",{yLabel:v,xLabelPre:n,xLabelCht:"Robertson B<sub>q</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"});else if("Rob:Bq-Qtn"===t)m=await g(e,"iRobBqQtn",{yLabel:v,xLabelPre:n,xLabelCht:"Robertson B<sub>q</sub>-Q<sub>tn</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"});else if("Rob:Fr-Qt"===t)m=await g(e,"iRobFrQt",{yLabel:v,xLabelPre:n,xLabelCht:"Robertson F<sub>r</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"});else if("Rob:Fr-Qtn"===t)m=await g(e,"iRobFrQtn",{yLabel:v,xLabelPre:n,xLabelCht:"Robertson F<sub>r</sub>-Q<sub>tn</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"});else if("Ram:Bq-Qt"===t)m=await g(e,"iRamBqQt",{yLabel:v,xLabelPre:n,xLabelCht:"Ramsey B<sub>q</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"});else{if("Ram:Fr-Qt"!==t)throw new Error(`invalid retKind[${t}]`);m=await g(e,"iRamFrQt",{yLabel:v,xLabelPre:n,xLabelCht:"Ramsey F<sub>r</sub>-Q<sub>t</sub>",xLabelEng:"Zone index",xUnit:"",xLimMin:0,xLimMax:10,displayDataMode:"dot point"})}return m},e.getDepthMaxMin=Wm,e.groupByDepthStartEnd=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];if(!Lf(e))throw new Error("無有效資料");if(!Lf(t)&&!Rl(t))throw new Error("無有效起訖深度資料");let i=Hi(r,"keyDepth");_l(i)||(i="depth");let o=Hi(r,"keyDepthStart");_l(o)||(o="depthStart");let u=Hi(r,"keyDepthEnd");if(_l(u)||(u="depthEnd"),e=Pa(e),Te(e,((e,t)=>{let r=Hi(e,i,null);Dl(r)||n.push(`第 ${t} 樣本中點深度${i}[${r}]非有效數字`)})),nf(n)>0)throw new Error(Xc(n,"; "));let a=Yv(e=Ps(e,(e=>Gl(e[i]))),{keyDepth:i});if(nf(a)>0)throw new Error(Xc(a,", "));if(Rl(t)&&(t=[t]),Te(t,((e,t)=>{let r=Hi(e,o,null),i=Hi(e,u,null);Dl(r)||n.push(`群組用起訖深度陣列中，第 ${t} 元素之起始深度${o}[${r}]非有效數字`),Dl(i)||n.push(`群組用起訖深度陣列中，第 ${t} 元素之結束深度${u}[${i}]非有效數字`)})),nf(n)>0)throw new Error(Xc(n,"; "));if(Te(t,((e,r)=>{let i=Hi(e,o,null),a=Hi(e,u,null);if(i=Gl(i),a=Gl(a),Nh(i,">",a)&&n.push(`群組用起訖深度陣列中，第 ${r} 元素之起始深度${o}[${i}]大於結束深度${u}[${a}]`),0===r)return!0;let l=Hi(t,r-1),s=Hi(l,u,null);s=Gl(s),Nh(s,">",i)&&n.push(`第 ${r} 樣本結束深度${u}[${s}]大於第 ${r+1} 個樣本起始深度${o}[${i}]`)})),nf(n)>0)throw new Error(Xc(n,"; "));let l=Pa(e),s=Pa(t);return s=Oo(s,((e,t)=>{let r=Hi(e,o,null),n=Hi(e,u,null);r=Gl(r),n=Gl(n);let a=[],s=[];return Te(l,((e,t)=>{let o=e[i];if(Nh(o,">=",r)&&Nh(o,"<=",n)&&(a.push(t),s.push(e)),Nh(o,">",n))return!1})),e.rows=Pa(s),ad(l,a),e})),s},e.intrpDefParam=cf,e.judge=Nh,e.mergeByDepthStartEnd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Lf(e))throw new Error("無有效數據");let r=Hi(t,"keyDepthStart");_l(r)||(r="depthStart");let n=Hi(t,"keyDepthEnd");_l(n)||(n="depthEnd");let i=Hi(t,"keyValue");_l(i)||(i="value");let o=Hi(t,"funMerge"),u=Hi(t,"typeMerge");"up"!==u&&"down"!==u&&(u="down");let a=Ah(e=Pa(e),{keyDepthStart:r,keyDepthEnd:n});if(nf(a)>0)throw new Error(Xc(a,", "));let l=e=>{let t=!1;for(let a=1;a<nf(e);a++){let l=e[a-1],s=e[a],f=Hi(l,r,null),c=Hi(l,i,null),p=Hi(s,n,null),h=Hi(s,i,null);if(null!==c&&null!==h&&c===h){let i=null;if(Ml(o)){if(i=o(l,s),!Rl(i))throw new Error(`funMerge回傳[${i}]非有效物件`)}else"up"===u?i=Ym(Ym({},s),l):"down"===u&&(i=Ym(Ym({},l),s));i[r]=f,i[n]=p,(e=Pa(e))[a-1]=i,ad(e,a),t=!0;break}}return{merge:t,rows:e}},s=l(e=Ps(e,(e=>Gl(e[r]))));for(;s.merge;)s=l(e),e=s.rows;return e},e.relaPlasticityParams=function(e,t,r){let n={};function i(){let i,o,u,a=!1;return Ca(e)&&Ca(r)&&e<=r&&(n.ck_LL_PL=`液限[${e}]<=塑限[${r}]`),Ca(e)&&Ca(t)&&(i=e-t),Ca(i)&&(Ca(r)?i<=0?n.ck_PL=`反算出塑限[${i}]<=0`:i>=100?n.ck_PL=`反算出塑限[${i}]>=100`:Math.abs(r-i)>i/100*5&&(n.ck_PL=`輸入塑限[${r}]與反算出塑限[${i}]差距過大`):(r=i,a=!0)),Ca(e)&&Ca(r)&&(o=e-r),Ca(o)&&(Ca(t)?o<=0?n.ck_PI=`反算出塑性指數[${o}]<=0`:o>=100?n.ck_PI=`反算出塑性指數[${o}]>=100`:Math.abs(t-o)>o/100*5&&(n.ck_PI=`輸入塑性指數[${t}]與反算出塑性指數[${o}]差距過大`):(t=o,a=!0)),Ca(r)&&Ca(t)&&(u=r+t),Ca(u)&&(Ca(e)?u<=0?n.ck_LL=`反算出液限[${u}]<=0`:u>=100?n.ck_LL=`反算出液限[${u}]>=100`:Math.abs(e-u)>u/100*5&&(n.ck_LL=`輸入液限[${e}]與反算出液限[${u}]差距過大`):(e=u,a=!0)),a}Dl(e)?(e=Gl(e))<=0&&(n.LL=`液限[${e}]為數字但<=0，自動清除`):e=null,Dl(r)?(r=Gl(r))<=0&&(n.PL=`塑限[${r}]為數字但<=0，自動清除`):r=null,Dl(t)?(t=Gl(t))<=0&&(n.PI=`塑性指數[${t}]為數字但<=0，自動清除`):t=null;let o=0;if(o+=Dl(e)?1:0,o+=Dl(r)?1:0,o+=Dl(t)?1:0,o>=2){let e=i();for(;e;)e=i()}let u={LL:e,PL:r,PI:t};if(Rl(n)){let e=Xc(yv(n),", ");u.err=e}return u},e.relaPorousParams=Dv,e.sepDepthStartEndByDepth=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Lf(e))throw new Error("無有效數據");if(!Lf(t))return e;let n=Hi(r,"keyDepthStart");_l(n)||(n="depthStart");let i=Hi(r,"keyDepthEnd");_l(i)||(i="depthEnd");let o=Hi(r,"keyDepth");_l(o)||(o="depth");let u=Ah(e=Pa(e),{keyDepthStart:n,keyDepthEnd:i});if(nf(u)>0)throw new Error(Xc(u,", "));e=Ps(e,(e=>Gl(e[n])));let a=Yv(t,{keyDepth:o});if(nf(a)>0)throw new Error(Xc(a,", "));let l=Oo(t,(e=>e[o]));l=fb(l);let s=(e,t)=>(e=Pa(e),Te(e,((r,o)=>{let u=Hi(r,n,null),a=Hi(r,i,null);if(u=Gl(u),a=Gl(a),Nh(t,">",u)&&Nh(t,"<",a)){let u=Pa(r),a=Pa(r);return u[i]=t,a[n]=t,ad(e,o),e=function(e,t,r){if(!kf(e))return[];if(kf(r)||(r=[r]),!If(t))return e;if((t=Tf(t))>nf(e))return e;let n=e;try{n=[...e.slice(0,t),...r,...e.slice(t)]}catch(e){}return n}(e,o,[u,a]),!1}})),e);return Te(l,(t=>{e=s(e,t)})),e},e.smoothDepthByKey=mc}));
//# sourceMappingURL=w-geo.umd.js.map
