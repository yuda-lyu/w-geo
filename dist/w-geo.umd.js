/*!
 * w-geo v1.0.34
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r="undefined"!=typeof globalThis?globalThis:r||self)["w-geo"]=t()}(this,(function(){"use strict";var r={eps:1e-6,rw:9.81};var t=function(r,t){for(var n=-1,e=null==r?0:r.length;++n<e&&!1!==t(r[n],n,r););return r};var n=function(r){return function(t,n,e){for(var a=-1,o=Object(t),c=e(t),u=c.length;u--;){var i=c[r?u:++a];if(!1===n(o[i],i,o))break}return t}}();var e=function(r,t){for(var n=-1,e=Array(r);++n<r;)e[n]=t(n);return e};function a(r){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(r){var t={exports:{}};return r(t,t.exports),t.exports}var u="object"==a(o)&&o&&o.Object===Object&&o,i="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,s=u||i||Function("return this")(),f=s.Symbol,p=Object.prototype,v=p.hasOwnProperty,h=p.toString,l=f?f.toStringTag:void 0;var d=function(r){var t=v.call(r,l),n=r[l];try{r[l]=void 0;var e=!0}catch(r){}var a=h.call(r);return e&&(t?r[l]=n:delete r[l]),a},w=Object.prototype.toString;var g=function(r){return w.call(r)},b=f?f.toStringTag:void 0;var y=function(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":b&&b in Object(r)?d(r):g(r)};var M=function(r){return null!=r&&"object"==a(r)};var S=function(r){return M(r)&&"[object Arguments]"==y(r)},j=Object.prototype,_=j.hasOwnProperty,m=j.propertyIsEnumerable,C=S(function(){return arguments}())?S:function(r){return M(r)&&_.call(r,"callee")&&!m.call(r,"callee")},D=Array.isArray;var x=function(){return!1},A=c((function(r,t){var n=t&&!t.nodeType&&t,e=n&&r&&!r.nodeType&&r,a=e&&e.exports===n?s.Buffer:void 0,o=(a?a.isBuffer:void 0)||x;r.exports=o})),R=/^(?:0|[1-9]\d*)$/;var O=function(r,t){var n=a(r);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&R.test(r))&&r>-1&&r%1==0&&r<t};var P=function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991},F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1;var N=function(r){return M(r)&&P(r.length)&&!!F[y(r)]};var L=function(r){return function(t){return r(t)}},E=c((function(r,t){var n=t&&!t.nodeType&&t,e=n&&r&&!r.nodeType&&r,a=e&&e.exports===n&&u.process,o=function(){try{var r=e&&e.require&&e.require("util").types;return r||a&&a.binding&&a.binding("util")}catch(r){}}();r.exports=o})),G=E&&E.isTypedArray,q=G?L(G):N,k=Object.prototype.hasOwnProperty;var T=function(r,t){var n=D(r),a=!n&&C(r),o=!n&&!a&&A(r),c=!n&&!a&&!o&&q(r),u=n||a||o||c,i=u?e(r.length,String):[],s=i.length;for(var f in r)!t&&!k.call(r,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||c&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||O(f,s))||i.push(f);return i},I=Object.prototype;var U=function(r){var t=r&&r.constructor;return r===("function"==typeof t&&t.prototype||I)};var z=function(r,t){return function(n){return r(t(n))}},V=z(Object.keys,Object),B=Object.prototype.hasOwnProperty;var Y=function(r){if(!U(r))return V(r);var t=[];for(var n in Object(r))B.call(r,n)&&"constructor"!=n&&t.push(n);return t};var $=function(r){var t=a(r);return null!=r&&("object"==t||"function"==t)};var W=function(r){if(!$(r))return!1;var t=y(r);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var H=function(r){return null!=r&&P(r.length)&&!W(r)};var J=function(r){return H(r)?T(r):Y(r)};var X=function(r,t){return function(n,e){if(null==n)return n;if(!H(n))return r(n,e);for(var a=n.length,o=t?a:-1,c=Object(n);(t?o--:++o<a)&&!1!==e(c[o],o,c););return n}}((function(r,t){return r&&n(r,t,J)}));var K=function(r){return r};var Q=function(r){return"function"==typeof r?r:K};var Z=function(r,n){return(D(r)?t:X)(r,Q(n))};var rr=function(r){return"symbol"==a(r)||M(r)&&"[object Symbol]"==y(r)},tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nr=/^\w*$/;var er,ar=function(r,t){if(D(r))return!1;var n=a(r);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=r&&!rr(r))||(nr.test(r)||!tr.test(r)||null!=t&&r in Object(t))},or=s["__core-js_shared__"],cr=(er=/[^.]+$/.exec(or&&or.keys&&or.keys.IE_PROTO||""))?"Symbol(src)_1."+er:"";var ur=function(r){return!!cr&&cr in r},ir=Function.prototype.toString;var sr=function(r){if(null!=r){try{return ir.call(r)}catch(r){}try{return r+""}catch(r){}}return""},fr=/^\[object .+?Constructor\]$/,pr=Function.prototype,vr=Object.prototype,hr=pr.toString,lr=vr.hasOwnProperty,dr=RegExp("^"+hr.call(lr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var wr=function(r){return!(!$(r)||ur(r))&&(W(r)?dr:fr).test(sr(r))};var gr=function(r,t){return null==r?void 0:r[t]};var br=function(r,t){var n=gr(r,t);return wr(n)?n:void 0},yr=br(Object,"create");var Mr=function(){this.__data__=yr?yr(null):{},this.size=0};var Sr=function(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t},jr=Object.prototype.hasOwnProperty;var _r=function(r){var t=this.__data__;if(yr){var n=t[r];return"__lodash_hash_undefined__"===n?void 0:n}return jr.call(t,r)?t[r]:void 0},mr=Object.prototype.hasOwnProperty;var Cr=function(r){var t=this.__data__;return yr?void 0!==t[r]:mr.call(t,r)};var Dr=function(r,t){var n=this.__data__;return this.size+=this.has(r)?0:1,n[r]=yr&&void 0===t?"__lodash_hash_undefined__":t,this};function xr(r){var t=-1,n=null==r?0:r.length;for(this.clear();++t<n;){var e=r[t];this.set(e[0],e[1])}}xr.prototype.clear=Mr,xr.prototype.delete=Sr,xr.prototype.get=_r,xr.prototype.has=Cr,xr.prototype.set=Dr;var Ar=xr;var Rr=function(){this.__data__=[],this.size=0};var Or=function(r,t){return r===t||r!=r&&t!=t};var Pr=function(r,t){for(var n=r.length;n--;)if(Or(r[n][0],t))return n;return-1},Fr=Array.prototype.splice;var Nr=function(r){var t=this.__data__,n=Pr(t,r);return!(n<0)&&(n==t.length-1?t.pop():Fr.call(t,n,1),--this.size,!0)};var Lr=function(r){var t=this.__data__,n=Pr(t,r);return n<0?void 0:t[n][1]};var Er=function(r){return Pr(this.__data__,r)>-1};var Gr=function(r,t){var n=this.__data__,e=Pr(n,r);return e<0?(++this.size,n.push([r,t])):n[e][1]=t,this};function qr(r){var t=-1,n=null==r?0:r.length;for(this.clear();++t<n;){var e=r[t];this.set(e[0],e[1])}}qr.prototype.clear=Rr,qr.prototype.delete=Nr,qr.prototype.get=Lr,qr.prototype.has=Er,qr.prototype.set=Gr;var kr=qr,Tr=br(s,"Map");var Ir=function(){this.size=0,this.__data__={hash:new Ar,map:new(Tr||kr),string:new Ar}};var Ur=function(r){var t=a(r);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==r:null===r};var zr=function(r,t){var n=r.__data__;return Ur(t)?n["string"==typeof t?"string":"hash"]:n.map};var Vr=function(r){var t=zr(this,r).delete(r);return this.size-=t?1:0,t};var Br=function(r){return zr(this,r).get(r)};var Yr=function(r){return zr(this,r).has(r)};var $r=function(r,t){var n=zr(this,r),e=n.size;return n.set(r,t),this.size+=n.size==e?0:1,this};function Wr(r){var t=-1,n=null==r?0:r.length;for(this.clear();++t<n;){var e=r[t];this.set(e[0],e[1])}}Wr.prototype.clear=Ir,Wr.prototype.delete=Vr,Wr.prototype.get=Br,Wr.prototype.has=Yr,Wr.prototype.set=$r;var Hr=Wr;function Jr(r,t){if("function"!=typeof r||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var e=arguments,a=t?t.apply(this,e):e[0],o=n.cache;if(o.has(a))return o.get(a);var c=r.apply(this,e);return n.cache=o.set(a,c)||o,c};return n.cache=new(Jr.Cache||Hr),n}Jr.Cache=Hr;var Xr=Jr;var Kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qr=/\\(\\)?/g,Zr=function(r){var t=Xr(r,(function(r){return 500===n.size&&n.clear(),r})),n=t.cache;return t}((function(r){var t=[];return 46===r.charCodeAt(0)&&t.push(""),r.replace(Kr,(function(r,n,e,a){t.push(e?a.replace(Qr,"$1"):n||r)})),t}));var rt=function(r,t){for(var n=-1,e=null==r?0:r.length,a=Array(e);++n<e;)a[n]=t(r[n],n,r);return a},tt=f?f.prototype:void 0,nt=tt?tt.toString:void 0;var et=function r(t){if("string"==typeof t)return t;if(D(t))return rt(t,r)+"";if(rr(t))return nt?nt.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var at=function(r){return null==r?"":et(r)};var ot=function(r,t){return D(r)?r:ar(r,t)?[r]:Zr(at(r))};var ct=function(r){if("string"==typeof r||rr(r))return r;var t=r+"";return"0"==t&&1/r==-Infinity?"-0":t};var ut=function(r,t){for(var n=0,e=(t=ot(t,r)).length;null!=r&&n<e;)r=r[ct(t[n++])];return n&&n==e?r:void 0};var it=function(r,t,n){var e=null==r?void 0:ut(r,t);return void 0===e?n:e};var st=function(r,t){for(var n=-1,e=t.length,a=r.length;++n<e;)r[a+n]=t[n];return r},ft=f?f.isConcatSpreadable:void 0;var pt=function(r){return D(r)||C(r)||!!(ft&&r&&r[ft])};var vt=function r(t,n,e,a,o){var c=-1,u=t.length;for(e||(e=pt),o||(o=[]);++c<u;){var i=t[c];n>0&&e(i)?n>1?r(i,n-1,e,a,o):st(o,i):a||(o[o.length]=i)}return o};var ht=function(){this.__data__=new kr,this.size=0};var lt=function(r){var t=this.__data__,n=t.delete(r);return this.size=t.size,n};var dt=function(r){return this.__data__.get(r)};var wt=function(r){return this.__data__.has(r)};var gt=function(r,t){var n=this.__data__;if(n instanceof kr){var e=n.__data__;if(!Tr||e.length<199)return e.push([r,t]),this.size=++n.size,this;n=this.__data__=new Hr(e)}return n.set(r,t),this.size=n.size,this};function bt(r){var t=this.__data__=new kr(r);this.size=t.size}bt.prototype.clear=ht,bt.prototype.delete=lt,bt.prototype.get=dt,bt.prototype.has=wt,bt.prototype.set=gt;var yt=bt;var Mt=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this};var St=function(r){return this.__data__.has(r)};function jt(r){var t=-1,n=null==r?0:r.length;for(this.__data__=new Hr;++t<n;)this.add(r[t])}jt.prototype.add=jt.prototype.push=Mt,jt.prototype.has=St;var _t=jt;var mt=function(r,t){for(var n=-1,e=null==r?0:r.length;++n<e;)if(t(r[n],n,r))return!0;return!1};var Ct=function(r,t){return r.has(t)};var Dt=function(r,t,n,e,a,o){var c=1&n,u=r.length,i=t.length;if(u!=i&&!(c&&i>u))return!1;var s=o.get(r),f=o.get(t);if(s&&f)return s==t&&f==r;var p=-1,v=!0,h=2&n?new _t:void 0;for(o.set(r,t),o.set(t,r);++p<u;){var l=r[p],d=t[p];if(e)var w=c?e(d,l,p,t,r,o):e(l,d,p,r,t,o);if(void 0!==w){if(w)continue;v=!1;break}if(h){if(!mt(t,(function(r,t){if(!Ct(h,t)&&(l===r||a(l,r,n,e,o)))return h.push(t)}))){v=!1;break}}else if(l!==d&&!a(l,d,n,e,o)){v=!1;break}}return o.delete(r),o.delete(t),v},xt=s.Uint8Array;var At=function(r){var t=-1,n=Array(r.size);return r.forEach((function(r,e){n[++t]=[e,r]})),n};var Rt=function(r){var t=-1,n=Array(r.size);return r.forEach((function(r){n[++t]=r})),n},Ot=f?f.prototype:void 0,Pt=Ot?Ot.valueOf:void 0;var Ft=function(r,t,n,e,a,o,c){switch(n){case"[object DataView]":if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=t.byteLength||!o(new xt(r),new xt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Or(+r,+t);case"[object Error]":return r.name==t.name&&r.message==t.message;case"[object RegExp]":case"[object String]":return r==t+"";case"[object Map]":var u=At;case"[object Set]":var i=1&e;if(u||(u=Rt),r.size!=t.size&&!i)return!1;var s=c.get(r);if(s)return s==t;e|=2,c.set(r,t);var f=Dt(u(r),u(t),e,a,o,c);return c.delete(r),f;case"[object Symbol]":if(Pt)return Pt.call(r)==Pt.call(t)}return!1};var Nt=function(r,t,n){var e=t(r);return D(r)?e:st(e,n(r))};var Lt=function(r,t){for(var n=-1,e=null==r?0:r.length,a=0,o=[];++n<e;){var c=r[n];t(c,n,r)&&(o[a++]=c)}return o};var Et=function(){return[]},Gt=Object.prototype.propertyIsEnumerable,qt=Object.getOwnPropertySymbols,kt=qt?function(r){return null==r?[]:(r=Object(r),Lt(qt(r),(function(t){return Gt.call(r,t)})))}:Et;var Tt=function(r){return Nt(r,J,kt)},It=Object.prototype.hasOwnProperty;var Ut=function(r,t,n,e,a,o){var c=1&n,u=Tt(r),i=u.length;if(i!=Tt(t).length&&!c)return!1;for(var s=i;s--;){var f=u[s];if(!(c?f in t:It.call(t,f)))return!1}var p=o.get(r),v=o.get(t);if(p&&v)return p==t&&v==r;var h=!0;o.set(r,t),o.set(t,r);for(var l=c;++s<i;){var d=r[f=u[s]],w=t[f];if(e)var g=c?e(w,d,f,t,r,o):e(d,w,f,r,t,o);if(!(void 0===g?d===w||a(d,w,n,e,o):g)){h=!1;break}l||(l="constructor"==f)}if(h&&!l){var b=r.constructor,y=t.constructor;b==y||!("constructor"in r)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(h=!1)}return o.delete(r),o.delete(t),h},zt=br(s,"DataView"),Vt=br(s,"Promise"),Bt=br(s,"Set"),Yt=br(s,"WeakMap"),$t="[object Map]",Wt="[object Promise]",Ht="[object Set]",Jt="[object WeakMap]",Xt="[object DataView]",Kt=sr(zt),Qt=sr(Tr),Zt=sr(Vt),rn=sr(Bt),tn=sr(Yt),nn=y;(zt&&nn(new zt(new ArrayBuffer(1)))!=Xt||Tr&&nn(new Tr)!=$t||Vt&&nn(Vt.resolve())!=Wt||Bt&&nn(new Bt)!=Ht||Yt&&nn(new Yt)!=Jt)&&(nn=function(r){var t=y(r),n="[object Object]"==t?r.constructor:void 0,e=n?sr(n):"";if(e)switch(e){case Kt:return Xt;case Qt:return $t;case Zt:return Wt;case rn:return Ht;case tn:return Jt}return t});var en=nn,an="[object Arguments]",on="[object Array]",cn="[object Object]",un=Object.prototype.hasOwnProperty;var sn=function(r,t,n,e,a,o){var c=D(r),u=D(t),i=c?on:en(r),s=u?on:en(t),f=(i=i==an?cn:i)==cn,p=(s=s==an?cn:s)==cn,v=i==s;if(v&&A(r)){if(!A(t))return!1;c=!0,f=!1}if(v&&!f)return o||(o=new yt),c||q(r)?Dt(r,t,n,e,a,o):Ft(r,t,i,n,e,a,o);if(!(1&n)){var h=f&&un.call(r,"__wrapped__"),l=p&&un.call(t,"__wrapped__");if(h||l){var d=h?r.value():r,w=l?t.value():t;return o||(o=new yt),a(d,w,n,e,o)}}return!!v&&(o||(o=new yt),Ut(r,t,n,e,a,o))};var fn=function r(t,n,e,a,o){return t===n||(null==t||null==n||!M(t)&&!M(n)?t!=t&&n!=n:sn(t,n,e,a,r,o))};var pn=function(r,t,n,e){var a=n.length,o=a,c=!e;if(null==r)return!o;for(r=Object(r);a--;){var u=n[a];if(c&&u[2]?u[1]!==r[u[0]]:!(u[0]in r))return!1}for(;++a<o;){var i=(u=n[a])[0],s=r[i],f=u[1];if(c&&u[2]){if(void 0===s&&!(i in r))return!1}else{var p=new yt;if(e)var v=e(s,f,i,r,t,p);if(!(void 0===v?fn(f,s,3,e,p):v))return!1}}return!0};var vn=function(r){return r==r&&!$(r)};var hn=function(r){for(var t=J(r),n=t.length;n--;){var e=t[n],a=r[e];t[n]=[e,a,vn(a)]}return t};var ln=function(r,t){return function(n){return null!=n&&(n[r]===t&&(void 0!==t||r in Object(n)))}};var dn=function(r){var t=hn(r);return 1==t.length&&t[0][2]?ln(t[0][0],t[0][1]):function(n){return n===r||pn(n,r,t)}};var wn=function(r,t){return null!=r&&t in Object(r)};var gn=function(r,t,n){for(var e=-1,a=(t=ot(t,r)).length,o=!1;++e<a;){var c=ct(t[e]);if(!(o=null!=r&&n(r,c)))break;r=r[c]}return o||++e!=a?o:!!(a=null==r?0:r.length)&&P(a)&&O(c,a)&&(D(r)||C(r))};var bn=function(r,t){return null!=r&&gn(r,t,wn)};var yn=function(r,t){return ar(r)&&vn(t)?ln(ct(r),t):function(n){var e=it(n,r);return void 0===e&&e===t?bn(n,r):fn(t,e,3)}};var Mn=function(r){return function(t){return null==t?void 0:t[r]}};var Sn=function(r){return function(t){return ut(t,r)}};var jn=function(r){return ar(r)?Mn(ct(r)):Sn(r)};var _n=function(r){return"function"==typeof r?r:null==r?K:"object"==a(r)?D(r)?yn(r[0],r[1]):dn(r):jn(r)};var mn=function(r,t){var n=-1,e=H(r)?Array(r.length):[];return X(r,(function(r,a,o){e[++n]=t(r,a,o)})),e};var Cn=function(r,t){var n=r.length;for(r.sort(t);n--;)r[n]=r[n].value;return r};var Dn=function(r,t){if(r!==t){var n=void 0!==r,e=null===r,a=r==r,o=rr(r),c=void 0!==t,u=null===t,i=t==t,s=rr(t);if(!u&&!s&&!o&&r>t||o&&c&&i&&!u&&!s||e&&c&&i||!n&&i||!a)return 1;if(!e&&!o&&!s&&r<t||s&&n&&a&&!e&&!o||u&&n&&a||!c&&a||!i)return-1}return 0};var xn=function(r,t,n){for(var e=-1,a=r.criteria,o=t.criteria,c=a.length,u=n.length;++e<c;){var i=Dn(a[e],o[e]);if(i)return e>=u?i:i*("desc"==n[e]?-1:1)}return r.index-t.index};var An=function(r,t,n){t=t.length?rt(t,(function(r){return D(r)?function(t){return ut(t,1===r.length?r[0]:r)}:r})):[K];var e=-1;t=rt(t,L(_n));var a=mn(r,(function(r,n,a){return{criteria:rt(t,(function(t){return t(r)})),index:++e,value:r}}));return Cn(a,(function(r,t){return xn(r,t,n)}))};var Rn=function(r,t,n){switch(n.length){case 0:return r.call(t);case 1:return r.call(t,n[0]);case 2:return r.call(t,n[0],n[1]);case 3:return r.call(t,n[0],n[1],n[2])}return r.apply(t,n)},On=Math.max;var Pn=function(r,t,n){return t=On(void 0===t?r.length-1:t,0),function(){for(var e=arguments,a=-1,o=On(e.length-t,0),c=Array(o);++a<o;)c[a]=e[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=e[a];return u[t]=n(c),Rn(r,this,u)}};var Fn=function(r){return function(){return r}},Nn=function(){try{var r=br(Object,"defineProperty");return r({},"",{}),r}catch(r){}}(),Ln=Nn?function(r,t){return Nn(r,"toString",{configurable:!0,enumerable:!1,value:Fn(t),writable:!0})}:K,En=Date.now;var Gn=function(r){var t=0,n=0;return function(){var e=En(),a=16-(e-n);if(n=e,a>0){if(++t>=800)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}(Ln);var qn=function(r,t,n){if(!$(n))return!1;var e=a(t);return!!("number"==e?H(n)&&O(t,n.length):"string"==e&&t in n)&&Or(n[t],r)},kn=function(r,t){return Gn(Pn(r,t,K),r+"")}((function(r,t){if(null==r)return[];var n=t.length;return n>1&&qn(r,t[0],t[1])?t=[]:n>2&&qn(t[0],t[1],t[2])&&(t=[t[0]]),An(r,vt(t,1),[])})),Tn=/\s/;var In=function(r){for(var t=r.length;t--&&Tn.test(r.charAt(t)););return t},Un=/^\s+/;var zn=function(r){return r?r.slice(0,In(r)+1).replace(Un,""):r},Vn=/^[-+]0x[0-9a-f]+$/i,Bn=/^0b[01]+$/i,Yn=/^0o[0-7]+$/i,$n=parseInt;var Wn=function(r){if("number"==typeof r)return r;if(rr(r))return NaN;if($(r)){var t="function"==typeof r.valueOf?r.valueOf():r;r=$(t)?t+"":t}if("string"!=typeof r)return 0===r?r:+r;r=zn(r);var n=Bn.test(r);return n||Yn.test(r)?$n(r.slice(2),n?2:8):Vn.test(r)?NaN:+r},Hn=1/0;var Jn=function(r){return r?(r=Wn(r))===Hn||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0};function Xn(r){return"[object String]"===Object.prototype.toString.call(r)}function Kn(r){return!(!Xn(r)||""===r)}function Qn(r){var t=!1;return Kn(r)?t=!isNaN(Number(r)):function(r){return"[object Number]"===Object.prototype.toString.call(r)}(r)&&(t=!0),t}function Zn(r){return Qn(r)?Jn(r):0}function re(r){return"[object Array]"===Object.prototype.toString.call(r)}function te(r){return"[object Object]"===Object.prototype.toString.call(r)}function ne(r){return!!function(r){return"[object Undefined]"===Object.prototype.toString.call(r)}(r)||(!!function(r){return"[object Null]"===Object.prototype.toString.call(r)}(r)||(!!function(r){if(te(r)){for(var t in r)return!1;return!0}return!1}(r)||(!!function(r){return!(!Xn(r)||""!==r)}(r)||!!function(r){return!!re(r)&&0===r.length}(r))))}function ee(r){return!!re(r)&&(0!==r.length&&(1!==r.length||!ne(r[0])))}function ae(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!ee(r))return n;var e=it(t,"keyDepthStart");Kn(e)||(e="depthStart");var a=it(t,"keyDepthEnd");return Kn(a)||(a="depthEnd"),Z(r,(function(r,t){var o=it(r,e,null),c=it(r,a,null);Qn(o)||n.push("第 ".concat(t," 樣本起始深度").concat(e,"[").concat(o,"]非有效數字")),Qn(c)||n.push("第 ".concat(t," 樣本結束深度").concat(a,"[").concat(c,"]非有效數字"))})),r=kn(r,(function(r){return Zn(r[e])})),Z(r,(function(t,o){var c=it(t,e,null),u=it(t,a,null);if((c=Zn(c))>(u=Zn(u))&&n.push("第 ".concat(o," 個樣本起始深度").concat(e,"[").concat(c,"]大於結束深度").concat(a,"[").concat(u,"]")),0===o)return!0;var i=it(r,o-1),s=it(i,a,null);(s=Zn(s))!==c&&n.push("第 ".concat(o," 樣本結束深度").concat(a,"[").concat(s,"]不等於第 ").concat(o+1," 個樣本起始深度").concat(e,"[").concat(c,"]"))})),n}var oe=Array.prototype.join;var ce=function(r,t){return null==r?"":oe.call(r,t)};var ue=function(r,t){return rt(t,(function(t){return r[t]}))};var ie=function(r){return null==r?[]:ue(r,J(r))};var se=function(r){return"number"==typeof r||M(r)&&"[object Number]"==y(r)};var fe=function(r){return!0===r||!1===r||M(r)&&"[object Boolean]"==y(r)};function pe(r){return fe(r)}function ve(r){if(te(r)){for(var t in r)return!0;return!1}return!1}var he=r.rw;function le(r,t){return r*he/(1+t)}function de(r,t){return r-t*he/(1+t)}function we(r,t){return(r-he)*t/(t-1)}function ge(r,t){return(r+t)*he/(1+t)}function be(r,t){return r+t*he/(1+t)}function ye(r,t){return r*(t-1)/t+he}function Me(r,t){return(r*he-t)/t}function Se(r,t){return(r-t)/(t-he-r)}function je(r,t){return(r*he-t)/(t-he)}function _e(r,t){return r*(1+t)/he}function me(r,t){return r/(r-(t-he))}function Ce(r,t){return(r+r*t-t*he)/he}function De(r,t,n,e){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o={},c=it(a,"returnFuncs");function u(){var a,c,u,i,s=!1;return!se(a)&&se(n)&&se(e)&&(a=le(n,e)),!se(a)&&se(t)&&se(e)&&(a=de(t,e)),!se(a)&&se(t)&&se(n)&&1!==n&&(a=we(t,n)),se(r)?Math.abs(r-a)>a/100*5&&(o.ck_rd="輸入乾單位重[".concat(r,"]與反算出乾單位重[").concat(a,"]差距過大")):(r=a,s=!0),!se(c)&&se(n)&&se(e)&&(c=ge(n,e)),!se(c)&&se(r)&&se(e)&&(c=be(r,e)),!se(c)&&se(r)&&se(n)&&(c=ye(r,n)),se(t)?Math.abs(t-c)>c/100*5&&(o.ck_rsat="輸入飽和單位重[".concat(t,"]與反算出飽和單位重[").concat(c,"]差距過大")):(t=c,s=!0),!se(u)&&se(n)&&se(r)&&(u=Me(n,r)),!se(u)&&se(t)&&se(r)&&t-he-r!=0&&(u=Se(r,t)),!se(u)&&se(t)&&se(n)&&t-he!=0&&(u=je(n,t)),se(e)?Math.abs(e-u)>u/100*5&&(o.ck_e="輸入孔隙比[".concat(e,"]與反算出孔隙比[").concat(u,"]差距過大")):(e=u,s=!0),!se(i)&&se(r)&&se(e)&&(i=_e(r,e)),!se(i)&&se(r)&&se(t)&&r-(t-he)!=0&&(i=me(r,t)),!se(i)&&se(t)&&se(e)&&(i=Ce(t,e)),se(n)?Math.abs(n-i)>i/100*5&&(o.ck_GS="輸入比重[".concat(n,"]與反算出比重[").concat(i,"]差距過大")):(n=i,s=!0),s}pe(c)||(c=!1),Qn(r)?((r=Zn(r))<=0&&(o.rd="乾單位重[".concat(r,"]為數字但<=0，自動清除")),r<=he&&(o.rd="乾單位重[".concat(r,"]<=水單位重[").concat(he,"]"))):r=null,Qn(t)?((t=Zn(t))<=0&&(o.rsat="飽和單位重[".concat(t,"]為數字但<=0，自動清除")),t<=he&&(o.rsat="飽和單位重[".concat(t,"]<=水單位重[").concat(he,"]"))):t=null,Qn(n)?(n=Zn(n))<=0&&(o.GS="比重[".concat(n,"]為數字但<=0，自動清除")):n=null,Qn(e)?(e=Zn(e))<=0&&(o.e="孔隙比[".concat(e,"]為數字但<=0，自動清除")):e=null;var i=0;if(i+=Qn(r)?1:0,i+=Qn(t)?1:0,i+=Qn(n)?1:0,(i+=Qn(e)?1:0)>=2)for(var s=u();s;)s=u();var f={rd:r,rsat:t,GS:n,e:e};if(ve(o)){var p=ce(ie(o),", ");f.err=p}return c&&(f.coreFuncs={get_rd_from_GS_e:le,get_rd_from_rsat_e:de,get_rd_from_rsat_GS:we,get_rsat_from_GS_e:ge,get_rsat_from_rd_e:be,get_rsat_from_rd_GS:ye,get_e_from_GS_rd:Me,get_e_from_rd_rsat:Se,get_e_from_GS_rsat:je,get_GS_from_rd_e:_e,get_GS_from_rd_rsat:me,get_GS_from_rsat_e:Ce}),f}var xe=function(r,t){return(D(r)?rt:mn)(r,_n(t))};var Ae=function(r,t,n){"__proto__"==t&&Nn?Nn(r,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[t]=n},Re=Object.prototype.hasOwnProperty;var Oe=function(r,t,n){var e=r[t];Re.call(r,t)&&Or(e,n)&&(void 0!==n||t in r)||Ae(r,t,n)};var Pe=function(r,t,n,e){var a=!n;n||(n={});for(var o=-1,c=t.length;++o<c;){var u=t[o],i=e?e(n[u],r[u],u,n,r):void 0;void 0===i&&(i=r[u]),a?Ae(n,u,i):Oe(n,u,i)}return n};var Fe=function(r,t){return r&&Pe(t,J(t),r)};var Ne=function(r){var t=[];if(null!=r)for(var n in Object(r))t.push(n);return t},Le=Object.prototype.hasOwnProperty;var Ee=function(r){if(!$(r))return Ne(r);var t=U(r),n=[];for(var e in r)("constructor"!=e||!t&&Le.call(r,e))&&n.push(e);return n};var Ge=function(r){return H(r)?T(r,!0):Ee(r)};var qe=function(r,t){return r&&Pe(t,Ge(t),r)},ke=c((function(r,t){var n=t&&!t.nodeType&&t,e=n&&r&&!r.nodeType&&r,a=e&&e.exports===n?s.Buffer:void 0,o=a?a.allocUnsafe:void 0;r.exports=function(r,t){if(t)return r.slice();var n=r.length,e=o?o(n):new r.constructor(n);return r.copy(e),e}}));var Te=function(r,t){var n=-1,e=r.length;for(t||(t=Array(e));++n<e;)t[n]=r[n];return t};var Ie=function(r,t){return Pe(r,kt(r),t)},Ue=z(Object.getPrototypeOf,Object),ze=Object.getOwnPropertySymbols?function(r){for(var t=[];r;)st(t,kt(r)),r=Ue(r);return t}:Et;var Ve=function(r,t){return Pe(r,ze(r),t)};var Be=function(r){return Nt(r,Ge,ze)},Ye=Object.prototype.hasOwnProperty;var $e=function(r){var t=r.length,n=new r.constructor(t);return t&&"string"==typeof r[0]&&Ye.call(r,"index")&&(n.index=r.index,n.input=r.input),n};var We=function(r){var t=new r.constructor(r.byteLength);return new xt(t).set(new xt(r)),t};var He=function(r,t){var n=t?We(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.byteLength)},Je=/\w*$/;var Xe=function(r){var t=new r.constructor(r.source,Je.exec(r));return t.lastIndex=r.lastIndex,t},Ke=f?f.prototype:void 0,Qe=Ke?Ke.valueOf:void 0;var Ze=function(r){return Qe?Object(Qe.call(r)):{}};var ra=function(r,t){var n=t?We(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)};var ta=function(r,t,n){var e=r.constructor;switch(t){case"[object ArrayBuffer]":return We(r);case"[object Boolean]":case"[object Date]":return new e(+r);case"[object DataView]":return He(r,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ra(r,n);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(r);case"[object RegExp]":return Xe(r);case"[object Set]":return new e;case"[object Symbol]":return Ze(r)}},na=Object.create,ea=function(){function r(){}return function(t){if(!$(t))return{};if(na)return na(t);r.prototype=t;var n=new r;return r.prototype=void 0,n}}();var aa=function(r){return"function"!=typeof r.constructor||U(r)?{}:ea(Ue(r))};var oa=function(r){return M(r)&&"[object Map]"==en(r)},ca=E&&E.isMap,ua=ca?L(ca):oa;var ia=function(r){return M(r)&&"[object Set]"==en(r)},sa=E&&E.isSet,fa=sa?L(sa):ia,pa="[object Arguments]",va="[object Function]",ha="[object Object]",la={};la[pa]=la["[object Array]"]=la["[object ArrayBuffer]"]=la["[object DataView]"]=la["[object Boolean]"]=la["[object Date]"]=la["[object Float32Array]"]=la["[object Float64Array]"]=la["[object Int8Array]"]=la["[object Int16Array]"]=la["[object Int32Array]"]=la["[object Map]"]=la["[object Number]"]=la[ha]=la["[object RegExp]"]=la["[object Set]"]=la["[object String]"]=la["[object Symbol]"]=la["[object Uint8Array]"]=la["[object Uint8ClampedArray]"]=la["[object Uint16Array]"]=la["[object Uint32Array]"]=!0,la["[object Error]"]=la[va]=la["[object WeakMap]"]=!1;var da=function r(n,e,a,o,c,u){var i,s=1&e,f=2&e,p=4&e;if(a&&(i=c?a(n,o,c,u):a(n)),void 0!==i)return i;if(!$(n))return n;var v=D(n);if(v){if(i=$e(n),!s)return Te(n,i)}else{var h=en(n),l=h==va||"[object GeneratorFunction]"==h;if(A(n))return ke(n,s);if(h==ha||h==pa||l&&!c){if(i=f||l?{}:aa(n),!s)return f?Ve(n,qe(i,n)):Ie(n,Fe(i,n))}else{if(!la[h])return c?n:{};i=ta(n,h,s)}}u||(u=new yt);var d=u.get(n);if(d)return d;u.set(n,i),fa(n)?n.forEach((function(t){i.add(r(t,e,a,t,n,u))})):ua(n)&&n.forEach((function(t,o){i.set(o,r(t,e,a,o,n,u))}));var w=v?void 0:(p?f?Be:Tt:f?Ge:J)(n);return t(w||n,(function(t,o){w&&(t=n[o=t]),Oe(i,o,r(t,e,a,o,n,u))})),i};var wa=function(r){return da(r,5)};var ga=function(r){return"string"==typeof r||!D(r)&&M(r)&&"[object String]"==y(r)},ba=Mn("length"),ya=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Ma=function(r){return ya.test(r)},Sa="[\\ud800-\\udfff]",ja="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",_a="\\ud83c[\\udffb-\\udfff]",ma="[^\\ud800-\\udfff]",Ca="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",xa="(?:"+ja+"|"+_a+")"+"?",Aa="[\\ufe0e\\ufe0f]?",Ra=Aa+xa+("(?:\\u200d(?:"+[ma,Ca,Da].join("|")+")"+Aa+xa+")*"),Oa="(?:"+[ma+ja+"?",ja,Ca,Da,Sa].join("|")+")",Pa=RegExp(_a+"(?="+_a+")|"+Oa+Ra,"g");var Fa=function(r){for(var t=Pa.lastIndex=0;Pa.test(r);)++t;return t};var Na=function(r){return Ma(r)?Fa(r):ba(r)};var La=function(r){if(null==r)return 0;if(H(r))return ga(r)?Na(r):r.length;var t=en(r);return"[object Map]"==t||"[object Set]"==t?r.size:Y(r).length},Ea=r.rw;function Ga(r,t){r=wa(r);var n=0;return r=xe(r,(function(r,e){var a=it(r,"err",""),o=it(r,"depthStart",null),c=it(r,"depthEnd",null);try{if(!Qn(o))throw new Error("第 ".concat(e," 樣本起始深度(depthStart)非數值: ").concat(o));if(!Qn(c))throw new Error("第 ".concat(e," 樣本結束深度(depthEnd)非數值: ").concat(c));o=Zn(o),c=Zn(c),r.zsv=(c+o)/2;var u=null;if(o<t&&c>t){var i=it(r,"rsat",null);if(!Qn(i))throw new Error("第 ".concat(e," 樣本飽和單位重(rsat)非數值: ").concat(i));var s=it(r,"rd",null);if(!Qn(s))throw new Error("第 ".concat(e," 樣本乾單位重(rd)非數值: ").concat(s));s=Zn(s);var f=t-o,p=c-t;u=(f*s+p*i)/(f+p)}else if(c<=t){var v=it(r,"rd",null);if(!Qn(v))throw new Error("第 ".concat(e," 樣本乾單位重(rd)非數值: ").concat(v));u=v}else{if(!(o>=t))throw new Error("非預期情形");var h=it(r,"rsat",null);if(!Qn(h))throw new Error("第 ".concat(e," 樣本飽和單位重(rsat)非數值: ").concat(h));u=h}var l=u*(c-o),d=n+l/2;r.sv=d,n+=l;var w=Math.max((o+c)/2-t,0)*Ea;r.svp=Math.max(d-w,0)}catch(t){var g=t.toString();""===a?a=g:a.indexOf(g)<0&&(a+=", ".concat(g)),r.sv="",r.svp="",r.err=a}return r}))}function qa(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ee(r=wa(r)))throw new Error("樣本數據(rows)非有效陣列");var n=ae(r);if(La(n)>0)throw new Error(ce(n,"; "));var e=it(t,"waterLevelUsual");Qn(e)||(e=0),e=Zn(e);var a=it(t,"waterLevelDesign");Qn(a)||(a=0),a=Zn(a);var o=Ga(r,e),c=Ga(r,a);return r=xe(r,(function(r,t){r.waterLevelUsual=e,r.waterLevelDesign=a;var n=o[t],u=c[t];return r.sv=n.sv,r.svpUsual=n.svp,r.svpDesign=u.svp,r.zsv=n.zsv,r}))}function ka(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Ta(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function Ia(r){return function(r){if(Array.isArray(r))return Ta(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,t){if(r){if("string"==typeof r)return Ta(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ta(r,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ua=function(r,t,n){for(var e=-1,a=r.length;++e<a;){var o=r[e],c=t(o);if(null!=c&&(void 0===u?c==c&&!rr(c):n(c,u)))var u=c,i=o}return i};var za=function(r,t){return r<t};var Va=function(r){return r&&r.length?Ua(r,K,za):void 0};var Ba=function(r,t){return r>t};var Ya=function(r){return r&&r.length?Ua(r,K,Ba):void 0};var $a=function(r,t,n){var e=-1,a=r.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++e<a;)o[e]=r[e+t];return o};var Wa=function(r,t,n){var e=r.length;return n=void 0===n?e:n,!t&&n>=e?r:$a(r,t,n)};var Ha=function(r,t,n,e){for(var a=r.length,o=n+(e?1:-1);e?o--:++o<a;)if(t(r[o],o,r))return o;return-1};var Ja=function(r){return r!=r};var Xa=function(r,t,n){for(var e=n-1,a=r.length;++e<a;)if(r[e]===t)return e;return-1};var Ka=function(r,t,n){return t==t?Xa(r,t,n):Ha(r,Ja,n)};var Qa=function(r,t){for(var n=r.length;n--&&Ka(t,r[n],0)>-1;);return n};var Za=function(r,t){for(var n=-1,e=r.length;++n<e&&Ka(t,r[n],0)>-1;);return n};var ro=function(r){return r.split("")},to="[\\ud800-\\udfff]",no="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",eo="\\ud83c[\\udffb-\\udfff]",ao="[^\\ud800-\\udfff]",oo="(?:\\ud83c[\\udde6-\\uddff]){2}",co="[\\ud800-\\udbff][\\udc00-\\udfff]",uo="(?:"+no+"|"+eo+")"+"?",io="[\\ufe0e\\ufe0f]?",so=io+uo+("(?:\\u200d(?:"+[ao,oo,co].join("|")+")"+io+uo+")*"),fo="(?:"+[ao+no+"?",no,oo,co,to].join("|")+")",po=RegExp(eo+"(?="+eo+")|"+fo+so,"g");var vo=function(r){return r.match(po)||[]};var ho=function(r){return Ma(r)?vo(r):ro(r)};var lo=function(r,t,n){if((r=at(r))&&(n||void 0===t))return zn(r);if(!r||!(t=et(t)))return r;var e=ho(r),a=ho(t),o=Za(e,a),c=Qa(e,a)+1;return Wa(e,o,c).join("")};var wo=function(r){return at(r).toLowerCase()};var go=function(r){return M(r)&&"[object RegExp]"==y(r)},bo=E&&E.isRegExp,yo=bo?L(bo):go;var Mo=function(r,t,n){return n&&"number"!=typeof n&&qn(r,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(r=at(r))&&("string"==typeof t||null!=t&&!yo(t))&&!(t=et(t))&&Ma(r)?Wa(ho(r),0,n):r.split(t,n):[]};var So=function(r){var t=Jn(r),n=t%1;return t==t?n?t-n:t:0},jo=s.isFinite,_o=Math.min;var mo=function(r){var t=Math[r];return function(r,n){if(r=Wn(r),(n=null==n?0:_o(So(n),292))&&jo(r)){var e=(at(r)+"e").split("e"),a=t(e[0]+"e"+(+e[1]+n));return+((e=(at(a)+"e").split("e"))[0]+"e"+(+e[1]-n))}return t(r)}}("round");function Co(r){if(!Qn(r))return 0;r=Zn(r);var t=mo(r);return"0"===String(t)?0:t}var Do=function(r){return"number"==typeof r&&r==So(r)};function xo(r){return!!function(r){return!!Qn(r)&&(r=Zn(r),Do(r))}(r)&&Co(r)>0}function Ao(r,t){return Kn(r)&&xo(t)?r.substr(0,t):""}function Ro(r,t){if(!Kn(r))return"";if(!xo(t))return"";var n=r.length-t;return n<0&&(n=0),r.substr(n,t)}function Oo(r){return Kn(r)||Qn(r)?String(r):""}var Po=Array.prototype.reverse;var Fo=function(r){return null==r?r:Po.call(r)},No="in x-range",Lo="out of x-range",Eo="order list",Go="reverse order list";function qo(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(La(r)<=0)return[];var n=it(t,"keyX");Kn(n)||(n="x");var e=it(t,"keyY");Kn(e)||(e="y");var a=[];return Z(r,(function(r){var t=null,o=null;re(r)&&La(r)>=2?(t=it(r,0),o=it(r,1)):(t=it(r,n,null),o=it(r,e,null)),Qn(t)&&Qn(o)&&(t=Wn(t),o=Wn(o),a.push({x:t,y:o}))})),a}function ko(r){for(var t=!0,n=!0,e=1;e<La(r);e++){var a=r[e-1],o=r[e];if(t&&a.x>o.x&&(t=!1),n&&a.x<o.x&&(n=!1),a.x===o.x)return{err:"x can not be equal: i=".concat(e,", x=").concat(a.x)}}return t?Eo:n?Go:"no"}function To(r,t){var n,e;return n=r[0].x,e=r[La(r)-1].x,t<n?{err:Lo,msg:"x[".concat(t,"] less than lower limit[").concat(n,"]"),data:{ps:r,x:t,xmin:n,xmax:e}}:t>e?{err:Lo,msg:"x[".concat(t,"] greater than upper limit[").concat(e,"]"),data:{ps:r,x:t,xmin:n,xmax:e}}:No}function Io(r,t){var n=To(r,t);if(n!==No)return n;for(var e=null,a=1;a<La(r);a++){var o=r[a-1],c=r[a];if(o.x<=t&&t<=c.x){e=((t-o.x)*c.y+(c.x-t)*o.y)/(c.x-o.x);break}}return null===e?{err:Lo}:e}function Uo(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=it(n,"xMin");if(se(e)){if(e>r[0].x)return{err:"xMin=".concat(e," > ps[0].x=").concat(r[0].x)};if(e===r[0].x);else{var a={x:e,y:r[0].y};r=[a].concat(Ia(r))}}var o=it(n,"xMax");if(se(o)){if(o<r[La(r)-1].x)return{err:"xMax=".concat(o," < ps[size(ps)-1].x=").concat(r[La(r)-1].x)};if(o===r[La(r)-1].x);else{var c={x:o,y:r[La(r)-1].y};r=[].concat(Ia(r),[c])}}var u=To(r,t);if(u!==No)return u;for(var i=null,s=0;s<La(r);s++){var f=it(r,s-1,null),p=it(r,s,null),v=it(r,s+1,null),h=p.x;f&&(h=(f.x+p.x)/2);var l=p.x;if(v&&(l=(v.x+p.x)/2),h<=t&&t<=l){i=p.y;break}}return null===i?{err:Lo}:i}function zo(r,t){var n=To(r,t);if(n!==No)return n;for(var e=null,a=1;a<La(r);a++){var o=r[a-1],c=r[a],u=o.x,i=c.x;if(u<=t&&t<=i){e=c.y;break}}return null===e?{err:Lo}:e}function Vo(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.push.apply(n,e)}return n}function Bo(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){ka(r,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}function Yo(r){var t=lo(Oo(r));return""!==t?"[".concat(t,"]"):""}function $o(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new",n=Ao(r,1),e=Ao(r,2);if("new"===t)return"C"===n||"O"===n||"P"===n||"M"===n&&"ML"!==e&&"MH"!==e;if("classic"===t)return"S"!==n&&"G"!==n;throw new Error("invalid mode[".concat(t,"]"))}function Wo(r,t,n){if(La(r)<=0)return{err:"invalid vx"};if(La(t)<=0)return{err:"invalid vy"};if(La(r)!==La(t))return{err:"size of vx is not equal to size of vy"};var e=function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!re(r))return{err:"ps is not array"};if(!se(t))return{err:"x is not number"};var e=qo(r,n);if(it(e,"err"))return it(e,"err");if(0===La(e))return{err:"ps(length=0) is not effective array",ps:r,psEff:e};if(1===La(e))return{err:"ps(length=1) is one point only",ps:r,psEff:e};var a=ko(e);if("no"===a)return{err:"psEff is not increasing or decreasing"};a===Go&&(a=Eo,e=Fo(e));var o=it(n,"mode");"linear"!==o&&"stairs"!==o&&"blocks"!==o&&(o="linear");try{if("linear"===o)return Io(e,t);if("blocks"===o)return zo(e,t);if("stairs"===o)return Uo(e,t,n)}catch(r){return{err:r.toString()}}}(xe(r,(function(n,e){return{x:r[e],y:t[e]}})),n);return e.err&&"ps is not effective array"===e.err&&(e.err="無有效數據"),e}function Ho(r,t,n){return((n-r.x)*t.y+(t.x-n)*r.y)/(t.x-r.x)}function Jo(r,t){var n=[],e=[{volumetricStrain:10,data:[[1.15304,.6],[1.10234,.0413661],[1.10234,.0348459],[1.04383,.0253621],[.956072,.0161746],[.722041,.0093581],[0,0]]},{volumetricStrain:5,data:[[3.00384,.6],[2.97459,.0591482],[2.94533,.0523317],[2.82832,.0431443],[2.56503,.0348459],[2.12623,.0253621],[1.21936,.0126182],[0,0]]},{volumetricStrain:4,data:[[5.11012,.6],[5.11012,.111606],[5.05161,.103604],[5.02236,.0947126],[4.87609,.0849324],[4.72982,.0754486],[4.52504,.0656684],[4.20325,.0579628],[3.82295,.0499608],[3.32563,.0407733],[2.53578,.0286221],[1.5704,.0161746],[0,0]]},{volumetricStrain:3,data:[[7.68446,.6],[7.53819,.234896],[7.53819,.212964],[7.50893,.191033],[7.39192,.165249],[7.33341,.142428],[7.24565,.125831],[7.07012,.111013],[6.8946,.09738],[6.66057,.0887852],[6.45579,.0804869],[6.07549,.0730776],[5.66594,.0665575],[5.28564,.0606301],[4.75907,.0523317],[4.08623,.043737],[0,0]]},{volumetricStrain:2,data:[[14.1203,.6],[14.091,.248529],[13.974,.231043],[13.7985,.216521],[13.6815,.201702],[13.3597,.184513],[13.2134,.173843],[13.0087,.16347],[12.7161,.152208],[12.131,.139168],[11.546,.12761],[10.8439,.116644],[0,0]]},{volumetricStrain:1,data:[[27.5771,.6],[27.5771,.541935],[27.6063,.507852],[27.5478,.485625],[27.5186,.465471],[27.5186,.445022],[27.4893,.424869],[27.3723,.41005],[27.1675,.392268],[26.9335,.376264],[26.5532,.357889],[26.2021,.339514],[25.7048,.324399],[25.1783,.311655],[24.6224,.298022],[23.9496,.282908],[23.2182,.269571],[22.4576,.256531],[21.7556,.244676],[20.8779,.232525],[19.9126,.218892],[0,0]]},{volumetricStrain:.5,data:[[33.0183,.6],[33.0183,.570979],[32.9598,.554086],[32.9013,.536007],[32.6965,.516743],[32.5502,.500147],[32.3747,.482068],[32.0529,.464582],[31.6726,.445022],[31.3216,.425461],[30.9998,.410939],[30.5025,.394935],[29.9466,.376264],[29.3908,.356704],[28.3962,.335958],[27.1383,.313137],[25.5586,.287057],[23.7156,.261865],[21.8141,.238452],[19.7078,.212964],[0,0]]},{volumetricStrain:.2,data:[[35.4,.6],[35.3,.574535],[35.1,.555864],[34.9,.539267],[34.6,.515558],[34.3,.497183],[34,.477919],[33.4544,.455691],[33,.434353],[32.6087,.415385],[31.8774,.397306],[30.8242,.369151],[30.0051,.348998],[29.069,.327067],[28.1329,.308099],[27.1383,.291799],[25.8218,.271349],[24.3884,.252974],[23.2768,.237859],[21.8726,.220373],[19.9711,.200517],[18.5961,.186291],[17.1627,.170583],[15.583,.154876],[14.3543,.14065],[12.8331,.124942],[10.7269,.103307],[8.59132,.081376],[6.39729,.0612228],[4.17399,.0389951],[2.15548,.0188419],[0,0]]},{volumetricStrain:.1,data:[[36.7,.6],[36.5,.571572],[36.2,.544602],[35.8,.520596],[35.4,.490366],[35,.466657],[34.6,.446207],[34.2,.424869],[33.5,.404419],[32.7,.379228],[32,.358482],[30.9998,.331809],[29.5956,.305432],[28.0159,.278758],[26.9335,.262162],[25.266,.238156],[23.2768,.214446],[21.2875,.192515],[19.0642,.170583],[16.8117,.149541],[14.5006,.129684],[12.2481,.108938],[10.0248,.0881925],[7.77222,.0671502],[5.63669,.0472934],[4.70056,.038106],[3.23787,.0259548],[2.38951,.0194347],[.926818,.00669077],[0,0]]}];e=xe(e,(function(r){var t=xe(r.data,(function(r){return r[1]})),n=xe(r.data,(function(r){return r[0]}));return r.vx=t,r.vy=n,r}));var a=xe(e,"volumetricStrain"),o=xe(e,(function(r){var n=Wo(r.vx,r.vy,t);return it(n,"err")?n.err:n})),c=o[0],u=[o[0]],i=[a[0]];Z(o,(function(r,t){t>0&&o[t]>=c&&(c=o[t],u.push(o[t]),i.push(a[t]))}));var s=Wo(o=u,a=i,r);if(it(s,"err"))if("out of x-range"===s.err){var f=s.data.ps,p=Ya(o),v=Va(o);if(r>p){var h=f[La(f)-1].y;n.push("出現外插情形 N160=".concat(r," > N160Max=").concat(p,"，依照CSR=").concat(t,"並給予最小體積應變vstr=").concat(h,"%")),s=h}else if(r<v){var l=Ho(f[0],f[1],r);n.push("出現外插情形 N160=".concat(r," < N160Min=").concat(v,"，依照CSR=").concat(t,"並依據最近2點外插體積應變vstr=").concat(l,"%")),s=l}else n.push("非預期外插情形，請洽開發者修復問題"),s=""}else n.push(s.err),s="";return{err:n,vstr:s}}function Xo(r,t){var n=[],e=[{N172:3,data:[[0,5.48516],[.791714,5.48516],[.889946,5.48274],[.957602,5.47549],[.972564,5.43681],[.981021,5.37154],[.982973,4.71396],[.984274,4.17243],[.985575,3.45201],[.988177,2.61312],[.992081,2.25532],[.996634,1.94104],[1.00379,1.68961],[1.01095,1.54214],[1.02981,1.32698],[1.04347,1.16501],[1.06624,1.00303],[1.09096,.879735],[1.11503,.773363],[1.1391,.703254],[1.17944,.616222],[1.23018,.529191],[1.28873,.444576],[1.35378,.384138],[1.41558,.333369],[1.48064,.275348],[1.5548,.231832],[2,0]]},{N172:6,data:[[0,4.51524],[.789554,4.51524],[.890726,4.51176],[.938502,4.49784],[.957238,4.45954],[.960985,4.31681],[.962858,3.76677],[.964732,3.36294],[.966605,2.92778],[.971289,2.57618],[.97691,2.27679],[.980657,2.07487],[.990962,1.85903],[1.00314,1.57705],[1.01813,1.35773],[1.03686,1.18367],[1.05935,1.02005],[1.08089,.88428],[1.09401,.818136],[1.13148,.696291],[1.17082,.60926],[1.22367,.517103],[1.28287,.437324],[1.34597,.376885],[1.40778,.323699],[1.47673,.268096],[1.55154,.222162],[2,0]]},{N172:10,data:[[0,3.50567],[.738969,3.50567],[.841077,3.50219],[.896347,3.49523],[.912272,3.43953],[.919767,3.34206],[.928198,3.02874],[.938502,2.64928],[.94787,2.29419],[.961922,1.9774],[.972226,1.74763],[.989088,1.50743],[1.00876,1.28811],[1.03031,1.11404],[1.05466,.953905],[1.08745,.807692],[1.12398,.682366],[1.16333,.584891],[1.21673,.50134],[1.27762,.421271],[1.33757,.358608],[1.39752,.306389],[1.46966,.25417],[1.54366,.205433],[2,0]]},{N172:14,data:[[0,2.77461],[.693066,2.77461],[.763325,2.77113],[.797049,2.73283],[.815784,2.68061],[.831709,2.57966],[.867307,2.26634],[.88979,2.01221],[.915083,1.74763],[.936629,1.54224],[.960985,1.34729],[.991898,1.12797],[1.01532,.978274],[1.04248,.852949],[1.0734,.731104],[1.10712,.623185],[1.14834,.539634],[1.18206,.480453],[1.22797,.414309],[1.28417,.36209],[1.34975,.299427],[1.4275,.240245],[1.51368,.184545],[2,0]]},{N172:20,data:[[0,2.17235],[.511332,2.17235],[.605009,2.16539],[.660279,2.13406],[.69213,2.1062],[.722107,2.0505],[.751147,1.95999],[.794238,1.75808],[.825152,1.6049],[.865433,1.40299],[.901968,1.24285],[.939439,1.06182],[.994709,.859911],[1.04717,.689329],[1.09869,.550078],[1.15021,.459565],[1.20267,.386459],[1.25888,.327277],[1.31228,.271577],[1.38441,.22632],[1.46403,.177583],[2,0]]},{N172:25,data:[[0,1.73371],[.396108,1.73371],[.49447,1.71978],[.544119,1.69542],[.579716,1.65712],[.619998,1.58053],[.660279,1.48306],[.703371,1.37862],[.734285,1.28463],[.775503,1.17671],[.816721,1.06182],[.865433,.93998],[.910399,.82858],[.956301,.724142],[1.00595,.602297],[1.0556,.508303],[1.11743,.403865],[1.16989,.337721],[1.22703,.285502],[1.27855,.247208],[1.33663,.208914],[1.4172,.167139],[1.49963,.132326],[2,0]]},{N172:30,data:[[0,1.30203],[.264959,1.30203],[.388614,1.29159],[.476671,1.26026],[.527257,1.20108],[.588147,1.11056],[.647164,1.01657],[.694003,.919093],[.759578,.804211],[.821405,.689329],[.884169,.591853],[.964732,.47349],[1.02469,.386459],[1.09963,.309871],[1.16895,.25417],[1.24764,.19847],[1.32726,.156695],[1.40876,.125364],[1.48558,.100995],[1.55303,.0870696],[1.63453,.0627007],[2,0]]}];e=xe(e,(function(r){var t=xe(r.data,(function(r){return r[0]})),n=xe(r.data,(function(r){return r[1]}));return r.vx=t,r.vy=n,r}));var a=xe(e,"N172"),o=xe(e,(function(r){var n=Wo(r.vx,r.vy,t);return it(n,"err")?n.err:n})),c=o[0],u=[o[0]],i=[a[0]];Z(o,(function(r,t){t>0&&o[t]<=c&&(c=o[t],u.push(o[t]),i.push(a[t]))}));var s=Wo(a=i,o=u,r);if(it(s,"err"))if("out of x-range"===s.err){var f=s.data.ps,p=Ya(a),v=Va(a);if(r>p){var h=f[La(f)-1].y;n.push("出現外插情形 N172=".concat(r," > N172Max=").concat(p,"，依照FS=").concat(t,"並給予最小體積應變vstr=").concat(h,"%")),s=h}else if(r<v){var l=Ho(f[0],f[1],r);n.push("出現外插情形 N172=".concat(r," < N172Min=").concat(v,"，依照FS=").concat(t,"並依據最近2點外插體積應變vstr=").concat(l,"%")),s=l}else n.push("非預期外插情形，請洽開發者修復問題"),s=""}else n.push(s.err),s="";return{err:n,vstr:s}}function Ko(r,t,n,e){var a=[],o=0;!function(){if(n<0)return a.push("Volumetric Strain(Tokimatsu And Seed): CSR".concat(Yo(n),"<0")),void(o="");n>.6&&(a.push("Volumetric Strain(Tokimatsu And Seed): CSR大於0.6超過原研究範疇，強制改為0.6"),n=.6),o=Jo(r,n),La(o.err)>0&&Z(o.err,(function(r){a.push("Volumetric Strain(Tokimatsu And Seed): ".concat(r))})),o=o.vstr}();var c=0;return function(){if(e<0)return a.push("Volumetric Strain(Ishihara And Yoshimine): FS".concat(Yo(e),"<0")),void(c="");e>=2&&(e=2),c=Xo(t,e),La(c.err)>0&&Z(c.err,(function(r){a.push("Volumetric Strain(Ishihara And Yoshimine): ".concat(r))})),c=c.vstr}(),{err:a,vstrTS:o,vstrIY:c}}function Qo(r){var t,n=r.ver,e=void 0===n?"2012":n,a=r.noLiqueMode,o=void 0===a?"new":a,c=r.waterLevelDesign,u=r.soilClassification,i=r.depth,s=r.N60,f=r.FC,p=r.PI,v=r.sv,h=r.svpUsual,l=r.svpDesign,d=r.PGA,w=r.Mw,g=[],b="",y="",M="",S="",j="",_="",m="",C="",D="",x="",A="";function R(){return{rd:b,ks:y,CN:M,N160:S,N160cs:j,N172:_,CSR:C,CRR:m,FS:D,vstrTS:x,vstrIY:A,err:ce(g,"; ")}}for(var O=!1,P=!1;;){if("2012"!==e&&"2017"!==e)return g.push("ver".concat(Yo(e)," 非2012或2017")),R();if(!Qn(i))return g.push("depth".concat(Yo(i),"非數字")),R();if((i=Zn(i))<0)return g.push("depth".concat(Yo(i),"<0")),R();if("new"!==o&&"classic"!==o&&(g.push("noLiqueMode".concat(Yo(o),"非'new'或'classic'，強制預設為'new'")),o="new"),Qn(c)?(c=Zn(c))<0&&(g.push("waterLevelDesign".concat(Yo(c),"<0，強制預設為0(m)")),c=0):(g.push("waterLevelDesign".concat(Yo(c),"非數字，強制預設為0(m)")),c=0),Kn(u)||(g.push("soilClassification".concat(Yo(u),"非有效字串，強制預設為SW")),u="SW"),(i<c||$o(u,o))&&(O=!0),i>20&&(O=!0),"NP"===lo(Oo(p))&&(p=0),Qn(p)?Zn(p)>7&&(O=!0):g.push("PI".concat(Yo(p),"非數字與非NP，強制略過部份非液化條件檢核")),Qn(s)?((s=Zn(s))<0&&(g.push("N60".concat(Yo(s),"<0")),P=!0),s>=50&&(O=!0)):(g.push("N60".concat(Yo(s),"非數字")),P=!0),Qn(f)?(f=Zn(f))<0&&(g.push("FC".concat(Yo(f),"<0")),P=!0):(g.push("FC".concat(Yo(f),"非數字")),P=!0),!Qn(h))return g.push("svpUsual".concat(Yo(h),"非數字")),R();if((h=Zn(h))<0)return g.push("svpUsual".concat(Yo(h),"<0")),R();if(!Qn(l))return g.push("svpDesign".concat(Yo(l),"非數字")),R();if((l=Zn(l))<0)return g.push("svpDesign".concat(Yo(l),"<0")),R();if(!Qn(v))return g.push("sv".concat(Yo(v),"非數字")),R();if((v=Zn(v))<0)return g.push("sv".concat(Yo(v),"<0")),R();if(!Qn(d))return g.push("PGA".concat(Yo(d),"非數字")),R();if((d=Zn(d))<0)return g.push("PGA".concat(Yo(d),"<0")),R();if(!Qn(w))return g.push("Mw".concat(Yo(w),"非數字")),R();if((w=Zn(w))<0)return g.push("Mw".concat(Yo(w),"<0")),R();break}if(!0===O)return g=[],m="-",C="-",D=10,R();if(!0===P)return R();var F=null;"2012"===e?F=-3.3:"2017"===e&&(F=-1.8),t=Math.pow(w/7.5,F),b=i<=10?1-.01*i:1.2-.03*i,y=f<=10?1:1+.07*Math.sqrt(f-10);if(M=Math.min(Math.sqrt(101.39616/h),1.7),(j=y*(S=M*s))>=39)return g=[],m="-",C="-",D=10,R();m=(.08+.0035*j/(1-j/39))*t,(C=v/l*.65*d*b)>0&&(D=m/C),D>10&&(D=10),m<0&&g.push("CRR".concat(Yo(m),"<0")),C<=0&&g.push("CSR".concat(Yo(C),"<=0")),D<0&&(g.push("FS".concat(Yo(D),"<0，強制改為0")),D=0);var N=Ko(S,_=S/1.2,C,D);return g=[].concat(Ia(g),Ia(N.err)),x=N.vstrTS,A=N.vstrIY,R()}function Zo(r){var t=r.ver,n=void 0===t?"1996":t,e=r.noLiqueMode,a=void 0===e?"new":e,o=r.waterLevelDesign,c=r.soilClassification,u=r.vibrationType,i=r.depth,s=r.N60,f=r.FC,p=r.PI,v=r.D50,h=r.D10,l=r.sv,d=r.svpUsual,w=r.svpDesign,g=r.PGA,b=[],y="",M="",S="",j="",_="",m="",C="",D="",x="",A="",R="",O="",P="",F="",N="";function L(){return{rd:y,N160:A,N172:M,c1:S,c2:j,cFC:_,Na:m,RL:C,cw:D,CN:x,CSR:O,CRR:R,FS:P,vstrTS:F,vstrIY:N,err:ce(b,"; ")}}for(var E=!1,G=!1;;){if("1996"!==n&&"2017"!==n)return b.push("ver".concat(Yo(n)," 非1996或2017")),L();if(!Qn(i))return b.push("depth".concat(Yo(i),"非數字")),L();if((i=Zn(i))<0)return b.push("depth".concat(Yo(i),"<0")),L();if("new"!==a&&"classic"!==a&&(b.push("noLiqueMode".concat(Yo(a),"非'new'或'classic'，強制預設為'new'")),a="new"),Qn(o)?(o=Zn(o))<0&&(b.push("waterLevelDesign".concat(Yo(o),"<0，強制預設為0(m)")),o=0):(b.push("waterLevelDesign".concat(Yo(o),"非數字，強制預設為0(m)")),o=0),Kn(c)||(b.push("soilClassification".concat(Yo(c),"非有效字串，強制預設為SW")),c="SW"),$o(c,a)&&(E=!0),i>20&&(E=!0),Qn(s)?((s=Zn(s))<0&&(b.push("N60".concat(Yo(s),"<0")),G=!0),s>=50&&(E=!0)):(b.push("N60".concat(Yo(s),"非數字")),G=!0),(i<o||o>10)&&(E=!0),Qn(f)?(f=Zn(f))<0?(b.push("FC".concat(Yo(f),"<0")),G=!0):f<=35||("NP"===lo(Oo(p))&&(p=0),Qn(p)?(p=Zn(p))<15||(E=!0):b.push("PI".concat(Yo(p),"非數字與非NP，強制略過部份非液化條件檢核"))):(b.push("FC".concat(Yo(f),"非數字")),G=!0),Qn(v)||b.push("D50".concat(Yo(v),"非數字，強制略過部份非液化條件檢核")),Qn(h)||b.push("D10".concat(Yo(h),"非數字，強制略過部份非液化條件檢核")),Qn(v)&&Qn(h)&&(v=Zn(v),h=Zn(h),v>10&&(E=!0),h>1&&(E=!0)),Qn(u)?1!==(u=Co(u))&&2!==u&&(b.push("vibrationType".concat(Yo(u),"不等於1或2，更改為預設值1")),u=1):(b.push("vibrationType".concat(Yo(u),"非數字，更改為預設值1")),u=1),!Qn(d))return b.push("svpUsual".concat(Yo(d),"非數字")),L();if((d=Zn(d))<0)return b.push("svpUsual".concat(Yo(d),"<0")),L();if(!Qn(w))return b.push("svpDesign".concat(Yo(w),"非數字")),L();if((w=Zn(w))<0)return b.push("svpDesign".concat(Yo(w),"<0")),L();if(!Qn(l))return b.push("sv".concat(Yo(l),"非數字")),L();if((l=Zn(l))<0)return b.push("sv".concat(Yo(l),"<0")),L();if(!Qn(g))return b.push("PGA".concat(Yo(g),"非數字")),L();if((g=Zn(g))<0)return b.push("PGA".concat(Yo(g),"<0")),L();break}if(!0===E)return b=[],R="-",O="-",P=10,L();if(!0===G)return L();y=1-.015*i,M=(x=170/(d+70))*(s/1.2);var q,k;q=0,k="",Qn(v)?k=Zn(v)<2?"sand":"gravel":function(r){var t=Ao(r,1),n=Ao(r,2);return"S"===t||"ML"===n||"MH"===n}(c)?k="sand":function(r){return"G"===Ao(r,1)}(c)&&(k="gravel"),"sand"!==k&&"gravel"!==k&&(b.push("無法由D50".concat(Yo(v),"或土壤分類").concat(Yo(c),"區分砂或礫石，強制視為砂土")),k="sand"),"sand"===k?"1996"===n?q=(S=f<10?1:f<60?(f+40)/50:f/20-1)*M+(j=f<10?0:(f-10)/18):"2017"===n&&(q=(_=f<10?1:f<40?(f+20)/30:(f-16)/12)*(M+2.47)-2.47):"gravel"===k&&(Qn(v)||(b.push("因D50".concat(Yo(v),"未給予或非數字，故改使用土壤分類來區分砂或礫質土，卻又被分為礫質土仍需要用D50，故強制設定D50為10(mm)")),v=10),v=Zn(v),q=(1-.361*Math.log10(v/2))*M),(m=q)<14?"1996"===n?C=.0882*Math.sqrt(m/1.7):"2017"===n&&(C=.0882*Math.sqrt((.85*m+2.1)/1.7)):C=.0882*Math.sqrt(m/1.7)+16e-7*Math.pow(m-14,4.5),R=(D=2===u?C<=.1?1:C<=.4?3.3*C+.67:2:1)*C,(O=y*g*l/w)>0&&(P=R/O),P>10&&(P=10),R<0&&b.push("CRR".concat(Yo(R),"<0")),O<=0&&b.push("CSR".concat(Yo(O),"<=0")),P<0&&(b.push("FS".concat(Yo(P),"<0，強制改為0")),P=0);var T=Ko(A=M/(60/72),M,O,P);return b=[].concat(Ia(b),Ia(T.err)),F=T.vstrTS,N=T.vstrIY,L()}var rc={SPT:{sptSeed:function(r){var t,n=r.noLiqueMode,e=void 0===n?"new":n,a=r.waterLevelDesign,o=r.soilClassification,c=r.depth,u=r.N60,i=r.FC,s=r.sv,f=r.svpUsual,p=r.svpDesign,v=r.PGA,h=r.Mw,l=[],d="",w="",g="",b="",y="",M="",S="",j="",_="";function m(){return{rd:d,CN:w,N160:g,N172:b,CSR:M,CRR:y,FS:S,vstrTS:j,vstrIY:_,err:ce(l,"; ")}}for(var C=!1,D=!1;;){if(!Qn(c))return l.push("depth".concat(Yo(c),"非數字")),m();if((c=Zn(c))<0)return l.push("depth".concat(Yo(c),"<0")),m();if("new"!==e&&"classic"!==e&&(l.push("noLiqueMode".concat(Yo(e),"非'new'或'classic'，強制預設為'new'")),e="new"),Qn(a)?(a=Zn(a))<0&&(l.push("waterLevelDesign".concat(Yo(a),"<0，強制預設為0(m)")),a=0):(l.push("waterLevelDesign".concat(Yo(a),"非數字，強制預設為0(m)")),a=0),Kn(o)||(l.push("soilClassification".concat(Yo(o),"非有效字串，強制預設為SW")),o="SW"),(c<a||$o(o,e))&&(C=!0),c>20&&(C=!0),Qn(u)?((u=Zn(u))<0&&(l.push("N60".concat(Yo(u),"<0")),D=!0),u>=50&&(C=!0)):(l.push("N60".concat(Yo(u),"非數字")),D=!0),Qn(i)?(i=Zn(i))<0&&(l.push("FC".concat(Yo(i),"<0")),D=!0):(l.push("FC".concat(Yo(i),"非數字")),D=!0),!Qn(f))return l.push("svpUsual".concat(Yo(f),"非數字")),m();if((f=Zn(f))<0)return l.push("svpUsual".concat(Yo(f),"<0")),m();if(!Qn(p))return l.push("svpDesign".concat(Yo(p),"非數字")),m();if((p=Zn(p))<0)return l.push("svpDesign".concat(Yo(p),"<0")),m();if(!Qn(s))return l.push("sv".concat(Yo(s),"非數字")),m();if((s=Zn(s))<0)return l.push("sv".concat(Yo(s),"<0")),m();if(!Qn(v))return l.push("PGA".concat(Yo(v),"非數字")),m();if((v=Zn(v))<0)return l.push("PGA".concat(Yo(v),"<0")),m();if(!Qn(h))return l.push("Mw".concat(Yo(h),"非數字")),m();if((h=Zn(h))<0)return l.push("Mw".concat(Yo(h),"<0")),m();break}if(!0===C)return l=[],y="-",M="-",S=10,m();if(!0===D)return m();t=Math.pow(h/7.5,-1.11),d=(1-.4113*Math.pow(c,.5)+.04052*c+.001753*Math.pow(c,1.5))/(1-.4177*Math.pow(c,.5)+.05729*c-.006205*Math.pow(c,1.5)+.00121*Math.pow(c,2)),w=Math.min(Math.sqrt(101.39616/f),1.7),g=w*u;var x=[{FC:5,data:[[0,.0496622],[2.65306,.0547297],[4.38776,.0628378],[6.02041,.0719595],[7.55102,.0831081],[8.97959,.100338],[10.5102,.114527],[12.2449,.131757],[13.5714,.146959],[14.7959,.161149],[16.1224,.177365],[17.7551,.193581],[19.1837,.211824],[20.7143,.232095],[22.0408,.248311],[23.2653,.265541],[24.5918,.285811],[25.6122,.307095],[26.4286,.327365],[27.2449,.347635],[27.9592,.372973],[28.3673,.398311],[28.7755,.423649],[28.9796,.444932],[29.2857,.473311],[29.3,.6],[100,100]]},{FC:15,data:[[0,.065],[1.63265,.068],[2.85714,.074],[3.87755,.082],[5.10204,.0932432],[6.22449,.110473],[7.44898,.123649],[8.57143,.136824],[9.69388,.151014],[10.9184,.164189],[11.9388,.178378],[13.0612,.192568],[13.8776,.203716],[14.6939,.214865],[16.1224,.232095],[17.551,.251351],[18.5714,.270608],[19.898,.288851],[20.7143,.308108],[21.4286,.327365],[22.0408,.347635],[22.449,.370946],[22.8571,.393243],[23.2653,.417568],[23.6735,.439865],[23.9796,.460135],[24.05,.483446],[24.0816,.515878],[24.1,.6],[100,101]]},{FC:35,data:[[0,.075],[1.32653,.082],[2.44898,.09],[3.26531,.0962838],[4.79592,.116554],[6.22449,.134797],[7.34694,.152027],[8.87755,.171284],[10.102,.185473],[11.4286,.20777],[13.2653,.228041],[14.5918,.247297],[15.7143,.267568],[16.7347,.287838],[17.7551,.313176],[18.6735,.343581],[19.1837,.364865],[19.6939,.382095],[20.102,.410473],[20.4082,.433784],[20.5102,.464189],[20.7143,.490541],[20.9184,.519932],[20.92,.6],[100,102]]}],A=xe(x,"FC");x=xe(x,(function(r){var t=xe(r.data,(function(r){return r[0]})),n=xe(r.data,(function(r){return r[1]}));return r.vx=t,r.vy=n,r}));var R=xe(x,(function(r){var t=Wo(r.vx,r.vy,g);return it(t,"err")?t.err:t})),O=Wo(A,R,i);if(it(O,"err")){if("out of x-range"!==O.err)return l.push(O.err),O="",m();var P=O.data.ps,F=Ya(A),N=Va(A);if(i>F)O=Ho(P[La(P)-2],P[La(P)-1],i),l.push("出現外插情形 FC=".concat(i," > FCMax=").concat(F,"，依據最近2點外插CRR75=").concat(O));else{if(!(i<N))return l.push("非預期外插情形，請洽開發者修復問題"),O="",m();O=Ho(P[0],P[1],i),O=Math.max(O,0),l.push("出現外插情形 FC=".concat(i," < FCMin=").concat(N,"，依據最近2點外插CRR75=").concat(O))}}if(!se(O))return l.push("CRR75".concat(Yo(O),"非數字")),m();O>.6&&(l.push("CRR75".concat(Yo(O),"大於0.6超過原研究範疇，強制改為0.6")),O=.6),y=O*t,(M=s/p*.65*v*d)>0&&(S=y/M),S>10&&(S=10),y<0&&l.push("CRR".concat(Yo(y),"<0")),M<=0&&l.push("CSR".concat(Yo(M),"<=0")),S<0&&(l.push("FS".concat(Yo(S),"<0，強制改為0")),S=0);var L=Ko(g,b=g/1.2,M,S);return l=[].concat(Ia(l),Ia(L.err)),j=L.vstrTS,_=L.vstrIY,m()},sptHBF2012:function(r){return Qo(r=Bo(Bo({},r),{},{ver:"2012"}))},sptHBF2017:function(r){return Qo(r=Bo(Bo({},r),{},{ver:"2017"}))},sptNCEER:function(r){var t,n=r.noLiqueMode,e=void 0===n?"new":n,a=r.waterLevelDesign,o=r.soilClassification,c=r.depth,u=r.N60,i=r.FC,s=r.sv,f=r.svpUsual,p=r.svpDesign,v=r.PGA,h=r.Mw,l=[],d="",w="",g="",b="",y="",M="",S="",j="",_="",m="",C="",D="";function x(){return{rd:d,alpha:w,beta:g,CN:b,N160:y,N160cs:M,N172:S,CSR:_,CRR:j,FS:m,vstrTS:C,vstrIY:D,err:ce(l,"; ")}}for(var A=!1,R=!1;;){if(!Qn(c))return l.push("depth".concat(Yo(c),"非數字")),x();if((c=Zn(c))<0)return l.push("depth".concat(Yo(c),"<0")),x();if("new"!==e&&"classic"!==e&&(l.push("noLiqueMode".concat(Yo(e),"非'new'或'classic'，強制預設為'new'")),e="new"),Qn(a)?(a=Zn(a))<0&&(l.push("waterLevelDesign".concat(Yo(a),"<0，強制預設為0(m)")),a=0):(l.push("waterLevelDesign".concat(Yo(a),"非數字，強制預設為0(m)")),a=0),Kn(o)||(l.push("soilClassification".concat(Yo(o),"非有效字串，強制預設為SW")),o="SW"),(c<a||$o(o,e))&&(A=!0),c>20&&(A=!0),Qn(u)?((u=Zn(u))<0&&(l.push("N60".concat(Yo(u),"<0")),R=!0),u>=50&&(A=!0)):(l.push("N60".concat(Yo(u),"非數字")),R=!0),Qn(i)?(i=Zn(i))<0&&(l.push("FC".concat(Yo(i),"<0")),R=!0):(l.push("FC".concat(Yo(i),"非數字")),R=!0),!Qn(f))return l.push("svpUsual".concat(Yo(f),"非數字")),x();if((f=Zn(f))<0)return l.push("svpUsual".concat(Yo(f),"<0")),x();if(!Qn(p))return l.push("svpDesign".concat(Yo(p),"非數字")),x();if((p=Zn(p))<0)return l.push("svpDesign".concat(Yo(p),"<0")),x();if(!Qn(s))return l.push("sv".concat(Yo(s),"非數字")),x();if((s=Zn(s))<0)return l.push("sv".concat(Yo(s),"<0")),x();if(!Qn(v))return l.push("PGA".concat(Yo(v),"非數字")),x();if((v=Zn(v))<0)return l.push("PGA".concat(Yo(v),"<0")),x();if(!Qn(h))return l.push("Mw".concat(Yo(h),"非數字")),x();if((h=Zn(h))<0)return l.push("Mw".concat(Yo(h),"<0")),x();break}if(!0===A)return l=[],j="-",_="-",m=10,x();if(!0===R)return x();if(t=Math.pow(h/7.5,-2.56),d=(1-.4113*Math.pow(c,.5)+.04052*c+.001753*Math.pow(c,1.5))/(1-.4177*Math.pow(c,.5)+.05729*c-.006205*Math.pow(c,1.5)+.00121*Math.pow(c,2)),w=i<=5?0:i<=35?Math.exp(1.76-190/Math.pow(i,2)):5,g=i<=5?1:i<=35?.99+Math.pow(i,1.5)/1e3:1.2,b=Math.min(Math.sqrt(101.39616/f),1.7),(M=w+g*(y=b*u))>=30)return l=[],j="-",_="-",m=10,x();var O=(.04844+-.004721*M+6136e-7*Math.pow(M,2)+-1673e-8*Math.pow(M,3))/(1+-.1248*M+.009578*Math.pow(M,2)+-3285e-7*Math.pow(M,3)+3714e-9*Math.pow(M,4));j=O*t,(_=s/p*.65*v*d)>0&&(m=j/_),m>10&&(m=10),j<0&&l.push("CRR".concat(Yo(j),"<0")),_<=0&&l.push("CSR".concat(Yo(_),"<=0")),m<0&&(l.push("FS".concat(Yo(m),"<0，強制改為0")),m=0);var P=Ko(y,S=y/1.2,_,m);return l=[].concat(Ia(l),Ia(P.err)),C=P.vstrTS,D=P.vstrIY,x()},sptNJRA1996:function(r){return Zo(r=Bo(Bo({},r),{},{ver:"1996"}))},sptNJRA2017:function(r){return Zo(r=Bo(Bo({},r),{},{ver:"2017"}))},sptTY:function(r){var t=r.noLiqueMode,n=void 0===t?"new":t,e=r.waterLevelDesign,a=r.soilClassification,o=r.depth,c=r.a,u=r.n,i=r.Cr,s=r.Cs,f=r.N60,p=r.FC,v=r.sv,h=r.svpUsual,l=r.svpDesign,d=r.PGA,w=r.Mw,g=[],b="",y="",M="",S="",j="",_="",m="",C="",D="",x="",A="";function R(){return{rd:b,N160:_,N172:y,dNf:M,Na:S,CN:j,CSR:C,CRR:m,FS:D,vstrTS:x,vstrIY:A,err:ce(g,"; ")}}for(var O=!1,P=!1;;){if(!Qn(o))return g.push("depth".concat(Yo(o),"非數字")),R();if((o=Zn(o))<0)return g.push("depth".concat(Yo(o),"<0")),R();if("new"!==n&&"classic"!==n&&(g.push("noLiqueMode".concat(Yo(n),"非'new'或'classic'，強制預設為'new'")),n="new"),Qn(e)?(e=Zn(e))<0&&(g.push("waterLevelDesign".concat(Yo(e),"<0，強制預設為0(m)")),e=0):(g.push("waterLevelDesign".concat(Yo(e),"非數字，強制預設為0(m)")),e=0),Kn(a)||(g.push("soilClassification".concat(Yo(a),"非有效字串，強制預設為SW")),a="SW"),(o<e||$o(a,n))&&(O=!0),o>20&&(O=!0),Qn(f)?((f=Zn(f))<0&&(g.push("N60".concat(Yo(f),"<0")),P=!0),f>=50&&(O=!0)):(g.push("N60".concat(Yo(f),"非數字")),P=!0),Qn(p)?(p=Zn(p))<0&&(g.push("FC".concat(Yo(p),"<0")),P=!0):(g.push("FC".concat(Yo(p),"非數字")),P=!0),!Qn(h))return g.push("svpUsual".concat(Yo(h),"非數字")),R();if((h=Zn(h))<0)return g.push("svpUsual".concat(Yo(h),"<0")),R();if(!Qn(l))return g.push("svpDesign".concat(Yo(l),"非數字")),R();if((l=Zn(l))<0)return g.push("svpDesign".concat(Yo(l),"<0")),R();if(!Qn(v))return g.push("sv".concat(Yo(v),"非數字")),R();if((v=Zn(v))<0)return g.push("sv".concat(Yo(v),"<0")),R();if(!Qn(d))return g.push("PGA".concat(Yo(d),"非數字")),R();if((d=Zn(d))<0)return g.push("PGA".concat(Yo(d),"<0")),R();if(!Qn(w))return g.push("Mw".concat(Yo(w),"非數字")),R();if((w=Zn(w))<0)return g.push("Mw".concat(Yo(w),"<0")),R();break}if(!0===O)return g=[],m="-",C="-",D=10,R();if(!0===P)return R();Qn(c)||(c=.45),c=Zn(c),Qn(u)||(u=14),u=Zn(u),Qn(i)||(i=.57),i=Zn(i),Qn(s)||(s=85),s=Zn(s),b=1-.015*o,S=(y=(j=170/(h+70))*(f/1.2))+(M=p<=5?0:p<=10?p-5:.1*p+4),m=c*i*(16*Math.sqrt(S)/100+Math.pow(16*Math.sqrt(S)/s,u)),(C=.1*(w-1)*d*(v/l)*b)>0&&(D=m/C),D>10&&(D=10),m<0&&g.push("CRR".concat(Yo(m),"<0")),C<=0&&g.push("CSR".concat(Yo(C),"<=0")),D<0&&(g.push("FS".concat(Yo(D),"<0，強制改為0")),D=0);var F=Ko(_=y/(60/72),y,C,D);return g=[].concat(Ia(g),Ia(F.err)),x=F.vstrTS,A=F.vstrIY,R()}},CPT:{cptJuang:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.qc,a=r.fs,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:ce(s,"; ")}}if(Qn(t)||(s.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(s.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return s.push("depth".concat(Yo(n),"非數字")),h();if((n=Zn(n))<0)return s.push("depth".concat(Yo(n),"<0")),h();if(!Qn(e))return s.push("qc".concat(Yo(e),"非數字")),h();if((e=Zn(e))<0)return s.push("qc".concat(Yo(e),"<0")),h();if(!Qn(a))return s.push("fs".concat(Yo(a),"非數字")),h();if((a=Zn(a))<0)return s.push("fs".concat(Yo(a),"<0")),h();if(!Qn(o))return s.push("svpDesign".concat(Yo(o),"非數字")),h();if((o=Zn(o))<0)return s.push("svpDesign".concat(Yo(o),"<0")),h();if(!Qn(c))return s.push("sv".concat(Yo(c),"非數字")),h();if((c=Zn(c))<0)return s.push("sv".concat(Yo(c),"<0")),h();if(!Qn(u))return s.push("PGA".concat(Yo(u),"非數字")),h();if((u=Zn(u))<0)return s.push("PGA".concat(Yo(u),"<0")),h();if(!Qn(i))return s.push("Mw".concat(Yo(i),"非數字")),h();if((i=Zn(i))<0)return s.push("Mw".concat(Yo(i),"<0")),h();var l=Math.pow(i/7.5,-2.56),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),w=a/(e-c)*100;console.log("待確認fs,qc,sv單位皆需為kg/cm2");var g=e/Math.sqrt(o);console.log("待確認qc,svpDesign單位皆需為kg/cm2");var b=Math.sqrt(Math.pow(3.47-Math.log10(g),2)+Math.pow(Math.log10(w)+1.22,2)),y=-.016*Math.pow(o/100,3)+.178*Math.pow(o/100,2)-o/100*.063+.903;console.log("待確認公式內svpDesign單位是否為kg/cm2");var M=g*(2.429*Math.pow(b,4)-16.943*Math.pow(b,3)+44.551*Math.pow(b,2)-51.497*b+22.802),S=y*Math.exp(1.264*Math.pow(M/100,1.25)-2.957);return f=S*l,(p=.65*u*(c/o)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Yo(f),"<0")),p<=0&&s.push("CSR".concat(Yo(p),"<=0")),v<0&&(s.push("FS".concat(Yo(v),"<0，強制改為0")),v=0),h())},cptHBF:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.qc,a=r.fs,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:ce(s,"; ")}}if(Qn(t)||(s.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(s.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return s.push("depth".concat(Yo(n),"非數字")),h();if((n=Zn(n))<0)return s.push("depth".concat(Yo(n),"<0")),h();if(!Qn(e))return s.push("qc".concat(Yo(e),"非數字")),h();if((e=Zn(e))<0)return s.push("qc".concat(Yo(e),"<0")),h();if(!Qn(a))return s.push("fs".concat(Yo(a),"非數字")),h();if((a=Zn(a))<0)return s.push("fs".concat(Yo(a),"<0")),h();if(!Qn(o))return s.push("svpDesign".concat(Yo(o),"非數字")),h();if((o=Zn(o))<0)return s.push("svpDesign".concat(Yo(o),"<0")),h();if(!Qn(c))return s.push("sv".concat(Yo(c),"非數字")),h();if((c=Zn(c))<0)return s.push("sv".concat(Yo(c),"<0")),h();if(!Qn(u))return s.push("PGA".concat(Yo(u),"非數字")),h();if((u=Zn(u))<0)return s.push("PGA".concat(Yo(u),"<0")),h();if(!Qn(i))return s.push("Mw".concat(Yo(i),"非數字")),h();if((i=Zn(i))<0)return s.push("Mw".concat(Yo(i),"<0")),h();var l=Math.pow(i/7.5,-3.3),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),w=1.7/(o+.7)*e;console.log("需確認公式內svpDesign是否為kg/cm2, 否則需要轉kPa, 不過170=>1.7與70=>0.7就代表除r = 98.134256");var g=a/e*100,b=(g<=.1?1:.4*Math.pow(g,2)-.08*g+1.004)*w;return b=Math.min(b,179.5),f=(.09+28e-5*b/(1-b/180))*l,(p=.65*u*(c/o)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Yo(f),"<0")),p<=0&&s.push("CSR".concat(Yo(p),"<=0")),v<0&&(s.push("FS".concat(Yo(v),"<0，強制改為0")),v=0),h())},cptOlsen:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.qc,a=r.fs,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:ce(s,"; ")}}if(Qn(t)||(s.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(s.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return s.push("depth".concat(Yo(n),"非數字")),h();if((n=Zn(n))<0)return s.push("depth".concat(Yo(n),"<0")),h();if(!Qn(e))return s.push("qc".concat(Yo(e),"非數字")),h();if((e=Zn(e))<0)return s.push("qc".concat(Yo(e),"<0")),h();if(!Qn(a))return s.push("fs".concat(Yo(a),"非數字")),h();if((a=Zn(a))<0)return s.push("fs".concat(Yo(a),"<0")),h();if(!Qn(o))return s.push("svpDesign".concat(Yo(o),"非數字")),h();if((o=Zn(o))<0)return s.push("svpDesign".concat(Yo(o),"<0")),h();if(!Qn(c))return s.push("sv".concat(Yo(c),"非數字")),h();if((c=Zn(c))<0)return s.push("sv".concat(Yo(c),"<0")),h();if(!Qn(u))return s.push("PGA".concat(Yo(u),"非數字")),h();if((u=Zn(u))<0)return s.push("PGA".concat(Yo(u),"<0")),h();if(!Qn(i))return s.push("Mw".concat(Yo(i),"非數字")),h();if((i=Zn(i))<0)return s.push("Mw".concat(Yo(i),"<0")),h();var l=Math.pow(i/7.5,-2.56),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),w=a/e*100,g=.00128*(e/Math.pow(o,.7))-.025+.17*w-.028*Math.pow(w,2)+.0016*Math.pow(w,3);return f=g*l,(p=.65*u*(c/o)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Yo(f),"<0")),p<=0&&s.push("CSR".concat(Yo(p),"<=0")),v<0&&(s.push("FS".concat(Yo(v),"<0，強制改為0")),v=0),h())},cptShibata:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.qc,a=r.fs,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=r.D50,f=[],p="",v="",h="";function l(){return{CSR:v,CRR:p,FS:h,err:ce(f,"; ")}}if(Qn(t)||(f.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(f.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return f.push("depth".concat(Yo(n),"非數字")),l();if((n=Zn(n))<0)return f.push("depth".concat(Yo(n),"<0")),l();if(!Qn(e))return f.push("qc".concat(Yo(e),"非數字")),l();if((e=Zn(e))<0)return f.push("qc".concat(Yo(e),"<0")),l();if(!Qn(a))return f.push("fs".concat(Yo(a),"非數字")),l();if((a=Zn(a))<0)return f.push("fs".concat(Yo(a),"<0")),l();if(!Qn(o))return f.push("svpDesign".concat(Yo(o),"非數字")),l();if((o=Zn(o))<0)return f.push("svpDesign".concat(Yo(o),"<0")),l();if(!Qn(c))return f.push("sv".concat(Yo(c),"非數字")),l();if((c=Zn(c))<0)return f.push("sv".concat(Yo(c),"<0")),l();if(!Qn(u))return f.push("PGA".concat(Yo(u),"非數字")),l();if((u=Zn(u))<0)return f.push("PGA".concat(Yo(u),"<0")),l();if(!Qn(i))return f.push("Mw".concat(Yo(i),"非數字")),l();if((i=Zn(i))<0)return f.push("Mw".concat(Yo(i),"<0")),l();if(!Qn(s))return f.push("D50".concat(Yo(s),"非數字")),l();if((s=Zn(s))<0)return f.push("D50".concat(Yo(s),"<0")),l();var d=1.7/(o+.7)*e,w=.1*(i-1)*u*(c/o)*(1-.015*n),g=(s>=.25?1:s/.25)*(50+200*((w-.1)/(w+.1)));return g=Ya(g),p=d,(v=g)>0&&(h=p/v),h>10&&(h=10),n>20?(p="-",v="-",h=10,l()):(p<0&&f.push("CRR".concat(Yo(p),"<0")),v<=0&&f.push("CSR".concat(Yo(v),"<=0")),h<0&&(f.push("FS".concat(Yo(h),"<0，強制改為0")),h=0),l())},cptNCEER:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.qc,a=r.fs,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:ce(s,"; ")}}if(Qn(t)||(s.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(s.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return s.push("depth".concat(Yo(n),"非數字")),h();if((n=Zn(n))<0)return s.push("depth".concat(Yo(n),"<0")),h();if(!Qn(e))return s.push("qc".concat(Yo(e),"非數字")),h();if((e=Zn(e))<0)return s.push("qc".concat(Yo(e),"<0")),h();if(!Qn(a))return s.push("fs".concat(Yo(a),"非數字")),h();if((a=Zn(a))<0)return s.push("fs".concat(Yo(a),"<0")),h();if(!Qn(o))return s.push("svpDesign".concat(Yo(o),"非數字")),h();if((o=Zn(o))<0)return s.push("svpDesign".concat(Yo(o),"<0")),h();if(!Qn(c))return s.push("sv".concat(Yo(c),"非數字")),h();if((c=Zn(c))<0)return s.push("sv".concat(Yo(c),"<0")),h();if(!Qn(u))return s.push("PGA".concat(Yo(u),"非數字")),h();if((u=Zn(u))<0)return s.push("PGA".concat(Yo(u),"<0")),h();if(!Qn(i))return s.push("Mw".concat(Yo(i),"非數字")),h();if((i=Zn(i))<0)return s.push("Mw".concat(Yo(i),"<0")),h();var l=Math.pow(i/7.5,-2.56),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),w=(e-c)/o;console.log("待確認qc,sv,svpDesign單位皆需為kg/cm2");var g,b=a/(e-c)*100;console.log("待確認fs,qc,sv單位皆需為kg/cm2");var y,M,S=Math.sqrt(Math.pow(3.47-Math.log10(w),2)+Math.pow(Math.log10(b)+1.22,2));if(S<=2.6){var j=100;j=1e3*j/9.81/1e4;var _=.1;g=e/(_=1e6*_/9.81/1e4)*Math.pow(j/o,.5),console.log("待確認qc,Pa,Pa2,svpDesign的單位");var m=Math.sqrt(Math.pow(3.47-Math.log10(g),2)+Math.pow(Math.log10(b)+1.22,2));m<=2.6?y=m:(g=e/_*Math.pow(j/o,.75),console.log("待確認qc,Pa,Pa2,svpDesign的單位"),y=Math.sqrt(Math.pow(3.47-Math.log10(g),2)+Math.pow(Math.log10(b)+1.22,2)))}else g=w,y=S;y<=1.64?M=1:(M=-.403*Math.pow(y,4)+5.581*Math.pow(y,3)-21.63*Math.pow(y,2)+33.75*y-17.88,y<2.36&&b<.5&&(M=1));var C,D=M*g;return C=(D=Math.min(D,160))<50?D/1e3*.833+.05:93*Math.pow(D/1e3,3)+.08,f=C*l,(p=.65*u*(c/o)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Yo(f),"<0")),p<=0&&s.push("CSR".concat(Yo(p),"<=0")),v<0&&(s.push("FS".concat(Yo(v),"<0，強制改為0")),v=0),h())}},VS:{vsHBF:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.Vs,a=r.FC,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:ce(s,"; ")}}if(Qn(t)||(s.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(s.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return s.push("depth".concat(Yo(n),"非數字")),h();if((n=Zn(n))<0)return s.push("depth".concat(Yo(n),"<0")),h();if(!Qn(e))return s.push("Vs".concat(Yo(e),"非數字")),h();if((e=Zn(e))<0)return s.push("Vs".concat(Yo(e),"<0")),h();if(!Qn(a))return s.push("FC".concat(Yo(a),"非數字")),h();if((a=Zn(a))<0)return s.push("FC".concat(Yo(a),"<0")),h();if(!Qn(o))return s.push("svpDesign".concat(Yo(o),"非數字")),h();if((o=Zn(o))<0)return s.push("svpDesign".concat(Yo(o),"<0")),h();if(!Qn(c))return s.push("sv".concat(Yo(c),"非數字")),h();if((c=Zn(c))<0)return s.push("sv".concat(Yo(c),"<0")),h();if(!Qn(u))return s.push("PGA".concat(Yo(u),"非數字")),h();if((u=Zn(u))<0)return s.push("PGA".concat(Yo(u),"<0")),h();if(!Qn(i))return s.push("Mw".concat(Yo(i),"非數字")),h();if((i=Zn(i))<0)return s.push("Mw".concat(Yo(i),"<0")),h();var l=Math.pow(i/7.5,-3.3),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),w=1/Math.sqrt(o)*e;console.log("待確認此處svpDesign,Vs的單位");var g=(a<=10?1:29e-5*Math.pow(a,2)-.00355*a+1.00651)*(w-100);return g=Math.min(g,134.5),f=(w<=100?.09:.09+22e-5*g/(1-g/135))*l,(p=.65*u*(c/o)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Yo(f),"<0")),p<=0&&s.push("CSR".concat(Yo(p),"<=0")),v<0&&(s.push("FS".concat(Yo(v),"<0，強制改為0")),v=0),h())},vsAndrus:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.Vs,a=r.FC,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:ce(s,"; ")}}if(Qn(t)||(s.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(s.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return s.push("depth".concat(Yo(n),"非數字")),h();if((n=Zn(n))<0)return s.push("depth".concat(Yo(n),"<0")),h();if(!Qn(e))return s.push("Vs".concat(Yo(e),"非數字")),h();if((e=Zn(e))<0)return s.push("Vs".concat(Yo(e),"<0")),h();if(!Qn(a))return s.push("FC".concat(Yo(a),"非數字")),h();if((a=Zn(a))<0)return s.push("FC".concat(Yo(a),"<0")),h();if(!Qn(o))return s.push("svpDesign".concat(Yo(o),"非數字")),h();if((o=Zn(o))<0)return s.push("svpDesign".concat(Yo(o),"<0")),h();if(!Qn(c))return s.push("sv".concat(Yo(c),"非數字")),h();if((c=Zn(c))<0)return s.push("sv".concat(Yo(c),"<0")),h();if(!Qn(u))return s.push("PGA".concat(Yo(u),"非數字")),h();if((u=Zn(u))<0)return s.push("PGA".concat(Yo(u),"<0")),h();if(!Qn(i))return s.push("Mw".concat(Yo(i),"非數字")),h();if((i=Zn(i))<0)return s.push("Mw".concat(Yo(i),"<0")),h();var l,d=Math.pow(i/7.5,-3.3),w=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),g=1/Math.sqrt(o)*e;console.log("待確認此處svpDesign,Vs的單位"),l=a<=5?215:a<=35?215-.5*(a-5):200;var b=.022*Math.pow(g/100,2)+2.8*(1/(l-g)-1/l);return b=Ya(b),f=b*d,(p=.65*u*(c/o)*w)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Yo(f),"<0")),p<=0&&s.push("CSR".concat(Yo(p),"<=0")),v<0&&(s.push("FS".concat(Yo(v),"<0，強制改為0")),v=0),h())},vsNCEER:function(r){var t=r.waterLevelDesign,n=r.depth,e=r.Vs,a=r.FC,o=r.svpDesign,c=r.sv,u=r.PGA,i=r.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:ce(s,"; ")}}if(Qn(t)||(s.push("waterLevelDesign".concat(Yo(t),"非數字，強制預設為0(m)")),t=0),(t=Zn(t))<0&&(s.push("waterLevelDesign".concat(Yo(t),"<0，強制預設為0(m)")),t=0),!Qn(n))return s.push("depth".concat(Yo(n),"非數字")),h();if((n=Zn(n))<0)return s.push("depth".concat(Yo(n),"<0")),h();if(!Qn(e))return s.push("Vs".concat(Yo(e),"非數字")),h();if((e=Zn(e))<0)return s.push("Vs".concat(Yo(e),"<0")),h();if(!Qn(a))return s.push("FC".concat(Yo(a),"非數字")),h();if((a=Zn(a))<0)return s.push("FC".concat(Yo(a),"<0")),h();if(!Qn(o))return s.push("svpDesign".concat(Yo(o),"非數字")),h();if((o=Zn(o))<0)return s.push("svpDesign".concat(Yo(o),"<0")),h();if(!Qn(c))return s.push("sv".concat(Yo(c),"非數字")),h();if((c=Zn(c))<0)return s.push("sv".concat(Yo(c),"<0")),h();if(!Qn(u))return s.push("PGA".concat(Yo(u),"非數字")),h();if((u=Zn(u))<0)return s.push("PGA".concat(Yo(u),"<0")),h();if(!Qn(i))return s.push("Mw".concat(Yo(i),"非數字")),h();if((i=Zn(i))<0)return s.push("Mw".concat(Yo(i),"<0")),h();var l,d=Math.pow(i/7.5,-3.3),w=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),g=1/Math.sqrt(o)*e;console.log("待確認此處svpDesign的單位"),l=a<=5?220:a<=35?210:200;var b=.03*Math.pow(g/100,2)+.9*(1/(l-g)-1/l);return b=Ya(b),f=b*d,(p=.65*u*(c/o)*w)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Yo(f),"<0")),p<=0&&s.push("CSR".concat(Yo(p),"<=0")),v<0&&(s.push("FS".concat(Yo(v),"<0，強制改為0")),v=0),h())}}};var tc={mLiques:rc,mSettls:{SPT:{sptVolumetricStrainTokimatsuAndSeed:Jo,sptVolumetricStrainIshiharaAndYoshimine:Xo}},calc:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1?arguments[1]:void 0;function n(r){var t=it(r,0,[]);return J(t)}function e(r){if("spt"===Ao(r,3))return"SPT";if("cpt"===Ao(r,3))return"CPT";if("vs"===Ao(r,2))return"VS";throw new Error("無法判斷分析種類: ".concat(r))}function a(r){var t=n(r),a="";return Z(t,(function(r){if(r.indexOf("-FS")>=0)return a=e(r),!1})),a}function o(r,t,n){return t=Zn(t),n=Zn(n),r=xe(r,(function(r,e){var a=it(r,"err","");r.waterLevelUsual=t,r.waterLevelDesign=n;var o=it(r,"depthStart",null),c=it(r,"depthEnd",null);if(Qn(o)&&Qn(c)){var u=((o=Zn(o))+(c=Zn(c)))/2;r.depth=u}else r.depth="";var i=it(r,"e",null),s=it(r,"GS",null),f=De(it(r,"rd",null),it(r,"rsat",null),s,i);return it(f,"err")&&(""===a?a=f.err:a.indexOf(f.err)<0&&(a+=", ".concat(f.err)),r.err=a),se(f.rd)?r.rd=f.rd:r.rd="",se(f.rsat)?r.rsat=f.rsat:r.rsat="",se(f.GS)?r.GS=f.GS:r.GS="",se(f.e)?r.e=f.e:r.e="",r}))}function c(r,t,n,e){return e=o(e,t=Zn(t),n=Zn(n)),"SPT"===r?e=qa(e,{waterLevelUsual:t,waterLevelDesign:n}):"CPT"===r?console.log("尚未建構CPT自動計算參數"):"VS"===r&&console.log("尚未建構VS自動計算參數"),e}function u(r,t){return t=wa(t),Z(rc[r],(function(r,n){var e=r(t);Z(e,(function(r,e){t["".concat(n,"-").concat(e)]=r}))})),t}function i(r){var t=n(r=wa(r));return Z(t,(function(t){if(t.indexOf("-FS")>=0){var n=t.replace("-FS",""),e=0;r=xe(r,(function(r,a){if(Qn(r.depthStart)&&Qn(r.depthEnd)&&Qn(r.depth)&&Qn(r[t])){var o=Zn(r.depthStart),c=Zn(r.depthEnd),u=Zn(r.depth),i=Zn(r[t]),s=1-Math.min(Math.max(i,0),1);e+=s*(10-.5*u)*(c-o)}return r["".concat(n,"-PL")]=e,r}))}})),r}function s(r){var t=n(r=wa(r));return Z(t,(function(t){if(t.indexOf("-vstr")>=0){var n=Mo(t,"-vstr"),e=it(n,0,""),a=it(n,1,""),o=0;r=xe(r,(function(r,n){if(Qn(r.depthStart)&&Qn(r.depthEnd)&&Qn(r[t])){var c=Zn(r.depthStart),u=Zn(r.depthEnd),i=Zn(r[t])/100;o+=i*(u-c)}return r["".concat(e,"-stl").concat(a)]=o,r}))}})),r}if(!Kn(r))throw new Error("kind(分析種類)非字串");if("SPT"!==r&&"CPT"!==r&&"VS"!==r&&"auto"!==r)throw new Error("kind(分析種類)".concat(Yo(r),"非有效值: SPT, CPT, VS, auto"));if(0===La(t))throw new Error("無有效數據");var f=ae(t);if(La(f)>0)throw new Error(ce(f,", "));t=wa(t);var p=it(t,"0.waterLevelUsual",0),v=it(t,"0.waterLevelDesign",0);return"auto"===r&&(r=a(t)),t=c(r,p,v,t),t=s(t=i(t=xe(t,(function(t,n){return u(r,t)})))),t=xe(t,(function(t){var n={},e=wo(r),a=La(e);return Z(t,(function(r,t){Ao(t,a)!==e&&(n[t]=r)})),Z(rc[r],(function(r,e){var a=La(e),o="",c="";Z(t,(function(r,t){Ao(t,a)===e&&("-err"===Ro(t,4)?(o=t,c=r):n[t]=r)})),""!==o&&(n[o]=c)})),n}))}};return{cnst:r,checkDepthStartEnd:ae,relaPorousParams:De,calcVerticalStress:qa,calcDepthStartEndFromCenter:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(!ee(r))throw new Error("無有效資料");var e=it(t,"keyDepth");Kn(e)||(e="depth");var a=it(t,"keyDepthStart");Kn(a)||(a="depthStart");var o=it(t,"keyDepthEnd");Kn(o)||(o="depthEnd");var c=it(t,"depthEndMax");if(c=Qn(c)?Zn(c):null,r=wa(r),Z(r,(function(r,t){var a=it(r,e,null);Qn(a)||n.push("第 ".concat(t," 樣本中點深度").concat(e,"[").concat(a,"]非有效數字"))})),La(n)>0)throw new Error(ce(n,"; "));if(r=kn(r,(function(r){return Zn(r[e])})),Z(r,(function(t,a){if(0===a)return!0;var o=it(r,"".concat(a-1,".").concat(e),null),c=it(t,e,null);(o=Zn(o))>=(c=Zn(c))&&n.push("第 ".concat(a-1," 樣本之中點深度").concat(e,"[").concat(o,"]大於等於第 ").concat(a," 樣本之中點深度").concat(e,"[").concat(c,"]"))})),La(n)>0)throw new Error(ce(n,"; "));var u=La(r)-1;if(r=xe(r,(function(t,n){var c=it(r,n-1),i=t,s=it(r,n+1),f=it(c,e,null),p=it(i,e,null),v=it(s,e,null),h=null;if(0===n){if(h=0,!Qn(p))throw new Error("dc1 is not a number");p=Zn(p),h=Math.min(h,p)}else{if(!Qn(f)||!Qn(p))throw new Error("unexpected error: invalid ds");h=((f=Zn(f))+(p=Zn(p)))/2}var l=null;if(n===u){if(!Qn(p))throw new Error("dc1 is not a number");l=Zn(p)}else{if(!Qn(p)||!Qn(v))throw new Error("unexpected error: invalid de");l=((p=Zn(p))+(v=Zn(v)))/2}return t[a]=h,t[o]=l,t})),se(c)){var i=r[u],s=i[o];s<c&&(r[u][o]=c)}return r},calcLiquefaction:tc}}));
//# sourceMappingURL=w-geo.umd.js.map
