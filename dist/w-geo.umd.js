/*!
 * w-geo v1.0.16
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-geo"]=r()}(this,(function(){"use strict";var t={eps:1e-6,rw:9.81};var r=function(t,r){for(var n=-1,e=null==t?0:t.length;++n<e&&!1!==r(t[n],n,t););return t};var n=function(t){return function(r,n,e){for(var a=-1,u=Object(r),o=e(r),c=o.length;c--;){var i=o[t?c:++a];if(!1===n(u[i],i,u))break}return r}}();var e=function(t,r){for(var n=-1,e=Array(t);++n<t;)e[n]=r(n);return e};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t){var r={exports:{}};return t(r,r.exports),r.exports}var c="object"==a(u)&&u&&u.Object===Object&&u,i="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,s=c||i||Function("return this")(),f=s.Symbol,p=Object.prototype,v=p.hasOwnProperty,h=p.toString,l=f?f.toStringTag:void 0;var d=function(t){var r=v.call(t,l),n=t[l];try{t[l]=void 0;var e=!0}catch(t){}var a=h.call(t);return e&&(r?t[l]=n:delete t[l]),a},g=Object.prototype.toString;var b=function(t){return g.call(t)},w=f?f.toStringTag:void 0;var y=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":w&&w in Object(t)?d(t):b(t)};var S=function(t){return null!=t&&"object"==a(t)};var M=function(t){return S(t)&&"[object Arguments]"==y(t)},j=Object.prototype,_=j.hasOwnProperty,m=j.propertyIsEnumerable,C=M(function(){return arguments}())?M:function(t){return S(t)&&_.call(t,"callee")&&!m.call(t,"callee")},D=Array.isArray;var x=function(){return!1},A=o((function(t,r){var n=r&&!r.nodeType&&r,e=n&&t&&!t.nodeType&&t,a=e&&e.exports===n?s.Buffer:void 0,u=(a?a.isBuffer:void 0)||x;t.exports=u})),R=/^(?:0|[1-9]\d*)$/;var O=function(t,r){var n=a(t);return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&R.test(t))&&t>-1&&t%1==0&&t<r};var P=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1;var N=function(t){return S(t)&&P(t.length)&&!!F[y(t)]};var L=function(t){return function(r){return t(r)}},E=o((function(t,r){var n=r&&!r.nodeType&&r,e=n&&t&&!t.nodeType&&t,a=e&&e.exports===n&&c.process,u=function(){try{var t=e&&e.require&&e.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=u})),G=E&&E.isTypedArray,T=G?L(G):N,q=Object.prototype.hasOwnProperty;var k=function(t,r){var n=D(t),a=!n&&C(t),u=!n&&!a&&A(t),o=!n&&!a&&!u&&T(t),c=n||a||u||o,i=c?e(t.length,String):[],s=i.length;for(var f in t)!r&&!q.call(t,f)||c&&("length"==f||u&&("offset"==f||"parent"==f)||o&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||O(f,s))||i.push(f);return i},I=Object.prototype;var U=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||I)};var z=function(t,r){return function(n){return t(r(n))}},V=z(Object.keys,Object),B=Object.prototype.hasOwnProperty;var Y=function(t){if(!U(t))return V(t);var r=[];for(var n in Object(t))B.call(t,n)&&"constructor"!=n&&r.push(n);return r};var $=function(t){var r=a(t);return null!=t&&("object"==r||"function"==r)};var W=function(t){if(!$(t))return!1;var r=y(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r};var H=function(t){return null!=t&&P(t.length)&&!W(t)};var J=function(t){return H(t)?k(t):Y(t)};var X=function(t,r){return function(n,e){if(null==n)return n;if(!H(n))return t(n,e);for(var a=n.length,u=r?a:-1,o=Object(n);(r?u--:++u<a)&&!1!==e(o[u],u,o););return n}}((function(t,r){return t&&n(t,r,J)}));var K=function(t){return t};var Q=function(t){return"function"==typeof t?t:K};var Z=function(t,n){return(D(t)?r:X)(t,Q(n))};var tt=function(t){return"symbol"==a(t)||S(t)&&"[object Symbol]"==y(t)},rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/;var et,at=function(t,r){if(D(t))return!1;var n=a(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!tt(t))||(nt.test(t)||!rt.test(t)||null!=r&&t in Object(r))},ut=s["__core-js_shared__"],ot=(et=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+et:"";var ct=function(t){return!!ot&&ot in t},it=Function.prototype.toString;var st=function(t){if(null!=t){try{return it.call(t)}catch(t){}try{return t+""}catch(t){}}return""},ft=/^\[object .+?Constructor\]$/,pt=Function.prototype,vt=Object.prototype,ht=pt.toString,lt=vt.hasOwnProperty,dt=RegExp("^"+ht.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var gt=function(t){return!(!$(t)||ct(t))&&(W(t)?dt:ft).test(st(t))};var bt=function(t,r){return null==t?void 0:t[r]};var wt=function(t,r){var n=bt(t,r);return gt(n)?n:void 0},yt=wt(Object,"create");var St=function(){this.__data__=yt?yt(null):{},this.size=0};var Mt=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},jt=Object.prototype.hasOwnProperty;var _t=function(t){var r=this.__data__;if(yt){var n=r[t];return"__lodash_hash_undefined__"===n?void 0:n}return jt.call(r,t)?r[t]:void 0},mt=Object.prototype.hasOwnProperty;var Ct=function(t){var r=this.__data__;return yt?void 0!==r[t]:mt.call(r,t)};var Dt=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yt&&void 0===r?"__lodash_hash_undefined__":r,this};function xt(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}xt.prototype.clear=St,xt.prototype.delete=Mt,xt.prototype.get=_t,xt.prototype.has=Ct,xt.prototype.set=Dt;var At=xt;var Rt=function(){this.__data__=[],this.size=0};var Ot=function(t,r){return t===r||t!=t&&r!=r};var Pt=function(t,r){for(var n=t.length;n--;)if(Ot(t[n][0],r))return n;return-1},Ft=Array.prototype.splice;var Nt=function(t){var r=this.__data__,n=Pt(r,t);return!(n<0)&&(n==r.length-1?r.pop():Ft.call(r,n,1),--this.size,!0)};var Lt=function(t){var r=this.__data__,n=Pt(r,t);return n<0?void 0:r[n][1]};var Et=function(t){return Pt(this.__data__,t)>-1};var Gt=function(t,r){var n=this.__data__,e=Pt(n,t);return e<0?(++this.size,n.push([t,r])):n[e][1]=r,this};function Tt(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}Tt.prototype.clear=Rt,Tt.prototype.delete=Nt,Tt.prototype.get=Lt,Tt.prototype.has=Et,Tt.prototype.set=Gt;var qt=Tt,kt=wt(s,"Map");var It=function(){this.size=0,this.__data__={hash:new At,map:new(kt||qt),string:new At}};var Ut=function(t){var r=a(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var zt=function(t,r){var n=t.__data__;return Ut(r)?n["string"==typeof r?"string":"hash"]:n.map};var Vt=function(t){var r=zt(this,t).delete(t);return this.size-=r?1:0,r};var Bt=function(t){return zt(this,t).get(t)};var Yt=function(t){return zt(this,t).has(t)};var $t=function(t,r){var n=zt(this,t),e=n.size;return n.set(t,r),this.size+=n.size==e?0:1,this};function Wt(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}Wt.prototype.clear=It,Wt.prototype.delete=Vt,Wt.prototype.get=Bt,Wt.prototype.has=Yt,Wt.prototype.set=$t;var Ht=Wt;function Jt(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var n=function n(){var e=arguments,a=r?r.apply(this,e):e[0],u=n.cache;if(u.has(a))return u.get(a);var o=t.apply(this,e);return n.cache=u.set(a,o)||u,o};return n.cache=new(Jt.Cache||Ht),n}Jt.Cache=Ht;var Xt=Jt;var Kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qt=/\\(\\)?/g,Zt=function(t){var r=Xt(t,(function(t){return 500===n.size&&n.clear(),t})),n=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Kt,(function(t,n,e,a){r.push(e?a.replace(Qt,"$1"):n||t)})),r}));var tr=function(t,r){for(var n=-1,e=null==t?0:t.length,a=Array(e);++n<e;)a[n]=r(t[n],n,t);return a},rr=f?f.prototype:void 0,nr=rr?rr.toString:void 0;var er=function t(r){if("string"==typeof r)return r;if(D(r))return tr(r,t)+"";if(tt(r))return nr?nr.call(r):"";var n=r+"";return"0"==n&&1/r==-Infinity?"-0":n};var ar=function(t){return null==t?"":er(t)};var ur=function(t,r){return D(t)?t:at(t,r)?[t]:Zt(ar(t))};var or=function(t){if("string"==typeof t||tt(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r};var cr=function(t,r){for(var n=0,e=(r=ur(r,t)).length;null!=t&&n<e;)t=t[or(r[n++])];return n&&n==e?t:void 0};var ir=function(t,r,n){var e=null==t?void 0:cr(t,r);return void 0===e?n:e},sr=/\s/;var fr=function(t){for(var r=t.length;r--&&sr.test(t.charAt(r)););return r},pr=/^\s+/;var vr=function(t){return t?t.slice(0,fr(t)+1).replace(pr,""):t},hr=/^[-+]0x[0-9a-f]+$/i,lr=/^0b[01]+$/i,dr=/^0o[0-7]+$/i,gr=parseInt;var br=function(t){if("number"==typeof t)return t;if(tt(t))return NaN;if($(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=$(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=vr(t);var n=lr.test(t);return n||dr.test(t)?gr(t.slice(2),n?2:8):hr.test(t)?NaN:+t},wr=1/0;var yr=function(t){return t?(t=br(t))===wr||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};function Sr(t){return"[object String]"===Object.prototype.toString.call(t)}function Mr(t){return!(!Sr(t)||""===t)}function jr(t){var r=!1;return Mr(t)?r=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(r=!0),r}function _r(t){return jr(t)?yr(t):0}function mr(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],e=ir(r,"keyDepthStart");Mr(e)||(e="depthStart");var a=ir(r,"keyDepthEnd");return Mr(a)||(a="depthEnd"),Z(t,(function(t,r){var u=ir(t,e,null),o=ir(t,a,null);jr(u)||n.push("第 ".concat(r," 樣本起始depthStart[").concat(u,"]深度非有效數字")),jr(o)||n.push("第 ".concat(r," 樣本結束depthEnd[").concat(o,"]深度非有效數字"))})),Z(t,(function(r,u){if(0===u)return!0;var o=ir(t,u-1),c=r,i=ir(o,a,null),s=ir(c,e,null),f=i===s,p=_r(i)===_r(s);f||p||n.push("第 ".concat(u," 樣本結束深度depthEnd[").concat(i,"]不等於第 ").concat(u+1," 個樣本起始深度depthStart[").concat(s,"]"))})),n}var Cr=Array.prototype.join;var Dr=function(t,r){return null==t?"":Cr.call(t,r)};var xr=function(t,r){return tr(r,(function(r){return t[r]}))};var Ar=function(t){return null==t?[]:xr(t,J(t))};var Rr=function(t){return"number"==typeof t||S(t)&&"[object Number]"==y(t)};var Or=function(t){return!0===t||!1===t||S(t)&&"[object Boolean]"==y(t)};function Pr(t){return Or(t)}function Fr(t){return"[object Object]"===Object.prototype.toString.call(t)}function Nr(t){if(Fr(t)){for(var r in t)return!0;return!1}return!1}var Lr=t.rw;function Er(t,r){return t*Lr/(1+r)}function Gr(t,r){return t-r*Lr/(1+r)}function Tr(t,r){return(t-Lr)*r/(r-1)}function qr(t,r){return(t+r)*Lr/(1+r)}function kr(t,r){return t+r*Lr/(1+r)}function Ir(t,r){return t*(r-1)/r+Lr}function Ur(t,r){return(t*Lr-r)/r}function zr(t,r){return(t-r)/(r-Lr-t)}function Vr(t,r){return(t*Lr-r)/(r-Lr)}function Br(t,r){return t*(1+r)/Lr}function Yr(t,r){return t/(t-(r-Lr))}function $r(t,r){return(t+t*r-r*Lr)/Lr}function Wr(t,r,n,e){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u={},o=ir(a,"returnFuncs");function c(){var a,o,c,i,s=!1;return!Rr(a)&&Rr(n)&&Rr(e)&&(a=Er(n,e)),!Rr(a)&&Rr(r)&&Rr(e)&&(a=Gr(r,e)),!Rr(a)&&Rr(r)&&Rr(n)&&1!==n&&(a=Tr(r,n)),Rr(t)?Math.abs(t-a)>a/100*5&&(u.ck_rd="輸入乾單位重[".concat(t,"]與反算出乾單位重[").concat(a,"]差距過大")):(t=a,s=!0),!Rr(o)&&Rr(n)&&Rr(e)&&(o=qr(n,e)),!Rr(o)&&Rr(t)&&Rr(e)&&(o=kr(t,e)),!Rr(o)&&Rr(t)&&Rr(n)&&(o=Ir(t,n)),Rr(r)?Math.abs(r-o)>o/100*5&&(u.ck_rsat="輸入飽和單位重[".concat(r,"]與反算出飽和單位重[").concat(o,"]差距過大")):(r=o,s=!0),!Rr(c)&&Rr(n)&&Rr(t)&&(c=Ur(n,t)),!Rr(c)&&Rr(r)&&Rr(t)&&r-Lr-t!=0&&(c=zr(t,r)),!Rr(c)&&Rr(r)&&Rr(n)&&r-Lr!=0&&(c=Vr(n,r)),Rr(e)?Math.abs(e-c)>c/100*5&&(u.ck_e="輸入孔隙比[".concat(e,"]與反算出孔隙比[").concat(c,"]差距過大")):(e=c,s=!0),!Rr(i)&&Rr(t)&&Rr(e)&&(i=Br(t,e)),!Rr(i)&&Rr(t)&&Rr(r)&&t-(r-Lr)!=0&&(i=Yr(t,r)),!Rr(i)&&Rr(r)&&Rr(e)&&(i=$r(r,e)),Rr(n)?Math.abs(n-i)>i/100*5&&(u.ck_GS="輸入比重[".concat(n,"]與反算出比重[").concat(i,"]差距過大")):(n=i,s=!0),s}Pr(o)||(o=!1),jr(t)?((t=_r(t))<=0&&(u.rd="乾單位重[".concat(t,"]為數字但<=0，自動清除")),t<=Lr&&(u.rd="乾單位重[".concat(t,"]<=水單位重[").concat(Lr,"]"))):t=null,jr(r)?((r=_r(r))<=0&&(u.rsat="飽和單位重[".concat(r,"]為數字但<=0，自動清除")),r<=Lr&&(u.rsat="飽和單位重[".concat(r,"]<=水單位重[").concat(Lr,"]"))):r=null,jr(n)?(n=_r(n))<=0&&(u.GS="比重[".concat(n,"]為數字但<=0，自動清除")):n=null,jr(e)?(e=_r(e))<=0&&(u.e="孔隙比[".concat(e,"]為數字但<=0，自動清除")):e=null;var i=0;if(i+=jr(t)?1:0,i+=jr(r)?1:0,i+=jr(n)?1:0,(i+=jr(e)?1:0)>=2)for(var s=c();s;)s=c();var f={rd:t,rsat:r,GS:n,e:e};if(Nr(u)){var p=Dr(Ar(u),", ");f.err=p}return o&&(f.coreFuncs={get_rd_from_GS_e:Er,get_rd_from_rsat_e:Gr,get_rd_from_rsat_GS:Tr,get_rsat_from_GS_e:qr,get_rsat_from_rd_e:kr,get_rsat_from_rd_GS:Ir,get_e_from_GS_rd:Ur,get_e_from_rd_rsat:zr,get_e_from_GS_rsat:Vr,get_GS_from_rd_e:Br,get_GS_from_rd_rsat:Yr,get_GS_from_rsat_e:$r}),f}var Hr=function(){this.__data__=new qt,this.size=0};var Jr=function(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n};var Xr=function(t){return this.__data__.get(t)};var Kr=function(t){return this.__data__.has(t)};var Qr=function(t,r){var n=this.__data__;if(n instanceof qt){var e=n.__data__;if(!kt||e.length<199)return e.push([t,r]),this.size=++n.size,this;n=this.__data__=new Ht(e)}return n.set(t,r),this.size=n.size,this};function Zr(t){var r=this.__data__=new qt(t);this.size=r.size}Zr.prototype.clear=Hr,Zr.prototype.delete=Jr,Zr.prototype.get=Xr,Zr.prototype.has=Kr,Zr.prototype.set=Qr;var tn=Zr;var rn=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var nn=function(t){return this.__data__.has(t)};function en(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new Ht;++r<n;)this.add(t[r])}en.prototype.add=en.prototype.push=rn,en.prototype.has=nn;var an=en;var un=function(t,r){for(var n=-1,e=null==t?0:t.length;++n<e;)if(r(t[n],n,t))return!0;return!1};var on=function(t,r){return t.has(r)};var cn=function(t,r,n,e,a,u){var o=1&n,c=t.length,i=r.length;if(c!=i&&!(o&&i>c))return!1;var s=u.get(t),f=u.get(r);if(s&&f)return s==r&&f==t;var p=-1,v=!0,h=2&n?new an:void 0;for(u.set(t,r),u.set(r,t);++p<c;){var l=t[p],d=r[p];if(e)var g=o?e(d,l,p,r,t,u):e(l,d,p,t,r,u);if(void 0!==g){if(g)continue;v=!1;break}if(h){if(!un(r,(function(t,r){if(!on(h,r)&&(l===t||a(l,t,n,e,u)))return h.push(r)}))){v=!1;break}}else if(l!==d&&!a(l,d,n,e,u)){v=!1;break}}return u.delete(t),u.delete(r),v},sn=s.Uint8Array;var fn=function(t){var r=-1,n=Array(t.size);return t.forEach((function(t,e){n[++r]=[e,t]})),n};var pn=function(t){var r=-1,n=Array(t.size);return t.forEach((function(t){n[++r]=t})),n},vn=f?f.prototype:void 0,hn=vn?vn.valueOf:void 0;var ln=function(t,r,n,e,a,u,o){switch(n){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!u(new sn(t),new sn(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ot(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var c=fn;case"[object Set]":var i=1&e;if(c||(c=pn),t.size!=r.size&&!i)return!1;var s=o.get(t);if(s)return s==r;e|=2,o.set(t,r);var f=cn(c(t),c(r),e,a,u,o);return o.delete(t),f;case"[object Symbol]":if(hn)return hn.call(t)==hn.call(r)}return!1};var dn=function(t,r){for(var n=-1,e=r.length,a=t.length;++n<e;)t[a+n]=r[n];return t};var gn=function(t,r,n){var e=r(t);return D(t)?e:dn(e,n(t))};var bn=function(t,r){for(var n=-1,e=null==t?0:t.length,a=0,u=[];++n<e;){var o=t[n];r(o,n,t)&&(u[a++]=o)}return u};var wn=function(){return[]},yn=Object.prototype.propertyIsEnumerable,Sn=Object.getOwnPropertySymbols,Mn=Sn?function(t){return null==t?[]:(t=Object(t),bn(Sn(t),(function(r){return yn.call(t,r)})))}:wn;var jn=function(t){return gn(t,J,Mn)},_n=Object.prototype.hasOwnProperty;var mn=function(t,r,n,e,a,u){var o=1&n,c=jn(t),i=c.length;if(i!=jn(r).length&&!o)return!1;for(var s=i;s--;){var f=c[s];if(!(o?f in r:_n.call(r,f)))return!1}var p=u.get(t),v=u.get(r);if(p&&v)return p==r&&v==t;var h=!0;u.set(t,r),u.set(r,t);for(var l=o;++s<i;){var d=t[f=c[s]],g=r[f];if(e)var b=o?e(g,d,f,r,t,u):e(d,g,f,t,r,u);if(!(void 0===b?d===g||a(d,g,n,e,u):b)){h=!1;break}l||(l="constructor"==f)}if(h&&!l){var w=t.constructor,y=r.constructor;w==y||!("constructor"in t)||!("constructor"in r)||"function"==typeof w&&w instanceof w&&"function"==typeof y&&y instanceof y||(h=!1)}return u.delete(t),u.delete(r),h},Cn=wt(s,"DataView"),Dn=wt(s,"Promise"),xn=wt(s,"Set"),An=wt(s,"WeakMap"),Rn="[object Map]",On="[object Promise]",Pn="[object Set]",Fn="[object WeakMap]",Nn="[object DataView]",Ln=st(Cn),En=st(kt),Gn=st(Dn),Tn=st(xn),qn=st(An),kn=y;(Cn&&kn(new Cn(new ArrayBuffer(1)))!=Nn||kt&&kn(new kt)!=Rn||Dn&&kn(Dn.resolve())!=On||xn&&kn(new xn)!=Pn||An&&kn(new An)!=Fn)&&(kn=function(t){var r=y(t),n="[object Object]"==r?t.constructor:void 0,e=n?st(n):"";if(e)switch(e){case Ln:return Nn;case En:return Rn;case Gn:return On;case Tn:return Pn;case qn:return Fn}return r});var In=kn,Un="[object Arguments]",zn="[object Array]",Vn="[object Object]",Bn=Object.prototype.hasOwnProperty;var Yn=function(t,r,n,e,a,u){var o=D(t),c=D(r),i=o?zn:In(t),s=c?zn:In(r),f=(i=i==Un?Vn:i)==Vn,p=(s=s==Un?Vn:s)==Vn,v=i==s;if(v&&A(t)){if(!A(r))return!1;o=!0,f=!1}if(v&&!f)return u||(u=new tn),o||T(t)?cn(t,r,n,e,a,u):ln(t,r,i,n,e,a,u);if(!(1&n)){var h=f&&Bn.call(t,"__wrapped__"),l=p&&Bn.call(r,"__wrapped__");if(h||l){var d=h?t.value():t,g=l?r.value():r;return u||(u=new tn),a(d,g,n,e,u)}}return!!v&&(u||(u=new tn),mn(t,r,n,e,a,u))};var $n=function t(r,n,e,a,u){return r===n||(null==r||null==n||!S(r)&&!S(n)?r!=r&&n!=n:Yn(r,n,e,a,t,u))};var Wn=function(t,r,n,e){var a=n.length,u=a,o=!e;if(null==t)return!u;for(t=Object(t);a--;){var c=n[a];if(o&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var i=(c=n[a])[0],s=t[i],f=c[1];if(o&&c[2]){if(void 0===s&&!(i in t))return!1}else{var p=new tn;if(e)var v=e(s,f,i,t,r,p);if(!(void 0===v?$n(f,s,3,e,p):v))return!1}}return!0};var Hn=function(t){return t==t&&!$(t)};var Jn=function(t){for(var r=J(t),n=r.length;n--;){var e=r[n],a=t[e];r[n]=[e,a,Hn(a)]}return r};var Xn=function(t,r){return function(n){return null!=n&&(n[t]===r&&(void 0!==r||t in Object(n)))}};var Kn=function(t){var r=Jn(t);return 1==r.length&&r[0][2]?Xn(r[0][0],r[0][1]):function(n){return n===t||Wn(n,t,r)}};var Qn=function(t,r){return null!=t&&r in Object(t)};var Zn=function(t,r,n){for(var e=-1,a=(r=ur(r,t)).length,u=!1;++e<a;){var o=or(r[e]);if(!(u=null!=t&&n(t,o)))break;t=t[o]}return u||++e!=a?u:!!(a=null==t?0:t.length)&&P(a)&&O(o,a)&&(D(t)||C(t))};var te=function(t,r){return null!=t&&Zn(t,r,Qn)};var re=function(t,r){return at(t)&&Hn(r)?Xn(or(t),r):function(n){var e=ir(n,t);return void 0===e&&e===r?te(n,t):$n(r,e,3)}};var ne=function(t){return function(r){return null==r?void 0:r[t]}};var ee=function(t){return function(r){return cr(r,t)}};var ae=function(t){return at(t)?ne(or(t)):ee(t)};var ue=function(t){return"function"==typeof t?t:null==t?K:"object"==a(t)?D(t)?re(t[0],t[1]):Kn(t):ae(t)};var oe=function(t,r){var n=-1,e=H(t)?Array(t.length):[];return X(t,(function(t,a,u){e[++n]=r(t,a,u)})),e};var ce=function(t,r){return(D(t)?tr:oe)(t,ue(r))},ie=function(){try{var t=wt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var se=function(t,r,n){"__proto__"==r&&ie?ie(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n},fe=Object.prototype.hasOwnProperty;var pe=function(t,r,n){var e=t[r];fe.call(t,r)&&Ot(e,n)&&(void 0!==n||r in t)||se(t,r,n)};var ve=function(t,r,n,e){var a=!n;n||(n={});for(var u=-1,o=r.length;++u<o;){var c=r[u],i=e?e(n[c],t[c],c,n,t):void 0;void 0===i&&(i=t[c]),a?se(n,c,i):pe(n,c,i)}return n};var he=function(t,r){return t&&ve(r,J(r),t)};var le=function(t){var r=[];if(null!=t)for(var n in Object(t))r.push(n);return r},de=Object.prototype.hasOwnProperty;var ge=function(t){if(!$(t))return le(t);var r=U(t),n=[];for(var e in t)("constructor"!=e||!r&&de.call(t,e))&&n.push(e);return n};var be=function(t){return H(t)?k(t,!0):ge(t)};var we=function(t,r){return t&&ve(r,be(r),t)},ye=o((function(t,r){var n=r&&!r.nodeType&&r,e=n&&t&&!t.nodeType&&t,a=e&&e.exports===n?s.Buffer:void 0,u=a?a.allocUnsafe:void 0;t.exports=function(t,r){if(r)return t.slice();var n=t.length,e=u?u(n):new t.constructor(n);return t.copy(e),e}}));var Se=function(t,r){var n=-1,e=t.length;for(r||(r=Array(e));++n<e;)r[n]=t[n];return r};var Me=function(t,r){return ve(t,Mn(t),r)},je=z(Object.getPrototypeOf,Object),_e=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)dn(r,Mn(t)),t=je(t);return r}:wn;var me=function(t,r){return ve(t,_e(t),r)};var Ce=function(t){return gn(t,be,_e)},De=Object.prototype.hasOwnProperty;var xe=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&De.call(t,"index")&&(n.index=t.index,n.input=t.input),n};var Ae=function(t){var r=new t.constructor(t.byteLength);return new sn(r).set(new sn(t)),r};var Re=function(t,r){var n=r?Ae(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Oe=/\w*$/;var Pe=function(t){var r=new t.constructor(t.source,Oe.exec(t));return r.lastIndex=t.lastIndex,r},Fe=f?f.prototype:void 0,Ne=Fe?Fe.valueOf:void 0;var Le=function(t){return Ne?Object(Ne.call(t)):{}};var Ee=function(t,r){var n=r?Ae(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Ge=function(t,r,n){var e=t.constructor;switch(r){case"[object ArrayBuffer]":return Ae(t);case"[object Boolean]":case"[object Date]":return new e(+t);case"[object DataView]":return Re(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ee(t,n);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(t);case"[object RegExp]":return Pe(t);case"[object Set]":return new e;case"[object Symbol]":return Le(t)}},Te=Object.create,qe=function(){function t(){}return function(r){if(!$(r))return{};if(Te)return Te(r);t.prototype=r;var n=new t;return t.prototype=void 0,n}}();var ke=function(t){return"function"!=typeof t.constructor||U(t)?{}:qe(je(t))};var Ie=function(t){return S(t)&&"[object Map]"==In(t)},Ue=E&&E.isMap,ze=Ue?L(Ue):Ie;var Ve=function(t){return S(t)&&"[object Set]"==In(t)},Be=E&&E.isSet,Ye=Be?L(Be):Ve,$e="[object Arguments]",We="[object Function]",He="[object Object]",Je={};Je[$e]=Je["[object Array]"]=Je["[object ArrayBuffer]"]=Je["[object DataView]"]=Je["[object Boolean]"]=Je["[object Date]"]=Je["[object Float32Array]"]=Je["[object Float64Array]"]=Je["[object Int8Array]"]=Je["[object Int16Array]"]=Je["[object Int32Array]"]=Je["[object Map]"]=Je["[object Number]"]=Je[He]=Je["[object RegExp]"]=Je["[object Set]"]=Je["[object String]"]=Je["[object Symbol]"]=Je["[object Uint8Array]"]=Je["[object Uint8ClampedArray]"]=Je["[object Uint16Array]"]=Je["[object Uint32Array]"]=!0,Je["[object Error]"]=Je[We]=Je["[object WeakMap]"]=!1;var Xe=function t(n,e,a,u,o,c){var i,s=1&e,f=2&e,p=4&e;if(a&&(i=o?a(n,u,o,c):a(n)),void 0!==i)return i;if(!$(n))return n;var v=D(n);if(v){if(i=xe(n),!s)return Se(n,i)}else{var h=In(n),l=h==We||"[object GeneratorFunction]"==h;if(A(n))return ye(n,s);if(h==He||h==$e||l&&!o){if(i=f||l?{}:ke(n),!s)return f?me(n,we(i,n)):Me(n,he(i,n))}else{if(!Je[h])return o?n:{};i=Ge(n,h,s)}}c||(c=new tn);var d=c.get(n);if(d)return d;c.set(n,i),Ye(n)?n.forEach((function(r){i.add(t(r,e,a,r,n,c))})):ze(n)&&n.forEach((function(r,u){i.set(u,t(r,e,a,u,n,c))}));var g=v?void 0:(p?f?Ce:jn:f?be:J)(n);return r(g||n,(function(r,u){g&&(r=n[u=r]),pe(i,u,t(r,e,a,u,n,c))})),i};var Ke=function(t){return Xe(t,5)};var Qe=function(t){return"string"==typeof t||!D(t)&&S(t)&&"[object String]"==y(t)},Ze=ne("length"),ta=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ra=function(t){return ta.test(t)},na="[\\ud800-\\udfff]",ea="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",aa="\\ud83c[\\udffb-\\udfff]",ua="[^\\ud800-\\udfff]",oa="(?:\\ud83c[\\udde6-\\uddff]){2}",ca="[\\ud800-\\udbff][\\udc00-\\udfff]",ia="(?:"+ea+"|"+aa+")"+"?",sa="[\\ufe0e\\ufe0f]?",fa=sa+ia+("(?:\\u200d(?:"+[ua,oa,ca].join("|")+")"+sa+ia+")*"),pa="(?:"+[ua+ea+"?",ea,oa,ca,na].join("|")+")",va=RegExp(aa+"(?="+aa+")|"+pa+fa,"g");var ha=function(t){for(var r=va.lastIndex=0;va.test(t);)++r;return r};var la=function(t){return ra(t)?ha(t):Ze(t)};var da=function(t){if(null==t)return 0;if(H(t))return Qe(t)?la(t):t.length;var r=In(t);return"[object Map]"==r||"[object Set]"==r?t.size:Y(t).length};function ga(t){return"[object Array]"===Object.prototype.toString.call(t)}function ba(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(Fr(t)){for(var r in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!Sr(t)||""!==t)}(t)||!!function(t){return!!ga(t)&&0===t.length}(t))))}function wa(t){return!!ga(t)&&(0!==t.length&&(1!==t.length||!ba(t[0])))}var ya=t.rw;function Sa(t,r){t=Ke(t);var n=0;return t=ce(t,(function(t,e){var a=ir(t,"err",""),u=ir(t,"depthStart",null),o=ir(t,"depthEnd",null);try{if(!jr(u))throw new Error("第 ".concat(e," 樣本起始深度(depthStart)非數值: ").concat(u));if(!jr(o))throw new Error("第 ".concat(e," 樣本結束深度(depthEnd)非數值: ").concat(o));u=_r(u),o=_r(o),t.zsv=(o+u)/2;var c=null;if(u<r&&o>r){var i=ir(t,"rsat",null);if(!jr(i))throw new Error("第 ".concat(e," 樣本飽和單位重(rsat)非數值: ").concat(i));var s=ir(t,"rd",null);if(!jr(s))throw new Error("第 ".concat(e," 樣本乾單位重(rd)非數值: ").concat(s));s=_r(s);var f=r-u,p=o-r;c=(f*s+p*i)/(f+p)}else if(o<=r){var v=ir(t,"rd",null);if(!jr(v))throw new Error("第 ".concat(e," 樣本乾單位重(rd)非數值: ").concat(v));c=v}else{if(!(u>=r))throw new Error("非預期情形");var h=ir(t,"rsat",null);if(!jr(h))throw new Error("第 ".concat(e," 樣本飽和單位重(rsat)非數值: ").concat(h));c=h}var l=c*(o-u),d=n+l/2;t.sv=d,n+=l;var g=Math.max((u+o)/2-r,0)*ya;t.svp=Math.max(d-g,0)}catch(r){var b=r.toString();""===a?a=b:a.indexOf(b)<0&&(a+=", ".concat(b)),t.sv="",t.svp="",t.err=a}return t}))}function Ma(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!wa(t=Ke(t)))throw new Error("樣本數據(rows)非有效陣列");var n=mr(t);if(da(n)>0)throw new Error(Dr(n,"; "));var e=ir(r,"waterLevelUsual");jr(e)||(e=0),e=_r(e);var a=ir(r,"waterLevelDesign");jr(a)||(a=0),a=_r(a);var u=Sa(t,e),o=Sa(t,a);return t=ce(t,(function(t,r){t.waterLevelUsual=e,t.waterLevelDesign=a;var n=u[r],c=o[r];return t.sv=n.sv,t.svpUsual=n.svp,t.svpDesign=c.svp,t.zsv=n.zsv,t}))}function ja(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _a(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function ma(t){return function(t){if(Array.isArray(t))return _a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return _a(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_a(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ca=function(t,r,n){for(var e=-1,a=t.length;++e<a;){var u=t[e],o=r(u);if(null!=o&&(void 0===c?o==o&&!tt(o):n(o,c)))var c=o,i=u}return i};var Da=function(t,r){return t<r};var xa=function(t){return t&&t.length?Ca(t,K,Da):void 0};var Aa=function(t,r){return t>r};var Ra=function(t){return t&&t.length?Ca(t,K,Aa):void 0};var Oa=function(t,r,n){var e=-1,a=t.length;r<0&&(r=-r>a?0:a+r),(n=n>a?a:n)<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(a);++e<a;)u[e]=t[e+r];return u};var Pa=function(t,r,n){var e=t.length;return n=void 0===n?e:n,!r&&n>=e?t:Oa(t,r,n)};var Fa=function(t,r,n,e){for(var a=t.length,u=n+(e?1:-1);e?u--:++u<a;)if(r(t[u],u,t))return u;return-1};var Na=function(t){return t!=t};var La=function(t,r,n){for(var e=n-1,a=t.length;++e<a;)if(t[e]===r)return e;return-1};var Ea=function(t,r,n){return r==r?La(t,r,n):Fa(t,Na,n)};var Ga=function(t,r){for(var n=t.length;n--&&Ea(r,t[n],0)>-1;);return n};var Ta=function(t,r){for(var n=-1,e=t.length;++n<e&&Ea(r,t[n],0)>-1;);return n};var qa=function(t){return t.split("")},ka="[\\ud800-\\udfff]",Ia="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ua="\\ud83c[\\udffb-\\udfff]",za="[^\\ud800-\\udfff]",Va="(?:\\ud83c[\\udde6-\\uddff]){2}",Ba="[\\ud800-\\udbff][\\udc00-\\udfff]",Ya="(?:"+Ia+"|"+Ua+")"+"?",$a="[\\ufe0e\\ufe0f]?",Wa=$a+Ya+("(?:\\u200d(?:"+[za,Va,Ba].join("|")+")"+$a+Ya+")*"),Ha="(?:"+[za+Ia+"?",Ia,Va,Ba,ka].join("|")+")",Ja=RegExp(Ua+"(?="+Ua+")|"+Ha+Wa,"g");var Xa=function(t){return t.match(Ja)||[]};var Ka=function(t){return ra(t)?Xa(t):qa(t)};var Qa=function(t,r,n){if((t=ar(t))&&(n||void 0===r))return vr(t);if(!t||!(r=er(r)))return t;var e=Ka(t),a=Ka(r),u=Ta(e,a),o=Ga(e,a)+1;return Pa(e,u,o).join("")};var Za=function(t){return ar(t).toLowerCase()};var tu=function(t,r,n){if(!$(n))return!1;var e=a(r);return!!("number"==e?H(n)&&O(r,n.length):"string"==e&&r in n)&&Ot(n[r],t)};var ru=function(t){return S(t)&&"[object RegExp]"==y(t)},nu=E&&E.isRegExp,eu=nu?L(nu):ru;var au=function(t,r,n){return n&&"number"!=typeof n&&tu(t,r,n)&&(r=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ar(t))&&("string"==typeof r||null!=r&&!eu(r))&&!(r=er(r))&&ra(t)?Pa(Ka(t),0,n):t.split(r,n):[]};var uu=function(t){var r=yr(t),n=r%1;return r==r?n?r-n:r:0},ou=s.isFinite,cu=Math.min;var iu=function(t){var r=Math[t];return function(t,n){if(t=br(t),(n=null==n?0:cu(uu(n),292))&&ou(t)){var e=(ar(t)+"e").split("e"),a=r(e[0]+"e"+(+e[1]+n));return+((e=(ar(a)+"e").split("e"))[0]+"e"+(+e[1]-n))}return r(t)}}("round");function su(t){if(!jr(t))return 0;t=_r(t);var r=iu(t);return"0"===String(r)?0:r}var fu=function(t){return"number"==typeof t&&t==uu(t)};function pu(t){return!!function(t){return!!jr(t)&&(t=_r(t),fu(t))}(t)&&su(t)>0}function vu(t,r){return Mr(t)&&pu(r)?t.substr(0,r):""}function hu(t,r){if(!Mr(t))return"";if(!pu(r))return"";var n=t.length-r;return n<0&&(n=0),t.substr(n,r)}function lu(t){return Mr(t)||jr(t)?String(t):""}var du=Array.prototype.reverse;var gu=function(t){return null==t?t:du.call(t)},bu="in x-range",wu="out of x-range",yu="order list",Su="reverse order list";function Mu(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(da(t)<=0)return[];var n=ir(r,"keyX");Mr(n)||(n="x");var e=ir(r,"keyY");Mr(e)||(e="y");var a=[];return Z(t,(function(t){var r=null,u=null;ga(t)&&da(t)>=2?(r=ir(t,0),u=ir(t,1)):(r=ir(t,n,null),u=ir(t,e,null)),jr(r)&&jr(u)&&(r=br(r),u=br(u),a.push({x:r,y:u}))})),a}function ju(t){for(var r=!0,n=!0,e=1;e<da(t);e++){var a=t[e-1],u=t[e];if(r&&a.x>u.x&&(r=!1),n&&a.x<u.x&&(n=!1),a.x===u.x)return{err:"x can not be equal: i=".concat(e,", x=").concat(a.x)}}return r?yu:n?Su:"no"}function _u(t,r){var n,e;return n=t[0].x,e=t[da(t)-1].x,r<n?{err:wu,msg:"x[".concat(r,"] less than lower limit[").concat(n,"]"),data:{ps:t,x:r,xmin:n,xmax:e}}:r>e?{err:wu,msg:"x[".concat(r,"] greater than upper limit[").concat(e,"]"),data:{ps:t,x:r,xmin:n,xmax:e}}:bu}function mu(t,r){var n=_u(t,r);if(n!==bu)return n;for(var e=null,a=1;a<da(t);a++){var u=t[a-1],o=t[a];if(u.x<=r&&r<=o.x){e=((r-u.x)*o.y+(o.x-r)*u.y)/(o.x-u.x);break}}return null===e?{err:wu}:e}function Cu(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=ir(n,"xMin");if(Rr(e)){if(e>t[0].x)return{err:"xMin=".concat(e," > ps[0].x=").concat(t[0].x)};if(e===t[0].x);else{var a={x:e,y:t[0].y};t=[a].concat(ma(t))}}var u=ir(n,"xMax");if(Rr(u)){if(u<t[da(t)-1].x)return{err:"xMax=".concat(u," < ps[size(ps)-1].x=").concat(t[da(t)-1].x)};if(u===t[da(t)-1].x);else{var o={x:u,y:t[da(t)-1].y};t=[].concat(ma(t),[o])}}var c=_u(t,r);if(c!==bu)return c;for(var i=null,s=0;s<da(t);s++){var f=ir(t,s-1,null),p=ir(t,s,null),v=ir(t,s+1,null),h=p.x;f&&(h=(f.x+p.x)/2);var l=p.x;if(v&&(l=(v.x+p.x)/2),h<=r&&r<=l){i=p.y;break}}return null===i?{err:wu}:i}function Du(t,r){var n=_u(t,r);if(n!==bu)return n;for(var e=null,a=1;a<da(t);a++){var u=t[a-1],o=t[a],c=u.x,i=o.x;if(c<=r&&r<=i){e=o.y;break}}return null===e?{err:wu}:e}function xu(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,e)}return n}function Au(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?xu(Object(n),!0).forEach((function(r){ja(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xu(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}function Ru(t){var r=Qa(lu(t));return""!==r?"[".concat(r,"]"):""}function Ou(t){var r=vu(t,1),n=vu(t,2);return"C"===r||"O"===r||"P"===r||"M"===r&&"ML"!==n&&"MH"!==n}function Pu(t,r,n){if(da(t)<=0)return{err:"invalid vx"};if(da(r)<=0)return{err:"invalid vy"};if(da(t)!==da(r))return{err:"size of vx is not equal to size of vy"};var e=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!ga(t))return{err:"ps is not array"};if(!Rr(r))return{err:"x is not number"};var e=Mu(t,n);if(ir(e,"err"))return ir(e,"err");if(0===da(e))return{err:"ps(length=0) is not effective array",ps:t,psEff:e};if(1===da(e))return{err:"ps(length=1) is one point only",ps:t,psEff:e};var a=ju(e);if("no"===a)return{err:"psEff is not increasing or decreasing"};a===Su&&(a=yu,e=gu(e));var u=ir(n,"mode");"linear"!==u&&"stairs"!==u&&"blocks"!==u&&(u="linear");try{if("linear"===u)return mu(e,r);if("blocks"===u)return Du(e,r);if("stairs"===u)return Cu(e,r,n)}catch(t){return{err:t.toString()}}}(ce(t,(function(n,e){return{x:t[e],y:r[e]}})),n);return e.err&&"ps is not effective array"===e.err&&(e.err="無有效數據"),e}function Fu(t,r,n){return((n-t.x)*r.y+(r.x-n)*t.y)/(r.x-t.x)}function Nu(t,r){var n=[],e=[{volumetricStrain:10,data:[[1.15304,.6],[1.10234,.0413661],[1.10234,.0348459],[1.04383,.0253621],[.956072,.0161746],[.722041,.0093581],[0,0]]},{volumetricStrain:5,data:[[3.00384,.6],[2.97459,.0591482],[2.94533,.0523317],[2.82832,.0431443],[2.56503,.0348459],[2.12623,.0253621],[1.21936,.0126182],[0,0]]},{volumetricStrain:4,data:[[5.11012,.6],[5.11012,.111606],[5.05161,.103604],[5.02236,.0947126],[4.87609,.0849324],[4.72982,.0754486],[4.52504,.0656684],[4.20325,.0579628],[3.82295,.0499608],[3.32563,.0407733],[2.53578,.0286221],[1.5704,.0161746],[0,0]]},{volumetricStrain:3,data:[[7.68446,.6],[7.53819,.234896],[7.53819,.212964],[7.50893,.191033],[7.39192,.165249],[7.33341,.142428],[7.24565,.125831],[7.07012,.111013],[6.8946,.09738],[6.66057,.0887852],[6.45579,.0804869],[6.07549,.0730776],[5.66594,.0665575],[5.28564,.0606301],[4.75907,.0523317],[4.08623,.043737],[0,0]]},{volumetricStrain:2,data:[[14.1203,.6],[14.091,.248529],[13.974,.231043],[13.7985,.216521],[13.6815,.201702],[13.3597,.184513],[13.2134,.173843],[13.0087,.16347],[12.7161,.152208],[12.131,.139168],[11.546,.12761],[10.8439,.116644],[0,0]]},{volumetricStrain:1,data:[[27.5771,.6],[27.5771,.541935],[27.6063,.507852],[27.5478,.485625],[27.5186,.465471],[27.5186,.445022],[27.4893,.424869],[27.3723,.41005],[27.1675,.392268],[26.9335,.376264],[26.5532,.357889],[26.2021,.339514],[25.7048,.324399],[25.1783,.311655],[24.6224,.298022],[23.9496,.282908],[23.2182,.269571],[22.4576,.256531],[21.7556,.244676],[20.8779,.232525],[19.9126,.218892],[0,0]]},{volumetricStrain:.5,data:[[33.0183,.6],[33.0183,.570979],[32.9598,.554086],[32.9013,.536007],[32.6965,.516743],[32.5502,.500147],[32.3747,.482068],[32.0529,.464582],[31.6726,.445022],[31.3216,.425461],[30.9998,.410939],[30.5025,.394935],[29.9466,.376264],[29.3908,.356704],[28.3962,.335958],[27.1383,.313137],[25.5586,.287057],[23.7156,.261865],[21.8141,.238452],[19.7078,.212964],[0,0]]},{volumetricStrain:.2,data:[[35.4,.6],[35.3,.574535],[35.1,.555864],[34.9,.539267],[34.6,.515558],[34.3,.497183],[34,.477919],[33.4544,.455691],[33,.434353],[32.6087,.415385],[31.8774,.397306],[30.8242,.369151],[30.0051,.348998],[29.069,.327067],[28.1329,.308099],[27.1383,.291799],[25.8218,.271349],[24.3884,.252974],[23.2768,.237859],[21.8726,.220373],[19.9711,.200517],[18.5961,.186291],[17.1627,.170583],[15.583,.154876],[14.3543,.14065],[12.8331,.124942],[10.7269,.103307],[8.59132,.081376],[6.39729,.0612228],[4.17399,.0389951],[2.15548,.0188419],[0,0]]},{volumetricStrain:.1,data:[[36.7,.6],[36.5,.571572],[36.2,.544602],[35.8,.520596],[35.4,.490366],[35,.466657],[34.6,.446207],[34.2,.424869],[33.5,.404419],[32.7,.379228],[32,.358482],[30.9998,.331809],[29.5956,.305432],[28.0159,.278758],[26.9335,.262162],[25.266,.238156],[23.2768,.214446],[21.2875,.192515],[19.0642,.170583],[16.8117,.149541],[14.5006,.129684],[12.2481,.108938],[10.0248,.0881925],[7.77222,.0671502],[5.63669,.0472934],[4.70056,.038106],[3.23787,.0259548],[2.38951,.0194347],[.926818,.00669077],[0,0]]}];e=ce(e,(function(t){var r=ce(t.data,(function(t){return t[1]})),n=ce(t.data,(function(t){return t[0]}));return t.vx=r,t.vy=n,t}));var a=ce(e,"volumetricStrain"),u=ce(e,(function(t){var n=Pu(t.vx,t.vy,r);return ir(n,"err")?n.err:n})),o=Pu(u,a,t);if(ir(o,"err"))if("out of x-range"===o.err){var c=o.data.ps,i=Ra(u),s=xa(u);if(t>i){var f=c[da(c)-1].y;n.push("出現外插情形 N160=".concat(t," > N160Max=").concat(i,"，依照CSR=").concat(r,"並給予最小體積應變vstr=").concat(f,"%")),o=f}else if(t<s){var p=Fu(c[0],c[1],t);n.push("出現外插情形 N160=".concat(t," < N160Min=").concat(s,"，依照CSR=").concat(r,"並依據最近2點外插體積應變vstr=").concat(p,"%")),o=p}else n.push("非預期外插情形，請洽開發者修復問題"),o=""}else n.push(o.err),o="";return{err:n,vstr:o}}function Lu(t,r){var n=[],e=[{N172:3,data:[[0,5.48516],[.791714,5.48516],[.889946,5.48274],[.957602,5.47549],[.972564,5.43681],[.981021,5.37154],[.982973,4.71396],[.984274,4.17243],[.985575,3.45201],[.988177,2.61312],[.992081,2.25532],[.996634,1.94104],[1.00379,1.68961],[1.01095,1.54214],[1.02981,1.32698],[1.04347,1.16501],[1.06624,1.00303],[1.09096,.879735],[1.11503,.773363],[1.1391,.703254],[1.17944,.616222],[1.23018,.529191],[1.28873,.444576],[1.35378,.384138],[1.41558,.333369],[1.48064,.275348],[1.5548,.231832],[2,0]]},{N172:6,data:[[0,4.51524],[.789554,4.51524],[.890726,4.51176],[.938502,4.49784],[.957238,4.45954],[.960985,4.31681],[.962858,3.76677],[.964732,3.36294],[.966605,2.92778],[.971289,2.57618],[.97691,2.27679],[.980657,2.07487],[.990962,1.85903],[1.00314,1.57705],[1.01813,1.35773],[1.03686,1.18367],[1.05935,1.02005],[1.08089,.88428],[1.09401,.818136],[1.13148,.696291],[1.17082,.60926],[1.22367,.517103],[1.28287,.437324],[1.34597,.376885],[1.40778,.323699],[1.47673,.268096],[1.55154,.222162],[2,0]]},{N172:10,data:[[0,3.50567],[.738969,3.50567],[.841077,3.50219],[.896347,3.49523],[.912272,3.43953],[.919767,3.34206],[.928198,3.02874],[.938502,2.64928],[.94787,2.29419],[.961922,1.9774],[.972226,1.74763],[.989088,1.50743],[1.00876,1.28811],[1.03031,1.11404],[1.05466,.953905],[1.08745,.807692],[1.12398,.682366],[1.16333,.584891],[1.21673,.50134],[1.27762,.421271],[1.33757,.358608],[1.39752,.306389],[1.46966,.25417],[1.54366,.205433],[2,0]]},{N172:14,data:[[0,2.77461],[.693066,2.77461],[.763325,2.77113],[.797049,2.73283],[.815784,2.68061],[.831709,2.57966],[.867307,2.26634],[.88979,2.01221],[.915083,1.74763],[.936629,1.54224],[.960985,1.34729],[.991898,1.12797],[1.01532,.978274],[1.04248,.852949],[1.0734,.731104],[1.10712,.623185],[1.14834,.539634],[1.18206,.480453],[1.22797,.414309],[1.28417,.36209],[1.34975,.299427],[1.4275,.240245],[1.51368,.184545],[2,0]]},{N172:20,data:[[0,2.17235],[.511332,2.17235],[.605009,2.16539],[.660279,2.13406],[.69213,2.1062],[.722107,2.0505],[.751147,1.95999],[.794238,1.75808],[.825152,1.6049],[.865433,1.40299],[.901968,1.24285],[.939439,1.06182],[.994709,.859911],[1.04717,.689329],[1.09869,.550078],[1.15021,.459565],[1.20267,.386459],[1.25888,.327277],[1.31228,.271577],[1.38441,.22632],[1.46403,.177583],[2,0]]},{N172:25,data:[[0,1.73371],[.396108,1.73371],[.49447,1.71978],[.544119,1.69542],[.579716,1.65712],[.619998,1.58053],[.660279,1.48306],[.703371,1.37862],[.734285,1.28463],[.775503,1.17671],[.816721,1.06182],[.865433,.93998],[.910399,.82858],[.956301,.724142],[1.00595,.602297],[1.0556,.508303],[1.11743,.403865],[1.16989,.337721],[1.22703,.285502],[1.27855,.247208],[1.33663,.208914],[1.4172,.167139],[1.49963,.132326],[2,0]]},{N172:30,data:[[0,1.30203],[.264959,1.30203],[.388614,1.29159],[.476671,1.26026],[.527257,1.20108],[.588147,1.11056],[.647164,1.01657],[.694003,.919093],[.759578,.804211],[.821405,.689329],[.884169,.591853],[.964732,.47349],[1.02469,.386459],[1.09963,.309871],[1.16895,.25417],[1.24764,.19847],[1.32726,.156695],[1.40876,.125364],[1.48558,.100995],[1.55303,.0870696],[1.63453,.0627007],[2,0]]}];e=ce(e,(function(t){var r=ce(t.data,(function(t){return t[0]})),n=ce(t.data,(function(t){return t[1]}));return t.vx=r,t.vy=n,t}));var a=ce(e,"N172"),u=ce(e,(function(t){var n=Pu(t.vx,t.vy,r);return ir(n,"err")?n.err:n})),o=Pu(a,u,t);if(ir(o,"err"))if("out of x-range"===o.err){var c=o.data.ps,i=Ra(a),s=xa(a);if(t>i){var f=c[da(c)-1].y;n.push("出現外插情形 N172=".concat(t," > N172Max=").concat(i,"，依照FS=").concat(r,"並給予最小體積應變vstr=").concat(f,"%")),o=f}else if(t<s){var p=Fu(c[0],c[1],t);n.push("出現外插情形 N172=".concat(t," < N172Min=").concat(s,"，依照FS=").concat(r,"並依據最近2點外插體積應變vstr=").concat(p,"%")),o=p}else n.push("非預期外插情形，請洽開發者修復問題"),o=""}else n.push(o.err),o="";return{err:n,vstr:o}}function Eu(t,r,n,e){var a=[],u=0;!function(){if(n<0)return a.push("Volumetric Strain(Tokimatsu And Seed): CSR".concat(Ru(n)," < 0")),void(u="");n>.6&&(a.push("Volumetric Strain(Tokimatsu And Seed): CSR大於0.6超過原研究範疇，強制改為0.6"),n=.6),u=Nu(t,n),da(u.err)>0&&Z(u.err,(function(t){a.push("Volumetric Strain(Tokimatsu And Seed): ".concat(t))})),u=u.vstr}();var o=0;return function(){if(e<0)return a.push("Volumetric Strain(Ishihara And Yoshimine): FS".concat(Ru(e)," < 0")),void(o="");e>=2&&(e=2),o=Lu(r,e),da(o.err)>0&&Z(o.err,(function(t){a.push("Volumetric Strain(Ishihara And Yoshimine): ".concat(t))})),o=o.vstr}(),{err:a,vstrTS:u,vstrIY:o}}function Gu(t){var r,n=t.ver,e=void 0===n?"2012":n,a=t.waterLevelDesign,u=t.soilClassification,o=t.depth,c=t.N60,i=t.FC,s=t.PI,f=t.sv,p=t.svpUsual,v=t.svpDesign,h=t.PGA,l=t.Mw,d=[],g="",b="",w="",y="",S="",M="",j="",_="",m="",C="",D="";function x(){return{rd:g,ks:b,CN:w,N160:y,N160cs:S,N172:M,CSR:_,CRR:j,FS:m,vstrTS:C,vstrIY:D,err:Dr(d,", ")}}if(!jr(o))return d.push("depth".concat(Ru(o)," 非數字")),x();if((o=_r(o))<0)return d.push("depth".concat(Ru(o)," < 0")),x();if(!jr(c))return d.push("N60".concat(Ru(c)," 非數字")),x();if((c=_r(c))<0)return d.push("N60".concat(Ru(c)," < 0")),x();if(c>=50)return j="-",_="-",m=10,x();if(jr(a)||(d.push("waterLevelDesign".concat(Ru(a)," 非數字，預設為0 (m)")),a=0),(a=_r(a))<0&&(d.push("waterLevelDesign".concat(Ru(a)," < 0，預設為0 (m)")),a=0),Mr(u)||(d.push("soilClassification".concat(Ru(u)," 非有效字串，預設為SW")),u="SW"),u=lu(u),o<a||Ou(u))return j="-",_="-",m=10,x();if(o>20)return j="-",_="-",m=10,x();if("NP"===Qa(lu(s))&&(s=0),jr(s)){if(_r(s)>7)return j="-",_="-",m=10,x()}else d.push("PI".concat(Ru(s)," 非數字與非NP，略過部份非液化條件檢核"));if(!jr(i))return d.push("FC".concat(Ru(i)," 非數字")),x();if((i=_r(i))<0)return d.push("FC".concat(Ru(i)," < 0")),x();if(!jr(p))return d.push("svpUsual".concat(Ru(p)," 非數字")),x();if((p=_r(p))<0)return d.push("svpUsual".concat(Ru(p)," < 0")),x();if(!jr(v))return d.push("svpDesign".concat(Ru(v)," 非數字")),x();if((v=_r(v))<0)return d.push("svpDesign".concat(Ru(v)," < 0")),x();if(!jr(f))return d.push("sv".concat(Ru(f)," 非數字")),x();if((f=_r(f))<0)return d.push("sv".concat(Ru(f)," < 0")),x();if(!jr(h))return d.push("PGA".concat(Ru(h)," 非數字")),x();if((h=_r(h))<0)return d.push("PGA".concat(Ru(h)," < 0")),x();if(!jr(l))return d.push("Mw".concat(Ru(l)," 非數字")),x();if((l=_r(l))<0)return d.push("Mw".concat(Ru(l)," < 0")),x();var A=null;"2012"===e?A=-3.3:"2017"===e?A=-1.8:(console.log("invalid ver",e),d.push("invalid ver=".concat(e))),r=Math.pow(l/7.5,A),g=o<=10?1-.01*o:1.2-.03*o,b=i<=10?1:1+.07*Math.sqrt(i-10);if(w=Math.min(Math.sqrt(101.39616/p),1.7),(S=b*(y=w*c))>=39)return j="-",_="-",m=10,x();j=(.08+.0035*S/(1-S/39))*r,(_=f/v*.65*h*g)>0&&(m=j/_),m>10&&(m=10),j<0&&d.push("CRR".concat(Ru(j)," < 0")),_<=0&&d.push("CSR".concat(Ru(_)," <= 0")),m<0&&(d.push("FS".concat(Ru(m)," < 0，強制改為0")),m=0);var R=Eu(y,M=y/1.2,_,m);return d=[].concat(ma(d),ma(R.err)),C=R.vstrTS,D=R.vstrIY,x()}function Tu(t){var r=t.ver,n=void 0===r?"1996":r,e=t.waterLevelDesign,a=t.soilClassification,u=t.vibrationType,o=t.depth,c=t.N60,i=t.FC,s=t.PI,f=t.D50,p=t.D10,v=t.sv,h=t.svpUsual,l=t.svpDesign,d=t.PGA,g=[],b="",w="",y="",S="",M="",j="",_="",m="",C="",D="",x="",A="",R="",O="",P="";function F(){return{rd:b,N160:D,N172:w,c1:y,c2:S,cFC:M,Na:j,RL:_,cw:m,CN:C,CSR:A,CRR:x,FS:R,vstrTS:O,vstrIY:P,err:Dr(g,", ")}}if(!jr(o))return g.push("depth".concat(Ru(o)," 非數字")),F();if((o=_r(o))<0)return g.push("depth".concat(Ru(o)," < 0")),F();if(!jr(c))return g.push("N60".concat(Ru(c)," 非數字")),F();if((c=_r(c))<0)return g.push("N60".concat(Ru(c)," < 0")),F();if(c>=50)return x="-",A="-",R=10,F();if(jr(e)||(g.push("waterLevelDesign".concat(Ru(e)," 非數字，預設為0 (m)")),e=0),(e=_r(e))<0&&(g.push("waterLevelDesign".concat(Ru(e)," < 0，預設為0 (m)")),e=0),!jr(i))return g.push("FC".concat(Ru(i)," 非數字")),F();if((i=_r(i))<0)return g.push("FC".concat(Ru(i)," < 0")),F();if(jr(f)||g.push("D50".concat(Ru(f)," 非數字，略過部份非液化條件檢核")),jr(p)||g.push("D10".concat(Ru(p)," 非數字，略過部份非液化條件檢核")),o<e||e>10)return x="-",A="-",R=10,F();if(i<=35);else if("NP"===Qa(lu(s))&&(s=0),jr(s)){if(!(_r(s)<15))return x="-",A="-",R=10,F()}else g.push("PI".concat(Ru(s)," 非數字與非NP，略過部份非液化條件檢核"));if(jr(f)&&jr(p)){if(_r(f)>10)return x="-",A="-",R=10,F();if(_r(p)>1)return x="-",A="-",R=10,F()}if(Mr(a)||(g.push("soilClassification".concat(Ru(a)," 非有效字串，預設為SW")),a="SW"),Ou(a=lu(a)))return x="-",A="-",R=10,F();if(o>20)return x="-",A="-",R=10,F();if(jr(u)||g.push("vibrationType".concat(Ru(u)," 非數字")),1!==(u=su(u))&&2!==u&&(g.push("vibrationType".concat(Ru(u)," 不等於 1 或 2，更改為預設值1")),u=1),!jr(h))return g.push("svpUsual".concat(Ru(h)," 非數字")),F();if((h=_r(h))<0)return g.push("svpUsual".concat(Ru(h)," < 0")),F();if(!jr(l))return g.push("svpDesign".concat(Ru(l)," 非數字")),F();if((l=_r(l))<0)return g.push("svpDesign".concat(Ru(l)," < 0")),F();if(!jr(v))return g.push("sv".concat(Ru(v)," 非數字")),F();if((v=_r(v))<0)return g.push("sv".concat(Ru(v)," < 0")),F();if(!jr(d))return g.push("PGA".concat(Ru(d)," 非數字")),F();if((d=_r(d))<0)return g.push("PGA".concat(Ru(d)," < 0")),F();b=1-.015*o,w=(C=170/(h+70))*(c/1.2);var N,L;N=0,L="",jr(f)?L=_r(f)<2?"sand":"gravel":function(t){var r=vu(t,1),n=vu(t,2);return"S"===r||"ML"===n||"MH"===n}(a)?L="sand":function(t){return"G"===vu(t,1)}(a)&&(L="gravel"),"sand"===L?"1996"===n?N=(y=i<10?1:i<60?(i+40)/50:i/20-1)*w+(S=i<10?0:(i-10)/18):"2017"===n?N=(M=i<10?1:i<40?(i+20)/30:(i-16)/12)*(w+2.47)-2.47:(console.log("invalid ver",n),g.push("invalid ver=".concat(n)),N=0):"gravel"===L?jr(f)?(f=_r(f),N=(1-.361*Math.log10(f/2))*w):(g.push("因D50".concat(Ru(f),"未給予或非數字，故改使用土壤分類來區分砂或礫質土，卻又分為礫質土仍需要用D50，故強制設定Na為0")),N=0):(g.push("因無D50故使用土壤分類".concat(Ru(a),"來計算Na，因不是砂或礫質土，故強制設定Na為0")),N=0),(j=N)<14?"1996"===n?_=.0882*Math.sqrt(j/1.7):"2017"===n?_=.0882*Math.sqrt((.85*j+2.1)/1.7):(console.log("invalid ver",n),g.push("invalid ver=".concat(n))):_=.0882*Math.sqrt(j/1.7)+16e-7*Math.pow(j-14,4.5),x=(m=2===u?_<=.1?1:_<=.4?3.3*_+.67:2:1)*_,(A=b*d*v/l)>0&&(R=x/A),R>10&&(R=10),x<0&&g.push("CRR".concat(Ru(x)," < 0")),A<=0&&g.push("CSR".concat(Ru(A)," <= 0")),R<0&&(g.push("FS".concat(Ru(R)," < 0，強制改為0")),R=0);var E=Eu(D=w/(60/72),w,A,R);return g=[].concat(ma(g),ma(E.err)),O=E.vstrTS,P=E.vstrIY,F()}var qu={SPT:{sptSeed:function(t){var r,n=t.waterLevelDesign,e=t.soilClassification,a=t.depth,u=t.N60,o=t.FC,c=t.sv,i=t.svpUsual,s=t.svpDesign,f=t.PGA,p=t.Mw,v=[],h="",l="",d="",g="",b="",w="",y="",S="",M="";function j(){return{rd:h,CN:l,N160:d,N172:g,CSR:w,CRR:b,FS:y,vstrTS:S,vstrIY:M,err:Dr(v,", ")}}if(!jr(a))return v.push("depth".concat(Ru(a)," 非數字")),j();if((a=_r(a))<0)return v.push("depth".concat(Ru(a)," < 0")),j();if(!jr(u))return v.push("N60".concat(Ru(u)," 非數字")),j();if((u=_r(u))<0)return v.push("N60".concat(Ru(u)," < 0")),j();if(u>=50)return b="-",w="-",y=10,j();if(jr(n)||(v.push("waterLevelDesign".concat(Ru(n)," 非數字，預設為0 (m)")),n=0),(n=_r(n))<0&&(v.push("waterLevelDesign".concat(Ru(n)," < 0，預設為0 (m)")),n=0),Mr(e)||(v.push("soilClassification".concat(Ru(e)," 非有效字串，預設為SW")),e="SW"),e=lu(e),a<n||Ou(e))return b="-",w="-",y=10,j();if(a>20)return b="-",w="-",y=10,j();if(!jr(o))return v.push("FC".concat(Ru(o)," 非數字")),j();if((o=_r(o))<0)return v.push("FC".concat(Ru(o)," < 0")),j();if(!jr(i))return v.push("svpUsual".concat(Ru(i)," 非數字")),j();if((i=_r(i))<0)return v.push("svpUsual".concat(Ru(i)," < 0")),j();if(!jr(s))return v.push("svpDesign".concat(Ru(s)," 非數字")),j();if((s=_r(s))<0)return v.push("svpDesign".concat(Ru(s)," < 0")),j();if(!jr(c))return v.push("sv".concat(Ru(c)," 非數字")),j();if((c=_r(c))<0)return v.push("sv".concat(Ru(c)," < 0")),j();if(!jr(f))return v.push("PGA".concat(Ru(f)," 非數字")),j();if((f=_r(f))<0)return v.push("PGA".concat(Ru(f)," < 0")),j();if(!jr(p))return v.push("Mw".concat(Ru(p)," 非數字")),j();if((p=_r(p))<0)return v.push("Mw".concat(Ru(p)," < 0")),j();r=Math.pow(p/7.5,-1.11),h=(1-.4113*Math.pow(a,.5)+.04052*a+.001753*Math.pow(a,1.5))/(1-.4177*Math.pow(a,.5)+.05729*a-.006205*Math.pow(a,1.5)+.00121*Math.pow(a,2)),l=Math.min(Math.sqrt(101.39616/i),1.7),d=l*u;var _=[{FC:5,data:[[0,.0496622],[2.65306,.0547297],[4.38776,.0628378],[6.02041,.0719595],[7.55102,.0831081],[8.97959,.100338],[10.5102,.114527],[12.2449,.131757],[13.5714,.146959],[14.7959,.161149],[16.1224,.177365],[17.7551,.193581],[19.1837,.211824],[20.7143,.232095],[22.0408,.248311],[23.2653,.265541],[24.5918,.285811],[25.6122,.307095],[26.4286,.327365],[27.2449,.347635],[27.9592,.372973],[28.3673,.398311],[28.7755,.423649],[28.9796,.444932],[29.2857,.473311],[29.3,.6],[100,100]]},{FC:15,data:[[0,.065],[1.63265,.068],[2.85714,.074],[3.87755,.082],[5.10204,.0932432],[6.22449,.110473],[7.44898,.123649],[8.57143,.136824],[9.69388,.151014],[10.9184,.164189],[11.9388,.178378],[13.0612,.192568],[13.8776,.203716],[14.6939,.214865],[16.1224,.232095],[17.551,.251351],[18.5714,.270608],[19.898,.288851],[20.7143,.308108],[21.4286,.327365],[22.0408,.347635],[22.449,.370946],[22.8571,.393243],[23.2653,.417568],[23.6735,.439865],[23.9796,.460135],[24.05,.483446],[24.0816,.515878],[24.1,.6],[100,101]]},{FC:35,data:[[0,.075],[1.32653,.082],[2.44898,.09],[3.26531,.0962838],[4.79592,.116554],[6.22449,.134797],[7.34694,.152027],[8.87755,.171284],[10.102,.185473],[11.4286,.20777],[13.2653,.228041],[14.5918,.247297],[15.7143,.267568],[16.7347,.287838],[17.7551,.313176],[18.6735,.343581],[19.1837,.364865],[19.6939,.382095],[20.102,.410473],[20.4082,.433784],[20.5102,.464189],[20.7143,.490541],[20.9184,.519932],[20.92,.6],[100,102]]}],m=ce(_,"FC");_=ce(_,(function(t){var r=ce(t.data,(function(t){return t[0]})),n=ce(t.data,(function(t){return t[1]}));return t.vx=r,t.vy=n,t}));var C=ce(_,(function(t){var r=Pu(t.vx,t.vy,d);return ir(r,"err")?r.err:r})),D=Pu(m,C,o);if(ir(D,"err")){if("out of x-range"!==D.err)return v.push(D.err),D="",j();var x=D.data.ps,A=Ra(m),R=xa(m);if(o>A)D=Fu(x[da(x)-2],x[da(x)-1],o),v.push("出現外插情形 FC=".concat(o," > FCMax=").concat(A,"，依據最近2點外插CRR75=").concat(D));else{if(!(o<R))return v.push("非預期外插情形，請洽開發者修復問題"),D="",j();D=Fu(x[0],x[1],o),D=Math.max(D,0),v.push("出現外插情形 FC=".concat(o," < FCMin=").concat(R,"，依據最近2點外插CRR75=").concat(D))}}if(!Rr(D))return v.push("CRR75".concat(Ru(D)," 非數字")),j();D>.6&&(v.push("CRR75".concat(Ru(D),"大於0.6超過原研究範疇，強制改為0.6")),D=.6),b=D*r,(w=c/s*.65*f*h)>0&&(y=b/w),y>10&&(y=10),b<0&&v.push("CRR".concat(Ru(b)," < 0")),w<=0&&v.push("CSR".concat(Ru(w)," <= 0")),y<0&&(v.push("FS".concat(Ru(y)," < 0，強制改為0")),y=0);var O=Eu(d,g=d/1.2,w,y);return v=[].concat(ma(v),ma(O.err)),S=O.vstrTS,M=O.vstrIY,j()},sptHBF2012:function(t){return Gu(t=Au(Au({},t),{},{ver:"2012"}))},sptHBF2017:function(t){return Gu(t=Au(Au({},t),{},{ver:"2017"}))},sptNCEER:function(t){var r,n=t.waterLevelDesign,e=t.soilClassification,a=t.depth,u=t.N60,o=t.FC,c=t.sv,i=t.svpUsual,s=t.svpDesign,f=t.PGA,p=t.Mw,v=[],h="",l="",d="",g="",b="",w="",y="",S="",M="",j="",_="",m="";function C(){return{rd:h,alpha:l,beta:d,CN:g,N160:b,N160cs:w,N172:y,CSR:M,CRR:S,FS:j,vstrTS:_,vstrIY:m,err:Dr(v,", ")}}if(!jr(a))return v.push("depth".concat(Ru(a)," 非數字")),C();if((a=_r(a))<0)return v.push("depth".concat(Ru(a)," < 0")),C();if(!jr(u))return v.push("N60".concat(Ru(u)," 非數字")),C();if((u=_r(u))<0)return v.push("N60".concat(Ru(u)," < 0")),C();if(u>=50)return S="-",M="-",j=10,C();if(jr(n)||(v.push("waterLevelDesign".concat(Ru(n)," 非數字，預設為0 (m)")),n=0),(n=_r(n))<0&&(v.push("waterLevelDesign".concat(Ru(n)," < 0，預設為0 (m)")),n=0),Mr(e)||(v.push("soilClassification".concat(Ru(e)," 非有效字串，預設為SW")),e="SW"),e=lu(e),a<n||Ou(e))return S="-",M="-",j=10,C();if(a>20)return S="-",M="-",j=10,C();if(!jr(o))return v.push("FC".concat(Ru(o)," 非數字")),C();if((o=_r(o))<0)return v.push("FC".concat(Ru(o)," < 0")),C();if(!jr(i))return v.push("svpUsual".concat(Ru(i)," 非數字")),C();if((i=_r(i))<0)return v.push("svpUsual".concat(Ru(i)," < 0")),C();if(!jr(s))return v.push("svpDesign".concat(Ru(s)," 非數字")),C();if((s=_r(s))<0)return v.push("svpDesign".concat(Ru(s)," < 0")),C();if(!jr(c))return v.push("sv".concat(Ru(c)," 非數字")),C();if((c=_r(c))<0)return v.push("sv".concat(Ru(c)," < 0")),C();if(!jr(f))return v.push("PGA".concat(Ru(f)," 非數字")),C();if((f=_r(f))<0)return v.push("PGA".concat(Ru(f)," < 0")),C();if(!jr(p))return v.push("Mw".concat(Ru(p)," 非數字")),C();if((p=_r(p))<0)return v.push("Mw".concat(Ru(p)," < 0")),C();if(r=Math.pow(p/7.5,-2.56),h=(1-.4113*Math.pow(a,.5)+.04052*a+.001753*Math.pow(a,1.5))/(1-.4177*Math.pow(a,.5)+.05729*a-.006205*Math.pow(a,1.5)+.00121*Math.pow(a,2)),l=o<=5?0:o<=35?Math.exp(1.76-190/Math.pow(o,2)):5,d=o<=5?1:o<=35?.99+Math.pow(o,1.5)/1e3:1.2,g=Math.min(Math.sqrt(101.39616/i),1.7),(w=l+d*(b=g*u))>=30)return S="-",M="-",j=10,C();var D=(.04844+-.004721*w+6136e-7*Math.pow(w,2)+-1673e-8*Math.pow(w,3))/(1+-.1248*w+.009578*Math.pow(w,2)+-3285e-7*Math.pow(w,3)+3714e-9*Math.pow(w,4));S=D*r,(M=c/s*.65*f*h)>0&&(j=S/M),j>10&&(j=10),S<0&&v.push("CRR".concat(Ru(S)," < 0")),M<=0&&v.push("CSR".concat(Ru(M)," <= 0")),j<0&&(v.push("FS".concat(Ru(j)," < 0，強制改為0")),j=0);var x=Eu(b,y=b/1.2,M,j);return v=[].concat(ma(v),ma(x.err)),_=x.vstrTS,m=x.vstrIY,C()},sptNJRA1996:function(t){return Tu(t=Au(Au({},t),{},{ver:"1996"}))},sptNJRA2017:function(t){return Tu(t=Au(Au({},t),{},{ver:"2017"}))},sptTY:function(t){var r=t.waterLevelDesign,n=t.soilClassification,e=t.depth,a=t.a,u=t.n,o=t.Cr,c=t.Cs,i=t.N60,s=t.FC,f=t.sv,p=t.svpUsual,v=t.svpDesign,h=t.PGA,l=t.Mw,d=[],g="",b="",w="",y="",S="",M="",j="",_="",m="",C="",D="";function x(){return{rd:g,N160:M,N172:b,dNf:w,Na:y,CN:S,CSR:_,CRR:j,FS:m,vstrTS:C,vstrIY:D,err:Dr(d,", ")}}if(!jr(e))return d.push("depth".concat(Ru(e)," 非數字")),x();if((e=_r(e))<0)return d.push("depth".concat(Ru(e)," < 0")),x();if(!jr(i))return d.push("N60".concat(Ru(i)," 非數字")),x();if((i=_r(i))<0)return d.push("N60".concat(Ru(i)," < 0")),x();if(i>=50)return j="-",_="-",m=10,x();if(jr(r)||(d.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(d.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),Mr(n)||(d.push("soilClassification".concat(Ru(n)," 非有效字串，預設為SW")),n="SW"),n=lu(n),e<r||Ou(n))return j="-",_="-",m=10,x();if(e>20)return j="-",_="-",m=10,x();if(!jr(s))return d.push("FC".concat(Ru(s)," 非數字")),x();if((s=_r(s))<0)return d.push("FC".concat(Ru(s)," < 0")),x();if(!jr(p))return d.push("svpUsual".concat(Ru(p)," 非數字")),x();if((p=_r(p))<0)return d.push("svpUsual".concat(Ru(p)," < 0")),x();if(!jr(v))return d.push("svpDesign".concat(Ru(v)," 非數字")),x();if((v=_r(v))<0)return d.push("svpDesign".concat(Ru(v)," < 0")),x();if(!jr(f))return d.push("sv".concat(Ru(f)," 非數字")),x();if((f=_r(f))<0)return d.push("sv".concat(Ru(f)," < 0")),x();if(!jr(h))return d.push("PGA".concat(Ru(h)," 非數字")),x();if((h=_r(h))<0)return d.push("PGA".concat(Ru(h)," < 0")),x();if(!jr(l))return d.push("Mw".concat(Ru(l)," 非數字")),x();if((l=_r(l))<0)return d.push("Mw".concat(Ru(l)," < 0")),x();jr(a)||(a=.45),a=_r(a),jr(u)||(u=14),u=_r(u),jr(o)||(o=.57),o=_r(o),jr(c)||(c=85),c=_r(c),g=1-.015*e,y=(b=(S=170/(p+70))*(i/1.2))+(w=s<=5?0:s<=10?s-5:.1*s+4),j=a*o*(16*Math.sqrt(y)/100+Math.pow(16*Math.sqrt(y)/c,u)),(_=.1*(l-1)*h*(f/v)*g)>0&&(m=j/_),m>10&&(m=10),j<0&&d.push("CRR".concat(Ru(j)," < 0")),_<=0&&d.push("CSR".concat(Ru(_)," <= 0")),m<0&&(d.push("FS".concat(Ru(m)," < 0，強制改為0")),m=0);var A=Eu(M=b/(60/72),b,_,m);return d=[].concat(ma(d),ma(A.err)),C=A.vstrTS,D=A.vstrIY,x()}},CPT:{cptJuang:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.qc,a=t.fs,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:Dr(s,", ")}}if(jr(r)||(s.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(s.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return s.push("depth".concat(Ru(n)," 非數字")),h();if((n=_r(n))<0)return s.push("depth".concat(Ru(n)," < 0")),h();if(!jr(e))return s.push("qc".concat(Ru(e)," 非數字")),h();if((e=_r(e))<0)return s.push("qc".concat(Ru(e)," < 0")),h();if(!jr(a))return s.push("fs".concat(Ru(a)," 非數字")),h();if((a=_r(a))<0)return s.push("fs".concat(Ru(a)," < 0")),h();if(!jr(u))return s.push("svpDesign".concat(Ru(u)," 非數字")),h();if((u=_r(u))<0)return s.push("svpDesign".concat(Ru(u)," < 0")),h();if(!jr(o))return s.push("sv".concat(Ru(o)," 非數字")),h();if((o=_r(o))<0)return s.push("sv".concat(Ru(o)," < 0")),h();if(!jr(c))return s.push("PGA".concat(Ru(c)," 非數字")),h();if((c=_r(c))<0)return s.push("PGA".concat(Ru(c)," < 0")),h();if(!jr(i))return s.push("Mw".concat(Ru(i)," 非數字")),h();if((i=_r(i))<0)return s.push("Mw".concat(Ru(i)," < 0")),h();var l=Math.pow(i/7.5,-2.56),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),g=a/(e-o)*100;console.log("待確認fs,qc,sv單位皆需為kg/cm2");var b=e/Math.sqrt(u);console.log("待確認qc,svpDesign單位皆需為kg/cm2");var w=Math.sqrt(Math.pow(3.47-Math.log10(b),2)+Math.pow(Math.log10(g)+1.22,2)),y=-.016*Math.pow(u/100,3)+.178*Math.pow(u/100,2)-u/100*.063+.903;console.log("待確認公式內svpDesign單位是否為kg/cm2");var S=b*(2.429*Math.pow(w,4)-16.943*Math.pow(w,3)+44.551*Math.pow(w,2)-51.497*w+22.802),M=y*Math.exp(1.264*Math.pow(S/100,1.25)-2.957);return f=M*l,(p=.65*c*(o/u)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Ru(f)," < 0")),p<=0&&s.push("CSR".concat(Ru(p)," <= 0")),v<0&&(s.push("FS".concat(Ru(v)," < 0，強制改為0")),v=0),h())},cptHBF:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.qc,a=t.fs,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:Dr(s,", ")}}if(jr(r)||(s.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(s.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return s.push("depth".concat(Ru(n)," 非數字")),h();if((n=_r(n))<0)return s.push("depth".concat(Ru(n)," < 0")),h();if(!jr(e))return s.push("qc".concat(Ru(e)," 非數字")),h();if((e=_r(e))<0)return s.push("qc".concat(Ru(e)," < 0")),h();if(!jr(a))return s.push("fs".concat(Ru(a)," 非數字")),h();if((a=_r(a))<0)return s.push("fs".concat(Ru(a)," < 0")),h();if(!jr(u))return s.push("svpDesign".concat(Ru(u)," 非數字")),h();if((u=_r(u))<0)return s.push("svpDesign".concat(Ru(u)," < 0")),h();if(!jr(o))return s.push("sv".concat(Ru(o)," 非數字")),h();if((o=_r(o))<0)return s.push("sv".concat(Ru(o)," < 0")),h();if(!jr(c))return s.push("PGA".concat(Ru(c)," 非數字")),h();if((c=_r(c))<0)return s.push("PGA".concat(Ru(c)," < 0")),h();if(!jr(i))return s.push("Mw".concat(Ru(i)," 非數字")),h();if((i=_r(i))<0)return s.push("Mw".concat(Ru(i)," < 0")),h();var l=Math.pow(i/7.5,-3.3),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),g=1.7/(u+.7)*e;console.log("需確認公式內svpDesign是否為kg/cm2, 否則需要轉kPa, 不過170=>1.7與70=>0.7就代表除r = 98.134256");var b=a/e*100,w=(b<=.1?1:.4*Math.pow(b,2)-.08*b+1.004)*g;return w=Math.min(w,179.5),f=(.09+28e-5*w/(1-w/180))*l,(p=.65*c*(o/u)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Ru(f)," < 0")),p<=0&&s.push("CSR".concat(Ru(p)," <= 0")),v<0&&(s.push("FS".concat(Ru(v)," < 0，強制改為0")),v=0),h())},cptOlsen:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.qc,a=t.fs,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:Dr(s,", ")}}if(jr(r)||(s.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(s.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return s.push("depth".concat(Ru(n)," 非數字")),h();if((n=_r(n))<0)return s.push("depth".concat(Ru(n)," < 0")),h();if(!jr(e))return s.push("qc".concat(Ru(e)," 非數字")),h();if((e=_r(e))<0)return s.push("qc".concat(Ru(e)," < 0")),h();if(!jr(a))return s.push("fs".concat(Ru(a)," 非數字")),h();if((a=_r(a))<0)return s.push("fs".concat(Ru(a)," < 0")),h();if(!jr(u))return s.push("svpDesign".concat(Ru(u)," 非數字")),h();if((u=_r(u))<0)return s.push("svpDesign".concat(Ru(u)," < 0")),h();if(!jr(o))return s.push("sv".concat(Ru(o)," 非數字")),h();if((o=_r(o))<0)return s.push("sv".concat(Ru(o)," < 0")),h();if(!jr(c))return s.push("PGA".concat(Ru(c)," 非數字")),h();if((c=_r(c))<0)return s.push("PGA".concat(Ru(c)," < 0")),h();if(!jr(i))return s.push("Mw".concat(Ru(i)," 非數字")),h();if((i=_r(i))<0)return s.push("Mw".concat(Ru(i)," < 0")),h();var l=Math.pow(i/7.5,-2.56),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),g=a/e*100,b=.00128*(e/Math.pow(u,.7))-.025+.17*g-.028*Math.pow(g,2)+.0016*Math.pow(g,3);return f=b*l,(p=.65*c*(o/u)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Ru(f)," < 0")),p<=0&&s.push("CSR".concat(Ru(p)," <= 0")),v<0&&(s.push("FS".concat(Ru(v)," < 0，強制改為0")),v=0),h())},cptShibata:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.qc,a=t.fs,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=t.D50,f=[],p="",v="",h="";function l(){return{CSR:v,CRR:p,FS:h,err:Dr(f,", ")}}if(jr(r)||(f.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(f.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return f.push("depth".concat(Ru(n)," 非數字")),l();if((n=_r(n))<0)return f.push("depth".concat(Ru(n)," < 0")),l();if(!jr(e))return f.push("qc".concat(Ru(e)," 非數字")),l();if((e=_r(e))<0)return f.push("qc".concat(Ru(e)," < 0")),l();if(!jr(a))return f.push("fs".concat(Ru(a)," 非數字")),l();if((a=_r(a))<0)return f.push("fs".concat(Ru(a)," < 0")),l();if(!jr(u))return f.push("svpDesign".concat(Ru(u)," 非數字")),l();if((u=_r(u))<0)return f.push("svpDesign".concat(Ru(u)," < 0")),l();if(!jr(o))return f.push("sv".concat(Ru(o)," 非數字")),l();if((o=_r(o))<0)return f.push("sv".concat(Ru(o)," < 0")),l();if(!jr(c))return f.push("PGA".concat(Ru(c)," 非數字")),l();if((c=_r(c))<0)return f.push("PGA".concat(Ru(c)," < 0")),l();if(!jr(i))return f.push("Mw".concat(Ru(i)," 非數字")),l();if((i=_r(i))<0)return f.push("Mw".concat(Ru(i)," < 0")),l();if(!jr(s))return f.push("D50".concat(Ru(s)," 非數字")),l();if((s=_r(s))<0)return f.push("D50".concat(Ru(s)," < 0")),l();var d=1.7/(u+.7)*e,g=.1*(i-1)*c*(o/u)*(1-.015*n),b=(s>=.25?1:s/.25)*(50+200*((g-.1)/(g+.1)));return b=Ra(b),p=d,(v=b)>0&&(h=p/v),h>10&&(h=10),n>20?(p="-",v="-",h=10,l()):(p<0&&f.push("CRR".concat(Ru(p)," < 0")),v<=0&&f.push("CSR".concat(Ru(v)," <= 0")),h<0&&(f.push("FS".concat(Ru(h)," < 0，強制改為0")),h=0),l())},cptNCEER:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.qc,a=t.fs,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:Dr(s,", ")}}if(jr(r)||(s.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(s.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return s.push("depth".concat(Ru(n)," 非數字")),h();if((n=_r(n))<0)return s.push("depth".concat(Ru(n)," < 0")),h();if(!jr(e))return s.push("qc".concat(Ru(e)," 非數字")),h();if((e=_r(e))<0)return s.push("qc".concat(Ru(e)," < 0")),h();if(!jr(a))return s.push("fs".concat(Ru(a)," 非數字")),h();if((a=_r(a))<0)return s.push("fs".concat(Ru(a)," < 0")),h();if(!jr(u))return s.push("svpDesign".concat(Ru(u)," 非數字")),h();if((u=_r(u))<0)return s.push("svpDesign".concat(Ru(u)," < 0")),h();if(!jr(o))return s.push("sv".concat(Ru(o)," 非數字")),h();if((o=_r(o))<0)return s.push("sv".concat(Ru(o)," < 0")),h();if(!jr(c))return s.push("PGA".concat(Ru(c)," 非數字")),h();if((c=_r(c))<0)return s.push("PGA".concat(Ru(c)," < 0")),h();if(!jr(i))return s.push("Mw".concat(Ru(i)," 非數字")),h();if((i=_r(i))<0)return s.push("Mw".concat(Ru(i)," < 0")),h();var l=Math.pow(i/7.5,-2.56),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),g=(e-o)/u;console.log("待確認qc,sv,svpDesign單位皆需為kg/cm2");var b,w=a/(e-o)*100;console.log("待確認fs,qc,sv單位皆需為kg/cm2");var y,S,M=Math.sqrt(Math.pow(3.47-Math.log10(g),2)+Math.pow(Math.log10(w)+1.22,2));if(M<=2.6){var j=100;j=1e3*j/9.81/1e4;var _=.1;b=e/(_=1e6*_/9.81/1e4)*Math.pow(j/u,.5),console.log("待確認qc,Pa,Pa2,svpDesign的單位");var m=Math.sqrt(Math.pow(3.47-Math.log10(b),2)+Math.pow(Math.log10(w)+1.22,2));m<=2.6?y=m:(b=e/_*Math.pow(j/u,.75),console.log("待確認qc,Pa,Pa2,svpDesign的單位"),y=Math.sqrt(Math.pow(3.47-Math.log10(b),2)+Math.pow(Math.log10(w)+1.22,2)))}else b=g,y=M;y<=1.64?S=1:(S=-.403*Math.pow(y,4)+5.581*Math.pow(y,3)-21.63*Math.pow(y,2)+33.75*y-17.88,y<2.36&&w<.5&&(S=1));var C,D=S*b;return C=(D=Math.min(D,160))<50?D/1e3*.833+.05:93*Math.pow(D/1e3,3)+.08,f=C*l,(p=.65*c*(o/u)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Ru(f)," < 0")),p<=0&&s.push("CSR".concat(Ru(p)," <= 0")),v<0&&(s.push("FS".concat(Ru(v)," < 0，強制改為0")),v=0),h())}},VS:{vsHBF:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.Vs,a=t.FC,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:Dr(s,", ")}}if(jr(r)||(s.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(s.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return s.push("depth".concat(Ru(n)," 非數字")),h();if((n=_r(n))<0)return s.push("depth".concat(Ru(n)," < 0")),h();if(!jr(e))return s.push("Vs".concat(Ru(e)," 非數字")),h();if((e=_r(e))<0)return s.push("Vs".concat(Ru(e)," < 0")),h();if(!jr(a))return s.push("FC".concat(Ru(a)," 非數字")),h();if((a=_r(a))<0)return s.push("FC".concat(Ru(a)," < 0")),h();if(!jr(u))return s.push("svpDesign".concat(Ru(u)," 非數字")),h();if((u=_r(u))<0)return s.push("svpDesign".concat(Ru(u)," < 0")),h();if(!jr(o))return s.push("sv".concat(Ru(o)," 非數字")),h();if((o=_r(o))<0)return s.push("sv".concat(Ru(o)," < 0")),h();if(!jr(c))return s.push("PGA".concat(Ru(c)," 非數字")),h();if((c=_r(c))<0)return s.push("PGA".concat(Ru(c)," < 0")),h();if(!jr(i))return s.push("Mw".concat(Ru(i)," 非數字")),h();if((i=_r(i))<0)return s.push("Mw".concat(Ru(i)," < 0")),h();var l=Math.pow(i/7.5,-3.3),d=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),g=1/Math.sqrt(u)*e;console.log("待確認此處svpDesign,Vs的單位");var b=(a<=10?1:29e-5*Math.pow(a,2)-.00355*a+1.00651)*(g-100);return b=Math.min(b,134.5),f=(g<=100?.09:.09+22e-5*b/(1-b/135))*l,(p=.65*c*(o/u)*d)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Ru(f)," < 0")),p<=0&&s.push("CSR".concat(Ru(p)," <= 0")),v<0&&(s.push("FS".concat(Ru(v)," < 0，強制改為0")),v=0),h())},vsAndrus:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.Vs,a=t.FC,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:Dr(s,", ")}}if(jr(r)||(s.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(s.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return s.push("depth".concat(Ru(n)," 非數字")),h();if((n=_r(n))<0)return s.push("depth".concat(Ru(n)," < 0")),h();if(!jr(e))return s.push("Vs".concat(Ru(e)," 非數字")),h();if((e=_r(e))<0)return s.push("Vs".concat(Ru(e)," < 0")),h();if(!jr(a))return s.push("FC".concat(Ru(a)," 非數字")),h();if((a=_r(a))<0)return s.push("FC".concat(Ru(a)," < 0")),h();if(!jr(u))return s.push("svpDesign".concat(Ru(u)," 非數字")),h();if((u=_r(u))<0)return s.push("svpDesign".concat(Ru(u)," < 0")),h();if(!jr(o))return s.push("sv".concat(Ru(o)," 非數字")),h();if((o=_r(o))<0)return s.push("sv".concat(Ru(o)," < 0")),h();if(!jr(c))return s.push("PGA".concat(Ru(c)," 非數字")),h();if((c=_r(c))<0)return s.push("PGA".concat(Ru(c)," < 0")),h();if(!jr(i))return s.push("Mw".concat(Ru(i)," 非數字")),h();if((i=_r(i))<0)return s.push("Mw".concat(Ru(i)," < 0")),h();var l,d=Math.pow(i/7.5,-3.3),g=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),b=1/Math.sqrt(u)*e;console.log("待確認此處svpDesign,Vs的單位"),l=a<=5?215:a<=35?215-.5*(a-5):200;var w=.022*Math.pow(b/100,2)+2.8*(1/(l-b)-1/l);return w=Ra(w),f=w*d,(p=.65*c*(o/u)*g)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Ru(f)," < 0")),p<=0&&s.push("CSR".concat(Ru(p)," <= 0")),v<0&&(s.push("FS".concat(Ru(v)," < 0，強制改為0")),v=0),h())},vsNCEER:function(t){var r=t.waterLevelDesign,n=t.depth,e=t.Vs,a=t.FC,u=t.svpDesign,o=t.sv,c=t.PGA,i=t.Mw,s=[],f="",p="",v="";function h(){return{CSR:p,CRR:f,FS:v,err:Dr(s,", ")}}if(jr(r)||(s.push("waterLevelDesign".concat(Ru(r)," 非數字，預設為0 (m)")),r=0),(r=_r(r))<0&&(s.push("waterLevelDesign".concat(Ru(r)," < 0，預設為0 (m)")),r=0),!jr(n))return s.push("depth".concat(Ru(n)," 非數字")),h();if((n=_r(n))<0)return s.push("depth".concat(Ru(n)," < 0")),h();if(!jr(e))return s.push("Vs".concat(Ru(e)," 非數字")),h();if((e=_r(e))<0)return s.push("Vs".concat(Ru(e)," < 0")),h();if(!jr(a))return s.push("FC".concat(Ru(a)," 非數字")),h();if((a=_r(a))<0)return s.push("FC".concat(Ru(a)," < 0")),h();if(!jr(u))return s.push("svpDesign".concat(Ru(u)," 非數字")),h();if((u=_r(u))<0)return s.push("svpDesign".concat(Ru(u)," < 0")),h();if(!jr(o))return s.push("sv".concat(Ru(o)," 非數字")),h();if((o=_r(o))<0)return s.push("sv".concat(Ru(o)," < 0")),h();if(!jr(c))return s.push("PGA".concat(Ru(c)," 非數字")),h();if((c=_r(c))<0)return s.push("PGA".concat(Ru(c)," < 0")),h();if(!jr(i))return s.push("Mw".concat(Ru(i)," 非數字")),h();if((i=_r(i))<0)return s.push("Mw".concat(Ru(i)," < 0")),h();var l,d=Math.pow(i/7.5,-3.3),g=(1-.4113*Math.pow(n,.5)+.04052*n+.001753*Math.pow(n,1.5))/(1-.4177*Math.pow(n,.5)+.05729*n-.006205*Math.pow(n,1.5)+.00121*Math.pow(n,2)),b=1/Math.sqrt(u)*e;console.log("待確認此處svpDesign的單位"),l=a<=5?220:a<=35?210:200;var w=.03*Math.pow(b/100,2)+.9*(1/(l-b)-1/l);return w=Ra(w),f=w*d,(p=.65*c*(o/u)*g)>0&&(v=f/p),v>10&&(v=10),n>20?(f="-",p="-",v=10,h()):(f<0&&s.push("CRR".concat(Ru(f)," < 0")),p<=0&&s.push("CSR".concat(Ru(p)," <= 0")),v<0&&(s.push("FS".concat(Ru(v)," < 0，強制改為0")),v=0),h())}}};var ku={mLiques:qu,mSettls:{SPT:{sptVolumetricStrainTokimatsuAndSeed:Nu,sptVolumetricStrainIshiharaAndYoshimine:Lu}},calc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",r=arguments.length>1?arguments[1]:void 0;function n(t){var r=ir(t,0,[]);return J(r)}function e(t){if("spt"===vu(t,3))return"SPT";if("cpt"===vu(t,3))return"CPT";if("vs"===vu(t,2))return"VS";throw new Error("無法判斷分析種類: ".concat(t))}function a(t){var r=n(t),a="";return Z(r,(function(t){if(t.indexOf("-FS")>=0)return a=e(t),!1})),a}function u(t,r,n){return r=_r(r),n=_r(n),t=ce(t,(function(t,e){var a=ir(t,"err","");t.waterLevelUsual=r,t.waterLevelDesign=n;var u=ir(t,"depthStart",null),o=ir(t,"depthEnd",null);if(jr(u)&&jr(o)){var c=((u=_r(u))+(o=_r(o)))/2;t.depth=c}else t.depth="";var i=ir(t,"e",null),s=ir(t,"GS",null),f=Wr(ir(t,"rd",null),ir(t,"rsat",null),s,i);return ir(f,"err")&&(""===a?a=f.err:a.indexOf(f.err)<0&&(a+=", ".concat(f.err)),t.err=a),Rr(f.rd)?t.rd=f.rd:t.rd="",Rr(f.rsat)?t.rsat=f.rsat:t.rsat="",Rr(f.GS)?t.GS=f.GS:t.GS="",Rr(f.e)?t.e=f.e:t.e="",t}))}function o(t,r,n,e){return e=u(e,r=_r(r),n=_r(n)),"SPT"===t?e=Ma(e,{waterLevelUsual:r,waterLevelDesign:n}):"CPT"===t?console.log("尚未建構CPT自動計算參數"):"VS"===t&&console.log("尚未建構VS自動計算參數"),e}function c(t,r){return r=Ke(r),Z(qu[t],(function(t,n){var e=t(r);Z(e,(function(t,e){r["".concat(n,"-").concat(e)]=t}))})),r}function i(t){var r=n(t=Ke(t));return Z(r,(function(r){if(r.indexOf("-FS")>=0){var n=r.replace("-FS",""),e=0;t=ce(t,(function(t,a){if(jr(t.depthStart)&&jr(t.depthEnd)&&jr(t.depth)&&jr(t[r])){var u=_r(t.depthStart),o=_r(t.depthEnd),c=_r(t.depth),i=_r(t[r]),s=1-Math.min(Math.max(i,0),1);e+=s*(10-.5*c)*(o-u)}return t["".concat(n,"-PL")]=e,t}))}})),t}function s(t){var r=n(t=Ke(t));return Z(r,(function(r){if(r.indexOf("-vstr")>=0){var n=au(r,"-vstr"),e=ir(n,0,""),a=ir(n,1,""),u=0;t=ce(t,(function(t,n){if(jr(t.depthStart)&&jr(t.depthEnd)&&jr(t[r])){var o=_r(t.depthStart),c=_r(t.depthEnd),i=_r(t[r])/100;u+=i*(c-o)}return t["".concat(e,"-stl").concat(a)]=u,t}))}})),t}if(!Mr(t))throw new Error("kind(分析種類)非字串");if("SPT"!==t&&"CPT"!==t&&"VS"!==t&&"auto"!==t)throw new Error("kind(分析種類)".concat(Ru(t),"非有效值: SPT, CPT, VS, auto"));if(0===da(r))throw new Error("無有效數據");var f=mr(r);if(da(f)>0)throw new Error(Dr(f,", "));r=Ke(r);var p=ir(r,"0.waterLevelUsual",0),v=ir(r,"0.waterLevelDesign",0);return"auto"===t&&(t=a(r)),r=o(t,p,v,r),r=s(r=i(r=ce(r,(function(r,n){return c(t,r)})))),r=ce(r,(function(r){var n={},e=Za(t),a=da(e);return Z(r,(function(t,r){vu(r,a)!==e&&(n[r]=t)})),Z(qu[t],(function(t,e){var a=da(e),u="",o="";Z(r,(function(t,r){vu(r,a)===e&&("-err"===hu(r,4)?(u=r,o=t):n[r]=t)})),""!==u&&(n[u]=o)})),n}))}};return{cnst:t,checkDepthStartEnd:mr,relaPorousParams:Wr,calcVerticalStress:Ma,calcLiquefaction:ku}}));
//# sourceMappingURL=w-geo.umd.js.map
